---
title: StabyCmp_MDD
linkTitle: StabyCmp_MDD
weight: 4
---

<p><strong>Module Design Document</strong></p>
<p><strong>For</strong></p>
<p><strong>StabyCmp</strong></p>
<p><strong>Jan 27, 2017</strong></p>
<p><strong>Prepared By:</strong></p>
<p><strong>Shruthi Raghavan,</strong></p>
<p><strong>Nexteer Automotive,</strong></p>
<p><strong>Saginaw, MI, USA<br />
<u>Change History</u></strong></p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 28%" />
<col style="width: 18%" />
<col style="width: 19%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Description</strong></td>
<td><strong>Author</strong></td>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
</tr>
<tr class="even">
<td>Initial Version</td>
<td>Sankardu Varadapureddi</td>
<td>1.0</td>
<td>21-July-2015</td>
</tr>
<tr class="odd">
<td>Updated for FDD version 1.1.0</td>
<td>Sankardu Varadapureddi</td>
<td>2.0</td>
<td>11-Mar-2016</td>
</tr>
<tr class="even">
<td>Updated to FDD version 1.3.0</td>
<td>Shruthi Raghavan</td>
<td>3.0</td>
<td>27-Jan-2017</td>
</tr>
</tbody>
</table>
<p><strong><br />
</strong></p>
<p><strong><u>Table of Contents</u></strong></p>
<p><a href="#introduction">1 Introduction <span>4</span></a></p>
<p><a href="#purpose">1.1 Purpose <span>4</span></a></p>
<p><a href="#section">1.2 Scope <span>4</span></a></p>
<p><a href="#stabycmp-high-level-description">2 StabyCmp High-Level Description <span>5</span></a></p>
<p><a href="#design-details-of-software-module">3 Design details of software module <span>6</span></a></p>
<p><a href="#_Toc425411990">3.1 Graphical representation of ‘StabyCmp’ <span>6</span></a></p>
<p><a href="#data-flow-diagram">3.2 Data Flow Diagram <span>6</span></a></p>
<p><a href="#component-level-dfd">3.2.1 Component level DFD <span>6</span></a></p>
<p><a href="#function-level-dfd">3.2.2 Function level DFD <span>6</span></a></p>
<p><a href="#constant-data-dictionary">4 Constant Data Dictionary <span>7</span></a></p>
<p><a href="#program-fixed-constants">4.1 Program (fixed) Constants <span>7</span></a></p>
<p><a href="#embedded-constants">4.1.1 Embedded Constants <span>7</span></a></p>
<p><a href="#software-component-implementation">5 Software Component Implementation <span>8</span></a></p>
<p><a href="#sub-module-functions">5.1.1 Sub-Module Functions <span>8</span></a></p>
<p><a href="#interrupt-service-routines">5.1.2 Interrupt Service Routines <span>8</span></a></p>
<p><a href="#server-runnable-functions">5.1.3 Server Runnable Functions <span>8</span></a></p>
<p><a href="#module-internal-local-functions">5.1.4 Module Internal (Local) Functions <span>8</span></a></p>
<p><a href="#local-function-1">5.2 Local Function #1 <span>8</span></a></p>
<p><a href="#description">5.3 Description <span>8</span></a></p>
<p><a href="#local-function-2">5.4 Local Function #2 <span>9</span></a></p>
<p><a href="#description-1">5.5 Description <span>9</span></a></p>
<p><a href="#transition-functions">5.5.1 Transition Functions <span>9</span></a></p>
<p><a href="#known-limitations-with-design">6 Known Limitations with Design <span>10</span></a></p>
<p><a href="#unit-test-consideration">7 UNIT TEST CONSIDERATION <span>11</span></a></p>
<p><a href="#abbreviations-and-acronyms">Appendix A Abbreviations and Acronyms <span>12</span></a></p>
<p><a href="#glossary">Appendix B Glossary <span>13</span></a></p>
<p><a href="#references">Appendix C References <span>14</span></a></p>
<h1 id="introduction">Introduction</h1>
<h2 id="purpose">Purpose</h2>
<h2 id="section"></h2>
<p>Module design document for Stability Compensation. </p>
<h1 id="stabycmp-high-level-description">StabyCmp High-Level Description</h1>
<p><em>Refer FDD</em></p>
<h1 id="design-details-of-software-module">Design details of software module</h1>
<h2 id="graphical-representation-of-stabycmp">Graphical representation of ‘StabyCmp’</h2>
<p><img src="ElectricPowerSteering_RH850_GM_T1XX_website/static/media/image1.png" style="width:3.94167in;height:5.25in" /></p>
<h2 id="data-flow-diagram">Data Flow Diagram</h2>
<h3 id="section-1"></h3>
<h3 id="component-level-dfd">Component level DFD</h3>
<blockquote>
<p>Refer FDD</p>
</blockquote>
<h3 id="function-level-dfd">Function level DFD</h3>
<blockquote>
<p>Refer FDD</p>
</blockquote>
<h1 id="constant-data-dictionary">Constant Data Dictionary</h1>
<h2 id="program-fixed-constants">Program (fixed) Constants</h2>
<h3 id="embedded-constants">Embedded Constants</h3>
<blockquote>
<p>Refer .m file</p>
<p><em><strong>Local Constants</strong></em> </p>
<p>None</p>
</blockquote>
<h1 id="software-component-implementation">Software Component Implementation</h1>
<h3 id="sub-module-functions">Sub-Module Functions</h3>
<h5 id="initialization-sub-module-stabycmpinit1">Initialization sub-module {StabyCmpInit1}</h5>
<h5 id="section-2"></h5>
<p><strong>Design Rational:</strong></p>
<blockquote>
<p>FDD details are not complete for notch filter initialization. Upon discussion with FDD owner, implemented in line with EA3 implementation.</p>
</blockquote>
<h5 id="periodic-sub-module-stabycmpper1"> Periodic sub-module {StabyCmpPer1}</h5>
<p>Refer FDD for details</p>
<blockquote>
<p><strong>Design Rational:</strong> </p>
<p>In design version 1.3.0, .m file has some additional PIMs for notch filters, which are not required in the notch filter implementation. Notch filter implementation in SW based on design 1.0.0 .m file PIMs is not changed.</p>
<p>New FDD model was requested but this wasn’t done on time and due to time crunch the difference between implementation and the model still exists.</p>
</blockquote>
<h3 id="interrupt-service-routines">Interrupt Service Routines</h3>
<p>None</p>
<h3 id="server-runnable-functions">Server Runnable Functions</h3>
<p>None</p>
<h3 id="module-internal-local-functions">Module Internal (Local) Functions</h3>
<h5 id="local-function-1">Local Function #1</h5>
<table>
<colgroup>
<col style="width: 24%" />
<col style="width: 30%" />
<col style="width: 23%" />
<col style="width: 8%" />
<col style="width: 12%" />
<col style="width: 0%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>FilNotchInit</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
<td></td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Inp</td>
<td>float32</td>
<td colspan="3" rowspan="4">See unit test consideration</td>
</tr>
<tr class="odd">
<td></td>
<td>FilNotchStRecPtr</td>
<td>FilNotchStRec1</td>
</tr>
<tr class="even">
<td></td>
<td>FilNotchGainRecPtr</td>
<td>FilNotchGainRec1</td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>None</td>
<td></td>
</tr>
</tbody>
</table>
<h6 class="unnumbered" id="description">Description</h6>
<p>Notch filter initialization function implemented based on EA3 design.</p>
<h5 id="local-function-2">Local Function #2</h5>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 26%" />
<col style="width: 19%" />
<col style="width: 17%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>FilNotchFullUpdOutp_f32</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Inp</td>
<td>float32</td>
<td colspan="2" rowspan="4">See unit test consideration</td>
</tr>
<tr class="odd">
<td></td>
<td>FilNotchStRecPtr</td>
<td>FilNotchStRec1</td>
</tr>
<tr class="even">
<td></td>
<td>FilNotchGainRecPtr</td>
<td>FilNotchGainRec1</td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>FilOut</td>
<td>float32</td>
</tr>
</tbody>
</table>
<h6 class="unnumbered" id="description-1">Description</h6>
<blockquote>
<p>Notch filter output calculation. Implemented based on ‘Compensator1’ block functionality. Compensator2, Compensator3 and Compensator4 also have the same functionality.</p>
</blockquote>
<h3 id="transition-functions"> Transition Functions</h3>
<p>None</p>
<h1 id="known-limitations-with-design">Known Limitations with Design</h1>
<p>Design has 8 PIMs to represent notch filters and a model block for notch filter has not been designed. This hasn’t been done yet in this revision due to the need to baseline on time for builds. No anomaly has been written but the Systems group was notified.</p>
<h1 id="unit-test-consideration">UNIT TEST CONSIDERATION</h1>
<p>Since the notch filter implementation used in this module is dynamic in nature, absolute ranges are difficult to determine without pre-defined knowledge on the combination of coefficient values (A1, A2, B0, B1, B2). Because of this, the systems group ran simulations on 10 different combinations of coefficients (2 with defined default calibrations, 8 considered extreme cases of notch filters) and logged the ranges of the filter state variables and outputs during a frequency sweep. The ranges given throughout this module were taken as the worst case results of all of the given test cases.</p>
<p>To provide useful cases for unit testing, the boundary checks tested during unit testing should be altered to test the state variable minimum and maximum for each of the 10 test cases with the given coefficients set to the values given in that test case. In the case where the default values of the coefficients are used in a vector, the unit tester should not test the corresponding state variables with values over the range defined for that set of coefficients. See attached simulation results.</p>
<p><img src="ElectricPowerSteering_RH850_GM_T1XX_website/static/media/image2.emf" /></p>
<p>(Note: this section is copied from EA3 Stability Compensation documentation)</p>
<p class="heading" id="abbreviations-and-acronyms">Abbreviations and Acronyms</p>
<table>
<colgroup>
<col style="width: 32%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Abbreviation or Acronym</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p class="heading" id="glossary">Glossary</p>
<p><strong>Note</strong>: Terms and definitions from the source “Nexteer Automotive” take precedence over all other definitions of the same term. Terms and definitions from the source “Nexteer Automotive” are formulated from multiple sources, including the following:</p>
<ul>
<li><p>ISO 9000</p></li>
<li><p>ISO/IEC 12207</p></li>
<li><p>ISO/IEC 15504</p></li>
<li><p>Automotive SPICE® Process Reference Model (PRM)</p></li>
<li><p>Automotive SPICE® Process Assessment Model (PAM)</p></li>
<li><p>ISO/IEC 15288</p></li>
<li><p>ISO 26262</p></li>
<li><p>IEEE Standards</p></li>
<li><p>SWEBOK</p></li>
<li><p>PMBOK</p></li>
<li><p>Existing Nexteer Automotive documentation</p></li>
</ul>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 53%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Term</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Source</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>MDD</td>
<td>Module Design Document</td>
<td></td>
</tr>
<tr class="even">
<td>DFD</td>
<td>Data Flow Diagram</td>
<td></td>
</tr>
</tbody>
</table>
<p class="heading" id="references">References</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 69%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Ref. #</strong></th>
<th><strong>Title</strong></th>
<th><strong>Version</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>AUTOSAR Specification of Memory Mapping (Link:<a href="http://www.autosar.org/download/R4.0/AUTOSAR_SWS_MemoryMapping.pdf">AUTOSAR_SWS_MemoryMapping.pdf</a>)</td>
<td>v1.3.0 R4.0 Rev 2</td>
</tr>
<tr class="even">
<td>2</td>
<td>MDD Guideline</td>
<td>EA4 01.00.00</td>
</tr>
<tr class="odd">
<td>3</td>
<td>EA4 <a href="http://misagweb01.nexteer.com/eRoomReq/Files/erooms8/NextGeneration/0_fc55f/Software%20Naming%20Conventions%2003x(In%20Work).doc">Software Naming Conventions.doc</a></td>
<td>01.00.00</td>
</tr>
<tr class="even">
<td>4</td>
<td><a href="http://eroom1.nexteer.com/eRoomReq/Files/erooms8/NextGeneration/0_1a67a9/Software%20Design%20and%20Coding%20Standards.doc">Software Design and Coding Standards.doc</a></td>
<td>2.1</td>
</tr>
<tr class="odd">
<td>5</td>
<td>FDD - SF029A_StabyCmp_Design</td>
<td>See Synergy sub project version</td>
</tr>
</tbody>
</table>
