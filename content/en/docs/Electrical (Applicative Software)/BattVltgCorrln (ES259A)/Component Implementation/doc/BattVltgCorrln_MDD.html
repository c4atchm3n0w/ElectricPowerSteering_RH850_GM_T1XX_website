---
title: BattVltgCorrln_MDD
linkTitle: BattVltgCorrln_MDD
weight: 3
---

<p><strong>Module Design Document</strong></p>
<p><strong>For</strong></p>
<p><strong>BattVltgCorrln</strong></p>
<p><strong>May 24, 2016Mar 21, 2016</strong></p>
<p><strong>Prepared For:</strong></p>
<p><strong>Software Engineering</strong></p>
<p><strong>Nexteer Automotive,</strong></p>
<p><strong>Saginaw, MI, USA</strong></p>
<p><strong>Prepared By:</strong></p>
<p><strong>Nick Saxton,</strong></p>
<p><strong>Nexteer Automotive,</strong></p>
<p><strong><u>Saginaw, MI, USAChange</u></strong> History</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 28%" />
<col style="width: 18%" />
<col style="width: 19%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Description</strong></td>
<td><strong>Author</strong></td>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
</tr>
<tr class="even">
<td>Initial Version</td>
<td>N. Saxton</td>
<td>1.00.00</td>
<td>08-Jul-2015</td>
</tr>
<tr class="odd">
<td>Updated for FDD 1.2.2</td>
<td>N. Saxton</td>
<td>2.00.00</td>
<td>06-Aug-2015</td>
</tr>
<tr class="even">
<td>Updated for FDD 1.4.0</td>
<td>Sankardu Varadapureddi</td>
<td>3</td>
<td>21-Mar-2016</td>
</tr>
<tr class="odd">
<td>Updated for FDD 2.0.0</td>
<td>N. Saxton</td>
<td>4</td>
<td>24-May-2016</td>
</tr>
</tbody>
</table>
<p><strong><u>Table of Contents</u></strong></p>
<p><a href="#battvltgcorrln-high-level-description">1 BattVltgCorrln &amp; High-Level Description 4</a></p>
<p><a href="#design-details-of-software-module">2 Design details of software module 5</a></p>
<p><a href="#graphical-representation-of-battvltgcorrln">2.1 Graphical representation of BattVltgCorrln 5</a></p>
<p><a href="#data-flow-diagram">2.2 Data Flow Diagram 5</a></p>
<p><a href="#component-level-dfd">2.2.1 Component level DFD 5</a></p>
<p><a href="#function-level-dfd">2.2.2 Function level DFD 5</a></p>
<p><a href="#constant-data-dictionary">3 Constant Data Dictionary 6</a></p>
<p><a href="#program-fixed-constants">3.1 Program (fixed) Constants 6</a></p>
<p><a href="#embedded-constants">3.1.1 Embedded Constants 6</a></p>
<p><a href="#software-component-implementation">4 Software Component Implementation 7</a></p>
<p><a href="#sub-module-functions">4.1.1 Sub-Module Functions 7</a></p>
<p><a href="#interrupt-service-routines">4.1.2 Interrupt Service Routines 7</a></p>
<p><a href="#server-runnable-functions">4.1.3 Server Runnable Functions 7</a></p>
<p><a href="#module-internal-local-functions">4.1.4 Module Internal (Local) Functions 7</a></p>
<p><a href="#transition-functions">4.1.5 Transition Functions 9</a></p>
<p><a href="#known-limitations-with-design">5 Known Limitations with Design 10</a></p>
<p><a href="#unit-test-consideration">6 UNIT TEST CONSIDERATION 11</a></p>
<p><a href="#abbreviations-and-acronyms">Appendix A Abbreviations and Acronyms 12</a></p>
<p><a href="#glossary">Appendix B Glossary 13</a></p>
<p><a href="#references">Appendix C References 15</a></p>
<h1 id="battvltgcorrln-high-level-description">BattVltgCorrln &amp; High-Level Description</h1>
<p>This function determines the correlation between three input signals (battery voltage, switched battery voltage 1, and switched battery voltage 2) to conclude their validities.</p>
<h1 id="design-details-of-software-module">Design details of software module</h1>
<h2 id="graphical-representation-of-battvltgcorrln">Graphical representation of BattVltgCorrln</h2>
<p><img src="ElectricPowerSteering_RH850_GM_T1XX_website/static/media/image2.png" style="width:4.91736in;height:4.71736in" /></p>
<h2 id="data-flow-diagram">Data Flow Diagram</h2>
<h3 id="component-level-dfd">Component level DFD</h3>
<p>N/A</p>
<h3 id="function-level-dfd">Function level DFD</h3>
<p>N/A</p>
<h1 id="constant-data-dictionary">Constant Data Dictionary</h1>
<h2 id="program-fixed-constants">Program (fixed) Constants</h2>
<h3 id="embedded-constants">Embedded Constants</h3>
<h4 id="local-constants">Local Constants</h4>
<table>
<colgroup>
<col style="width: 42%" />
<col style="width: 21%" />
<col style="width: 16%" />
<col style="width: 19%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Constant Name</td>
<td>Resolution</td>
<td>Units</td>
<td>Value</td>
</tr>
<tr class="even">
<td>BATTVLTGIDPTSIGLOLIMIT_CNT_U08</td>
<td>None</td>
<td>NA</td>
<td>0</td>
</tr>
<tr class="odd">
<td>BATTVLTGIDPTSIGHILIMIT _CNT_U08</td>
<td>None</td>
<td>NA</td>
<td>3</td>
</tr>
</tbody>
</table>
<p>* Refer FDD for other constant definition</p>
<h1 id="software-component-implementation">Software Component Implementation</h1>
<h3 id="sub-module-functions">Sub-Module Functions</h3>
<h4 id="initialization-sub-module-_init">Initialization sub-module {_Init()}</h4>
<p>None</p>
<h4 id="periodic-sub-module-_per">Periodic sub-module {_Per()}</h4>
<h5 id="battvltgcorrlnper1">BattVltgCorrlnPer1</h5>
<h6 id="design-rationale">Design Rationale</h6>
<p>Refer to FDD</p>
<h6 id="store-module-inputs-to-local-copies">Store module inputs to local copies</h6>
<p>Refer to FDD</p>
<h6 id="processing-of-function">(Processing of function)……</h6>
<p>Refer to FDD</p>
<h6 id="store-local-copy-of-outputs-into-module-outputs">Store local copy of outputs into module outputs</h6>
<p>Refer FDD</p>
<h3 id="interrupt-service-routines">Interrupt Service Routines</h3>
<p>None</p>
<h3 id="server-runnable-functions">Server Runnable Functions</h3>
<p>None</p>
<h3 id="module-internal-local-functions">Module Internal (Local) Functions</h3>
<h4 id="local-function-1">Local Function #1</h4>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 46%" />
<col style="width: 12%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>InstCorrln</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Vltg_Volt_T_f32</td>
<td>float32</td>
<td>0</td>
<td>40</td>
</tr>
<tr class="odd">
<td></td>
<td>VltgSwd1_Volt_T_f32</td>
<td>float32</td>
<td>0</td>
<td>40</td>
</tr>
<tr class="even">
<td></td>
<td>VltgSwd2_Volt_T_f32</td>
<td>float32</td>
<td>0</td>
<td>40</td>
</tr>
<tr class="odd">
<td></td>
<td>BattVltgAdcFaild_Cnt_T_logl</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>BattVltgSwd1AdcFaild_Cnt_T_logl</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>BattVltgSwd2AdcFaild_Cnt_T_logl</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>*VltgOk_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>*Swd1Ok_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>*Swd2Ok_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>BattSwdVltgLimd_Cnt_T_logl</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
</tbody>
</table>
<h5 id="description">Description</h5>
<p>Refer FDD</p>
<h4 id="local-function-2">Local Function #2</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 41%" />
<col style="width: 12%" />
<col style="width: 14%" />
<col style="width: 14%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>DetIdptSig</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Ntc0x3CQlfrSts_Cnt_T_enum</td>
<td>enum</td>
<td>SIGQLFR_NORES</td>
<td>SIGQLFR_FAILD</td>
</tr>
<tr class="odd">
<td></td>
<td>Ntc044QlfrSts_Cnt_T_enum</td>
<td>enum</td>
<td>SIGQLFR_NORES</td>
<td>SIGQLFR_FAILD</td>
</tr>
<tr class="even">
<td></td>
<td>Ntc0x4CQlfrSts_Cnt_T_enum</td>
<td>enum</td>
<td>SIGQLFR_NORES</td>
<td>SIGQLFR_FAILD</td>
</tr>
<tr class="odd">
<td></td>
<td>*VltgNotFailed_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>*VltgSwd1NotFailed_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>*VltgSwd2NotFailed_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>VltgCorrlnIdptSig_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>3</td>
</tr>
</tbody>
</table>
<h5 id="description-1">Description</h5>
<p>This function implements the Determine Independent Signals block in the FDD but with a few differences. Instead of implementing the truth table as shown in the FDD, each signal “not failed” variable is set based on the signal’s OK status. Once a signal is considered “not failed”, the variable representing the number of independent signals is incremented. However, while possible in the code, it is not possible for a situation to arise in which there is only one independent signal, therefore a check is performed at the end of this function to set the number of independent signals to 0 and each “not failed” variable to FALSE if this situation occurs.</p>
<h4 id="local-function-3">Local Function #3</h4>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 40%" />
<col style="width: 12%" />
<col style="width: 13%" />
<col style="width: 17%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>GetCorrlnSts</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>VltgNotFailed_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>VltgSwd1NotFailed_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>VltgSwd2NotFailed_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>VltgOk_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>Swd1Ok_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>Swd2Ok_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>* DftBrdgVltgActv_Cnt_T_logl</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>CorrlnSts_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>7</td>
</tr>
</tbody>
</table>
<p>* DftBrdgVltgActv_Cnt_T_logl is an output of this function.</p>
<h5 id="description-2">Description</h5>
<p>Refer FDD</p>
<h4 id="local-function-4">Local Function #4</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 41%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>DetSwdSat</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>VltgSwd1_Volt_T_f32</td>
<td>float32</td>
<td>0</td>
<td>40</td>
</tr>
<tr class="odd">
<td></td>
<td>VltgSwd2_Volt_T_f32</td>
<td>float32</td>
<td>0</td>
<td>40</td>
</tr>
<tr class="even">
<td></td>
<td>VltgSwd1Ok_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>VltgSwd2Ok_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>SwdSat_Cnt_T_lgc</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
</tbody>
</table>
<h5 id="description-3">Description</h5>
<p>This function determines if switched battery voltages have reached saturation voltage and was created to reduce cyclomatic complexity and static path count of the Instantaneous Correlation subfunction.</p>
<h4 id="local-function-5">Local Function #5</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 41%" />
<col style="width: 12%" />
<col style="width: 14%" />
<col style="width: 13%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>DetNtcQlfrSts</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Invtr1Inctv_Cnt_T_logl</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>Invtr2Inctv_Cnt_T_logl</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td></td>
<td>VltgOk_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>Swd1Ok_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>Swd2Ok_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>*Ntc3CQlfrSts_Cnt_T_enum</td>
<td>enum</td>
<td>SIGQLFR_NORES</td>
<td>SIGQLFR_FAILD</td>
</tr>
<tr class="even">
<td></td>
<td>*Ntc3CQlfrSts_Cnt_T_enum</td>
<td>enum</td>
<td>SIGQLFR_NORES</td>
<td>SIGQLFR_FAILD</td>
</tr>
<tr class="odd">
<td></td>
<td>*Ntc3CQlfrSts_Cnt_T_enum</td>
<td>enum</td>
<td>SIGQLFR_NORES</td>
<td>SIGQLFR_FAILD</td>
</tr>
</tbody>
</table>
<h5 id="description-4">Description</h5>
<p>This function implements the NTC &lt;xx&gt; blocks in the Determine Independent Signals subfunction. It sets each NTC status based on the OK status of each voltage signal. Then, the NTC qualifier status for each signal is retrieved and saved in the corresponding enum parameter. This function was created to reduce complexity and static path count of the Determine Independent Signals subfunction.</p>
<h4 id="local-function-6">Local Function #6</h4>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 42%" />
<col style="width: 12%" />
<col style="width: 14%" />
<col style="width: 13%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>FlgChk</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>FlgIn_Cnt_T_logl</td>
<td>boolean</td>
<td>FALSE</td>
<td>TRUE</td>
</tr>
<tr class="odd">
<td></td>
<td>*FlgOut_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>*FlgOut_Cnt_T_u08 is an output of this function.</p>
<h5 id="description-5">Description</h5>
<p>If Input flag is 'TRUE', then set output flag to 'FASLE'. Otherwise don't do anything. This function is added to reduce cyclomatic complexity of 'InstCorrln' function.</p>
<h4 id="local-function-7">Local Function #7</h4>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 42%" />
<col style="width: 12%" />
<col style="width: 14%" />
<col style="width: 13%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>RngChk</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Vltg_Volt_T_f32</td>
<td>float32</td>
<td>0</td>
<td>40</td>
</tr>
<tr class="odd">
<td></td>
<td>VltgSwd1_Volt_T_f32</td>
<td>float32</td>
<td>0</td>
<td>40</td>
</tr>
<tr class="even">
<td></td>
<td>VltgSwd2_Volt_T_f32</td>
<td>float32</td>
<td>0</td>
<td>40</td>
</tr>
<tr class="odd">
<td></td>
<td>*VltgRngOk_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="even">
<td></td>
<td>*Swd1RngOk_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
<tr class="odd">
<td></td>
<td>*Swd2RngOk_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>*VltgRngOk_Cnt_T_u08, *Swd1RngOk_Cnt_T_u08 and *Swd2RngOk_Cnt_T_u08 are outputs of this function.</p>
<h5 id="description-6">Description</h5>
<p>Implements “Range Check” block in the model. Created to reduce cyclomatic complexity and static path count.</p>
<h3 id="transition-functions">Transition Functions</h3>
<p>None</p>
<h1 id="known-limitations-with-design">Known Limitations with Design</h1>
<p>None</p>
<h1 id="unit-test-consideration">UNIT TEST CONSIDERATION</h1>
<p>None</p>
<p class="heading" id="abbreviations-and-acronyms">Abbreviations and Acronyms</p>
<p>None</p>
<p class="heading" id="glossary">Glossary</p>
<p><strong>Note</strong>: Terms and definitions from the source “Nexteer Automotive” take precedence over all other definitions of the same term. Terms and definitions from the source “Nexteer Automotive” are formulated from multiple sources, including the following:</p>
<ul>
<li><p>ISO 9000</p></li>
<li><p>ISO/IEC 12207</p></li>
<li><p>ISO/IEC 15504</p></li>
<li><p>Automotive SPICE® Process Reference Model (PRM)</p></li>
<li><p>Automotive SPICE® Process Assessment Model (PAM)</p></li>
<li><p>ISO/IEC 15288</p></li>
<li><p>ISO 26262</p></li>
<li><p>IEEE Standards</p></li>
<li><p>SWEBOK</p></li>
<li><p>PMBOK</p></li>
<li><p>Existing Nexteer Automotive documentation</p></li>
</ul>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 53%" />
<col style="width: 21%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Term</strong></th>
<th><strong>Definition</strong></th>
<th><strong>Source</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>MDD</td>
<td>Module Design Document</td>
<td></td>
</tr>
<tr class="even">
<td>DFD</td>
<td>Data Flow Diagram</td>
<td></td>
</tr>
</tbody>
</table>
<p class="heading" id="references">References</p>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 69%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Ref. #</strong></th>
<th><strong>Title</strong></th>
<th><strong>Version</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>AUTOSAR Specification of Memory Mapping (Link:<a href="http://www.autosar.org/download/R4.0/AUTOSAR_SWS_MemoryMapping.pdf">AUTOSAR_SWS_MemoryMapping.pdf</a>)</td>
<td>v1.3.0 R4.0 Rev 2</td>
</tr>
<tr class="even">
<td>2</td>
<td>MDD Guideline</td>
<td>EA4 01.00.00</td>
</tr>
<tr class="odd">
<td>3</td>
<td><a href="http://misagweb01.nexteer.com/eRoomReq/Files/erooms8/NextGeneration/0_fc55f/Software%20Naming%20Conventions%2003x(In%20Work).doc">Software Naming Conventions.doc</a></td>
<td>2.0</td>
</tr>
<tr class="even">
<td>4</td>
<td><a href="http://eroom1.nexteer.com/eRoomReq/Files/erooms8/NextGeneration/0_1a67a9/Software%20Design%20and%20Coding%20Standards.doc">Software Design and Coding Standards.doc</a></td>
<td>2.1</td>
</tr>
<tr class="odd">
<td>5</td>
<td>FDD – ES259A Battery or Switched Voltage Correlation</td>
<td>See Synergy subproject version</td>
</tr>
</tbody>
</table>
