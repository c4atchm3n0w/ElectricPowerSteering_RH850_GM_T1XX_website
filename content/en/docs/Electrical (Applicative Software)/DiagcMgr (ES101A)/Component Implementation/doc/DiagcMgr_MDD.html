---
title: DiagcMgr_MDD
linkTitle: DiagcMgr_MDD
weight: 4
---

<p><strong>Module Design Document</strong></p>
<p><strong>For</strong></p>
<p><strong>Diagnostic Manager</strong></p>
<p><strong>VERSION:</strong> <strong>7.0</strong></p>
<p><strong>DATE:</strong> <strong>02-DEC-2016</strong></p>
<p><strong>Prepared By:</strong></p>
<p><strong>Spandana Balani</strong></p>
<p><strong>Location:</strong> The official version of this document is stored in the Nexteer Configuration Management System.</p>
<p><strong>Revision History</strong></p>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 48%" />
<col style="width: 14%" />
<col style="width: 12%" />
<col style="width: 17%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Sl. No.</strong></td>
<td><strong>Description</strong></td>
<td><strong>Author</strong></td>
<td><strong>Version</strong></td>
<td><strong>Date</strong></td>
</tr>
<tr class="even">
<td>1</td>
<td>Initial Version</td>
<td>SB</td>
<td>1.0</td>
<td>23-Apr-2015</td>
</tr>
<tr class="odd">
<td>2</td>
<td>Added to Design Limitations section</td>
<td>KMC</td>
<td>2.0</td>
<td>03-Jun-2015</td>
</tr>
<tr class="even">
<td>3</td>
<td>ES101A_DiagcMgr_Design version 2 implementation</td>
<td>SB</td>
<td>3.0</td>
<td>11-Mar-2016</td>
</tr>
<tr class="odd">
<td>4</td>
<td>ES101A_DiagcMgr_Design version 3 implementation</td>
<td>SB</td>
<td>4.0</td>
<td>19-Apr-2016</td>
</tr>
<tr class="even">
<td>5</td>
<td>ES101A_DiagcMgr_Design version 4 implementation</td>
<td>SB</td>
<td>5.0</td>
<td>22-Jun-2016</td>
</tr>
<tr class="odd">
<td>6</td>
<td>Added DETs to “SetNtcStsCore_Oper” server runnables</td>
<td>SB</td>
<td>6.0</td>
<td>26-Sep-2016</td>
</tr>
<tr class="even">
<td>7</td>
<td>Updated to fix anomalies EA4#8118 and EA4#8115</td>
<td>SB</td>
<td>7.0</td>
<td>02-Dec-2016</td>
</tr>
</tbody>
</table>
<p>Table of Contents</p>
<p><a href="#abbrevations-and-acronyms">1 Abbrevations And Acronyms 6</a></p>
<p><a href="#references">2 References 7</a></p>
<p><a href="#diagcmgr-high-level-description">3 DiagcMgr &amp; High-Level Description 8</a></p>
<p><a href="#design-details-of-software-module">4 Design details of software module 9</a></p>
<p><a href="#graphical-representation-of-diagcmgr">4.1 Graphical representation of Diagcmgr 9</a></p>
<p><a href="#data-flow-diagram">4.2 Data Flow Diagram 9</a></p>
<p><a href="#module-level-dfd">4.2.1 Module level DFD 9</a></p>
<p><a href="#sub-module-level-dfd">4.2.2 Sub-Module level DFD 9</a></p>
<p><a href="#component-flow-diagram">4.3 COMPONENT FLOW DIAGRAM 10</a></p>
<p><a href="#variable-data-dictionary">5 Variable Data Dictionary 11</a></p>
<p><a href="#user-defined-typedef-definitiondeclaration">5.1 User defined typedef definition/declaration 11</a></p>
<p><a href="#__RefHeading___Toc454959206">5.2 Variable definition for enumerated types 11</a></p>
<p><a href="#constant-data-dictionary">6 Constant Data Dictionary 12</a></p>
<p><a href="#programfixed-constants">6.1 Program(fixed) Constants 12</a></p>
<p><a href="#embedded-constants">6.1.1 Embedded Constants 12</a></p>
<p><a href="#local">6.1.1.1 Local 12</a></p>
<p><a href="#global">6.1.1.2 Global 12</a></p>
<p><a href="#module-specific-lookup-tables-constants">6.1.2 Module specific Lookup Tables Constants 12</a></p>
<p><a href="#software-module-implementation">7 Software Module Implementation 13</a></p>
<p><a href="#sub-module-functions">7.1 Sub-Module Functions 13</a></p>
<p><a href="#initialization-functions">7.1.1 Initialization Functions 13</a></p>
<p><a href="#periodic-functions">7.1.2 PERIODIC FUNCTIONS 13</a></p>
<p><a href="#per-diagcmgrper1">7.1.2.1 Per: diagcmgrPer1 13</a></p>
<p><a href="#design-rationale">7.1.2.1.1 Design Rationale 13</a></p>
<p><a href="#store-module-inputs-to-local-copies">7.1.2.1.2 Store Module Inputs to Local copies 13</a></p>
<p><a href="#processing-of-function">7.1.2.1.3 (Processing of function)……… 13</a></p>
<p><a href="#store-local-copy-of-outputs-into-module-outputs">7.1.2.1.4 Store Local copy of outputs into Module Outputs 13</a></p>
<p><a href="#per-diagcmgrper2">7.1.2.2 Per: diagcmgrPer2 13</a></p>
<p><a href="#design-rationale-1">7.1.2.2.1 Design Rationale 14</a></p>
<p><a href="#store-module-inputs-to-local-copies-1">7.1.2.2.2 Store Module Inputs to Local copies 15</a></p>
<p><a href="#processing-of-function-1">7.1.2.2.3 (Processing of function)……… 15</a></p>
<p><a href="#store-local-copy-of-outputs-into-module-outputs-1">7.1.2.2.4 Store Local copy of outputs into Module Outputs 15</a></p>
<p><a href="#interrupt-functions">7.1.3 Interrupt Functions 15</a></p>
<p><a href="#server-runnable-functions">7.1.4 Server Runnable Functions 16</a></p>
<p><a href="#clralldiagc_oper">7.1.4.1 ClrAllDiagc_Oper 16</a></p>
<p><a href="#clrsnpshtdata_oper">7.1.4.2 ClrSnpshtData_Oper 16</a></p>
<p><a href="#diagcmgrinincore_oper">7.1.4.3 DiagcMgrIninCore_Oper 16</a></p>
<p><a href="#diagcmgrpwrdwn">7.1.4.4 DiagcMgrPwrDwN 17</a></p>
<p><a href="#design-rationale-3">7.1.4.4.1 Design Rationale 18</a></p>
<p><a href="#upddtcenacdn">7.1.4.5 UpdDtcEnaCdn 18</a></p>
<p><a href="#design-rationale-4">7.1.4.5.1 Design Rationale 18</a></p>
<p><a href="#getntcactvcore_oper">7.1.4.6 GetNtcActvCORE_Oper 19</a></p>
<p><a href="#getntcqlfrstscore_oper">7.1.4.7 GetNtcQlfrStsCORE_Oper 19</a></p>
<p><a href="#getntcstscore_oper">7.1.4.8 GetNtcStsCORE_Oper 19</a></p>
<p><a href="#readntcfltary_oper">7.1.4.9 ReadNtcFltAry_Oper 19</a></p>
<p><a href="#design-rationale-5">7.1.4.9.1 Design Rationale 19</a></p>
<p><a href="#readntcinfoanddebcntr_oper">7.1.4.10 ReadNtcInfoAndDebCntr_Oper 19</a></p>
<p><a href="#design-rationale-6">7.1.4.10.1 Design Rationale 19</a></p>
<p><a href="#readsnpshtdata_oper">7.1.4.11 ReadSnpshtData_Oper 19</a></p>
<p><a href="#setntcstscore_oper">7.1.4.12 SetNtcStsCORE_Oper 19</a></p>
<p><a href="#restorentcfltarydft">7.1.4.13 RestoreNtcFltAryDft 19</a></p>
<p><a href="#restoresnpshtarydft">7.1.4.14 RestoreSnpshtAryDft 20</a></p>
<p><a href="#local-functionmacro-definitions">7.1.5 Local Function/Macro Definitions 20</a></p>
<p><a href="#local-function-1">7.1.5.1 Local Function #1 20</a></p>
<p><a href="#description">7.1.5.2 Description 20</a></p>
<p><a href="#local-function-2">7.1.5.3 Local Function #2 20</a></p>
<p><a href="#description-1">7.1.5.4 Description 20</a></p>
<p><a href="#global-functionmacro-definitions">7.1.6 GLObAL Function/Macro Definitions 20</a></p>
<p><a href="#global-function-1">7.1.6.1 GLObAL Function #1 20</a></p>
<p><a href="#description-2">7.1.6.1.1 Description 21</a></p>
<p><a href="#global-function-2">7.1.6.2 GLObAL Function #2 21</a></p>
<p><a href="#description-3">7.1.6.2.1 Description 21</a></p>
<p><a href="#global-function-3">7.1.6.3 GLObAL Function #3 21</a></p>
<p><a href="#description-4">7.1.6.3.1 Description 21</a></p>
<p><a href="#global-function-4">7.1.6.4 GLObAL Function #4 21</a></p>
<p><a href="#description-5">7.1.6.5 Description 21</a></p>
<p><a href="#global-function-5">7.1.6.6 GLObAL Function #5 21</a></p>
<p><a href="#description-6">7.1.6.7 Description 22</a></p>
<p><a href="#global-function-6">7.1.6.8 GLObAL Function #6 22</a></p>
<p><a href="#description-7">7.1.6.9 Description 22</a></p>
<p><a href="#global-function-7">7.1.6.10 GLObAL Function #7 22</a></p>
<p><a href="#description-8">7.1.6.11 Description 22</a></p>
<p><a href="#global-function-8">7.1.6.12 GLObAL Function #8 22</a></p>
<p><a href="#description-9">7.1.6.13 Description 22</a></p>
<p><a href="#transient-functions">7.1.7 TRANSIENT FUNCTIONS 22</a></p>
<p><a href="#known-limitations-with-design">8 Known Limitations With Design 23</a></p>
<p><a href="#unit-test-consideration">9 UNIT TEST CONSIDERATION 24</a></p>
<p><a href="#appendix">10 Appendix 25</a></p>
<h1 id="abbrevations-and-acronyms">Abbrevations And Acronyms</h1>
<table>
<colgroup>
<col style="width: 28%" />
<col style="width: 71%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Abbreviation</td>
<td>Description</td>
</tr>
<tr class="even">
<td>DFD</td>
<td>Design functional diagram</td>
</tr>
<tr class="odd">
<td>MDD</td>
<td>Module design Document</td>
</tr>
<tr class="even">
<td></td>
<td>&lt;ADD more to the table if applicable&gt;</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="references">References</h1>
<p>This section lists the title &amp; version of all the documents that are referred for development of this document</p>
<table>
<colgroup>
<col style="width: 12%" />
<col style="width: 58%" />
<col style="width: 29%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Sr. No.</td>
<td>Title</td>
<td>Version</td>
</tr>
<tr class="even">
<td>&lt;1&gt;</td>
<td>&lt;MDD Guidelines&gt;</td>
<td>Process 04.02.01</td>
</tr>
<tr class="odd">
<td>&lt;2&gt;</td>
<td>&lt;Software Naming Conventions&gt;</td>
<td>Process 04.02.01</td>
</tr>
<tr class="even">
<td>&lt;3&gt;</td>
<td>&lt;Coding standards&gt;</td>
<td>Process 04.02.01</td>
</tr>
<tr class="odd">
<td>&lt;4&gt;</td>
<td>FDD – ES101A Diagnostic Manager</td>
<td>See Synergy Subproject version</td>
</tr>
<tr class="even">
<td></td>
<td>&lt;Add if more available&gt;</td>
<td></td>
</tr>
</tbody>
</table>
<h1 id="diagcmgr-high-level-description">DiagcMgr &amp; High-Level Description</h1>
<h1 id="design-details-of-software-module">Design details of software module</h1>
<h2 id="graphical-representation-of-diagcmgr">Graphical representation of Diagcmgr</h2>
<p><img src="ElectricPowerSteering_RH850_GM_T1XX_website/static/media/image1.png" style="width:3.23333in;height:5.46667in" /></p>
<h2 id="data-flow-diagram">Data Flow Diagram</h2>
<h2 id="module-level-dfd">Module level DFD</h2>
<p><em>N/A</em></p>
<h2 id="sub-module-level-dfd">Sub-Module level DFD</h2>
<p><em>N/A</em></p>
<h2 id="component-flow-diagram">COMPONENT FLOW DIAGRAM</h2>
<p><em>N/A</em></p>
<h1 id="variable-data-dictionary">Variable Data Dictionary</h1>
<h2 id="user-defined-typedef-definitiondeclaration">User defined typedef definition/declaration </h2>
<p><em>&lt;This section documents any user types uniquely used for the module.&gt;</em></p>
<table>
<colgroup>
<col style="width: 34%" />
<col style="width: 24%" />
<col style="width: 18%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Typedef Name</td>
<td>Element Name</td>
<td>User Defined Type</td>
<td><p>Legal Range</p>
<p>(min)</p></td>
<td><p>Legal Range</p>
<p>(max)</p></td>
</tr>
<tr class="even">
<td>NtcMapRec1</td>
<td>ApplIdx</td>
<td>Uint8</td>
<td>0</td>
<td>10</td>
</tr>
<tr class="odd">
<td></td>
<td>NtcInfoIdx</td>
<td>uint8</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="even">
<td>NtcInfoRec4</td>
<td>NtcStInfo</td>
<td>Uint8</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td>Sts</td>
<td>Uint8</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>AgiCntr</td>
<td>Uint8</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Ary1D_NtcInfoRec4</td>
<td></td>
<td>NtcInfoRec4[]<sup>1</sup></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Ary1D_NtcInfoRec4_DiagcMgrProxyApplX<sup>3</sup></td>
<td></td>
<td>NtcInfoRec4[]<sup>1</sup></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>Ary1D_s16_DiagcMgrProxyApplX<sup>3</sup></td>
<td></td>
<td>Sint16[]<sup>2</sup></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>1 – Array of NtcInfoRec4</p>
<p>2 – Array of sint16</p>
<p>3 – One for each Application configured with NTCs</p>
<p>For example – Application 6 and 10 have NTCs then - Ary1D_NtcInfoRec4_DiagcMgrProxyAppl6, Ary1D_NtcInfoRec4_DiagcMgrProxyAppl10, Ary1D_s16_DiagcMgrProxyAppl6, Ary1D_s16_DiagcMgrProxyAppl10 would exist with configured sizes. <span id="__RefHeading___Toc454959206" class="anchor"></span>Variable definition for enumerated types</p>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 40%" />
<col style="width: 14%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Enum Name</td>
<td>Element Name</td>
<td>Value</td>
</tr>
<tr class="even">
<td>See DataDict.m file</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="global-variable-definition">Global Variable definition</h2>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 17%" />
<col style="width: 17%" />
<col style="width: 17%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Name</td>
<td>Type</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>SnpshtDataAry_M[8]<sup>1</sup></td>
<td>SnpshtDataRec1</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 36%" />
<col style="width: 10%" />
<col style="width: 13%" />
<col style="width: 15%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Name</td>
<td>Element</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td>SnpshtDataRec1</td>
<td>RegInBRAMDAT1_Cnt_T_u32</td>
<td>uint32</td>
<td>0</td>
<td>4294967295</td>
</tr>
<tr class="odd">
<td></td>
<td>HwTq_Cnt_T_s5p10</td>
<td>sint16</td>
<td>-10</td>
<td>10</td>
</tr>
<tr class="even">
<td></td>
<td>MotTqCmdMrfScad_Cnt_T_s5p10</td>
<td>sint16</td>
<td>-8.8</td>
<td>8.8</td>
</tr>
<tr class="odd">
<td></td>
<td>IgnCntr_Cnt_T_u32</td>
<td>uint32</td>
<td>0</td>
<td>4294967295</td>
</tr>
<tr class="even">
<td></td>
<td>BrdgVltg_Cnt_T_u6p10</td>
<td>uint16</td>
<td>6</td>
<td>26.5</td>
</tr>
<tr class="odd">
<td></td>
<td>EcuTFild_Cnt_T_s8p7</td>
<td>sint16</td>
<td>-50</td>
<td>150</td>
</tr>
<tr class="even">
<td></td>
<td>NtcNr_Cnt_T_u16</td>
<td>NtcNr1</td>
<td>NTCNR_0X001</td>
<td>NTCNR_0X1FF</td>
</tr>
<tr class="odd">
<td></td>
<td>NtcStInfo_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="even">
<td></td>
<td>SysSt_Cnt_T_enum</td>
<td>SysSt1</td>
<td>SYSST_DI</td>
<td>SYSST_WRMININ</td>
</tr>
<tr class="odd">
<td></td>
<td>VehSpd_Cnt_T_u9p7</td>
<td>Uint16</td>
<td>0</td>
<td>511</td>
</tr>
</tbody>
</table>
<p>Notes:</p>
<p>1- This variable is mapped to MemMap – “GlobalShared_START_SEC_VAR_NOINIT_UNSPECIFIED”</p>
<h1 id="constant-data-dictionary">Constant Data Dictionary</h1>
<h2 id="programfixed-constants">Program(fixed) Constants</h2>
<h2 id="embedded-constants">Embedded Constants</h2>
<p><em>&lt; All program specific constants will be defined in detail &gt;</em></p>
<h2 id="local">Local</h2>
<table>
<colgroup>
<col style="width: 47%" />
<col style="width: 20%" />
<col style="width: 14%" />
<col style="width: 16%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Constant Name</td>
<td>Resolution</td>
<td>Units</td>
<td>Value</td>
</tr>
<tr class="even">
<td>See DataDict.m file</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>IMDTSHTDWNFLT_CNT_U32</td>
<td>1</td>
<td>Counts</td>
<td>13</td>
</tr>
<tr class="even">
<td>CTRLDSHTDWNFLT_CNT_U32</td>
<td>1</td>
<td>Counts</td>
<td>14</td>
</tr>
<tr class="odd">
<td>INFOONLYFLT_CNT_U32</td>
<td>1</td>
<td>Counts</td>
<td>15</td>
</tr>
<tr class="even">
<td>TOTNROFDTC_CNT_U08<sup>4</sup></td>
<td>1</td>
<td>Counts</td>
<td>Configured</td>
</tr>
<tr class="odd">
<td>PimSnpshtDataAry_SnpshtDataRec1</td>
<td></td>
<td></td>
<td>SnpshtDataAry_M</td>
</tr>
</tbody>
</table>
<p>4 - Number of DTCs for that program.</p>
<h2 id="global">Global</h2>
<p><em>&lt;This section lists the global constants used by the module. For details on global constants, refer to the Data Dictionary for the application&gt;</em></p>
<table>
<colgroup>
<col style="width: 100%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Constant Name</td>
</tr>
<tr class="even">
<td>See DataDict.m file</td>
</tr>
<tr class="odd">
<td></td>
</tr>
<tr class="even">
<td></td>
</tr>
</tbody>
</table>
<h2 id="module-specific-lookup-tables-constants">Module specific Lookup Tables Constants</h2>
<p><em>&lt;(This is for lookup tables (arrays) with fixed values, same name as other tables)&gt;</em></p>
<table>
<colgroup>
<col style="width: 42%" />
<col style="width: 20%" />
<col style="width: 18%" />
<col style="width: 18%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Constant Name</td>
<td>Resolution</td>
<td>Value</td>
<td>Software Segment</td>
</tr>
<tr class="even">
<td>DiagcMgrNtcMap_Cnt_rec[512]</td>
<td>NtcMapRec1</td>
<td>Configured</td>
<td>DiagcMgr_START_SEC_CODE</td>
</tr>
<tr class="odd">
<td>NtcNrAryApplX_Cnt_u16[Configured]<sup>5</sup></td>
<td>1</td>
<td>Configured</td>
<td>DiagcMgr_START_SEC_CODE</td>
</tr>
<tr class="even">
<td>DtcEnaMask[Configured]<sup>6</sup></td>
<td>1</td>
<td>Configured</td>
<td>DiagcMgr_START_SEC_CODE</td>
</tr>
<tr class="odd">
<td>DemDtcEveIdMap[Configured]<sup>6</sup></td>
<td>1</td>
<td>Configured</td>
<td>DiagcMgr_START_SEC_CODE</td>
</tr>
<tr class="even">
<td>FltRespRampTbl_Uls_f32[13]</td>
<td>Single Precision Float</td>
<td>{0.1F,0.125F,0.1428F,0.1667F,0.2F,0.25F,0.333F,0.5F,1.0F,2.0F,3.333F,10.0F,500.0F}</td>
<td>DiagcMgr_START_SEC_CODE</td>
</tr>
</tbody>
</table>
<p>5 - One for each Application configured with NTCs.</p>
<p>6 - Variable Length (TOTNROFDTC_CNT_U08 + 1) for each build/program depending on the Number of DTCs</p>
<p>for that program.</p>
<h1 id="software-module-implementation">Software Module Implementation</h1>
<h2 id="sub-module-functions">Sub-Module Functions</h2>
<p>None</p>
<h2 id="initialization-functions">Initialization Functions</h2>
<p><em>None</em></p>
<h2 id="periodic-functions">PERIODIC FUNCTIONS </h2>
<p><em>(Note: For multiple periodic functions, insert new headers at the “Header 2” level – subset of “7.1.2 Periodic Functions” and follow the same sub-section design shown below). If none required, place the text “None”)&gt;</em></p>
<h2 id="per-diagcmgrper1">Per: diagcmgrPer1</h2>
<p>This function exists in “DiagcMgr.c” file.</p>
<h2 id="design-rationale">Design Rationale</h2>
<p>“Rte_Call_GetDiagcDataApplX_Oper” for each application(X) is called based on conditional compile using constants generated in DiagcMgr_Cfg_private.h</p>
<h2 id="store-module-inputs-to-local-copies">Store Module Inputs to Local copies</h2>
<p><em>Refer to FDD</em></p>
<h2 id="processing-of-function">(Processing of function)………</h2>
<p><em>Refer to FDD</em></p>
<h2 id="store-local-copy-of-outputs-into-module-outputs">Store Local copy of outputs into Module Outputs</h2>
<p><em>Refer to FDD</em></p>
<h2 id="per-diagcmgrper2">Per: diagcmgrPer2</h2>
<p>This function exists in “DiagcMgr.c” file.</p>
<p><img src="ElectricPowerSteering_RH850_GM_T1XX_website/static/media/image2.wmf" /></p>
<h2 id="design-rationale-1">Design Rationale</h2>
<p>“Rte_Call_GetDiagcDataApplX_Oper” for each application(X) is called based on conditional compile using constants generated in DiagcMgr_Cfg_private.h</p>
<h2 id="store-module-inputs-to-local-copies-1">Store Module Inputs to Local copies</h2>
<p><em>Refer to FDD</em></p>
<h2 id="processing-of-function-1">(Processing of function)………</h2>
<p><em>Refer to FDD</em></p>
<h2 id="store-local-copy-of-outputs-into-module-outputs-1">Store Local copy of outputs into Module Outputs</h2>
<p><em>Refer to FDD</em></p>
<h2 id="interrupt-functions">Interrupt Functions</h2>
<p><em>None</em></p>
<h2 id="server-runnable-functions">Server Runnable Functions</h2>
<p><em>(Note: For multiple periodic functions, insert new headers at the “Header 2” level – subset of “7.1.2 Periodic Functions” and follow the same sub-section design shown below). If none required, place the text “None”)&gt;</em></p>
<h2 id="clralldiagc_oper">ClrAllDiagc_Oper</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgr.c” file.</p>
<h2 id="clrsnpshtdata_oper">ClrSnpshtData_Oper</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgr.c” file.</p>
<h2 id="design-rationale-2">Design Rationale</h2>
<p>“NvMConf_NvMBlockDescriptor_Rte_NvmBlock_DiagcMgr_SnpshtDataAry” is used instead of BlockID Number in “NvMProxy_SetRamBlockStatus” call so that the Integrator doesn’t have to configure the DiagcMgr to know about the Nvm block Ids.</p>
<h2 id="diagcmgrinincore_oper">DiagcMgrIninCore_Oper</h2>
<p>See DataDict.m file and modelThis function exists in “DiagcMgr.c” file.</p>
<p><img src="ElectricPowerSteering_RH850_GM_T1XX_website/static/media/image3.wmf" /></p>
<h2 id="diagcmgrpwrdwn">DiagcMgrPwrDwN</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgrNonRte.c” file.</p>
<h2 id="design-rationale-3">Design Rationale</h2>
<p>“GetNtcInfoApplX_Oper” for each application(X) is called based on conditional compile using constants generated in DiagcMgr_Cfg_private.h.</p>
<p>“NvMConf_NvMBlockDescriptor_Rte_NvmBlock_DiagcMgr_DiagcMgrNtcFltAry” is used instead of BlockID Number in “NvMProxy_SetRamBlockStatus” call so that the Integrator doesn’t have to configure the DiagcMgr to know about the Nvm block Ids.</p>
<h2 id="upddtcenacdn">UpdDtcEnaCdn</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgrNonRte.c” file.</p>
<p><img src="ElectricPowerSteering_RH850_GM_T1XX_website/static/media/image4.wmf" /></p>
<h2 id="design-rationale-4">Design Rationale</h2>
<p>“GetNtcInfoApplX_Oper” for each application(X) is called based on conditional compile using constants generated in DiagcMgr_Cfg_private.h.</p>
<h2 id="getntcactvcore_oper">GetNtcActvCORE_Oper</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgr.c” file.</p>
<h2 id="getntcqlfrstscore_oper">GetNtcQlfrStsCORE_Oper</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgr.c” file.</p>
<h2 id="getntcstscore_oper">GetNtcStsCORE_Oper</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgr.c” file.</p>
<h2 id="readntcfltary_oper">ReadNtcFltAry_Oper</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgr.c” file.</p>
<h2 id="design-rationale-5">Design Rationale</h2>
<p>“GetNtcInfoApplX_Oper” for each application(X) is called based on conditional compile using constants generated in DiagcMgr_Cfg_private.h</p>
<h2 id="readntcinfoanddebcntr_oper">ReadNtcInfoAndDebCntr_Oper</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgr.c” file.</p>
<h2 id="design-rationale-6">Design Rationale</h2>
<p>“GetNtcDebCntrApplX” and “GetNtcInfoApplX_Oper” for each application(X) is called based on conditional compile using constants generated in DiagcMgr_Cfg_private.h</p>
<h2 id="readsnpshtdata_oper">ReadSnpshtData_Oper</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgr.c” file. </p>
<h2 id="setntcstscore_oper">SetNtcStsCORE_Oper</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgr.c” file.</p>
<p><img src="ElectricPowerSteering_RH850_GM_T1XX_website/static/media/image5.wmf" /></p>
<h2 id="restorentcfltarydft">RestoreNtcFltAryDft</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgrNonRte.c” file.</p>
<h2 id="restoresnpshtarydft">RestoreSnpshtAryDft</h2>
<p>See DataDict.m file and model</p>
<p>This function exists in “DiagcMgrNonRte.c” file.</p>
<h2 id="local-functionmacro-definitions">Local Function/Macro Definitions</h2>
<p>&lt;If these are numerous and defined in a separate source file then reference the source file only.&gt;</p>
<h2 id="local-function-1">Local Function #1</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 45%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>ProcRampResp</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>NtcNr_Cnt_T_u16</td>
<td>uint16</td>
<td>0</td>
<td>511</td>
</tr>
<tr class="odd">
<td></td>
<td>DiagcData_T_rec</td>
<td>DiagcDataRec1</td>
<td>0</td>
<td>65535</td>
</tr>
<tr class="even">
<td></td>
<td>ProxySetNtcData_T_rec</td>
<td>DiagcDataRec1</td>
<td>0</td>
<td>65535</td>
</tr>
<tr class="odd">
<td><strong>Return Value</strong></td>
<td>N/A</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="description">Description</h2>
<p>Refer ‘ProcessRampResponse and DiagcSts’ block in Simulink model</p>
<p>This function exists in “DiagcMgr.c” file.</p>
<h2 id="local-function-2">Local Function #2</h2>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 42%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 14%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>UpdSnpshtData</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>RegInBRAMDAT1_Cnt_T_u32</td>
<td>uint32</td>
<td>0</td>
<td>4294967295</td>
</tr>
<tr class="odd">
<td></td>
<td>HwTq_Cnt_T_s5p10</td>
<td>sint16</td>
<td>-10</td>
<td>10</td>
</tr>
<tr class="even">
<td></td>
<td>MotTqCmdMrfScad_Cnt_T_s5p10</td>
<td>sint16</td>
<td>-8.8</td>
<td>8.8</td>
</tr>
<tr class="odd">
<td></td>
<td>IgnCntr_Cnt_T_u32</td>
<td>uint32</td>
<td>0</td>
<td>4294967295</td>
</tr>
<tr class="even">
<td></td>
<td>BrdgVltg_Cnt_T_u6p10</td>
<td>uint16</td>
<td>6</td>
<td>26.5</td>
</tr>
<tr class="odd">
<td></td>
<td>EcuTFild_Cnt_T_s8p7</td>
<td>sint16</td>
<td>-50</td>
<td>150</td>
</tr>
<tr class="even">
<td></td>
<td>NtcNr_Cnt_T_u16</td>
<td>NtcNr1</td>
<td>NTCNR_0X001</td>
<td>NTCNR_0X1FF</td>
</tr>
<tr class="odd">
<td></td>
<td>NtcStInfo_Cnt_T_u08</td>
<td>uint8</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="even">
<td></td>
<td>SysSt_Cnt_T_enum</td>
<td>SysSt1</td>
<td>SYSST_DI</td>
<td>SYSST_WRMININ</td>
</tr>
<tr class="odd">
<td></td>
<td>VehSpd_Cnt_T_u9p7</td>
<td>Uint16</td>
<td>0</td>
<td>511</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>N/A</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="description-1">Description</h2>
<p>Refer ‘UpdSnpshtData’ block in Simulink model</p>
<p>This function exists in “DiagcMgr.c” file</p>
<h2 id="design-rationale-7">Design Rationale</h2>
<p>“NvMConf_NvMBlockDescriptor_Rte_NvmBlock_DiagcMgr_SnpshtDataAry” is used instead of BlockID Number in “NvMProxy_SetRamBlockStatus” call so that the Integrator doesn’t have to configure the DiagcMgr to know about the Nvm block Ids.</p>
<h2 id="global-functionmacro-definitions">GLObAL Function/Macro Definitions</h2>
<p>:All the global functions described below are declared in DiagcMgr_private.h and are intended to be used only by DiagcMgr and the DiagcMgrProxyApplX components.These functions exist in “DiagcMgr_private.c” file.</p>
<h2 id="global-function-1">GLObAL Function #1</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 46%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 11%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>ProcessDiagSts</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>FltRsp_Cnt_T_u32</td>
<td>uint32</td>
<td>0</td>
<td>4294967295</td>
</tr>
<tr class="odd">
<td></td>
<td>DiagStsX_Cnt_T_u16</td>
<td>uint16</td>
<td>0</td>
<td>65535</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>N/A</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="description-2">Description</h2>
<p>Refer to “ES101A_DiagcMgr/DiagcMgr/SetNtcStsCore/NtcNr is Valid/Diagnostics Not Inhibited/NtcEnabled/NTCSTS_PREFAILD/Update NtcInfoSts, DebCntr and Process RampRate/DebCntr = MAXDEBCNTRVAL_CNT_S16/ProcessRampResponse and DiagcSts/ControlledShutdown Fault/ProcessDiagcSts” Simulink path in the FDD.</p>
<h2 id="global-function-2">GLObAL Function #2</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 45%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>ProcProxyRampResp</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>NtcNr_Cnt_T_u16</td>
<td>uint16</td>
<td>0</td>
<td>511</td>
</tr>
<tr class="odd">
<td></td>
<td>ProxyDiagcData_T_rec</td>
<td>DiagcDataRec1</td>
<td>0</td>
<td>65535</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>N/A</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="description-3">Description</h2>
<p>Refer ‘ProcessRampResponse and DiagcSts’ block in Simulink path ” ES101A_DiagcMgrProxyX/DiagcMgrProxyApplX/DiagcMgrProxyApplXPer1/Update the DiagcSts/For Number of NTCs/Update DiagcSts and Ramp Response/Update Latest Values/ProcessRampResponse”</p>
<h2 id="global-function-3">GLObAL Function #3</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 45%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>DiagcMgrSetBits_u16</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Data</td>
<td>uint16</td>
<td>0</td>
<td>511</td>
</tr>
<tr class="odd">
<td></td>
<td>BitMask</td>
<td>Uint16</td>
<td>0</td>
<td>511</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>Data</td>
<td>Uint16</td>
<td>0</td>
<td>511</td>
</tr>
</tbody>
</table>
<h2 id="description-4">Description</h2>
<p>This function will set bits based on the passed BitMask for a uint16 datatype.</p>
<h2 id="global-function-4">GLObAL Function #4</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 45%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>DiagcMgrSetBits_u08</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Data</td>
<td>Uint8</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="odd">
<td></td>
<td>BitMask</td>
<td>Uint8</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>Data</td>
<td>Uint8</td>
<td>0</td>
<td>255</td>
</tr>
</tbody>
</table>
<h2 id="description-5">Description</h2>
<p>This function will set bits based on the passed BitMask for a uint8 datatype</p>
<h2 id="global-function-5">GLObAL Function #5</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 45%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>DiagcMgrClrBits_u08</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Data</td>
<td>Uint8</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="odd">
<td></td>
<td>BitMask</td>
<td>Uint8</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>Data</td>
<td>Uint8</td>
<td>0</td>
<td>255</td>
</tr>
</tbody>
</table>
<h2 id="description-6">Description</h2>
<p>This function will clear bits based on the passed BitMask for a uint8 datatype</p>
<h2 id="global-function-6">GLObAL Function #6</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 45%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>DiagcMgrReadBit_u08</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Data</td>
<td>Uint8</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="odd">
<td></td>
<td>BitMask</td>
<td>Uint8</td>
<td>0</td>
<td>255</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>Data</td>
<td>Uint8</td>
<td>0</td>
<td>255</td>
</tr>
</tbody>
</table>
<h2 id="description-7">Description</h2>
<p>This function will return TRUE if any bits are set based on the passed BitMask for a uint8 datatype</p>
<h2 id="global-function-7">GLObAL Function #7</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 45%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>DiagcMgrReadBit_u16</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Data</td>
<td>uint16</td>
<td>0</td>
<td>511</td>
</tr>
<tr class="odd">
<td></td>
<td>BitMask</td>
<td>Uint16</td>
<td>0</td>
<td>511</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>Data</td>
<td>Uint16</td>
<td>0</td>
<td>511</td>
</tr>
</tbody>
</table>
<h2 id="description-8">Description</h2>
<p>This function will return TRUE if any bits are set based on the passed BitMask for a uint16 datatype</p>
<h2 id="global-function-8">GLObAL Function #8</h2>
<table>
<colgroup>
<col style="width: 19%" />
<col style="width: 45%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Function Name</strong></td>
<td>DiagcMgrReadBit_u32</td>
<td>Type</td>
<td>Min</td>
<td>Max</td>
</tr>
<tr class="even">
<td><strong>Arguments Passed</strong></td>
<td>Data</td>
<td>uint16</td>
<td>0</td>
<td>511</td>
</tr>
<tr class="odd">
<td></td>
<td>BitMask</td>
<td>Uint16</td>
<td>0</td>
<td>65535</td>
</tr>
<tr class="even">
<td><strong>Return Value</strong></td>
<td>Data</td>
<td>Uint16</td>
<td>0</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="description-9">Description</h2>
<p>This function will return TRUE if any bits are set based on the passed BitMask for a uint32 datatype</p>
<h2 id="transient-functions">TRANSIENT FUNCTIONS </h2>
<p><em>None</em></p>
<h1 id="known-limitations-with-design">Known Limitations With Design</h1>
<ol type="1">
<li><p>Per the FDD author, safety critical data is protected in an exclusive area but there is a possibility of corruption of non critical data.</p></li>
<li><p>Refer to Design Rationale section on the top level of DiagcMgr Simulink model.</p></li>
</ol>
<h1 id="unit-test-consideration">UNIT TEST CONSIDERATION</h1>
<ol type="1">
<li><p>Config files in the contract folder are for a test project with sample configurations using Application 6 and Application 10. Therefore with this configuration, the following files cannot be tested – DiagcMgrProxyAppl0, DiagcMgrProxyAppl1, DiagcMgrProxyAppl2, DiagcMgrProxyAppl3, DiagcMgrProxyAppl4, DiagcMgrProxyAppl5, DiagcMgrProxyAppl7, DiagcMgrProxyAppl8, DiagcMgrProxyAppl9.</p></li>
</ol>
<h1 id="appendix">Appendix</h1>
<p><em>None</em></p>
