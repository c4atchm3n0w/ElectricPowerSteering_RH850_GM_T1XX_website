---
title: UserManual_Startup_with_GMLAN_GENys
linkTitle: UserManual_Startup_with_GMLAN_GENys
weight: 54
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a>&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/><b>&#160;&#160;Startup with&#160;GMLAN&#160;and &#160;&#160;</b><br/>
<b>&#160;&#160;GENy&#160;</b><br/>
&#160;&#160;&#160;User&#160;Manual&#160;<br/>&#160;&#160;&#160;&#160;(Your&#160;First Steps)&#160;<br/>&#160;<br/>&#160;<br/>&#160;&#160;&#160;&#160;Version&#160;1.0.1&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;&#160;Vector&#160;Informatik&#160;GmbH,&#160;Ingerheimer&#160;Str.&#160;24,&#160;70499&#160;Stuttgart&#160;<br/>
&#160;&#160;&#160;&#160;Tel.&#160;0711/80670-0,&#160;Fax&#160;0711/80670-399,&#160;Email<a href="mailto:can@vector-informatik.de">&#160;can@vector-informatik.de&#160;</a><br/>
&#160;&#160;&#160;&#160;Internet http:\\www.vector-informatik.de&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-2_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-2_2.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
1&#160;/&#160;32&#160;<br/>
&#160;<br/>&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
<b>Authors:&#160;&#160;</b>Klaus&#160;Emmert&#160;<br/>
<b>Version:&#160;&#160;</b>1.0.1&#160;<br/>
<b>Status:&#160;</b><br/>
in preparation&#160;(in preparation/completed/inspected/released)&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=3></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-3_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
2&#160;/&#160;32&#160;<br/>
<b>History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Klaus&#160;Emmert&#160;<br/>
2008-03-10&#160;<br/>
1.0&#160;<br/>
Created&#160;<br/>
Klaus&#160;Emmert&#160;<br/>
2011-11-11&#160;<br/>
1.0.1&#160;<br/>
Improved&#160;Understandability&#160;<br/>
&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-4_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-4_2.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
3&#160;/&#160;32&#160;<br/>
<b>Motivation&#160;For&#160;This&#160;Work&#160;<br/></b>You want&#160;to read&#160;a document&#160;and&#160;follow&#160;its&#160;installation&#160;hints&#160;and&#160;as&#160;a result&#160;the&#160;<br/>
software is&#160;basically&#160;running?&#160;Then continue reading&#160;this&#160;user&#160;manual.&#160;&#160;<br/>It&#160;is&#160;a guide through&#160;the&#160;installation&#160;of&#160;the GMLAN&#160;components,&#160;helps&#160;you to&#160;<br/>
configure you application&#160;for&#160;the&#160;needs&#160;of&#160;GMLAN&#160;and gives&#160;you precious&#160;hints&#160;for&#160;<br/>
the&#160;different&#160;requirements&#160;an ECU&#160;using&#160;GMLAN&#160;has&#160;to&#160;fulfill&#160;(PowerTrain,&#160;<br/>
SingleWire&#160;CAN…).&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
<b>WARNING&#160;</b><br/>
<b>All&#160;application code&#160;in any&#160;of&#160;the Vector&#160;User&#160;Manuals are for&#160;training&#160;</b><br/>
<b>purposes&#160;only.&#160;They&#160;are&#160;slightly&#160;tested and designed to understand the&#160;basic&#160;</b><br/>
<b>idea&#160;of&#160;using&#160;a&#160;certain component&#160;or&#160;a&#160;set&#160;of&#160;components.&#160;<br/></b>&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=5></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-5_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
4&#160;/&#160;32&#160;<br/>
<b>Contents</b>&#160;<br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#8"><b>1</b>&#160;&#160;<b>About&#160;this Document&#160;......................................................................................&#160;7</b>&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#8">1.1&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#8">Legend&#160;and Explanation&#160;of&#160;Symbols&#160;..................................................&#160;7&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#9"><b>2</b>&#160;&#160;<b>What&#160;is&#160;GMLAN&#160;................................................................................................&#160;8</b>&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#11">2.1&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#11">Virtual&#160;Networks&#160;..............................................................................&#160;10&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#13"><b>3</b>&#160;&#160;<b>Your&#160;ECU&#160;........................................................................................................&#160;12</b>&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#13">3.1&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#13">Body&#160;Bus&#160;ECU&#160;.................................................................................&#160;12&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#14">3.2&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#14">Infotainment&#160;ECU&#160;............................................................................&#160;13&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#14">3.3&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#14">PowerTrain ECU&#160;(or&#160;Chassis&#160;expansion or&#160;Powertrain&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#14">expansion)&#160;.......................................................................................&#160;13&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#15"><b>4</b>&#160;&#160;<b>GMLAN&#160;In 6 Steps&#160;.........................................................................................&#160;14</b>&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#16">4.1&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#16">STEP 1&#160;&#160;&#160;Prepare Your&#160;Software Project&#160;.........................................&#160;15&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#17">4.2&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#17">STEP&#160;2&#160;&#160;&#160;Configuration&#160;Tool&#160;GENy&#160;and DBC&#160;File&#160;............................&#160;16&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#19">4.2.1&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#19">Setting&#160;of&#160;Generation Paths&#160;.............................................................&#160;18&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#19">4.2.2&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#19">Component&#160;Selection&#160;......................................................................&#160;18&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#19">4.2.3&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#19">Tree&#160;view&#160;–&#160;A&#160;List&#160;of&#160;all&#160;selected components&#160;.................................&#160;18&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#20">4.2.4&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#20">HW_&lt;microcontroller&gt;&#160;.....................................................................&#160;19&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#20">4.2.5&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#20">Nm_Gmlan_Gm&#160;...............................................................................&#160;19&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#21">4.2.6&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#21">Tp_Iso15765....................................................................................&#160;20&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#21">4.2.7&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#21">Diagnostics&#160;–&#160;Diag_CanDesc_KWP&#160;................................................&#160;20&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#22">4.2.8&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#22">DrvCan_&lt;microcontroller&gt;&#160;...............................................................&#160;21&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#24">4.2.9&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#24">Settings&#160;are Finished&#160;.......................................................................&#160;23&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#25">4.3&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#25">STEP&#160;3&#160;&#160;&#160;Add Files&#160;to Your&#160;Application&#160;............................................&#160;24&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#25">4.4&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#25">STEP 4&#160;&#160;Adaptations&#160;For&#160;Your&#160;Application&#160;......................................&#160;24&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#25">4.4.1&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#25">Includes&#160;...........................................................................................&#160;24&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#25">4.4.2&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#25">Initialization&#160;......................................................................................&#160;24&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#26">4.4.3&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#26">Cyclic&#160;calls&#160;to&#160;keep&#160;the components&#160;running&#160;...................................&#160;25&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#26">4.4.4&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#26">Provide&#160;Callback&#160;functions&#160;...............................................................&#160;25&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#28">4.5&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#28">STEP&#160;5&#160; Compile And Link&#160;..............................................................&#160;27&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#28">4.6&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#28">STEP 6&#160;&#160;Test&#160;the&#160;Software Component&#160;...........................................&#160;27&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#29"><b>5</b>&#160;&#160;<b>Further&#160;Information&#160;.......................................................................................&#160;28</b>&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#29">5.1&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#29">Full&#160;CAN&#160;Message&#160;Transmission with Extended Ids&#160;........................&#160;28&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#29">5.2&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#29">Take&#160;care&#160;when working&#160;with VNs&#160;...................................................&#160;28&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#30">5.3&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#30">Validity&#160;of&#160;Signals&#160;............................................................................&#160;29&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#30">5.4&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#30">Signals&#160;assigned&#160;to&#160;different&#160;VNs&#160;and located in&#160;one message&#160;.......&#160;29&#160;</a><br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=6></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-6_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
5&#160;/&#160;32&#160;<br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#31">5.5&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#31">Source Learning&#160;for&#160;Single&#160;Wire CAN&#160;with Mixed Identifiers&#160;(11&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#31">bit&#160;and 29&#160;bit)&#160;...................................................................................&#160;30&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#31">5.6&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#31">Activation and deactivation of&#160;VNs&#160;...................................................&#160;30&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#31">5.6.1&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#31">IlNwmActivateVN(&#160;channel,&#160;VN)&#160;......................................................&#160;30&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#31">5.7&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#31">llNwmDeactivateVN&#160;.........................................................................&#160;30&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#32"><b>6</b>&#160;&#160;<b>Index&#160;.................................................................................................................&#160;1</b>&#160;</a><br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-7_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
6&#160;/&#160;32&#160;<br/>
<b>Illustrations</b>&#160;<br/><a href="UserManual_Startup_with_GMLAN_GENys.html#9">Figure&#160;&#160;2-1&#160;&#160;GMLAN&#160;Layers&#160;with standard and&#160;optional&#160;components&#160;............................&#160;8&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#11">Figure&#160;&#160;2-2&#160;&#160;Virtual&#160;Networks&#160;.......................................................................................&#160;10&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#17">Figure&#160;&#160;4-1&#160;&#160;Setup Dialog&#160;.............................................................................................&#160;16&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#17">Figure&#160;&#160;4-2&#160;&#160;Add data&#160;base&#160;file&#160;for&#160;a&#160;certain bus&#160;system,&#160;here&#160;CAN.&#160;............................&#160;16&#160;<br/></a><a href="UserManual_Startup_with_GMLAN_GENys.html#18">Figure&#160;&#160;4-3&#160;&#160;Channel&#160;Setup Window&#160;............................................................................&#160;17&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#19">Figure&#160;&#160;4-4&#160;&#160;Paths&#160;To&#160;Generate&#160;Files&#160;to&#160;destined folders&#160;.............................................&#160;18&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#19">Figure&#160;&#160;4-5&#160;&#160;Component&#160;Selection&#160;...............................................................................&#160;18&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#20">Figure&#160;&#160;4-6&#160;&#160;Tree&#160;View&#160;of&#160;all&#160;selected&#160;components&#160;......................................................&#160;19&#160;<br/></a><a href="UserManual_Startup_with_GMLAN_GENys.html#21">Figure&#160;&#160;4-7&#160;&#160;Settings&#160;for&#160;GMLAN&#160;..................................................................................&#160;20&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#22">Figure&#160;&#160;4-8&#160;&#160;Path&#160;to&#160;the&#160;CDD&#160;file on&#160;the Configuration View&#160;of&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#22">Diag_CanDesc_KWP&#160;...............................................................................&#160;21&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#22">Figure&#160;&#160;4-9&#160;&#160;Acceptance Filters&#160;and Bus&#160;timing are&#160;channel-dependent&#160;settings&#160;.........&#160;21&#160;<br/></a><a href="UserManual_Startup_with_GMLAN_GENys.html#23">Figure&#160;&#160;4-10&#160;&#160;CAN Bus&#160;Timing&#160;Register&#160;Setup...............................................................&#160;22&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#24">Figure&#160;&#160;4-11&#160;&#160;Success&#160;Window&#160;containing&#160;Information about&#160;Generated&#160;Files.&#160;..............&#160;23&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#29">Figure&#160;&#160;5-1&#160;&#160;Extended CAN&#160;Identifier&#160;29bit&#160;..................................................................&#160;28&#160;</a><br/>
<a href="UserManual_Startup_with_GMLAN_GENys.html#30">Figure&#160;&#160;5-2&#160;&#160;Signals&#160;of&#160;Different&#160;VNs&#160;in One&#160;Message&#160;.................................................&#160;29&#160;</a><br/>
&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=8></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-8_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-8_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-8_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-8_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-8_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-8_6.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-8_7.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-8_8.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
7&#160;/&#160;32&#160;<br/>
<b>1&#160;&#160;About&#160;this&#160;Document&#160;</b><br/>
This&#160;document&#160;gives&#160;you an understanding of&#160;GMLAN.&#160;You will&#160;receive general&#160;<br/>
information,&#160;a step-by-step tutorial&#160;to get&#160;the&#160;Startup&#160;with&#160;GMLAN&#160;running.&#160;<br/>
<b>1.1&#160;&#160;Legend and Explanation of&#160;Symbols&#160;<br/></b>You find these symbols&#160;at&#160;the right&#160;side of&#160;the document.&#160;Use this&#160;helpful feature&#160;to&#160;<br/>
find&#160;fast&#160;the topics,&#160;you&#160;need information&#160;about.&#160;<br/>
These areas&#160;<br/>
to the&#160;right&#160;of&#160;<br/>
<b>Symbol&#160;</b><br/>
<b>Meaning&#160;</b><br/>
the text&#160;<br/>
contain brief&#160;<br/>
items&#160;of&#160;<br/>
The building&#160;bricks&#160;mark&#160;examples.&#160;<br/>
information&#160;<br/>
that&#160;will&#160;<br/>
&#160;<br/>
facilitate&#160;your&#160;<br/>
search for&#160;<br/>
Comm&#160;&#160;<br/>
ents&#160;<br/>
You&#160;will&#160;find key&#160;words&#160;and&#160;information in&#160;short&#160;sentences&#160;in the margin.&#160; This&#160;will&#160;<br/>
and&#160;<br/>
specific&#160;<br/>
explanation<br/>
&#160;<br/>
greatly&#160;simplify&#160;your&#160;search&#160;for&#160;topics.&#160;<br/>
topics.&#160;<br/>
The footprints&#160;will&#160;lead&#160;you&#160;through the steps&#160;until&#160;you&#160;can use the&#160;Startup with&#160;<br/>
GMLAN.&#160;<br/>
&#160;<br/>
There is&#160;something&#160;you should take care about.&#160;<br/>
&#160;<br/>
Useful&#160;and&#160;additional&#160;information is&#160;displayed in areas&#160;with this&#160;symbol.&#160;<br/>
&#160;<br/>
This&#160;file you&#160;are allowed&#160;to edit&#160;on demand.&#160;<br/>
&#160;<br/>
This&#160;file&#160;you must&#160;not&#160;edit&#160;at&#160;all.&#160;&#160;<br/>
&#160;<br/>
This&#160;indicates&#160;an&#160;area&#160;dealing&#160;with frequently&#160;asked questions&#160;(FAQ).&#160;<br/>
&#160;<br/>
&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=9></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-9_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-9_2.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
8&#160;/&#160;32&#160;<br/>
<b>2&#160;&#160;What&#160;is GMLAN&#160;</b><br/>
<b>GMLAN&#160;is&#160;CANbedded for&#160;GM&#160;<br/></b>GMLAN&#160;is&#160;General&#160;Motors'&#160;network&#160;operating&#160;software,&#160;which is&#160;supplied&#160;<br/>
exclusively&#160;by&#160;Vector.&#160;Vector&#160;has&#160;great&#160;experience with GMLAN&#160;from&#160;its&#160;beginning&#160;<br/>
on since 1999.&#160;Used&#160;by&#160;GM&#160;and its&#160;subsidiaries&#160;worldwide,&#160;GMLAN&#160;provides&#160;a&#160;<br/>
multi-layered network&#160;software solution&#160;for&#160;CAN&#160;bus&#160;management&#160;and access.&#160;&#160;<br/>GMLAN&#160;consists&#160;of&#160;mandatory&#160;components&#160;and optional&#160;components.&#160;<br/>Vector&#160;provides&#160;all&#160;current&#160;GMLAN&#160;software implementations&#160;and&#160;each software&#160;<br/>
implementation&#160;is:&#160;<br/>&#160;&#160;Microcontroller-specific&#160;<br/>
&#160;&#160;CAN controller-specific&#160;<br/>
&#160;&#160;Compiler-specific&#160;<br/>&#160;<br/>
&#160;<br/>
Figure&#160;&#160;2-1&#160;GMLAN&#160;Layers&#160;with standard and&#160;optional&#160;components&#160;<br/>
&#160;<br/>&#160;<br/>
<b>Mandatory&#160;components&#160;of&#160;GMLAN&#160;<br/>CAN Driver&#160;<br/></b>The&#160;CAN Driver&#160;interconnects&#160;to the CAN&#160;controller, manages&#160;CAN&#160;transmission&#160;<br/>
and&#160;&#160;reception, handles&#160;CAN initialization, bit&#160;&#160;rate, sample&#160;&#160;point,&#160;&#160;SJW&#160;value&#160;&#160;and&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-10_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-10_2.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
9&#160;/&#160;32&#160;<br/>
filtering.&#160;The&#160;CAN Driver&#160;interfaces&#160;with the GM-specific&#160;network&#160;software&#160;&#160;and&#160;<br/>
provides&#160;a common&#160;low-level interface&#160;across&#160;a variety&#160;of&#160;CAN&#160;controllers.&#160;<br/><b>Interaction&#160;Layer&#160;<br/></b>It handles&#160;message&#160;reception,&#160;&#160;transmission,&#160;&#160;event&#160;&#160;and&#160;&#160;periodic&#160;messages,&#160;<br/>
manages&#160;Virtual&#160;Network&#160;initialization&#160;and&#160;fault&#160;detection&#160;(signal faults,&#160;VN faults).&#160;<br/><b>Transport&#160;Protocol&#160;<br/></b>The Transport&#160;Protocol&#160;implements&#160;the requirements&#160;of&#160;GMLAN&#160;network&#160;layer&#160;and&#160;<br/>
is&#160;primarily&#160;used for&#160;diagnostics. It manages&#160;large data transfers&#160;using&#160;USDT&#160;with&#160;<br/>
data&#160;size up to 4095&#160;bytes.&#160;The&#160;Transport&#160;Protocol&#160;is&#160;based on ISO&#160;15765.&#160;<br/><b>GMLAN&#160;Network Management&#160;<br/></b>It handles&#160;both&#160;node&#160;&#160;and&#160;network&#160;management, manages&#160;communication states&#160;<br/>
(active,&#160;enabled,&#160;sleep). It manages&#160;node&#160;states&#160;(power&#160;up,&#160;sleep,&#160;wake up)&#160;and&#160;<br/>
the virtual&#160;networks.&#160;It&#160;also handles&#160;the use of&#160;the&#160;VNMF&#160;message.&#160;<br/><b>Configuration Tool</b>&#160;<br/>It is&#160;PC-based&#160;and&#160;operates&#160;with&#160;Windows&#160;2000/XP.&#160;The configuration tool&#160;is&#160;<br/>
delivered with the&#160;GMLAN&#160;Software Components&#160;and is&#160;used&#160;to&#160;scale the software&#160;<br/>
down to your&#160;specific&#160;needs,&#160;to&#160;optimize&#160;the&#160;use&#160;of ROM&#160;/&#160;RAM&#160;resources&#160;and&#160;to&#160;<br/>
select&#160;the GMLAN&#160;features&#160;that&#160;require integration into your&#160;ECU.&#160;<br/>&#160;<br/>
<b>Info</b>&#160;<br/>
The CAN&#160;Driver&#160;and&#160;the Transport&#160;Protocol&#160;are&#160;standard components&#160;and are&#160;not&#160;GM-specific.&#160;<br/>
The&#160;main difference of&#160;the&#160;GMLAN&#160;software&#160;stack&#160;in comparison with&#160;other&#160;OEM-specific stacks&#160;<br/>
is&#160;the&#160;Interaction&#160;Layer&#160;/&#160;GMLAN&#160;Network&#160;Management&#160;and the concepts&#160;of&#160;the&#160;virtual&#160;networks.&#160;<br/>&#160;<br/>
<b>Additional&#160;components,&#160;optional&#160;available:&#160;<br/>Diagnostics&#160;-&#160;CANdesc</b>&#160;<br/>
&#160;&#160;<b>HIGHLY&#160;RECOMMENDED by&#160;GM!</b>&#160;<br/>
This&#160;is&#160;a&#160;functional&#160;&#160;interface for&#160;diagnostic&#160;&#160;services&#160;based upon the&#160;CDD&#160;<br/>
diagnostic&#160;data&#160;&#160;base&#160;created&#160;by&#160;CANdelaStudio.&#160;It&#160;fulfills&#160;the requirements&#160;of&#160;<br/>
GMW3110, V1.5&#160;&#160;and&#160;&#160;handles&#160;direct&#160;processing&#160;of&#160;CAN-specific&#160;&#160;diagnostic&#160;<br/>
requests&#160;(enable/disable&#160;normal&#160;message&#160;transmission),&#160;negative&#160;responses&#160;(e.g.&#160;<br/>
service not&#160;available),&#160;exceptions&#160;&#160;(e.g.&#160;&#160;busy,&#160;&#160;request&#160;&#160;pending)&#160;and address&#160;<br/>
handling&#160;(detection of&#160;response&#160;&#160;service&#160;&#160;identification).&#160;It&#160;also supports&#160;UUDT-<br/>
message&#160;transmission.&#160;Testing&#160;of&#160;diagnostic&#160;is&#160;easy&#160;using&#160;CANdito,&#160;CANoe&#160;or&#160;<br/>
CANape&#160;&#160;<br/><b>Communication Control&#160;Layer&#160;CCL&#160;<br/></b>It supports&#160;integration of&#160;the&#160;software&#160;components&#160;CAN&#160;Driver,&#160;Interaction Layer,&#160;<br/>
Network&#160;Management,&#160;Transport&#160;Protocol&#160;and Diagnostics.&#160;<br/>Also it&#160;provides&#160;an abstraction&#160;for&#160;different&#160;vehicle manufacturers,&#160;microcontrollers,&#160;<br/>
compiler/linker,&#160;&#160;CAN&#160;controllers&#160;/&#160;transceivers.&#160;It&#160;supports&#160;a global&#160;&#160;debug&#160;<br/>
mechanism&#160;and is&#160;configured via&#160;the&#160;configuration tool.&#160;<br/><b>Measurement&#160;and Calibration (CCP/XCP)&#160;</b><br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=11></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-11_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-11_2.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
10&#160;/&#160;32&#160;<br/>
The&#160;CCP/XCP&#160;is&#160;a&#160;high performance CAN-based monitor&#160;program. It supports&#160;<br/>
memory&#160;read&#160;/&#160;write&#160;and&#160;calibration&#160;activities&#160;and provides&#160;data acquisition. It can&#160;<br/>
also be used&#160;for&#160;flash programming&#160;&#160;and data&#160;security. It&#160;works&#160;with Vector’s&#160;<br/>
CANape tool.&#160;<br/>&#160;<br/>
<b>2.1&#160;&#160;Virtual&#160;Networks&#160;<br/></b>In&#160;general&#160;the&#160;ECUs&#160;form&#160;a&#160;network&#160;where every&#160;ECU&#160;is&#160;a network&#160;node.&#160;&#160;<br/>The concept&#160;of&#160;GMLAN&#160;Network&#160;Management&#160;groups&#160;distributed&#160;functions&#160;into so-<br/>
called&#160;Virtual Networks&#160;(VNs).&#160;<br/>&#160;<br/>
&#160;<br/>
Figure&#160;&#160;2-2&#160;Virtual&#160;Networks&#160;<br/>
&#160;<br/>
<b>What&#160;comes&#160;along with&#160;this&#160;concept?&#160;<br/></b>&#160;&#160;Each&#160;VN&#160;is&#160;a&#160;functional&#160;entity&#160;of&#160;GMLAN.&#160;<br/>
&#160;&#160;The location&#160;of&#160;a VN&#160;or&#160;parts&#160;of&#160;it&#160;is&#160;independent&#160;of&#160;the&#160;physical&#160;partitioning&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-12_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
11&#160;/&#160;32&#160;<br/>
&#160;&#160;The VNs&#160;are spread&#160;over&#160;the different&#160;ECUs.&#160;An ECU&#160;can&#160;only&#160;go to sleep&#160;<br/>
mode,&#160;if&#160;all&#160;VNs&#160;inside&#160;are asleep.&#160;&#160;<br/>
&#160;&#160;Each VN&#160;handles&#160;its&#160;related signals,&#160;the&#160;use&#160;of&#160;the&#160;network&#160;and&#160;may&#160;include&#160;<br/>
sleep/wakeup.&#160;<br/>
&#160;&#160;Related&#160;signals&#160;are grouped according&#160;to&#160;their&#160;function&#160;<br/>
&#160;&#160;A&#160;message can contain signals&#160;of&#160;different&#160;VNs.&#160;There&#160;must&#160;be&#160;a&#160;decision&#160;<br/>
whether&#160;a signal&#160;of&#160;a&#160;VN&#160;is&#160;valid (VN&#160;awake)&#160;or&#160;not&#160;(VN&#160;sleeps).&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-13_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
12&#160;/&#160;32&#160;<br/>
<b>3&#160;&#160;Your&#160;ECU&#160;</b><br/>
Before you start&#160;with implementing&#160;GMLAN&#160;Software Components&#160;take a look&#160;at&#160;<br/>
the ECU&#160;you&#160;have to&#160;develop regarding&#160;the&#160;following&#160;questions:&#160;<br/>&#160;<br/>&#160;&#160;Is&#160;it a&#160;<b>Body&#160;Bus&#160;</b>ECU?&#160;With Single&#160;Wire&#160;CAN&#160;and&#160;mixed IDs&#160;(11bit&#160;and&#160;29bit)&#160;<br/>
or&#160;11&#160;bit&#160;IDs&#160;only? Is&#160;it&#160;a multiple Identity&#160;ECU?&#160;&#160;<br/>&#160;&#160;Is&#160;it an&#160;<b>Infotainment</b>&#160;ECU?&#160;&#160;<br/>&#160;&#160;Is&#160;it a&#160;<b>Powertrain</b>&#160;ECU?&#160;&#160;<br/>The above mentioned&#160;kinds&#160;of&#160;ECUs&#160;and bus&#160;systems&#160;have&#160;many&#160;settings&#160;in&#160;<br/>
common and differ&#160;in special&#160;settings.&#160;<br/>The&#160;following&#160;installation description&#160;shows&#160;typical&#160;configurations&#160;including&#160;the&#160;<br/>
differences&#160;for&#160;the&#160;three mentioned cases.&#160;<br/>
<b>3.1&#160;&#160;Body&#160;Bus&#160;ECU&#160;</b><br/>
<b>Single&#160;Wire&#160;CAN&#160;Mixed Identifiers&#160;(11bit&#160;and 29bit)&#160;<br/></b>&#160;&#160;Typically&#160;33.333&#160;kBaud&#160;<br/>
&#160;&#160;1 wire&#160;(&#160;bus&#160;communication&#160;possible&#160;while other&#160;ECUs&#160;are in sleep&#160;mode)&#160;<br/>
&#160;&#160;2 initialization objects&#160;predefined:&#160;33.333 kBaud&#160;and&#160;83.333 kBaud&#160;for&#160;flashing&#160;<br/>
&#160;&#160;29 bit&#160;application&#160;messages&#160;<br/>
&#160;&#160;Source Learning&#160;<br/>
&#160;&#160;Flexible monitoring&#160;of&#160;receive messages&#160;<br/>
<b>Single&#160;Wire&#160;CAN&#160;11&#160;Bit&#160;Identifier&#160;<br/></b>&#160;&#160;Typically&#160;33.333&#160;kBaud&#160;<br/>
&#160;&#160;1 wire&#160;(&#160;bus&#160;communication&#160;possible&#160;while other&#160;ECUs&#160;are in sleep&#160;mode)&#160;<br/>
&#160;&#160;2 initialization objects&#160;predefined:&#160;33.333 kBaud&#160;and&#160;83.333 kBaud&#160;for&#160;flashing&#160;<br/>
<b>Multiple&#160;ECU&#160;on Single&#160;Wire&#160;CAN&#160;<br/></b>&#160;&#160;Used&#160;for&#160;nodes&#160;that&#160;exist&#160;more&#160;than&#160;once in a&#160;car&#160;with only&#160;a few&#160;differences&#160;<br/>
&#160;&#160;At&#160;power&#160;up&#160;the application&#160;decides&#160;by&#160;means&#160;of&#160;a&#160;function&#160;call&#160;(see&#160;below),&#160;<br/>
which node should be&#160;realized,&#160;e.g.&#160;left&#160;passenger&#160;door,&#160;or&#160;right&#160;driver&#160;door.&#160;<br/>
&#160;&#160;To&#160;reduce the&#160;memory&#160;consumption&#160;messages&#160;that&#160;are&#160;sent&#160;exclusively&#160;from&#160;<br/>
one&#160;node can be overlapped with the&#160;exclusively&#160;sent&#160;messages&#160;from&#160;the other&#160;<br/>
nodes.&#160;The result&#160;of&#160;this&#160;overlapping&#160;is&#160;that&#160;all&#160;these messages&#160;share a&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=14></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-14_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
13&#160;/&#160;32&#160;<br/>
common memory&#160;location&#160;for&#160;the&#160;transmit&#160;data.&#160;This&#160;can be configured&#160;<br/>
manually&#160;in the&#160;<b>Send&#160;message</b>&#160;tab in&#160;the Configuration&#160;Tool.&#160;<br/>
<b>3.2&#160;&#160;Infotainment&#160;ECU&#160;<br/></b>&#160;&#160;CAN Class&#160;C&#160;<br/>
&#160;&#160;125&#160;kBaud&#160;<br/>
&#160;&#160;2 wires&#160;<br/>
&#160;&#160;Able to be woken up&#160;<br/>
&#160;&#160;Mixed IDs&#160;<br/>
<b>3.3&#160;&#160;PowerTrain ECU&#160;(or&#160;Chassis&#160;expansion&#160;or&#160;Powertrain&#160;expansion)&#160;<br/></b>&#160;&#160;CAN Class&#160;C&#160;<br/>
&#160;&#160;500 kBaud&#160;<br/>
&#160;&#160;2 wires&#160;<br/>
&#160;&#160;Clamp&#160;15 with and without&#160;follow-up time&#160;<br/>
&#160;&#160;Shared local-input&#160;activated VN&#160;<br/>
&#160;&#160;Special&#160;bus&#160;off&#160;recovery time&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-15_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
14&#160;/&#160;32&#160;<br/>
<b>4&#160;&#160;GMLAN In&#160;6&#160;Steps&#160;</b><br/>
<b>STEP 1&#160;:</b>&#160;<a href="UserManual_Startup_with_GMLAN_GENys.html#16">&#160;<b>PREPARE&#160;YOUR SOFTWARE&#160;PROJECT</b>&#160;</a>&#160;<br/>
Create&#160;folders&#160;in&#160;your&#160;application&#160;to&#160;store&#160;the&#160;delivered&#160;source&#160;code&#160;components&#160;and&#160;<br/>
the generated&#160;files&#160;in.&#160;<br/>&#160;<br/>&#160;<br/>
<b>STEP 2:&#160;&#160;&#160;<a href="UserManual_Startup_with_GMLAN_GENys.html#17">CONFIGURATION&#160;TOOL&#160;AND&#160;DATA&#160;BASE&#160;FILE&#160;</a></b><b>&#160;</b><br/>
Read-in the data base files&#160;that&#160;should be provided from&#160;your&#160;OEM (DBC&#160;file /&#160;CDD&#160;file&#160;<br/>
for&#160;diagnostics)&#160;in the Configuration Tool&#160;and make the configuration settings&#160;for&#160;the&#160;<br/>
CANbedded&#160;Software Components.&#160;<br/>&#160;<br/>&#160;<br/>
<b>STEP 3:</b>&#160;&#160;<a href="UserManual_Startup_with_GMLAN_GENys.html#25"><b>ADD&#160;FILES&#160;TO YOUR&#160;APPLICATION</b>&#160;</a><br/>
Add&#160;the&#160;CANbedded C&#160;and&#160;H&#160;files&#160;to&#160;your&#160;project&#160;or&#160;makefile.&#160;<br/>&#160;<br/>&#160;<br/>
<b>STEP 4:&#160;&#160;&#160;<a href="UserManual_Startup_with_GMLAN_GENys.html#25">ADAPTATIONS&#160;FOR&#160;YOUR&#160;APPLICATION&#160;</a></b><br/>
Now&#160;your&#160;application files&#160;must&#160;be&#160;modified to use the CANbedded Software&#160;<br/>Components&#160;(includes,&#160;cyclic&#160;calls,&#160;initialization)&#160;and&#160;do the&#160;call&#160;back&#160;functions.&#160;<br/>&#160;<br/>&#160;<br/>
<b>STEP 5:&#160;&#160;&#160;<a href="UserManual_Startup_with_GMLAN_GENys.html#28">COMPILE&#160;AND LINK&#160;</a></b><br/>
Compile and&#160;link&#160;the complete project&#160;and download&#160;it&#160;to&#160;your&#160;test&#160;hardware or&#160;<br/>
development&#160;environment.&#160;<br/>&#160;<br/>&#160;<br/>
<b>STEP 6:&#160;&#160;&#160;<a href="UserManual_Startup_with_GMLAN_GENys.html#28">TEST&#160;THE SOFTWARE COMPONENT&#160;</a></b><br/>
Test&#160;the software&#160;via a&#160;suitable test&#160;environment.&#160;<br/>
&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-16_1.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-16_2.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-16_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-16_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-16_5.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
15&#160;/&#160;32&#160;<br/>
<b>4.1&#160;&#160;STEP 1&#160;&#160;&#160;&#160;Prepare Your&#160;Software Project&#160;<br/></b>Following the GM_Readme&#160;&#160;document&#160;you have already&#160;installed the delivered&#160;<br/>
GMLAN&#160;Software Implementation&#160;package.&#160;To&#160;use&#160;the GMLAN&#160;components&#160;for&#160;<br/>
your&#160;application copy&#160;the needed component&#160;source code into your&#160;project&#160;folder.&#160;&#160;<br/>Normally&#160;these&#160;are the&#160;following&#160;component&#160;folders:&#160;<br/>
&#160;<br/>
This&#160;includes&#160;the code&#160;for&#160;the&#160;CAN&#160;Driver,&#160;the Interaction&#160;Layer,&#160;the&#160;Network&#160;<br/>
Management&#160;(GMLAN)&#160;and the&#160;Transport&#160;Protocol.&#160;&#160;<br/>&#160;<br/>
&#160;<br/>
<b>Info</b>&#160;<br/>
For&#160;the&#160;diagnostic&#160;there is&#160;an additional&#160;software component&#160;of&#160;Vector&#160;Informatik&#160;available&#160;-&#160;<br/>
CANdesc.&#160;This&#160;component&#160;is&#160;completely&#160;generated;&#160;you&#160;won’t&#160;find any&#160;source code in&#160;your&#160;<br/>
delivery.&#160;<br/>&#160;<br/>
&#160;<br/>
A&#160;folder&#160;<b>gendata</b>&#160;is&#160;optional&#160;but&#160;recommended to&#160;be&#160;the&#160;target&#160;for&#160;all&#160;the&#160;data that&#160;<br/>
is&#160;generated by&#160;the&#160;Configuration&#160;Tool.&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=17></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-17_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-17_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-17_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-17_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-17_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-17_6.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
16&#160;/&#160;32&#160;<br/>
<b>4.2&#160;&#160;STEP 2&#160;&#160;&#160;&#160;Configuration Tool&#160;GENy&#160;and DBC&#160;File&#160;<br/></b>&#160;<br/>
<b>Info</b>&#160;<br/>
Use the&#160;online help of&#160;the configuration tool&#160;GENy&#160;for&#160;more information about&#160;using GENy&#160;and&#160;its&#160;<br/>
concepts.&#160;You additionally&#160;find a&#160;comparison&#160;between GENy&#160;and&#160;CANgen.&#160;&#160;<br/>&#160;<br/>Start&#160;the Configuration&#160;Tool&#160;&#160;GENy.exe.&#160;Select&#160;pre-configuration&#160;file,&#160;<br/>
microcontroller,&#160;derivative and compiler&#160;in&#160;the&#160;first&#160;<b>Setup Dialog</b>&#160;window.&#160;&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-1&#160;Setup Dialog&#160;<br/>
The&#160;<b>Preconfiguration</b>&#160;selection&#160;determines&#160;which settings&#160;are preset&#160;in GENy&#160;and&#160;<br/>
which settings&#160;are not&#160;shown at&#160;all.&#160;This&#160;makes&#160;configuration&#160;for&#160;you very&#160;easy.&#160;&#160;<br/>There is&#160;available:&#160;&#160;<br/>&#160;&#160;Bodybus&#160;<br/>
&#160;&#160;Infotainment&#160;<br/>
&#160;&#160;Powertrain&#160;<br/>&#160;<br/>Then go&#160;on with adding&#160;a data base&#160;file&#160;using&#160;the green&#160;plus&#160;&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-2&#160;Add data&#160;base&#160;file&#160;for&#160;a&#160;certain bus&#160;system,&#160;here CAN.&#160;<br/>
&#160;<br/>
<b>Info</b>&#160;<br/>
The&#160;DBC&#160;file&#160;is&#160;designed&#160;by&#160;the&#160;vehicle manufacturer&#160;and&#160;distributed to&#160;all&#160;suppliers&#160;that&#160;develop&#160;an&#160;<br/>
ECU.&#160;Thus&#160;every&#160;supplier&#160;uses&#160;the SAME&#160;DBC&#160;file for&#160;one&#160;vehicle platform&#160;and one bus&#160;system&#160;<br/>
(powertrain,&#160;body&#160;CAN&#160;etc.)&#160;to guarantee a&#160;common basis&#160;for&#160;development.&#160;<br/>The DBC&#160;file&#160;contains&#160;e.g.&#160;information about&#160;every&#160;node in&#160;the&#160;network,&#160;the messages/signals&#160;each&#160;<br/>
node&#160;has&#160;to send&#160;or&#160;to&#160;receive.&#160;The distribution of&#160;the signals&#160;among the messages&#160;is&#160;stored in the&#160;<br/>
DBC&#160;file, too.&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=18></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-18_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-18_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-18_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-18_4.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
17&#160;/&#160;32&#160;<br/>
&#160;<br/>Use the&#160;browse button&#160;<b>[…]</b>&#160;to select&#160;your&#160;data base&#160;file (DBC).&#160;&#160;<br/>
As&#160;you&#160;will use&#160;a&#160;<br/>
different&#160;data&#160;<br/>
base file&#160;you&#160;will&#160;<br/>
get&#160;more&#160;and&#160;<br/>
other&#160;data base&#160;<br/>
nodes&#160;displayed.&#160;&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-3&#160;Channel&#160;Setup Window&#160;<br/>
&#160;<br/>The Nodes&#160;list&#160;shows&#160;all&#160;available ECUs&#160;within the&#160;CAN&#160;network.&#160;Select&#160;yours.&#160;<br/>&#160;<br/>
<b>Caution&#160;for&#160;Multiple&#160;ECUs&#160;</b><br/>
Use the&#160;&lt;Strg&gt;&#160;key&#160;to mark&#160;more than one ECU&#160;in the&#160;Nodes&#160;<br/>
list&#160;box&#160;then the Multiple Nodes&#160;section&#160;will&#160;be accessible.&#160;<br/>Confirm&#160;with&#160;<b>[OK]</b>.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-19_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-19_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-19_3.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
18&#160;/&#160;32&#160;<br/>
<b>4.2.1&#160;&#160;Setting of&#160;Generation&#160;Paths&#160;&#160;<br/></b>Open&#160;the menu&#160;<b>Configuration|Generation Paths…</b>&#160;&#160;to set&#160;the&#160;paths&#160;where&#160;the&#160;<br/>
Configuration Tool&#160;has&#160;to generate&#160;the&#160;files&#160;in.&#160;Here we use the&#160;folder&#160;<b>gendata</b>&#160;to&#160;<br/>
collect&#160;all&#160;generated&#160;files.&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-4&#160;Paths&#160;To&#160;Generate Files&#160;to&#160;destined folders&#160;<br/>
Enter&#160;your&#160;<b>Root&#160;Path&#160;for&#160;relative&#160;directories</b>.&#160;Additionally&#160;you can&#160;add extra path&#160;<br/>
extensions&#160;below&#160;the&#160;<b>Path</b>&#160;&#160;column.&#160;Always&#160;make sure that&#160;the&#160;<b>Resolved&#160;&#160;Path</b>&#160;<br/>
points&#160;to the correct&#160;path!&#160;<br/>
<b>4.2.2&#160;&#160;Component&#160;Selection&#160;<br/></b>Use the Component&#160;Selection&#160;to&#160;choose&#160;all&#160;components&#160;you need&#160;for&#160;your&#160;project.&#160;<br/>
The screenshot&#160;below&#160;shows&#160;a possible&#160;selection.&#160;&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-5&#160;Component&#160;Selection&#160;<br/>
<b>4.2.3&#160;&#160;Tree view&#160;–&#160;A&#160;List&#160;of&#160;all&#160;selected components&#160;<br/></b>All&#160;components&#160;selected before are now&#160;displayed in the&#160;<b>Tree&#160;View</b>&#160;&#160;below&#160;<br/>
<b>MyECU|Components</b>.&#160;&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-20_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-20_2.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
19&#160;/&#160;32&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-6&#160;Tree View&#160;of&#160;all&#160;selected components&#160;<br/>
Now&#160;select&#160;the different&#160;components&#160;to perform&#160;their&#160;individual&#160;configuration&#160;in&#160;<br/>
their&#160;<b>Configuration View</b>&#160;right&#160;besides&#160;the&#160;<b>Tree View</b>.&#160;<br/>
<b>4.2.4&#160;&#160;HW_&lt;microcontroller&gt;&#160;&#160;<br/></b>This&#160;contains&#160;the hardware specific&#160;CAN&#160;driver&#160;settings&#160;for&#160;your&#160;controller.&#160;Refer&#160;to&#160;<br/>
the manual&#160;TechnicalReference_CANDriver_&lt;hardware&gt;.pdf&#160;and&#160;to&#160;your&#160;controller&#160;<br/>
manual&#160;for&#160;more information.&#160;<br/>
<b>4.2.5&#160;&#160;Nm_Gmlan_Gm&#160;<br/></b>These settings&#160;are&#160;derived&#160;from&#160;the data&#160;base&#160;file.&#160;For&#160;this&#160;first&#160;start-up you can&#160;<br/>
work&#160;with the default&#160;settings.&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-21_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-21_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-21_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-21_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-21_5.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
20&#160;/&#160;32&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-7&#160;Settings&#160;for&#160;GMLAN&#160;<br/>
All&#160;necessary&#160;settings&#160;for&#160;the&#160;VNs&#160;are&#160;already&#160;done derived from&#160;the&#160;data base&#160;file.&#160;&#160;<br/>&#160;<br/>
<b>Info&#160;<br/></b>Attributes&#160;are<b>&#160;</b>defined&#160;in&#160;the&#160;data&#160;base&#160;to specify&#160;the&#160;characteristics&#160;of&#160;a network,&#160;an ECU,&#160;a&#160;<br/>
network&#160;node,&#160;a message or&#160;a signal.&#160;These settings&#160;are common&#160;for&#160;all&#160;ECUs&#160;that&#160;are&#160;based upon&#160;<br/>
this&#160;data&#160;base file.&#160;&#160;<br/>
E.g.&#160;the attribute&#160;<b>NetworkType</b>&#160;can&#160;only&#160;be modified&#160;in&#160;the&#160;data&#160;base file (dbc).&#160;It&#160;can be set&#160;to&#160;<br/>
<b>PowerTrain</b>&#160;or&#160;<b>BodyBus</b>&#160;and determines&#160;whether&#160;it&#160;is&#160;a CAN&#160;Class&#160;C&#160;or&#160;a CAN&#160;single&#160;wire CAN.&#160;<br/>&#160;<br/>
<b>4.2.6&#160;&#160;Tp_Iso15765&#160;<br/></b>You need the Transport&#160;Protocol&#160;normally&#160;for&#160;diagnostic&#160;purposes&#160;only.&#160;Use the&#160;<br/>
default.&#160;<br/>
<b>Info</b>&#160;<br/>
For&#160;more information about&#160;the settings&#160;of&#160;the transport&#160;protocol&#160;for&#160;your&#160;individual&#160;<br/>
&#160;&#160;needs,&#160;refer&#160;to&#160;the&#160;TechnicalReference_TPMC.pdf&#160;or&#160;the UserManual_TP_GM.pdf.&#160;<br/>
&#160;<br/>
<b>4.2.7&#160;&#160;Diagnostics&#160;–&#160;Diag_CanDesc_KWP&#160;<br/></b>If&#160;you use&#160;diagnostic&#160;component&#160;select&#160;it&#160;in the&#160;<b>Component&#160;Selection</b>&#160;view.&#160;<br/>&#160;Read-in&#160;an&#160;appropriate CDD&#160;file&#160;and use&#160;the&#160;default settings.&#160;&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-22_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-22_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-22_3.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
21&#160;/&#160;32&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-8&#160;Path&#160;to&#160;the CDD&#160;file on&#160;the Configuration View&#160;of&#160;Diag_CanDesc_KWP&#160;<br/>
The CDD&#160;file has&#160;to&#160;be&#160;created and&#160;edited with the Vector&#160;Tool&#160;CANdelaStudio.&#160;<br/>&#160;<br/>
<b>4.2.8&#160;&#160;DrvCan_&lt;microcontroller&gt;&#160;<br/></b>There is&#160;the&#160;access&#160;point&#160;for&#160;two very&#160;important&#160;setting,&#160;the&#160;bus&#160;timing&#160;registers&#160;<br/>
and&#160;the&#160;acceptance registers.&#160;&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-9&#160;Acceptance Filters&#160;and&#160;Bus&#160;timing&#160;are&#160;channel-dependent&#160;settings&#160;<br/>
As&#160;bus&#160;timing&#160;register&#160;and acceptance register&#160;settings&#160;are channel-dependant,&#160;the&#160;<br/>
buttons&#160;to open the appropriate windows&#160;<b>[…]</b>&#160;&#160;can be found in the configuration&#160;<br/>
view&#160;of&#160;the channels.&#160;&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-23_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-23_2.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
22&#160;/&#160;32&#160;<br/>
&#160;<br/>
<b>Bus&#160;timing registers&#160;</b><br/>
The values&#160;for&#160;the bus&#160;timing&#160;registers&#160;are preset&#160;via data base&#160;attributes&#160;and&#160;<br/>
should be 33.333 kBaud&#160;for&#160;Single&#160;Wire&#160;CAN&#160;and 500 kBaud&#160;for&#160;PowerTrain.&#160;<br/>
Check&#160;those values&#160;again.&#160;&#160;<br/>Enter&#160;the correct&#160;value&#160;for&#160;the Clock&#160;[kHz]&#160;of&#160;your&#160;hardware.&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-10&#160;&#160;CAN&#160;Bus&#160;Timing&#160;Register&#160;Setup&#160;<br/>
<b>Acceptance registers&#160;</b><br/>
Per&#160;default&#160;the&#160;acceptance&#160;registers&#160;are set&#160;to be open.&#160;<b>Optimize&#160;filters…</b>&#160;to&#160;get a&#160;<br/>
minimum&#160;of&#160;non-relevant&#160;messages&#160;into&#160;your&#160;system.&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=24></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-24_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-24_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-24_3.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
23&#160;/&#160;32&#160;<br/>
<b>4.2.9&#160;&#160;Settings are Finished&#160;<br/></b>After&#160;the&#160;settings&#160;are&#160;done start&#160;the generation process&#160;of&#160;the&#160;tool&#160;via&#160;the&#160;yellow&#160;<br/>
flash button.&#160;<br/>Use the views&#160;<b>Generated&#160;Files</b>&#160;and&#160;<b>Messages</b>&#160;to get&#160;information during&#160;and after&#160;<br/>
the generation process.&#160;<br/>
&#160;<br/>
Figure&#160;&#160;4-11&#160;&#160;Success&#160;Window&#160;containing&#160;Information&#160;about&#160;Generated&#160;Files.&#160;<br/>
<b>Messages&#160;</b><br/>
In the messages&#160;view&#160;the generation process&#160;puts&#160;out&#160;necessary&#160;information like&#160;<br/>
what&#160;has&#160;been&#160;done correctly&#160;or&#160;which errors&#160;occurred.&#160;&#160;<br/>GENy&#160;e.g.&#160;checks&#160;whether&#160;all&#160;receive&#160;messages&#160;of&#160;your&#160;ECU&#160;will&#160;pass&#160;the&#160;<br/>
acceptance&#160;filters.&#160;If&#160;not,&#160;a warning&#160;will&#160;be displayed,&#160;containing&#160;the&#160;message(s)&#160;<br/>
that&#160;won’t&#160;pass&#160;the filter.&#160;&#160;<br/>
<b>Generated&#160;Files&#160;</b><br/>
This&#160;view&#160;displays&#160;all&#160;generated&#160;files&#160;and the path,&#160;where the&#160;files&#160;have been&#160;<br/>
written to.&#160;A&#160;good chance to check&#160;the&#160;correctness&#160;of&#160;your&#160;path settings&#160;again.&#160;&#160;<br/>&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=25></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-25_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-25_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-25_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-25_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-25_5.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
24&#160;/&#160;32&#160;<br/>
<b>4.3&#160;&#160;STEP 3&#160;&#160;&#160;&#160;Add Files&#160;to Your&#160;Application&#160;<br/></b>Now&#160;you have&#160;to&#160;add the&#160;files&#160;of&#160;GMLAN&#160;Software Components&#160;to&#160;your&#160;application&#160;<br/>
files&#160;in your&#160;project&#160;or&#160;makefile.&#160;&#160;<br/>This&#160;includes&#160;<br/>&#160;&#160;delivered&#160;<b>source&#160;code</b>&#160;files&#160;and&#160;(see&#160;the list&#160;of&#160;files&#160;in GM_Readme.pdf)&#160;<br/>
&#160;&#160;<b>generated</b>&#160;files&#160;in the&#160;<b>gendata</b>&#160;folder&#160;<br/>&#160;<br/>&#160;<br/>
<b>4.4&#160;&#160;STEP 4&#160;&#160;&#160;Adaptations&#160;For&#160;Your&#160;Application&#160;<br/></b>To&#160;use&#160;the GMLAN&#160;Software Components&#160;you have to&#160;do&#160;a&#160;few&#160;adaptations&#160;to&#160;<br/>
your&#160;application code.&#160;&#160;<br/>
<b>4.4.1&#160;&#160;Includes&#160;<br/></b>The only&#160;file you have to include is&#160;il_inc.h.&#160;<br/><b>#include “il_inc.h”</b>&#160;<b>&#160;<br/></b>&#160;<br/>
<b>4.4.2&#160;&#160;Initialization&#160;<br/></b>/* make&#160;sure all interrupts are disabled*/&#160;<br/><b>CanInitPowerOn();&#160;&#160;/*If this initialization is&#160;&#160;</b><br/>
<b>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;demanded to be done from the NM, you do not have to &#160;&#160;&#160;</b><br/>
<b>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;call it.&#160;&#160;</b><br/>
<b>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;The selection above can be done in the Generation&#160;&#160;</b><br/>
<b>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;Tool*/&#160;<br/>IlInitPowerOn();&#160;<br/>TpInitPowerOn();&#160;<br/>DescInitPowerOn();&#160;&#160;/*optional, if CANdesc is used*/&#160;<br/></b>&#160;<br/>/*Enable or Disable&#160;<b>RX</b>&#160;Messages based on Calibrations*/&#160;<br/><b>IlSetRxMessageEnable(&lt;Rx_Message_Name&gt;, 0 or 1 for on or off);&#160;</b><br/>
This&#160;is&#160;optional&#160;<br/>
and&#160;only&#160;used&#160;to&#160;<br/>
cut&#160;down the&#160;<br/>
&#160;<br/>
message set.&#160;<br/>
/*Enable or&#160;Disable&#160;<b>TX</b>&#160;Messages based on Calibrations*/&#160;<br/><b>IlSetTxMessageEnable(&lt;Rx_Message_Name&gt;, 0 or 1 for on or off);&#160;<br/></b>&#160;<br/>
For&#160;29-bit&#160;IDs&#160;<br/>
<b>IlSetOwnNodeAddress(SWCAN, &lt;srcAddress&gt;);&#160;</b><br/>
only&#160;<br/>
&#160;<br/>/*Get learnt source IDs from EEPROM (single channel system)*/&#160;<br/><b>for( index=0; index&lt;kIlNumberOfExtIdRxObjects; index++)&#160;<br/>{&#160;</b><br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=26></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-26_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-26_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-26_3.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
25&#160;/&#160;32&#160;<br/>
<b>&#160;&#160;IlSetRxMessageSourceAddress(index, GetBLearnedSourceId(index));&#160;<br/>}&#160;<br/>&#160;</b><br/>
<b>4.4.3&#160;&#160;Cyclic&#160;calls&#160;to&#160;keep the&#160;components&#160;running&#160;<br/></b>The CAN&#160;Driver&#160;is&#160;the only&#160;component&#160;that&#160;is&#160;event&#160;triggered and that&#160;does&#160;not&#160;<br/>
need a cyclic&#160;call&#160;to&#160;work&#160;properly&#160;(except&#160;for&#160;the CAN&#160;Driver&#160;used in&#160;polling&#160;<br/>
mode).&#160;<br/>All&#160;other&#160;components&#160;provide a task&#160;function&#160;that&#160;you&#160;have to call&#160;in the&#160;correct&#160;call&#160;<br/>
cycle that&#160;is&#160;entered in&#160;the Configuration&#160;Tool&#160;for&#160;each component.&#160;&#160;<br/>&#160;<br/>/*Network Management task*/&#160;<br/><b>IlNwmTask(); &#160;&#160;<br/>&#160;<br/></b>/*Interaction Layer tasks, separated in Tx and Rx*/&#160;<br/><b>IlRxTask(); &#160;&#160;<br/>IlTxTask();&#160;<br/>&#160;<br/></b>/*Transport Protocol tasks, separated in Tx and Rx*/&#160;<br/><b>TpRxTask();&#160;<br/>TpTxTask();&#160;<br/></b>&#160;<br/>/*Diagnostics task&#160;-&#160;CANdesc*/<b>&#160;<br/>DescTask();&#160;<br/>&#160;</b><br/>
<b>4.4.4&#160;&#160;Provide Callback functions&#160;<br/></b>The GMLAN&#160;Software&#160;Components&#160;call&#160;the&#160;application&#160;on internal&#160;events.&#160;For&#160;this&#160;<br/>
case there&#160;are callback&#160;functions&#160;to enable the application to&#160;know&#160;about&#160;the&#160;<br/>
program&#160;flow&#160;and to&#160;intervene if&#160;necessary.&#160;These callback&#160;functions&#160;must&#160;be&#160;<br/>
provided by&#160;the application.&#160;For&#160;the&#160;first&#160;attempt&#160;in&#160;most&#160;of&#160;the cases&#160;it&#160;is&#160;enough to&#160;<br/>
provide&#160;an empty&#160;callback&#160;function.&#160;&#160;<br/>&#160;<br/>Callback&#160;functions&#160;for&#160;the&#160;Interaction Layer&#160;<br/><b>void ApplIlNodeCommActiveFailed( vuint8 srcAddress ){} /*for mixed IDs&#160;&#160;</b><br/>
<b>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;only*/&#160;<br/>&#160;<br/>void ApplIlRxMsgSrcAddressLearned( IlReceiveHandle ilRxHnd, vuint8&#160;</b><br/>
<b>srcAddress ){}&#160;&#160;&#160;/*for mixed IDs only*/&#160;<br/>&#160;</b><br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-27_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
26&#160;/&#160;32&#160;<br/>
<b>void ApplIlNodeCommActiveRecovery( vuint8 srcAddress ){}&#160;&#160;/*for mixed IDs&#160;&#160;</b><br/>
<b>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;only*/&#160;<br/>&#160;<br/>void ApplIlSourceAddressLearned( vuint8 srcAddress ){}&#160;&#160;&#160;&#160;&#160;/*for mixed IDs&#160;&#160;</b><br/>
<b>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;only*/&#160;<br/></b>Callback&#160;functions&#160;for&#160;the&#160;Diagnostics&#160;<br/><b>This depends on the selected diagnostic functions.&#160;&#160;<br/>&#160;<br/></b>Callback&#160;functions&#160;for&#160;the Network&#160;Management&#160;<br/><b>canuint8 ApplNwmSleepConfirmation( NM_CHANNEL_APPLTYPE_ONLY )&#160;</b><br/>
<b>{&#160;</b><br/>
<b>&#160;&#160;return NmSleepOk;&#160;</b><br/>
<b>}&#160;<br/>&#160;<br/>void ApplNwmReinitRequest( NM_CHANNEL_APPLTYPE_FIRST &#160;unsigned char VnNr,&#160;</b><br/>
<b>unsigned char ReinitRequest ){}&#160;<br/>&#160;<br/>void ApplTrcvrNormalMode( NM_CHANNEL_APPLTYPE_ONLY ){}&#160;<br/>&#160;<br/>void ApplTrcvrSleepMode( NM_CHANNEL_APPLTYPE_ONLY ){}&#160;<br/>&#160;</b><br/>
<b>void ApplTrcvrHighVoltage( NM_CHANNEL_APPLTYPE_ONLY ){}&#160;</b><br/>
<b>&#160;<br/>void ApplNwmVnDeactivated( NM_CHANNEL_APPLTYPE_FIRST &#160;unsigned char VnNr&#160;</b><br/>
<b>){}&#160;<br/>&#160;<br/>void ApplNwmVnActivated( NM_CHANNEL_APPLTYPE_FIRST &#160;unsigned char VnNr&#160;</b><br/>
<b>){}&#160;<br/></b>&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-28_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-28_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-28_3.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
27&#160;/&#160;32&#160;<br/>
<b>4.5&#160;&#160;STEP 5&#160;&#160;&#160;Compile&#160;And Link&#160;<br/></b>Now&#160;we compile and&#160;link&#160;the project.&#160;There should not&#160;be&#160;any&#160;errors&#160;or&#160;linker&#160;<br/>
problems.&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
<b>4.6&#160;&#160;STEP 6&#160;&#160;&#160;Test&#160;the&#160;Software&#160;Component&#160;<br/></b>To&#160;test&#160;the result&#160;download&#160;the executable&#160;to an&#160;appropriate target&#160;and test&#160;it&#160;e.g.&#160;<br/>
with&#160;CANoe.&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-29_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-29_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-29_3.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
28&#160;/&#160;32&#160;<br/>
<b>5&#160;&#160;Further&#160;Information&#160;&#160;</b><br/>
<b>5.1&#160;&#160;Full&#160;CAN&#160;Message Transmission&#160;with&#160;Extended Ids&#160;<br/></b>A&#160;29bit&#160;message in&#160;GMLAN&#160;is&#160;build-up as&#160;shown.&#160;The lower&#160;8 bits&#160;(Source&#160;<br/>
Address)&#160;are&#160;set&#160;by&#160;the CAN&#160;Driver.&#160;&#160;<br/>
Priority:&#160;<br/>
Parameter&#160;ID:&#160;<br/>
Reserved:&#160;<br/>
Source&#160;Address:&#160;<br/>
3&#160;bits<br/>
13&#160;bits<br/>
5&#160;bits<br/>
8&#160;bits<br/>
&#160;<br/>
Figure&#160;&#160;5-1&#160;Extended CAN&#160;Identifier&#160;29bit&#160;<br/>
If&#160;the&#160;message is&#160;a&#160;full&#160;CAN&#160;message&#160;the&#160;source address&#160;will&#160;not&#160;be written by&#160;the&#160;<br/>
CAN&#160;Driver&#160;as&#160;the&#160;full&#160;CAN&#160;messages&#160;are&#160;initialized at&#160;startup.&#160;There are&#160;two&#160;<br/>
strategies&#160;dealing&#160;with full&#160;CAN&#160;messages:&#160;<br/>&#160;&#160;Avoid putting&#160;extended&#160;ID&#160;messages&#160;to&#160;a&#160;full&#160;CAN&#160;object&#160;<br/>
&#160;&#160;Use a pretransmit&#160;function to set&#160;the source address&#160;for&#160;every&#160;full&#160;CAN&#160;<br/>
transmission by&#160;hand.&#160;The disadvantage is&#160;the delay&#160;time&#160;for&#160;calling&#160;the&#160;<br/>
function and setting&#160;the source&#160;address.&#160;<br/>
<b>Info&#160;</b><br/>
It&#160;would&#160;be sufficient&#160;to set&#160;the source&#160;address&#160;only&#160;once after&#160;initialization of&#160;the full&#160;CAN&#160;transmit&#160;<br/>
objects.&#160;<br/>&#160;<br/>&#160;<br/>
<b>5.2&#160;&#160;Take&#160;care&#160;when&#160;working with&#160;VNs&#160;<br/>Caution&#160;</b><br/>
An IlSetEvent&#160;for&#160;transmitting a corresponding message&#160;will&#160;be&#160;deleted&#160;if&#160;the&#160;ECU&#160;is&#160;still&#160;sleeping.&#160;<br/>&#160;<br/>The transmission of&#160;messages&#160;caused&#160;by&#160;an&#160;event&#160;has&#160;to be&#160;handled&#160;by&#160;the&#160;<br/>
application.&#160;For&#160;this&#160;case the application has&#160;to perform&#160;an&#160;IlPut&#160;to put&#160;in the new&#160;<br/>
value of&#160;the signal&#160;and an&#160;IlSetEvent&#160;&#160;to trigger&#160;the actual&#160;sending&#160;of&#160;the&#160;<br/>
corresponding&#160;message.&#160;<br/>A&#160;state transition&#160;of&#160;the Interaction&#160;Layer&#160;from&#160;suspended to&#160;running&#160;mode&#160;will&#160;<br/>
reset&#160;the settings&#160;of&#160;the Interaction Layer&#160;including&#160;all&#160;pending&#160;IlSetEvents.&#160;&#160;<br/>A&#160;state transition will&#160;be performed every&#160;time a&#160;node wakes&#160;up.&#160;&#160;<br/>
<b>Solution&#160;</b><br/>
An&#160;&#160;IlSetEvent&#160;&#160;should only&#160;be performed&#160;if&#160;the Interaction Layer&#160;is&#160;in running&#160;<br/>
mode.&#160;Use the&#160;function &#160;IlNwmGetStatus&#160;&#160;to&#160;check&#160;the&#160;state of&#160;the Interaction&#160;<br/>
Layer.&#160;&#160;<br/>&#160;<br/><b>If( IlNwmStateNMActive( IlNwmGetStatus() ) ) == 1&#160;</b><br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-30_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
29&#160;/&#160;32&#160;<br/>
<b>{&#160;</b><br/>
<b>&#160;&#160;IlSetEvent…&#160;</b><br/>
<b>}&#160;</b><br/>
<b>&#160;<br/></b>Another&#160;solution would be to use the&#160;<b>StateOn&#160;flags</b>&#160;&#160;for&#160;signals.&#160;They&#160;can be&#160;<br/>
activated&#160;in the&#160;Configuration Tool&#160;on the tab&#160;<b>Send signals</b>&#160;and&#160;look&#160;like&#160;e.g.&#160;&#160;<br/><b>ILGetTxDgnInfStateOn();&#160;<br/></b>It&#160;returns&#160;a true value&#160;(0x01)&#160;if&#160;the corresponding&#160;VN&#160;is&#160;active.&#160;Then you could set&#160;<br/>
your&#160;event,&#160;too.&#160;<br/>&#160;<br/>
<b>5.3&#160;&#160;Validity&#160;of&#160;Signals&#160;<br/></b>There are&#160;three&#160;mechanisms&#160;to define&#160;a signal&#160;to be valid or&#160;to&#160;be invalid.&#160;<br/>&#160;<br/>&#160;&#160;Timeout&#160;–&#160;message timeout,&#160;signal&#160;timeout&#160;--&gt;&#160;flag&#160;or&#160;function,&#160;Configuration&#160;<br/>
Tool&#160;<br/>
&#160;&#160;Validity&#160;bit&#160;in the same&#160;message as&#160;the signal&#160;<br/>
&#160;&#160;VDA&#160;–&#160;Virtual device&#160;availability&#160;<br/>&#160;<br/>To&#160;find out&#160;which signal&#160;is&#160;using&#160;which of&#160;the three mechanisms&#160;refer&#160;to your&#160;<br/>
specification.&#160;&#160;<br/>Before&#160;you use&#160;the&#160;content&#160;of&#160;a signal&#160;do the&#160;testing&#160;if&#160;the signal&#160;is&#160;valid right&#160;now.&#160;<br/>&#160;<br/>
<b>5.4&#160;&#160;Signals&#160;assigned to&#160;different&#160;VNs&#160;and located in one&#160;message&#160;<br/></b>Lets&#160;suppose that&#160;a&#160;message contains&#160;signals&#160;that&#160;are assigned to&#160;different&#160;VNs.&#160;<br/>
One VN&#160;is&#160;active the&#160;other&#160;VN&#160;is&#160;inactive.&#160;&#160;<br/>&#160;<br/>
VN1&#160;is&#160;active<br/>
VN2&#160;is&#160;inactive<br/>
Signal1(&#160;<b>VN1&#160;</b>)<br/>
Signal2(&#160;<b>VN2&#160;</b>)<br/>
CAN&#160;Message&#160;&#160;<br/>
data<br/>
data<br/>
data<br/>
data<br/>
data<br/>
data<br/>
data<br/>
data<br/>
&#160;<br/>
Figure&#160;&#160;5-2&#160;Signals&#160;of&#160;Different&#160;VNs&#160;in One&#160;Message&#160;<br/>
As&#160;a result&#160;the confirmation and indication&#160;flags&#160;of&#160;the Signal2 (inactive VN)&#160;could&#160;<br/>
be set&#160;regardless&#160;that&#160;the corresponding&#160;VN&#160;is&#160;inactive.&#160;Transmission of&#160;this&#160;signal&#160;<br/>
is possible too&#160;and&#160;an&#160;IlSetEvent&#160;will&#160;provoke the transmission&#160;of&#160;the&#160;message&#160;<br/>
triggered by&#160;an inactive VN.&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-31_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
30&#160;/&#160;32&#160;<br/>
The other&#160;ECUs&#160;know&#160;that&#160;the message had&#160;been sent&#160;by&#160;an inactive VN&#160;and that&#160;<br/>
the corresponding&#160;signals&#160;are invalid.&#160;<br/>
<b>Suggestion&#160;</b><br/>
You could check&#160;before&#160;the&#160;IlSetEvent&#160;if&#160;the corresponding&#160;VN&#160;is&#160;active or&#160;not.&#160;<br/>&#160;<br/>
<b>5.5&#160;&#160;Source&#160;Learning&#160;for&#160;Single&#160;Wire&#160;CAN&#160;with Mixed Identifiers&#160;(11&#160;bit&#160;and&#160;</b><br/>
<b>29 bit)&#160;<br/></b>The reason&#160;for&#160;the source learning&#160;mechanism&#160;is&#160;a&#160;flexible monitoring of&#160;the&#160;<br/>
receive messages.&#160;<br/>Received messages&#160;are learned&#160;and&#160;this&#160;information is&#160;stored in&#160;an&#160;array&#160;by&#160;the&#160;<br/>
Interaction&#160;Layer.&#160;The&#160;application is&#160;informed&#160;about&#160;new&#160;learned&#160;entries&#160;via&#160;<br/>
callback&#160;functions&#160;&#160;<br/>
(&#160;ApplIlRxMsgSrcAddressLearned, ApplIlSourceAddressLearned<b>&#160;</b>).<b>&#160;</b>&#160;<br/>
&#160;<br/>The application only&#160;has&#160;to store this&#160;array&#160;in a non-volatile memory&#160;and&#160;update&#160;<br/>
that&#160;array&#160;at&#160;startup time with the values&#160;from&#160;the non-volatile memory.&#160;<br/>Refer&#160;to&#160;TechnicalReference_InteractionLayer_GM.pdf&#160;in the chapter&#160;“Dealing&#160;with&#160;<br/>
extended&#160;IDs”&#160;for&#160;more&#160;information.&#160;<br/>
<b>5.6&#160;&#160;Activation and deactivation of&#160;VNs&#160;<br/></b>The Virtual&#160;Networks&#160;are activated or&#160;deactivated&#160;either&#160;by&#160;the network&#160;<br/>
management&#160;(initially&#160;active)&#160;or&#160;by&#160;the application.&#160;This&#160;also&#160;depends&#160;on the&#160;VN&#160;<br/>
configuration.&#160;<br/>VN&#160;configuration:&#160;&#160;<br/>&#160;&#160;Activator&#160;<br/>
&#160;&#160;Remotely&#160;Activated&#160;<br/>
&#160;&#160;Local&#160;<br/>
&#160;&#160;Initially&#160;Active&#160;<br/>
<b>5.6.1&#160;&#160;IlNwmActivateVN(&#160;channel,&#160;VN)&#160;<br/></b>Via this&#160;function you activate a virtual&#160;network.&#160;Only&#160;VNs&#160;that&#160;are configured as&#160;<br/>
activator&#160;or&#160;local&#160;can&#160;be manually&#160;activated with this&#160;function.&#160;With it&#160;the&#160;Interaction&#160;<br/>
Layer&#160;is&#160;activated to send and&#160;receive messages/signals.&#160;<br/>
<b>5.7&#160;&#160;llNwmDeactivateVN&#160;<br/></b>Deactivates&#160;the corresponding&#160;virtual&#160;network&#160;and stops&#160;Interaction Layer&#160;from&#160;<br/>
transmitting.&#160;&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/UserManual_Startup_with_GMLAN_GENy-32_1.png"/><br/>
User&#160;Manual&#160;&#160;Startup with&#160;GMLAN&#160;<br/>
&#160;<br/>
1&#160;/&#160;32&#160;<br/>
<b>6&#160;&#160;Index&#160;</b><br/>
Acceptance&#160;registers&#160;..................................&#160;22&#160;<br/>
Interaction Layer&#160;.....................................&#160;9,&#160;25&#160;<br/>
Bus&#160;timing registers&#160;....................................&#160;22&#160;<br/>
makefile&#160;.......................................................&#160;24&#160;<br/>
callback&#160;functions&#160;.......................................&#160;25&#160;<br/>
Measurement&#160;and Calibration (CCP/XCP)&#160;...&#160;9&#160;<br/>
CAN Driver&#160;....................................................&#160;8&#160;<br/>
Motivation&#160;......................................................&#160;3&#160;<br/>
CAN&#160;driver&#160;(Advanced)&#160;...............................&#160;18&#160;<br/>
Multiple&#160;ECU&#160;.........................................&#160;12,&#160;17&#160;<br/>
CANdesc&#160;.....................................................&#160;15&#160;<br/>
Network&#160;Management&#160;.................................&#160;26&#160;<br/>
Communication Control&#160;Layer&#160;CCL&#160;..............&#160;9&#160;<br/>
project&#160;.........................................................&#160;24&#160;<br/>
Compile&#160;.......................................................&#160;27&#160;<br/>
Shared input&#160;activated&#160;VN&#160;..........................&#160;13&#160;<br/>
Configuration Tool&#160;....&#160;9,&#160;14,&#160;15,&#160;16,&#160;18,&#160;25,&#160;29&#160;<br/>
Signals&#160;........................................................&#160;29&#160;<br/>
Cyclic&#160;calls&#160;..................................................&#160;25&#160;<br/>
source code&#160;.................................................&#160;24&#160;<br/>
DBC&#160;............................................................&#160;16&#160;<br/>
Source Learning&#160;..........................................&#160;30&#160;<br/>
dbc&#160;file.........................................................&#160;16&#160;<br/>
STEP 1&#160;..................................................&#160;14,&#160;15&#160;<br/>
Diagnostics&#160;-&#160;CANdesc&#160;.................................&#160;9&#160;<br/>
STEP 2&#160;..................................................&#160;14,&#160;16&#160;<br/>
gendata&#160;...........................................&#160;15,&#160;18,&#160;24&#160;<br/>
STEP 3&#160;..................................................&#160;14,&#160;24&#160;<br/>
generated&#160;files&#160;......................................&#160;18,&#160;24&#160;<br/>
STEP 4&#160;..................................................&#160;14,&#160;24&#160;<br/>
Generation Paths&#160;........................................&#160;18&#160;<br/>
STEP 5&#160;..................................................&#160;14,&#160;27&#160;<br/>
GENy&#160;..........................................................&#160;16&#160;<br/>
STEP 6&#160;..................................................&#160;14,&#160;27&#160;<br/>
GM_Readme&#160;..............................................&#160;15&#160;<br/>
Symbols&#160;........................................................&#160;7&#160;<br/>
GMLAN&#160;Network&#160;Management&#160;.....................&#160;9&#160;<br/>
Test&#160;.............................................................&#160;27&#160;<br/>
GMLAN&#160;options&#160;..........................................&#160;19&#160;<br/>
TP&#160;options&#160;...................................................&#160;20&#160;<br/>
IlSetEvent&#160;.......................................&#160;28,&#160;29,&#160;30&#160;<br/>
Transport&#160;Protocol.........................................&#160;9&#160;<br/>
Includes.......................................................&#160;24&#160;<br/>
Validity&#160;of&#160;Signals&#160;........................................&#160;29&#160;<br/>
Init&#160;registers&#160;................................................&#160;21&#160;<br/>
VNs..............................................................&#160;28&#160;<br/>
Initialization&#160;.................................................&#160;24&#160;<br/>&#160;<br/>
2011, Vector&#160;Informatik&#160;GmbH&#160;<br/>
&#160;<br/>
Version:&#160;1.0.1&#160;<br/>
&#160;<br/>
based of&#160;template version&#160;2.0&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#8">1 About this Document</a>
<ul>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#8">1.1 Legend and Explanation of Symbols XE &#34;Symbols&#34;&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#9">2 What is GMLAN</a>
<ul>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#11">2.1 Virtual Networks</a></li>
</ul>
</li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#13">3 Your ECU</a>
<ul>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#13">3.1 Body Bus ECU</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#14">3.2 Infotainment ECU</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#14">3.3 PowerTrain ECU (or Chassis expansion or Powertrain expansion)</a></li>
</ul>
</li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#15">4 GMLAN In 6 Steps</a>
<ul>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#16">STEP 1 XE &#34;STEP 1&#34; &#160; &#160;Prepare Your Software Project</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#17">STEP 2 XE &#34;STEP 2&#34; &#160; &#160;Configuration Tool XE &#34;Configuration Tool&#34; &#160;GENy XE &#34;GENy&#34; &#160;and DBC XE &#34;DBC&#34; &#160;File</a>
<ul>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#19">4.2.1 Setting of Generation Paths XE &#34;Generation Paths&#34; &#160;</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#19">4.2.2 Component Selection</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#19">4.2.3 Tree view – A List of all selected components XE &#34;CAN driver (Advanced)&#34;&#160;</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#20">4.2.4 HW_&lt;microcontroller&gt;&#160;</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#20">4.2.5 Nm_Gmlan_Gm XE &#34;GMLAN options&#34;&#160;</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#21">4.2.6 Tp_Iso15765 XE &#34;TP options&#34;&#160;</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#21">4.2.7 Diagnostics – Diag_CanDesc_KWP</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#22">4.2.8 DrvCan_&lt;microcontroller&gt; XE &#34;Init registers&#34;&#160;</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#24">Settings are Finished</a></li>
</ul>
</li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#25">STEP 3 XE &#34;STEP 3&#34; &#160; &#160;Add Files to Your Application</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#25">STEP 4 XE &#34;STEP 4&#34; &#160; Adaptations For Your Application</a>
<ul>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#25">4.4.1 Includes XE &#34;Includes&#34;&#160;</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#25">Initialization XE &#34;Initialization&#34;&#160;</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#26">4.4.3 Cyclic calls XE &#34;Cyclic calls&#34; &#160;to keep the components running</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#26">4.4.4 Provide Callback functions XE &#34;callback functions&#34;&#160;</a></li>
</ul>
</li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#28">STEP 5 XE &#34;STEP 5&#34; &#160; Compile XE &#34;Compile&#34; &#160;And Link</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#28">STEP 6 XE &#34;STEP 6&#34; &#160; Test XE &#34;Test&#34; &#160;the Software Component</a></li>
</ul>
</li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#29">5 Further Information&#160;</a>
<ul>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#29">5.1 Full CAN Message Transmission with Extended Ids</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#29">5.2 Take care when working with VNs XE &#34;VNs&#34;&#160;</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#30">5.3 Validity of Signals XE &#34;Validity of Signals&#34;&#160;</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#30">5.4 Signals XE &#34;Signals&#34; &#160;assigned to different VNs and located in one message</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#31">5.5 Source Learning XE &#34;Source Learning&#34; &#160;for Single Wire CAN with Mixed Identifiers (11 bit and 29 bit)</a></li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#31">5.6 Activation and deactivation of VNs</a>
<ul>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#31">5.6.1 IlNwmActivateVN( channel, VN)</a></li>
</ul>
</li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#31">5.7 llNwmDeactivateVN</a></li>
</ul>
</li>
<li><a href="UserManual_Startup_with_GMLAN_GENys.html#32">6 Index</a></li>
</ul>
<hr/>
</body>
</html>
