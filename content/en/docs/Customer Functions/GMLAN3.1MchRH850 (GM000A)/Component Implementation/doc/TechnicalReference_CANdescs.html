---
title: TechnicalReference_CANdescs
linkTitle: TechnicalReference_CANdescs
weight: 42
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>
<b>CANdesc&#160;<br/></b>Technical Reference&#160;<br/>&#160;<br/>
&#160;<br/>Version&#160;3.07.00&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Authors&#160;<br/>
Oliver&#160;&#160;Garnatz,&#160;&#160;Mishel&#160;&#160;Shishmanyan,&#160;&#160;Stefan&#160;&#160;Hübner,&#160;<br/>Matthias Heil,&#160;Katrin&#160;Thurow,&#160;Patrick&#160;Rieder&#160;<br/>
Status&#160;<br/>
Released&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
1&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=2></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>1&#160;&#160;History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;&#160;Remarks&#160;</b><br/>
Oliver&#160;Garnatz&#160;<br/>
2003-11-12&#160;<br/>
2.00.00&#160;&#160;Splitting&#160;into separate&#160;documents&#160;<br/>
and&#160;general&#160;revision&#160;<br/>
Oliver&#160;Garnatz&#160;<br/>
2004-01-13&#160;<br/>
2.00.01&#160;&#160;Added&#160;chapter&#160;‘Application interface&#160;<br/>
flow’&#160;<br/>Updated&#160;format&#160;template&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2004-03-09&#160;<br/>
2.01.00&#160;&#160;New&#160;application callback&#160;convention&#160;<br/>
(from&#160;CANdesc&#160;2.09.00)&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2004-03-29&#160;<br/>
2.02.00&#160;&#160;New&#160;APIs:&#160;<br/>
-&#160;<br/>
<b>DescGetActivityState</b>&#160;(from&#160;<br/>CANdesc&#160;2.10.00)&#160;<br/>
-&#160;<br/>
<b>DescSchedulerTask()&#160;</b>(from&#160;<br/>CANdesc&#160;2.09.00)&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2004-04-26&#160;<br/>
2.03.00&#160;&#160;Added&#160;more information&#160;and&#160;<br/>
limitations about&#160;the&#160;ring-buffer&#160;<br/>mechanism&#160;<a href="TechnicalReference_CANdescs.html#106">(12.6.9&#160;“Ring Buffer&#160;<br/>Mechanism”)</a>&#160;<br/>New&#160;feature:&#160;<br/>
-&#160;<br/>
<b>Support&#160;for&#160;generic&#160;user&#160;<br/>service&#160;</b>(from&#160;CANdesc&#160;<br/>2.11.00)&#160;<br/>
-&#160;<br/>
<b>Force&#160;CANdesc&#160;to send&#160;<br/>RCR-RP&#160;response&#160;</b>(from&#160;<br/>CANdesc&#160;2.11.00)&#160;<br/>
Stefan&#160;Hübner&#160;<br/>
2004-07-16&#160;<br/>
2.03.01&#160;&#160;Editorial&#160;revision&#160;<br/>
Oliver&#160;Garnatz&#160;<br/>
2004-08-12&#160;<br/>
2.04.00&#160;&#160;Added&#160;chapter&#160;4.2&#160;<br/>
ReadDataByIdentifier&#160;(SID&#160;$22)&#160;<br/>within the&#160;Single-&#160;and&#160;the Multiple&#160;<br/>PID&#160;mode&#160;is&#160;described&#160;<br/>
Oliver&#160;Garnatz&#160;<br/>
2004-10-08&#160;<br/>
2.05.00&#160;&#160;ESCAN0000982:&#160;Description of&#160;<br/>
MainHandler&#160;structure&#160;is&#160;not&#160;<br/>readable&#160;<br/>ROE&#160;transmission&#160;unit&#160;is&#160;described&#160;<br/>in detail&#160;&#160;<br/>
Stefan&#160;Hübner&#160;<br/>
2004-10-15&#160;<br/>
2.06.00&#160;&#160;Some&#160;additional&#160;information&#160;are&#160;<br/>
Oliver&#160;Garnatz&#160;<br/>
provided&#160;&#160;<br/>
Peter&#160;Herrmann&#160;<br/>
2005-06-22&#160;<br/>
2.07.00&#160;&#160;<b>Added:</b>&#160;Service $2C&#160;description.&#160;<br/>
Klaus&#160;Emmert&#160;<br/>
<b>Added:</b>&#160;Warning&#160;Text&#160;added&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2005-08.03&#160;<br/>
2.08.00&#160;&#160;<b>API&#160;added:</b>&#160;&#160;<br/>
Oliver&#160;Garnatz&#160;<br/>
-&#160;<br/>
DescStateTask,&#160;<br/>
-&#160;<br/>
DescTimerTask,&#160;&#160;<br/>
-&#160;<br/>
DescMayCallStateTaskAgain<br/>.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
2&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=3></a>Technical Reference&#160;CANdesc&#160;<br/>
-&#160;<br/>
ApplDescFatalError&#160;<br/>
<b>API&#160;modified:</b>&#160;&#160;<br/>
-&#160;<br/>
DescTask,&#160;&#160;<br/>
-&#160;<br/>
ApplDescCheckSessionTran<br/>sition,&#160;&#160;<br/>
-&#160;<br/>
DescGetActivityState,&#160;&#160;<br/>
-&#160;<br/>
DescGetStateSession.&#160;<br/>
<b>API&#160;removed:&#160;</b>&#160;<br/>
-&#160;<br/>
DescSchedulerTask&#160;<br/>
Modified&#160;description&#160;for&#160;<br/>ReadDataByIdentifier&#160;with long&#160;data&#160;<br/>and negative response&#160;in main-<br/>handler.&#160;<br/>
Oliver&#160;Garnatz&#160;<br/>
2006-03-02&#160;<br/>
2.09.00&#160;&#160;<b>Added:&#160;</b>...prevent&#160;the&#160;ECU&#160;going&#160;to&#160;<br/>
sleep while diagnostic&#160;is&#160;active&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2006-03-24&#160;<br/>
2.10.00&#160;&#160;<b>Added:&#160;</b>document&#160;overview<b>&#160;</b><br/>
Mishel&#160;Shishmanyan&#160;<br/>
2006-04-27&#160;<br/>
2.11.00&#160;&#160;<b>Modified:&#160;</b>&#160;<br/>
<a href="TechnicalReference_CANdescs.html#119">-12.6.13&#160;<br/>DynamicallyDefineDataIdentifier&#160;&#160;<br/>($2C)&#160;(UDS)&#160;functions&#160;<br/></a><a href="TechnicalReference_CANdescs.html#120">-12.6.13.1&#160;<br/>DescMayCallStateTaskAgain()&#160;<br/></a><b>&#160;</b><br/>
Mishel&#160;Shishmanyan&#160;<br/>
2007-02-22&#160;<br/>
2.12.00&#160;&#160;<b>Added:&#160;</b>&#160;<br/>
&#160;-&#160;<br/>
<a href="TechnicalReference_CANdescs.html#110"><i>12.6.9.3&#160;</i></a><br/>
<a href="TechnicalReference_CANdescs.html#110"><i>“DescRingBufferCancel()”</i></a><i>&#160;<br/></i><b>&#160;</b><br/>
Matthias Heil&#160;<br/>
2008-01-03&#160;<br/>
2.13.00&#160;&#160;<b>Added:&#160;</b><br/>
Caution&#160;&#160;&#160;&#160;concerning&#160;&#160;&#160;&#160;user&#160;&#160;&#160;&#160;main&#160;&#160;<br/>handler&#160;on&#160;protocol&#160;level&#160;l&#160;<br/>
Matthias Heil&#160;<br/>
2008-02-29&#160;<br/>
2.14.00&#160;&#160;<b>Added:&#160;</b><br/>
Handling&#160;of&#160;read/write memory&#160;by&#160;<br/>address:&#160;<br/>&#160;-<a href="TechnicalReference_CANdescs.html#67">&#160;<i>9.3&#160;“Read/Write Memory&#160;by&#160;<br/>Address”</i></a><i>&#160;<br/>-<a href="TechnicalReference_CANdescs.html#106">&#160;12.6.8.2&#160;<br/>“DescStartMemByAddrRepeatedCal<br/>l()”</a></i><i>&#160;<br/>-<a href="TechnicalReference_CANdescs.html#130">&#160;12.6.14&#160;”Memory&#160;Access&#160;<br/>Callbacks”</a></i>&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2008-06-06&#160;<br/>
2.15.00&#160;&#160;<i><b>Removed:&#160;</b></i><br/>
<i>Chapter&#160;“ResponseOnEvent&#160;<br/>Transmission&#160;Unit”&#160;<br/><b>Added:&#160;<br/>&#160;</b>-<a href="TechnicalReference_CANdescs.html#122">&#160;12.6.13.3<b>&#160;“</b>Non-volatile memory&#160;<br/>support<b>”</b></i></a><i><b>&#160;</b></i><br/>
Mishel&#160;Shishmanyan&#160;<br/>
2008-11-09&#160;<br/>
2.16.00&#160;&#160;<i><b>Modified:&#160;</b></i><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
3&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=4></a>Technical Reference&#160;CANdesc&#160;<br/>
-<a href="TechnicalReference_CANdescs.html#106">&#160;<i>12.6.9&#160;</i></a><a href="TechnicalReference_CANdescs.html#108">and&#160;<i>12.6.9.1</i>:</a>&#160;Added&#160;<br/>limitation&#160;for&#160;UDS&#160;and&#160;SPRMIB&#160;with&#160;<br/>the&#160;ring&#160;buffer&#160;usage.&#160;<br/>-<a href="TechnicalReference_CANdescs.html#151">&#160;<i>13.6&#160;…work&#160;with&#160;the&#160;ring-buffer&#160;<br/>mechanism</i>&#160;<br/></a><i><b>Added:&#160;<br/></b>-<a href="TechnicalReference_CANdescs.html#131">&#160;12.6.15&#160;Flash&#160;Boot&#160;Loader&#160;<br/>Support&#160;<br/></a></i><i>-<a href="TechnicalReference_CANdescs.html#155">&#160;13.8&#160;…send a&#160;positive&#160;response&#160;<br/>without&#160;request&#160;after&#160;FBL&#160;flash&#160;job&#160;</a></i><i>&#160;</i><br/>
Mishel&#160;Shishmanyan&#160;<br/>
2009-05-18&#160;<br/>
2.17.00&#160;&#160;<i><b>Modified:&#160;</b></i><br/>
<a href="TechnicalReference_CANdescs.html#96"><i>12.6.6.1ApplDescCheckSessionTra<br/>nsition()&#160;<br/></i></a><i><b>Added:&#160;<br/></b><a href="TechnicalReference_CANdescs.html#98">12.6.6.3DescIsSuppressPosResBit<br/>Set&#160;()&#160;</a></i><br/>
Mishel&#160;Shishmanyan&#160;<br/>
2009-08-11&#160;<br/>
2.18.00&#160;&#160;<i><b>Modified:&#160;</b></i><br/>
Minor&#160;editorial&#160;changes&#160;<br/><i>5.2&#160;Configure Handlers&#160;using&#160;&#160;<br/>CANdela attributes&#160;–&#160;added new&#160;&#160;<br/>data object&#160;attributes&#160;&#160;<br/><b>Added:&#160;<br/></b><a href="TechnicalReference_CANdescs.html#155">13.9&#160;…enforce CANdesc&#160;to&#160;use&#160;<br/>ANSI&#160;C&#160;instead&#160;of&#160;hardware&#160;<br/>optimized&#160;bit&#160;type&#160;<br/></a></i><a href="TechnicalReference_CANdescs.html#19"><i>5.1&#160;Configure DBC&#160;attributes&#160;for&#160;<br/>diagnostics&#160;<br/></i></a>&#160;<br/>
Mishel&#160;Shishmanyan&#160;<br/>
2009-09-17&#160;<br/>
3.00.00&#160;&#160;<i><b>Added:&#160;</b></i><br/>
<a href="TechnicalReference_CANdescs.html#20"><i>6&#160;CANdesc&#160;Configuration in&#160;GENy&#160;<br/></i></a><a href="TechnicalReference_CANdescs.html#47"><i>8&#160;Multi&#160;Identity&#160;&#160;<br/></i></a><a href="TechnicalReference_CANdescs.html#81"><i>12.6.2&#160;Multi&#160;Variant&#160;Configuration&#160;<br/>Functions&#160;</i></a><br/>
Mishel&#160;Shishmanyan&#160;<br/>
2010-01-26&#160;<br/>
3.01.00&#160;&#160;<i><b>Added:&#160;</b></i><br/>
<a href="TechnicalReference_CANdescs.html#42"><i>7&#160;CANdescBasic&#160;Configuration&#160;in&#160;<br/>GENy&#160;</i></a><br/>
Mishel&#160;Shishmanyan&#160;<br/>
2010-12-21&#160;<br/>
3.02.00&#160;&#160;<i><b>Modified:&#160;</b></i><br/>
<a href="TechnicalReference_CANdescs.html#130"><i>12.6.14.1&#160;<br/>ApplDescReadMemoryByAddress()&#160;<br/></i></a><a href="TechnicalReference_CANdescs.html#131"><i>12.6.14.2&#160;<br/>ApplDescWriteMemoryByAddress()&#160;<br/></i></a><a href="TechnicalReference_CANdescs.html#109"><i>12.6.9.2&#160;DescRingBufferWrite()&#160;</i></a><br/>
Katrin&#160;Thurow&#160;<br/>
2011-08-25&#160;<br/>
3.03.00&#160;&#160;<i><b>Added:&#160;</b></i><br/>
<a href="TechnicalReference_CANdescs.html#47"><i>8.1&#160;</i>Single Identity&#160;Mode<i>&#160;<br/></i></a><a href="TechnicalReference_CANdescs.html#51"><i>8.3&#160;</i>Multi&#160;Identity&#160;Mode<i>&#160;<br/></i></a><a href="TechnicalReference_CANdescs.html#156"><i>13.10&#160;</i>…configure&#160;Extended&#160;<br/>Addressing<i>&#160;</i></a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
4&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=5></a>Technical Reference&#160;CANdesc&#160;<br/>
<a href="TechnicalReference_CANdescs.html#156"><i>13.11&#160;</i>…use&#160;Multiple&#160;Addressing<i>&#160;<br/></i></a><a href="TechnicalReference_CANdescs.html#102"><i>12.6.6.7&#160;<br/></i>DescGetSessionIdOfSessionState<i>&#160;<br/></i></a><i><b>Modified:&#160;<br/></b><a href="TechnicalReference_CANdescs.html#47">8<b>&#160;&#160;</b></i>Multi&#160;Identity&#160;Support<i><b>&#160;<br/></b></i></a><a href="TechnicalReference_CANdescs.html#155"><i>13.8<b>&#160;</b></i>…send a&#160;positive response&#160;<br/>without&#160;request&#160;after&#160;FBL&#160;flash&#160;job<i><b>&#160;</b></i></a><br/>
Katrin&#160;Thurow&#160;<br/>
2011-09-19&#160;<br/>
3.04.00&#160;&#160;<i><b>Added:&#160;</b></i><br/>
<a href="TechnicalReference_CANdescs.html#158"><i>13.12</i>…use&#160;“Dynamic&#160;Normal&#160;<br/>Addressing&#160;Multi&#160;TP”&#160;with multiple&#160;<br/>tester<i>&#160;<br/></i></a><i><b>Modified:&#160;<br/></b><a href="TechnicalReference_CANdescs.html#156">13.11&#160;</i>…use&#160;Multiple&#160;Addressing<i>&#160;</i></a><br/>
Katrin&#160;Thurow&#160;<br/>
2011-11-27&#160;<br/>
3.05.00&#160;&#160;<i><b>Added:&#160;&#160;</b></i><br/>
<a href="TechnicalReference_CANdescs.html#137"><i>12.6.17&#160;</i>“Spontaneous Response”&#160;<br/>transmission<i><b>&#160;<br/></b></i></a><i><b>Modified:&#160;<br/></b><a href="TechnicalReference_CANdescs.html#22">6.2.1&#160;</i>Global&#160;CANdesc&#160;Settings<i><b>&#160;</b></i></a><br/>
Patrick&#160;Rieder&#160;<br/>
2013-01-23&#160;<br/>
3.06.00&#160;&#160;<i><b>Added:&#160;</b></i><br/>
<a href="TechnicalReference_CANdescs.html#69"><i>10<b>&#160;</b></i>Generic&#160;Processing&#160;Notifications<b>&#160;<br/></b></a><a href="TechnicalReference_CANdescs.html#140"><i>12.6.18<b>&#160;</b></i>Generic&#160;Processing&#160;<br/>Notifications<i><b>&#160;<br/></b></i></a><i><b>&#160;<br/>Modified:&#160;<br/></b><a href="TechnicalReference_CANdescs.html#22">6.2.1<b>&#160;</b></i>Global&#160;CANdesc&#160;Settings<i><b>&#160;<br/></b></i></a><a href="TechnicalReference_CANdescs.html#84"><i>12.6.4<b>&#160;</b></i>Service&#160;callback&#160;functions<i><b>&#160;<br/></b></i></a><a href="TechnicalReference_CANdescs.html#106"><i>12.6.9<b>&#160;</b></i>Ring&#160;Buffer&#160;Mechanism<i><b>&#160;<br/></b></i></a>Small&#160;fixes&#160;<br/>
Patrick&#160;Rieder&#160;<br/>
2013-05-27&#160;<br/>
3.07.00&#160;&#160;<i><b>Added:&#160;</b></i><br/>
<a href="TechnicalReference_CANdescs.html#71"><i>11</i>&#160;Busy&#160;Repeat&#160;Responder&#160;Support&#160;<br/></a><i><b>Modified:&#160;<br/></b><a href="TechnicalReference_CANdescs.html#158">13.12<b>&#160;</b></i>…use&#160;“Dynamic&#160;Normal&#160;<br/>Addressing&#160;Multi&#160;TP”&#160;with multiple&#160;<br/>tester<i><b>&#160;</b></i></a><br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
5&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=6></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Contents</b>&#160;<br/>
<a href="TechnicalReference_CANdescs.html#2"><b>1</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#2"><b>History&#160;...........................................................................................................................&#160;2</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#12"><b>2</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#12"><b>Introduction.................................................................................................................&#160;12</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#13"><b>3</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#13"><b>Documents&#160;this&#160;one&#160;refers&#160;to…&#160;.................................................................................&#160;13</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#14"><b>4</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#14"><b>Architecture&#160;Overview&#160;................................................................................................&#160;14</b>&#160;<br/>4.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#14">CANdesc&#160;–&#160;Internal&#160;processing&#160;........................................................................&#160;14&#160;<br/>4.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#14">Diagnostic&#160;protocol&#160;..........................................................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#15">4.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#15">How&#160;does this&#160;flow&#160;actually&#160;work?&#160;....................................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#18">4.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#18">Application interface&#160;flow&#160;.................................................................................&#160;18&#160;<br/>4.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#18">Session-&#160;and CommunicationControl&#160;...............................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#19"><b>5</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#19"><b>Advanced&#160;Configuration&#160;............................................................................................&#160;19</b>&#160;<br/>5.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#19">Configure DBC&#160;attributes&#160;for&#160;diagnostics&#160;.........................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#20"><b>6</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#20"><b>CANdesc&#160;Configuration in&#160;GENy&#160;...............................................................................&#160;20</b>&#160;<br/>6.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#20">Step&#160;One&#160;–&#160;Importing&#160;an&#160;ECU&#160;Diagnostic&#160;Description&#160;.....................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#21">6.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#21">Step&#160;Two&#160;–&#160;ECU&#160;Diagnostic&#160;Configuration in&#160;GENy&#160;.........................................&#160;21&#160;<br/></a><a href="TechnicalReference_CANdescs.html#22">6.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#22">Global&#160;CANdesc&#160;Settings&#160;.................................................................&#160;22&#160;<br/></a><a href="TechnicalReference_CANdescs.html#27">6.2.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#27">Generic&#160;Processing Notifications (UDS2012)&#160;.................&#160;27&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#27">6.2.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#27">Service Specific&#160;Settings&#160;..................................................................&#160;27&#160;<br/></a><a href="TechnicalReference_CANdescs.html#28">6.2.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#28">Generic&#160;Service Settings&#160;...............................................&#160;28&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#29">6.2.2.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#29">Predefined&#160;(implemented)&#160;Services in&#160;CANdesc&#160;............&#160;29&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#31">6.2.2.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#31">Signal&#160;Access&#160;Enabled&#160;Services&#160;....................................&#160;31&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#35">6.2.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#35">Timing&#160;Settings&#160;................................................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#36">6.2.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#36">Security&#160;Access Settings&#160;(UDS2006)&#160;...............................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#38">6.2.5&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#38">Security&#160;Access Settings&#160;(UDS2012)&#160;...............................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#39">6.2.6&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#39">Scheduler&#160;Settings&#160;...........................................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#42"><b>7</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#42"><b>CANdescBasic Configuration&#160;in&#160;GENy&#160;.....................................................................&#160;42</b>&#160;<br/>7.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#42">Global&#160;CANdescBasic&#160;Settings&#160;........................................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#42">7.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#42">Service Specific&#160;Settings&#160;..................................................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#43">7.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#43">Timing&#160;Settings&#160;................................................................................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#43">7.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#43">Diagnostic&#160;State&#160;Configuration&#160;.........................................................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#47"><b>8</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#47"><b>Multi&#160;Identity&#160;Support&#160;.................................................................................................&#160;47</b>&#160;<br/>8.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#47">Single Identity&#160;Mode&#160;........................................................................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#47">8.1.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#47">Configuration in&#160;CANdela...............................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#47">8.1.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#47">Configuration in&#160;GENy&#160;...................................................&#160;47&#160;</a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
6&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=7></a>Technical Reference&#160;CANdesc&#160;<br/>
<a href="TechnicalReference_CANdescs.html#47">8.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#47">VSG&#160;Mode&#160;.......................................................................................................&#160;47&#160;<br/></a><a href="TechnicalReference_CANdescs.html#48">8.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#48">Implementation&#160;Limitations...............................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#49">8.2.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#49">Configuration in&#160;CANdela&#160;.................................................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#50">8.2.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#50">Configuration in&#160;CANdela&#160;.................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#51">8.2.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#51">Configuration in&#160;GENy&#160;.....................................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#51">8.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#51">Multi&#160;Identity&#160;Mode&#160;...........................................................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#52"><b>9</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#52"><b>Diagnostic&#160;Service&#160;Implementation&#160;Specifics&#160;..........................................................&#160;52</b>&#160;<br/>9.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#52">ReadDataByIdentifier&#160;(SID&#160;$22)&#160;.......................................................................&#160;52&#160;<br/></a><a href="TechnicalReference_CANdescs.html#53">9.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#53">Limitations of&#160;the&#160;service&#160;..................................................................&#160;53&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#54">9.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#54">Single PID&#160;mode&#160;..............................................................................&#160;54&#160;<br/>9.1.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#54">Sending&#160;a&#160;positive response&#160;using&#160;linear&#160;buffer&#160;<br/>access&#160;...........................................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#55">9.1.2.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#55">Sending&#160;a&#160;positive response&#160;using&#160;ring&#160;buffer&#160;access&#160;....&#160;55&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#56">9.1.2.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#56">Sending&#160;a&#160;negative response&#160;.........................................&#160;56&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#56">9.1.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#56">Multiple PID&#160;mode&#160;............................................................................&#160;56&#160;<br/></a><a href="TechnicalReference_CANdescs.html#57">9.1.3.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#57">Pure&#160;linear&#160;buffer&#160;configuration&#160;......................................&#160;57&#160;<br/>9.1.3.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#57">Sending&#160;a&#160;positive response&#160;......................&#160;57&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#58">9.1.3.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#58">Sending&#160;a&#160;negative response&#160;.....................&#160;58&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#58">9.1.3.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#58">Ring&#160;buffer&#160;active configuration&#160;......................................&#160;58&#160;<br/></a><a href="TechnicalReference_CANdescs.html#60">9.1.3.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#60">Sending&#160;a&#160;positive response&#160;......................&#160;60&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#61">9.1.3.2.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#61">Sending&#160;a&#160;negative response&#160;.....................&#160;61&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#62">9.1.3.2.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#62">PostHandler&#160;execution&#160;rule&#160;........................&#160;62&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#62">9.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#62">DynamicallyDefineDataIdentifier&#160;(SID&#160;$2C)&#160;(UDS)&#160;...........................................&#160;62&#160;<br/></a><a href="TechnicalReference_CANdescs.html#63">9.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#63">Feature&#160;set&#160;.......................................................................................&#160;63&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#63">9.2.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#63">API&#160;Functions...................................................................................&#160;63&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#64">9.2.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#64">Sequence&#160;Charts&#160;.............................................................................&#160;64&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#67">9.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#67">Read/Write&#160;Memory&#160;by&#160;Address&#160;(SID&#160;$23/$3D)&#160;(UDS)&#160;....................................&#160;67&#160;<br/>9.3.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#67">Tasks&#160;performed&#160;by&#160;CANdesc&#160;..........................................................&#160;67&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#67">9.3.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#67">Task&#160;to be&#160;performed&#160;by&#160;the&#160;Application&#160;...........................................&#160;67&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#67">9.3.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#67">Repeated&#160;service calls&#160;.....................................................................&#160;67&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#69"><b>10</b>&#160;&#160;<b>Generic Processing&#160;Notifications&#160;..............................................................................&#160;69</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#70">10.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#70">Using&#160;dynamically&#160;defined data&#160;Identifier&#160;.........................................................&#160;70&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#71"><b>11</b>&#160;&#160;<b>Busy&#160;Repeat&#160;Responder&#160;Support&#160;(UDS2006&#160;and&#160;UDS2012)&#160;....................................&#160;71</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#72">11.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#72">Configuration in&#160;GENy&#160;.....................................................................................&#160;72&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73"><b>12</b>&#160;&#160;<b>CANdesc&#160;API&#160;...............................................................................................................&#160;73</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">12.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">API&#160;Categories&#160;.................................................................................................&#160;73&#160;<br/>12.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">Single Context&#160;..................................................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">12.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">Multiple Context&#160;(only&#160;CANdesc)......................................................&#160;73&#160;</a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
7&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=8></a>Technical Reference&#160;CANdesc&#160;<br/>
<a href="TechnicalReference_CANdescs.html#73">12.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">Data&#160;Types&#160;.......................................................................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">12.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">Global&#160;Variables&#160;...............................................................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">12.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">Constants&#160;........................................................................................................&#160;73&#160;<br/>12.4.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#73">Component&#160;Version..........................................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#74">12.5&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#74">Macros&#160;.............................................................................................................&#160;74&#160;<br/>12.5.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#74">Data&#160;exchange&#160;.................................................................................&#160;74&#160;<br/>12.5.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#74">Splitting&#160;16&#160;bit&#160;data&#160;........................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#74">12.5.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#74">Splitting&#160;32&#160;bit&#160;data&#160;........................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#74">12.5.1.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#74">Assembling&#160;16&#160;bit&#160;data&#160;...................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#75">12.5.1.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#75">Assembling&#160;32&#160;bit&#160;data&#160;...................................................&#160;75&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#75">12.6&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#75">Functions&#160;.........................................................................................................&#160;75&#160;<br/>12.6.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#75">Administrative Functions&#160;..................................................................&#160;75&#160;<br/>12.6.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#75">DescInitPowerOn().........................................................&#160;75&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#76">12.6.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#76">DescInit()&#160;.......................................................................&#160;76&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#77">12.6.1.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#77">DescTask()&#160;.....................................................................&#160;77&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#78">12.6.1.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#78">DescStateTask()&#160;............................................................&#160;78&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#79">12.6.1.5&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#79">DescTimerTask()&#160;............................................................&#160;79&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#80">12.6.1.6&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#80">DescGetActivityState()&#160;...................................................&#160;80&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#81">12.6.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#81">Multi&#160;Variant&#160;Configuration Functions&#160;...............................................&#160;81&#160;<br/>12.6.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#81">DescInitConfigVariant()&#160;..................................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#82">12.6.2.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#82">DescGetConfigVariant()&#160;.................................................&#160;82&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#83">12.6.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#83">Service Functions&#160;............................................................................&#160;83&#160;<br/>12.6.3.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#83">DescSetNegResponse()&#160;................................................&#160;83&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#84">12.6.3.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#84">DescProcessingDone()&#160;..................................................&#160;84&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#84">12.6.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#84">Service callback&#160;functions&#160;................................................................&#160;84&#160;<br/></a><a href="TechnicalReference_CANdescs.html#87">12.6.4.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#87">Service PreHandler&#160;........................................................&#160;87&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#88">12.6.4.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#88">Service&#160;MainHandler&#160;......................................................&#160;88&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#90">12.6.4.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#90">Service PostHandler&#160;......................................................&#160;90&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#91">12.6.5&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#91">User&#160;(Unknown)&#160;Service Handling&#160;...................................................&#160;91&#160;<br/>12.6.5.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#91">How&#160;it&#160;works&#160;..................................................................&#160;91&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#92">12.6.5.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#92">ApplDescCheckUserService()&#160;........................................&#160;92&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#93">12.6.5.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#93">DescGetServiceId()........................................................&#160;93&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#94">12.6.5.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#94">Generic&#160;User&#160;Service MainHandler&#160;................................&#160;94&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#95">12.6.5.5&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#95">Generic&#160;User&#160;Service PostHandler&#160;................................&#160;95&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#96">12.6.6&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#96">Session&#160;Handling&#160;.............................................................................&#160;96&#160;<br/>12.6.6.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#96">ApplDescCheckSessionTransition()&#160;...............................&#160;96&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#97">12.6.6.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#97">DescSessionTransitionChecked()&#160;..................................&#160;97&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#98">12.6.6.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#98">DescIsSuppressPosResBitSet&#160;()&#160;....................................&#160;98&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#99">12.6.6.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#99">ApplDescOnTransitionSession()&#160;....................................&#160;99&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#100">12.6.6.5&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#100">DescSetStateSession()&#160;................................................&#160;100&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#101">12.6.6.6&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#101">DescGetStateSession()&#160;...............................................&#160;101&#160;</a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
8&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=9></a>Technical Reference&#160;CANdesc&#160;<br/>
<a href="TechnicalReference_CANdescs.html#102">12.6.6.7&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#102">DescGetSessionIdOfSessionState&#160;...............................&#160;102&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#103">12.6.7&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#103">CommunicationControl&#160;Handling&#160;....................................................&#160;103&#160;<br/>12.6.7.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#103">ApplDescCheckCommCtrl()&#160;.........................................&#160;103&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#104">12.6.7.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#104">DescCommCtrlChecked()&#160;............................................&#160;104&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#105">12.6.8&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#105">Periodic&#160;call&#160;of&#160;‘Service&#160;MainHandler’&#160;............................................&#160;105&#160;<br/>12.6.8.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#105">DescStartRepeatedServiceCall()&#160;.................................&#160;105&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#106">12.6.8.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#106">DescStartMemByAddrRepeatedCall()&#160;..........................&#160;106&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#106">12.6.9&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#106">Ring&#160;Buffer&#160;Mechanism&#160;..................................................................&#160;106&#160;<br/></a><a href="TechnicalReference_CANdescs.html#108">12.6.9.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#108">DescRingBufferStart()&#160;..................................................&#160;108&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#109">12.6.9.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#109">DescRingBufferWrite()&#160;.................................................&#160;109&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#110">12.6.9.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#110">DescRingBufferCancel()&#160;..............................................&#160;110&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#111">12.6.9.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#111">DescRingBufferGetFreeSpace()&#160;...................................&#160;111&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#112">12.6.9.5&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#112">DescRingBufferGetProgress()......................................&#160;112&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#113">12.6.10&#160;&#160;Signal&#160;Interface&#160;of&#160;CANdesc&#160;..........................................................&#160;113&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#113">12.6.10.1&#160;&#160;ApplDesc&lt;Signal-Handler&gt;()&#160;.......................................&#160;113&#160;<br/></a><a href="TechnicalReference_CANdescs.html#114">12.6.10.2&#160;&#160;Configuration of&#160;direct&#160;signal&#160;access&#160;............................&#160;114&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#114">12.6.11&#160;&#160;State&#160;Handling&#160;(CANdesc&#160;only)&#160;......................................................&#160;114&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#114">12.6.11.1&#160;&#160;DescGetState&lt;StateGroup&gt;()&#160;......................................&#160;114&#160;<br/></a><a href="TechnicalReference_CANdescs.html#115">12.6.11.2&#160;&#160;DescSetState&lt;StateGroup&gt;()&#160;......................................&#160;115&#160;<br/></a><a href="TechnicalReference_CANdescs.html#116">12.6.11.3&#160;&#160;ApplDescOnTransition«StateGroup»()&#160;.........................&#160;116&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#117">12.6.12&#160;&#160;Force&#160;“Response Correctly&#160;Received&#160;-&#160;Response&#160;Pending”&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#117">transmission&#160;...................................................................................&#160;117&#160;<br/></a><a href="TechnicalReference_CANdescs.html#118">12.6.12.1&#160;&#160;DescForceRcrRpResponse()&#160;.......................................&#160;118&#160;<br/></a><a href="TechnicalReference_CANdescs.html#119">12.6.12.2&#160;&#160;ApplDescRcrRpConfirmation()&#160;.....................................&#160;119&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#119">12.6.13&#160;&#160;DynamicallyDefineDataIdentifier&#160;&#160;($2C)&#160;(UDS)&#160;functions&#160;................&#160;119&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#120">12.6.13.1&#160;&#160;DescMayCallStateTaskAgain()&#160;.....................................&#160;120&#160;<br/></a><a href="TechnicalReference_CANdescs.html#121">12.6.13.2&#160;&#160;ApplDescCheckDynDidMemoryArea()&#160;.........................&#160;121&#160;<br/></a><a href="TechnicalReference_CANdescs.html#122">12.6.13.3&#160;&#160;Non-volatile memory&#160;support&#160;.......................................&#160;122&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#125">12.6.13.3.1&#160;&#160;DescDynDefineDidPowerUp()&#160;..................&#160;125&#160;<br/></a><a href="TechnicalReference_CANdescs.html#126">12.6.13.3.2&#160;&#160;DescDynIdMemContentRestored&#160;()&#160;.........&#160;126&#160;<br/></a><a href="TechnicalReference_CANdescs.html#127">12.6.13.3.3&#160;&#160;DescDynDefineDidPowerDown ()&#160;............&#160;127&#160;<br/></a><a href="TechnicalReference_CANdescs.html#128">12.6.13.3.4&#160;&#160;ApplDescStoreDynIdMemContent&#160;()&#160;........&#160;128&#160;<br/></a><a href="TechnicalReference_CANdescs.html#129">12.6.13.3.5&#160;&#160;ApplDescRestoreDynIdMemContent&#160;()&#160;....&#160;129&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#130">12.6.14&#160;&#160;Memory&#160;Access Callbacks&#160;.............................................................&#160;130&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#130">12.6.14.1&#160;&#160;ApplDescReadMemoryByAddress()&#160;.............................&#160;130&#160;<br/></a><a href="TechnicalReference_CANdescs.html#131">12.6.14.2&#160;&#160;ApplDescWriteMemoryByAddress()&#160;.............................&#160;131&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#131">12.6.15&#160;&#160;Flash&#160;Boot&#160;Loader&#160;Support&#160;............................................................&#160;131&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#132">12.6.15.1&#160;&#160;DescSendPosRespFBL()&#160;.............................................&#160;132&#160;<br/></a><a href="TechnicalReference_CANdescs.html#133">12.6.15.2&#160;&#160;ApplDescInitPosResFblBusInfo()&#160;.................................&#160;133&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#134">12.6.16&#160;&#160;Debug&#160;Interface&#160;/&#160;Assertion&#160;............................................................&#160;134&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#134">12.6.16.1&#160;&#160;ApplDescFatalError()&#160;...................................................&#160;134&#160;</a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
9&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=10></a>Technical Reference&#160;CANdesc&#160;<br/>
<a href="TechnicalReference_CANdescs.html#137">12.6.17&#160;&#160;“Spontaneous&#160;Response”&#160;transmission&#160;..........................................&#160;137&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#138">12.6.17.1&#160;&#160;DescApplSendSpontaneousResponse()&#160;......................&#160;138&#160;<br/></a><a href="TechnicalReference_CANdescs.html#139">12.6.17.2&#160;&#160;ApplDescSpontaneousResponseConfirmation()&#160;..........&#160;139&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#140">12.6.18&#160;&#160;Generic&#160;Processing Notifications....................................................&#160;140&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#140">12.6.18.1&#160;&#160;ApplDescManufacturerIndication&#160;.................................&#160;140&#160;<br/></a><a href="TechnicalReference_CANdescs.html#141">12.6.18.2&#160;&#160;ApplDescManufacturerConfirmation&#160;............................&#160;141&#160;<br/></a><a href="TechnicalReference_CANdescs.html#142">12.6.18.3&#160;&#160;ApplDescSupplierIndication&#160;.........................................&#160;142&#160;<br/></a><a href="TechnicalReference_CANdescs.html#143">12.6.18.4&#160;&#160;ApplDescSupplierConfirmation&#160;....................................&#160;143&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#144"><b>13</b>&#160;&#160;<b>How&#160;To…&#160;...................................................................................................................&#160;144</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#144">13.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#144">…implement&#160;a&#160;protocol&#160;service MainHandler&#160;.................................................&#160;144&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#147">13.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#147">…implement&#160;a&#160;service MainHandler...............................................................&#160;147&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#148">13.3&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#148">…implement&#160;a&#160;Signal&#160;Handler........................................................................&#160;148&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#149">13.4&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#149">…implement&#160;a&#160;Packet&#160;Handler&#160;.......................................................................&#160;149&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#149">13.5&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#149">…implement&#160;a&#160;state&#160;transition&#160;function&#160;..........................................................&#160;149&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#151">13.6&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#151">…work&#160;with the&#160;ring-buffer&#160;mechanism&#160;..........................................................&#160;151&#160;<br/>13.6.1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#151">with asynchronous&#160;write&#160;.................................................................&#160;151&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#153">13.6.2&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#153">with synchronous&#160;write&#160;...................................................................&#160;153&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#154">13.7&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#154">…prevent&#160;the&#160;ECU&#160;going to&#160;sleep while diagnostic&#160;is&#160;active&#160;..........................&#160;154&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#155">13.8&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#155">…send a&#160;positive response without&#160;request&#160;after&#160;FBL&#160;flash&#160;job&#160;.....................&#160;155&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#155">13.9&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#155">…enforce CANdesc&#160;to&#160;use&#160;ANSI&#160;C&#160;instead&#160;of&#160;hardware&#160;optimized&#160;bit&#160;type&#160;....&#160;155&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#156">13.10&#160;&#160;…configure&#160;Extended&#160;Addressing&#160;..................................................................&#160;156&#160;<br/>13.11&#160;&#160;…use&#160;Multiple&#160;Addressing&#160;..............................................................................&#160;156&#160;<br/></a><a href="TechnicalReference_CANdescs.html#158">13.12&#160;&#160;…use&#160;“Dynamic&#160;Normal&#160;Addressing&#160;Multi&#160;TP”&#160;with multiple&#160;tester&#160;.................&#160;158&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#162"><b>14</b>&#160;&#160;<b>Related&#160;documents&#160;...................................................................................................&#160;162</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#163"><b>15</b>&#160;&#160;<b>Glossary&#160;....................................................................................................................&#160;163</b>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#164"><b>16</b>&#160;&#160;<b>Contact&#160;......................................................................................................................&#160;164</b>&#160;<br/></a>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
10&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=11></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Illustrations</b>&#160;<br/><a href="TechnicalReference_CANdescs.html#13">Figure&#160;3-1:&#160;Manuals&#160;and&#160;References&#160;for&#160;CANdesc&#160;..............................................................&#160;13&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#14">Figure&#160;4-1:&#160;General&#160;request&#160;flow&#160;..........................................................................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#15">Figure&#160;4-2:&#160;DESC&#160;run&#160;diagram&#160;.............................................................................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#16">Figure&#160;4-3:&#160;Request&#160;message&#160;mapping&#160;...............................................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#17">Figure&#160;4-4:&#160;Request&#160;processing&#160;stages&#160;................................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#20">Figure&#160;6-1 CANdesc&#160;GENy&#160;startup&#160;screen&#160;...........................................................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#22">Figure&#160;6-2&#160;Example of&#160;GENy&#160;global&#160;CANdesc&#160;settings&#160;........................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#27">Figure&#160;6-3&#160;Activated&#160;feature&#160;“Generic&#160;Processing&#160;Notifications”&#160;...........................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#28">Figure&#160;6-4 GENy&#160;diagnostic&#160;service overview&#160;......................................................................&#160;28&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#29">Figure&#160;6-5 GENy&#160;generic&#160;sub-service setup&#160;.........................................................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#30">Figure&#160;6-6 GENy&#160;predefined sub-service setup&#160;....................................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#32">Figure&#160;6-7 GENy&#160;signal&#160;API&#160;enabled&#160;sub-service setup&#160;.......................................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#33">Figure&#160;6-8 GENy&#160;signal&#160;view&#160;of&#160;a&#160;sub-service&#160;......................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#33">Figure&#160;6-9 GENy&#160;signal&#160;handler&#160;types&#160;..................................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#34">Figure&#160;6-10&#160;GENy&#160;direct&#160;access&#160;signal&#160;handler&#160;settings&#160;......................................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#36">Figure&#160;6-11 GENy&#160;CANdesc&#160;timing&#160;parameters&#160;...................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#37">Figure&#160;6-12&#160;GENy&#160;CANdesc&#160;security&#160;access&#160;parameters&#160;....................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#38">Figure&#160;6-13&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#38">Security&#160;settings&#160;in&#160;GENy&#160;.........................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#40">Figure&#160;6-14&#160;GENy&#160;CANdesc&#160;scheduler&#160;parameters&#160;.............................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#43">Figure&#160;7-1 CANdescBasic&#160;add a&#160;user&#160;session&#160;.....................................................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#44">Figure&#160;7-2 CANdescBasic&#160;change user&#160;session&#160;name,&#160;id or&#160;completely&#160;delete&#160;user&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#44">session&#160;.....................................................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#45">Figure&#160;7-3 CANdescBasic&#160;session&#160;configuration&#160;at&#160;service overview&#160;...................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#45">Figure&#160;7-4 CANdescBasic&#160;session&#160;configuration&#160;at&#160;service Id level&#160;.....................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#46">Figure&#160;7-5 CANdescBasic&#160;session&#160;configuration&#160;at&#160;sub-service level...................................&#160;46&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#48">Figure&#160;8-1 CANdesc&#160;multi&#160;identity&#160;mode&#160;..............................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#50">Figure&#160;8-2 Defining&#160;VSGs&#160;in CANdelaStudio&#160;.......................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#51">Figure&#160;8-3 Setting&#160;a VSG&#160;for&#160;service in&#160;CANdelaStudio&#160;.......................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#54">Figure&#160;9-1:&#160;Linearly&#160;written&#160;positive response&#160;on&#160;single PID&#160;request....................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#55">Figure&#160;9-2:&#160;“On&#160;the&#160;fly”&#160;response data writing.&#160;.....................................................................&#160;55&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#56">Figure&#160;9-3:&#160;Negative response&#160;on&#160;single PID&#160;.......................................................................&#160;56&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#57">Figure&#160;9-4:&#160;Linearly&#160;written&#160;positive response&#160;on&#160;multiple PIDs&#160;(global&#160;ring buffer&#160;option&#160;is&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#57">off)&#160;............................................................................................................&#160;57&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#58">Figure&#160;9-5:&#160;Negative response&#160;on&#160;multiple PIDs&#160;(global&#160;ring buffer&#160;option&#160;is&#160;off)&#160;..................&#160;58&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#61">Figure&#160;9-6:&#160;Linearly&#160;written&#160;response&#160;data on&#160;multiple PIDs&#160;(global&#160;ring&#160;buffer&#160;option&#160;is&#160;on)&#160;61&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#61">Figure&#160;9-7:&#160;Negative response&#160;on&#160;multiple PIDs&#160;(global&#160;ring buffer&#160;option&#160;is&#160;on)&#160;..................&#160;61&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#62">Figure&#160;9-8:&#160;Post-Handler&#160;execution&#160;sequence.&#160;....................................................................&#160;62&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#65">Figure&#160;9-9:&#160;Defining&#160;a&#160;DDID.&#160;................................................................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#66">Figure&#160;9-10:&#160;Reading&#160;a&#160;DDID.&#160;..............................................................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#69">Figure&#160;10-1 Call&#160;order&#160;of&#160;Manufacturer-&#160;and Supplier-Notficiation&#160;........................................&#160;69&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#70">Figure&#160;10-2 Read&#160;out&#160;a&#160;DDID&#160;with generic&#160;processing&#160;notifications&#160;.....................................&#160;70&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#71">Figure&#160;11-1&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#71">Illustration&#160;of&#160;the&#160;feature&#160;BusyRepeatResponder&#160;......................................&#160;71&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#72">Figure&#160;11-2 Example of&#160;the&#160;“Number&#160;of&#160;Rx(Tx)&#160;Channels”&#160;settings&#160;......................................&#160;72&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#123">Figure&#160;12-1 DynDID&#160;definition&#160;restore&#160;and&#160;tester&#160;interaction&#160;..............................................&#160;123&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#124">Figure&#160;12-2 Store DynDID&#160;definitions&#160;.................................................................................&#160;124&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#156">Figure&#160;13-1 GENy&#160;TP&#160;configuration&#160;...................................................................................&#160;156&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#157">Figure&#160;13-2 GENy&#160;TP&#160;callbacks&#160;.........................................................................................&#160;157&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#159">Figure&#160;13-3 GENy&#160;TP&#160;callbacks&#160;(physical&#160;addressing)&#160;.......................................................&#160;159&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#159">Figure&#160;13-4 GENy&#160;TP&#160;callbacks&#160;(functional&#160;addressing)&#160;....................................................&#160;159&#160;</a><br/>
<b>&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
11&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-12_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>2&#160;&#160;Introduction&#160;</b><br/>
This&#160;document&#160;has&#160;not&#160;the&#160;job&#160;to&#160;describe&#160;the&#160;diagnostic&#160;itself.&#160;The&#160;focus&#160;of&#160;this&#160;document&#160;<br/>is the&#160;technical aspects of&#160;the&#160;CANdesc component.&#160;<br/>
&#160;<br/>
<b>Please&#160;note&#160;<br/></b>We&#160;have configured&#160;the&#160;programs&#160;in&#160;accordance&#160;with your&#160;specifications&#160;in the&#160;<br/>
&#160;<br/>
questionnaire.&#160;Whereas&#160;the&#160;programs&#160;do&#160;support&#160;other&#160;configurations&#160;than&#160;the&#160;one&#160;<br/>specified&#160;in your&#160;questionnaire,&#160;Vector’s&#160;release&#160;of&#160;the&#160;programs&#160;delivered to&#160;your&#160;<br/>company&#160;is&#160;expressly&#160;restricted&#160;to&#160;the&#160;configuration&#160;you&#160;have specified&#160;in&#160;the&#160;<br/>questionnaire.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
12&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-13_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-13_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-13_3.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>3&#160;&#160;Documents&#160;this&#160;one&#160;refers&#160;to…&#160;</b><br/>
&#160;&#160;User Manuals CANdesc and&#160;CANdescBasic (one&#160;for both)&#160;<br/>
&#160;&#160;Docu&#160;OEM&#160;<br/>
&#160;<br/>
<b>User&#160;Manual</b><br/>
<b>Technical</b><br/>
<b>Technical</b><br/>
<b>Reference</b><br/>
<b>Reference</b><br/>
<b>General</b><br/>
<b>OEM</b><br/>
<b>You&#160;are&#160;here</b><br/>
&#160;<br/>
Figure&#160;3-1:&#160;Manuals&#160;and&#160;References&#160;for&#160;CANdesc&#160;<br/>
All&#160;&#160;common&#160;&#160;topics&#160;&#160;with&#160;&#160;CANdesc&#160;&#160;and&#160;&#160;CANdescBasic&#160;&#160;are&#160;&#160;described&#160;&#160;within&#160;&#160;this&#160;&#160;technical&#160;<br/>reference&#160;very&#160;detailed.&#160;&#160;<br/>Read&#160;all&#160;about&#160;OEM-specific differences&#160;in&#160;the&#160;TechnicalReference_OEM.&#160;<br/>For&#160;&#160;faster&#160;&#160;integration,&#160;&#160;refer&#160;&#160;to&#160;&#160;the&#160;&#160;product’s&#160;&#160;corresponding&#160;&#160;user&#160;&#160;manual&#160;&#160;CANdesc&#160;&#160;or&#160;<br/>CANdescBasic.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
13&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=14></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>4&#160;&#160;Architecture&#160;Overview&#160;</b><br/>
This&#160;&#160;chapter&#160;&#160;should&#160;&#160;describe&#160;&#160;the&#160;&#160;internal&#160;&#160;structure&#160;&#160;and&#160;&#160;behavior&#160;&#160;of&#160;&#160;the&#160;&#160;CANdesc&#160;<br/>component.&#160;&#160;<br/>
&#160;<br/>
<b>4.1&#160;</b><br/>
<b>CANdesc&#160;–&#160;Internal&#160;processing&#160;</b><br/>
<b>4.1.1&#160;</b><br/>
<b>Diagnostic&#160;protocol&#160;</b><br/>
The&#160;&#160;communication&#160;&#160;described&#160;&#160;in&#160;&#160;the&#160;&#160;diagnostic&#160;&#160;protocol&#160;&#160;consists&#160;&#160;of&#160;&#160;a&#160;&#160;ping-pong&#160;<br/>communication&#160;&#160;between&#160;&#160;a&#160;&#160;tester&#160;&#160;(client)&#160;&#160;and&#160;&#160;an&#160;&#160;ECU&#160;&#160;(server).&#160;&#160;The&#160;&#160;tester&#160;&#160;requests&#160;&#160;a&#160;<br/>service&#160;&#160;in&#160;&#160;the&#160;&#160;ECU&#160;&#160;by&#160;&#160;transmitting&#160;&#160;a&#160;&#160;request&#160;&#160;to&#160;&#160;him.&#160;&#160;The&#160;&#160;ECU&#160;&#160;should&#160;&#160;response&#160;&#160;with&#160;&#160;a&#160;<br/>positive&#160;response,&#160;if&#160;the&#160;result&#160;of&#160;this&#160;service&#160;is&#160;valid&#160;or&#160;the&#160;action&#160;is&#160;prepared&#160;to&#160;be&#160;done.&#160;<br/>Is&#160;&#160;the&#160;&#160;result&#160;&#160;negative&#160;&#160;or&#160;&#160;the&#160;&#160;action&#160;&#160;could&#160;&#160;not&#160;&#160;be&#160;&#160;executed,&#160;&#160;the&#160;&#160;ECU&#160;&#160;should&#160;&#160;respond&#160;<br/>negative.&#160;&#160;<br/>The&#160;&#160;validity&#160;&#160;checks&#160;&#160;have&#160;&#160;typically&#160;&#160;the&#160;&#160;same&#160;&#160;pattern&#160;&#160;for&#160;&#160;all&#160;&#160;services&#160;&#160;(as&#160;&#160;shown&#160;&#160;in&#160;&#160;Figure&#160;<br/>4-1:&#160;General&#160;request&#160;flow).&#160;These&#160;components&#160;which&#160;are&#160;included&#160;in&#160;this&#160;flow,&#160;build&#160;up&#160;the&#160;<br/>main&#160;base&#160;of&#160;the&#160;CANdesc component.&#160;<br/>
&#160;<br/>
<b>Application</b><br/>
<b>Prehandler&#160;optional</b><br/>
<b>Mainhandler</b><br/>
<b>Posthandler&#160;optional</b><br/>
{<br/>
{<br/>
{<br/>
....<br/>
}<br/>
}<br/>
DescProcessingDone( );<br/>
}<br/>
<b>Diagnostics&#160;-&#160;CANdesc</b><br/>
Check&#160;<b>Svc</b><br/>
Check&#160;<b>SvcInst</b><br/>
Check&#160;<b>Session</b><br/>
Check&#160;<b>Format</b><br/>
<b>ACK</b><br/>
t<br/>
<b>positive Response</b><br/>
<b>Request</b><br/>
<b>negative Response</b><br/>
<b>Tester</b><br/>
&#160;<br/>
Figure&#160;4-1:&#160;General&#160;request&#160;flow&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
14&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=15></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>4.1.2&#160;</b><br/>
<b>How&#160;does&#160;this&#160;flow&#160;actually&#160;work?&#160;</b><br/>
The&#160;picture below&#160;shows a&#160;simply&#160;structured&#160;description&#160;of&#160;the&#160;module&#160;functionality.&#160;<br/>
<b>Request reception</b><br/>
<b>Dispatching&#160;the&#160;request</b><br/>
<b>Idle&#160;mode/Awaiting request</b><br/>
<b>Processing&#160;the&#160;request</b><br/>
<b>Finishing processing&#160;of the&#160;</b><br/>
<b>request</b><br/>
&#160;<br/>
Figure&#160;4-2:&#160;DESC&#160;run&#160;diagram&#160;<br/>
Lets&#160;assume&#160;that&#160;the&#160;component&#160;is&#160;currently&#160;in&#160;the&#160;<i><b>“</b></i><b>Awaiting<i>&#160;</i></b><b>request<i>”</i></b>&#160;state.<b>&#160;</b>In&#160;this&#160;state&#160;<br/>it&#160;&#160;waits&#160;&#160;for&#160;&#160;the&#160;&#160;next&#160;&#160;diagnostic&#160;&#160;request&#160;&#160;and&#160;&#160;if&#160;&#160;it&#160;&#160;is&#160;&#160;needed&#160;&#160;–&#160;&#160;it&#160;&#160;provides&#160;&#160;also&#160;&#160;timing&#160;<br/>monitoring.&#160;&#160;<br/>Once&#160;&#160;a&#160;&#160;diagnostic&#160;&#160;request&#160;&#160;transmission&#160;&#160;was&#160;&#160;initiated&#160;&#160;from&#160;&#160;the&#160;&#160;transport&#160;&#160;layer,&#160;&#160;the&#160;<br/>component&#160;&#160;enters&#160;&#160;in&#160;&#160;the&#160;&#160;state&#160;&#160;<i><b>“</b></i><b>Request<i>&#160;&#160;</i></b><b>reception<i>”</i></b>.&#160;&#160;If&#160;&#160;the&#160;&#160;reception&#160;&#160;is&#160;&#160;finished,&#160;&#160;further&#160;<br/>physical requests&#160;will be&#160;blocked&#160;until the&#160;response&#160;is sent.&#160;Depending&#160;on&#160;the&#160;used&#160;OEM&#160;a&#160;<br/>functional&#160;request&#160;in&#160;the&#160;ISO&#160;14230&#160;standard&#160;will&#160;be&#160;handled&#160;parallel1&#160;to&#160;physical&#160;request.&#160;<br/>The&#160;&#160;ISO&#160;&#160;14229-1&#160;&#160;standard&#160;&#160;is&#160;&#160;more&#160;&#160;restricted&#160;&#160;to&#160;&#160;the&#160;&#160;parallel&#160;&#160;handling.&#160;&#160;Except&#160;&#160;the&#160;<br/>TesterPresent&#160;Service&#160;no&#160;other service&#160;could&#160;be&#160;handled&#160;parallel.&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>1&#160;Not&#160;all&#160;services&#160;could&#160;be&#160;handled&#160;parallel.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
15&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_6.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_7.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_8.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_9.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_10.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_11.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_12.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_13.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_14.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_15.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_16.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_17.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_18.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_19.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_20.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_21.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_22.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_23.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_24.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_25.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_26.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_27.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-16_28.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
After&#160;&#160;the&#160;&#160;reception&#160;&#160;of&#160;&#160;the&#160;&#160;request&#160;&#160;is&#160;&#160;completed&#160;&#160;the&#160;&#160;request&#160;&#160;processing&#160;&#160;will&#160;&#160;be&#160;&#160;prepared.&#160;<br/>The&#160;component&#160;is&#160;in&#160;the&#160;&#160;<i><b>“</b></i><b>Dispatching<i>&#160;&#160;</i></b><b>request<i>”</i></b>&#160;&#160;state.&#160;The&#160;processing&#160;of&#160;&#160;the&#160;request&#160;&#160;is&#160;<br/>done&#160;at&#160;a&#160;task level within&#160;the&#160;next&#160;call&#160;of&#160;the&#160;DescTask()&#160;function.&#160;<br/>First&#160;&#160;the&#160;&#160;SID&#160;&#160;is&#160;&#160;checked&#160;&#160;whether&#160;&#160;supported&#160;&#160;or&#160;&#160;not.&#160;&#160;If&#160;&#160;not&#160;&#160;a&#160;&#160;negative&#160;&#160;response&#160;<br/>‘ServiceNotSupported’&#160;(NRC&#160;$11) will be&#160;sent.&#160;<br/>Next&#160;step&#160;is&#160;to&#160;check&#160;if&#160;the&#160;supported&#160;SID&#160;is&#160;permitted&#160;in&#160;the&#160;current&#160;Session&#160;(Diagnostic&#160;<br/>Mode).&#160;&#160;If&#160;&#160;not,&#160;&#160;the&#160;&#160;negative&#160;&#160;response&#160;&#160;‘ServiceNotSupportedInTheCurrentSession’&#160;&#160;(NRC&#160;<br/>$7F)&#160;is sent&#160;automatically&#160;by&#160;the&#160;CANdesc component.&#160;<br/>
&#160;<br/>
&#160;&#160;<br/>
&#160;<br/>
&#160;&#160;<br/>
1Byte&#160;&#160;&#160;&#160;n&#160;Bytes (n=0..N)&#160;<br/>
&#160;<br/>
m<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;Bytes (m&#160;= 0..M)&#160;<br/>
&#160;<br/>
&#160;&#160;<br/>
&#160;&#160;<br/>
SID&#160;<br/>
&#160;<br/>
&#160;&#160;<br/>
SID&#160;_EXT&#160;&#160;<br/>
Application data&#160;&#160;&#160;<br/>
&#160;&#160;<br/>
&#160;&#160;<br/>
&#160;&#160;<br/>
Service&#160;instance&#160;qualificatio&#160;n<br/>
&#160;&#160;&#160;<br/>
“Request&#160;head<br/>
“&#160;&#160;&#160;<br/>
&#160;&#160;<br/>
&#160;<br/>
Figure&#160;4-3:&#160;Request&#160;message&#160;mapping&#160;<br/>
<i><b>&#160;</b></i><br/>
After&#160;&#160;that&#160;&#160;the&#160;&#160;CANdesc&#160;&#160;component&#160;&#160;validates,&#160;&#160;if&#160;&#160;the&#160;&#160;sub-service&#160;&#160;(service&#160;&#160;instance)&#160;&#160;is&#160;<br/>supported&#160;&#160;or&#160;&#160;not.&#160;&#160;This&#160;&#160;is&#160;&#160;implemented&#160;&#160;with&#160;&#160;a&#160;&#160;powerful&#160;&#160;binary&#160;&#160;search.&#160;&#160;If&#160;&#160;the&#160;&#160;service&#160;<br/>instance&#160;is&#160;not&#160;&#160;supported,&#160;the&#160;request&#160;will&#160;be&#160;rejected&#160;with&#160;the&#160;corresponding&#160;error&#160;code&#160;<br/>‘SubFunctionNotSupported’&#160;&#160;(NRC&#160;&#160;$11,&#160;&#160;for&#160;&#160;service&#160;&#160;which&#160;&#160;have&#160;&#160;SubFunctions)&#160;&#160;or&#160;<br/>‘InvalidFormat’&#160;(NRC $13,&#160;for service&#160;with&#160;data&#160;identifiers).&#160;<br/>For&#160;each&#160;service&#160;&#160;instance&#160;which&#160;&#160;is&#160;supported&#160;by&#160;the&#160;current&#160;&#160;configuration,&#160;&#160;the&#160;CANdesc&#160;<br/>component&#160;&#160;knows&#160;&#160;the&#160;&#160;exact&#160;&#160;length&#160;&#160;of&#160;&#160;most&#160;&#160;requests.&#160;&#160;(Some&#160;&#160;requests&#160;&#160;use&#160;&#160;variable&#160;&#160;data&#160;<br/>length&#160;elements&#160;&#160;thus&#160;a&#160;fixed&#160;length&#160;doesn’t&#160;exist.)&#160;&#160;If&#160;the&#160;length&#160;is&#160;known&#160;and&#160;it&#160;does&#160;not&#160;<br/>match,&#160;the&#160;dispatcher will&#160;reject&#160;this&#160;request&#160;(dependent&#160;to&#160;the&#160;manufacturer&#160;specification).&#160;<br/>If&#160;the&#160;complete&#160;request&#160;length&#160;is not&#160;known,&#160;the&#160;application&#160;has&#160;to&#160;do&#160;this job.&#160;<br/>If&#160;the&#160;service&#160;instance&#160;is&#160;found,&#160;the&#160;state&#160;checks&#160;(e.g.&#160;‘Security&#160;Level’)&#160;will&#160;be&#160;performed.&#160;If&#160;<br/>all&#160;of&#160;them&#160;are&#160;passed&#160;then&#160;the&#160;component&#160;enters&#160;the&#160;state&#160;<i><b>“</b></i><b>Processing&#160;the&#160;request<i>”</i></b><b>&#160;</b>in&#160;<br/>the&#160;&#160;diagram&#160;&#160;above.&#160;&#160;This&#160;&#160;state&#160;&#160;consists&#160;&#160;of&#160;&#160;several&#160;&#160;parts&#160;&#160;that&#160;&#160;are&#160;&#160;represented&#160;&#160;in&#160;&#160;more&#160;<br/>detailed&#160;&#160;structure&#160;&#160;shown&#160;&#160;below.&#160;&#160;The&#160;&#160;dotted&#160;&#160;lines&#160;&#160;reveal&#160;&#160;the&#160;&#160;optional&#160;&#160;parts&#160;&#160;for&#160;&#160;the&#160;<br/>implementation.&#160;For&#160;example&#160;–&#160;the&#160;Pre-,&#160;Post-&#160;and&#160;SignalHandlers&#160;are&#160;optional&#160;and&#160;might&#160;<br/>not&#160;be&#160;implemented.&#160;&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
16&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=17></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Request&#160;analyzed</b><br/>
<b>PreHandler</b><br/>
<b>MainHandler</b><br/>
<i><b>Signal-Handler #0</b></i><br/>
<i><b>Signal-Handler #1</b></i><br/>
<i><b>Signal-Handler #k</b></i><br/>
<b>PostHandler</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;4-4:&#160;Request&#160;processing&#160;stages&#160;<br/>
After&#160;&#160;the&#160;&#160;response&#160;&#160;is&#160;&#160;composed&#160;&#160;CANdesc&#160;&#160;must&#160;&#160;be&#160;&#160;informed&#160;&#160;about,&#160;&#160;to&#160;&#160;start&#160;&#160;the&#160;<br/>transmission&#160;&#160;of&#160;&#160;the&#160;&#160;final&#160;&#160;response.&#160;&#160;CANdesc&#160;&#160;is&#160;&#160;doing&#160;&#160;the&#160;&#160;handshake&#160;&#160;with&#160;&#160;the&#160;&#160;Tester&#160;<br/>(automatic&#160;transmission&#160;of&#160;RCR-RP) while&#160;the&#160;state&#160;<i><b>“</b></i><b>Processing&#160;the&#160;request<i>”</i></b>&#160;is&#160;active.&#160;<br/>Within&#160;&#160;the&#160;&#160;end&#160;&#160;of&#160;&#160;the&#160;&#160;transmission&#160;&#160;the&#160;&#160;state&#160;&#160;“<b>Finishing&#160;&#160;processing&#160;&#160;of&#160;&#160;the&#160;&#160;request”&#160;&#160;</b>is&#160;<br/>entered&#160;and&#160;the&#160;PostHandler&#160;(if&#160;configured)&#160;is&#160;called.&#160;&#160;In&#160;this&#160;PostHandler&#160;the&#160;application&#160;<br/>has&#160;to&#160;do&#160;the&#160;closing&#160;(e.g.&#160;updating&#160;a&#160;state&#160;machine,&#160;prepare&#160;the&#160;ECU&#160;for&#160;a&#160;reset&#160;…). The&#160;<br/>session&#160;&#160;state&#160;&#160;for&#160;&#160;example&#160;&#160;(which&#160;&#160;is&#160;&#160;managed&#160;&#160;by&#160;&#160;CANdesc)&#160;&#160;is&#160;&#160;also&#160;&#160;updated&#160;&#160;in&#160;&#160;a&#160;<br/>PostHandler.&#160;<b>&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
17&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=18></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>4.2&#160;</b><br/>
<b>Application interface&#160;flow&#160;</b><br/>
<b>4.2.1&#160;</b><br/>
<b>Session-&#160;and CommunicationControl&#160;&#160;</b><br/>
The&#160;&#160;services&#160;&#160;SessionControl&#160;&#160;and&#160;&#160;CommunicationControl&#160;&#160;are&#160;&#160;typically&#160;&#160;handled&#160;&#160;by&#160;<br/>CANdesc.&#160;But&#160;the&#160;application&#160;still&#160;has&#160;the&#160;possibility&#160;to&#160;reject&#160;these&#160;service&#160;requests.&#160;You&#160;<br/>can&#160;find&#160;a&#160;detailed&#160;description&#160;in&#160;&#160;chapte<a href="TechnicalReference_CANdescs.html#96">r&#160;&#160;12.6.6&#160;&#160;Session&#160;Handling&#160;&#160;</a>and&#160;in&#160;&#160;chapte<a href="TechnicalReference_CANdescs.html#103">r&#160;&#160;12.6.7&#160;<br/>CommunicationControl&#160;Handling&#160;</a>also.&#160;<br/>
IDLE<br/>
Receive&#160;a&#160;Request<br/>
Search<br/>
SID<br/>
SID&#160;$28<br/>
Supported&#160;Unsupported<br/>
SID&#160;$10<br/>
(SID&#160;$29)<br/>
SID&#160;$xx<br/>
SID&#160;$xx<br/>
<b>ApplDesc&lt;PreHandler&gt;</b><br/>
<b>ApplDesc&lt;PreHandler&gt;</b><br/>
<b>ApplDesc&lt;PreHandler&gt;</b><br/>
<b>callback</b><br/>
<b>callback</b><br/>
<b>callback</b><br/>
<b>ApplDescCheckSessionTransition</b><br/>
<b>ApplDescCheckCommCtrl</b><br/>
<b>ApplDesc&lt;MainHandler&gt;</b><br/>
<b>{</b><br/>
<b>{</b><br/>
<b>{</b><br/>
<b>&#160; ...</b><br/>
<b>&#160; ...</b><br/>
<b>&#160; ...</b><br/>
<b>DescSessionTransitionChecked();</b><br/>
<b>DescCommCtrlChecked();</b><br/>
<b>&#160; DescProcessingDone();</b><br/>
<b>}</b><br/>
<b>}</b><br/>
<b>}</b><br/>
Transmit<br/>
Transmit&#160;positive<br/>
Transmit&#160;positive<br/>
Transmit&#160;positive<br/>
negative<br/>
response&#160;$50<br/>
response&#160;$68<br/>
response&#160;$xx<br/>
response<br/>NRC&#160;$11<br/>
WAIT<br/>
WAIT<br/>
WAIT<br/>
TX&#160;acknowledge<br/>
TX&#160;acknowledge<br/>
TX&#160;acknowledge<br/>
$50<br/>
$68<br/>
$xx<br/>
<i><b>ApplDescOnCommunicationEnabled</b></i><br/>
<b>ApplDescOnSessionTransition</b><br/>
<i><b>ApplDescOnCommunicationDisabled</b></i><br/>
<b>ApplDesc&lt;PostHandler&gt;</b><br/>
<i>&gt;optional&#160;-&#160;not&#160;all&#160;OEMs&lt;</i><br/>
IDLE<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
18&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=19></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>5&#160;&#160;Advanced&#160;Configuration&#160;</b><br/>
<b>5.1&#160;</b><br/>
<b>Configure&#160;DBC attributes&#160;for diagnostics&#160;</b><br/>
If&#160;the&#160;diagnostic messages shall&#160;be&#160;defined&#160;in&#160;the&#160;communication&#160;data-base&#160;file&#160;(DBC),&#160;<br/>and&#160;not&#160;received&#160;via&#160;CANdriver ranges (e.g.&#160;in&#160;case&#160;of&#160;normal&#160;fixed&#160;or extended&#160;<br/>addressing), the&#160;following&#160;attributes in&#160;the&#160;DBC file&#160;must&#160;exist and&#160;shall&#160;be&#160;set&#160;as shown&#160;<br/>below.&#160;<br/>&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Object&#160;&#160;Value&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
<b>Type&#160;&#160;</b>the&#160;default&#160;value&#160;is&#160;<br/>
written&#160;in&#160;bold&#160;<br/>
DiagRequest&#160;<br/>
Message&#160;&#160;Enum&#160;&#160;<b>No&#160;</b><br/>
Specifies&#160;(Yes)&#160;that&#160;the&#160;message is&#160;a&#160;diagnostic&#160;<br/>
Yes<br/>
<b>physical</b>&#160;<b>USDT</b>&#160;request message.<br/>
&#160;<br/>
&#160;<br/>
DiagResponse&#160;<br/>
Message&#160;&#160;Enum&#160;&#160;<b>No&#160;</b><br/>
Specifies&#160;(Yes)&#160;that&#160;the&#160;message is&#160;a&#160;diagnostic&#160;<br/>
Yes&#160;<br/>
<b>USDT</b>&#160;response message.&#160;<br/>
DiagState&#160;<br/>
Message&#160;&#160;Enum&#160;&#160;<b>No&#160;</b><br/>
Specifies&#160;(Yes)&#160;that&#160;the&#160;message is&#160;a&#160;diagnostic&#160;<br/>
Yes&#160;<br/>
<b>functional</b>&#160;<b>USDT</b>&#160;request&#160;message.&#160;<br/>
DiagUudtResponse&#160;&#160;Message&#160;&#160;Enum&#160;&#160;<b>false&#160;</b><br/>
Specifies&#160;(true) that the message is&#160;a&#160;diagnostic&#160;<br/>
true<b>&#160;</b><br/>
<b>UUDT</b>&#160;response message.&#160;<br/>
Table&#160;5-1:&#160;DBC&#160;file&#160;diagnostic&#160;message&#160;attributes&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
19&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-20_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>6&#160;&#160;CANdesc Configuration&#160;in&#160;GENy&#160;</b><br/>
Since&#160;version&#160;6.00.00,&#160;the&#160;CANdesc&#160;configuration&#160;concept&#160;has&#160;been&#160;improved&#160;by&#160;splitting&#160;<br/>the&#160;&#160;concrete&#160;&#160;ECU&#160;&#160;parameterization&#160;&#160;and&#160;&#160;software&#160;&#160;integration&#160;&#160;from&#160;&#160;the&#160;&#160;diagnostic&#160;<br/>specification.&#160;<br/>The&#160;configuration&#160;of&#160;CANdesc in&#160;GENy&#160;consists of&#160;two&#160;important&#160;steps:&#160;<br/>
-&#160;&#160;Importing&#160;&#160;a&#160;&#160;diagnostic&#160;&#160;description&#160;&#160;file.&#160;&#160;Currently&#160;&#160;only&#160;&#160;CANdela&#160;&#160;(CDD)&#160;&#160;files&#160;&#160;are&#160;<br/>
supported&#160;therefore in&#160;further&#160;only&#160;the&#160;term&#160;CDD&#160;file&#160;will be&#160;used.&#160;<br/>
-&#160;&#160;Setup&#160;all&#160;service&#160;options required&#160;by&#160;the&#160;application&#160;like:&#160;<br/>
o&#160;&#160;Configure the&#160;service&#160;handlers (pre-,&#160;main-&#160;and&#160;post-handlers)&#160;<br/>
o&#160;&#160;Setup&#160;&#160;the&#160;&#160;service&#160;&#160;specific&#160;&#160;settings,&#160;&#160;like&#160;&#160;maximum&#160;&#160;number&#160;&#160;of&#160;&#160;dynamically&#160;<br/>
defined&#160;items&#160;per DynDID, size&#160;of&#160;scheduler&#160;for periodic data&#160;reading,&#160;etc.&#160;<br/>
o&#160;&#160;Setup&#160;timing&#160;parameters&#160;(e.g.&#160;periodic rates).&#160;<br/>
The&#160;second&#160;step&#160;is&#160;optional,&#160;since&#160;after&#160;importing&#160;a&#160;CDD&#160;file&#160;all&#160;important&#160;settings&#160;will&#160;be&#160;<br/>already&#160;prepared&#160;for&#160;usage.&#160;If&#160;there&#160;are&#160;missing&#160;or&#160;invalid&#160;settings,&#160;GENy&#160;will&#160;notify&#160;you&#160;at&#160;<br/>generation&#160;time.&#160;<br/>
&#160;<br/>
<b>6.1&#160;</b><br/>
<b>Step One&#160;–&#160;Importing&#160;an ECU&#160;Diagnostic&#160;Description&#160;</b><br/>
After activating&#160;the&#160;CANdesc component&#160;in&#160;GENy,&#160;you&#160;will have&#160;the&#160;following&#160;view:&#160;<br/>
&#160;<br/>
Figure&#160;6-1&#160;CANdesc&#160;GENy&#160;startup&#160;screen&#160;<br/>
At&#160;this&#160;time&#160;GENy&#160;does&#160;not&#160;have&#160;any&#160;CDD&#160;file&#160;and&#160;can&#160;not&#160;generate&#160;CANdesc.&#160;You&#160;have&#160;<br/>to&#160;specify&#160;a&#160;CDD&#160;file,&#160;using&#160;the&#160;button&#160;on&#160;the&#160;option&#160;“CANdela&#160;document&#160;name”.&#160;<br/>
&#160;<br/>
After selecting&#160;the&#160;CDD&#160;file,&#160;the&#160;CANdesc&#160;component&#160;tree&#160;view&#160;will&#160;look like:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
20&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-21_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-21_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-21_3.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>Please note,&#160;the&#160;diagnostic&#160;buffer&#160;size is now&#160;set&#160;to a&#160;non-zero&#160;value.&#160;At&#160;CDD&#160;import&#160;<br/>
&#160;&#160;time,&#160;GENy&#160;calculates&#160;a&#160;statistic&#160;over&#160;all&#160;services with simple,&#160;linear&#160;data structure&#160;and&#160;<br/>
sets&#160;the&#160;buffer&#160;size to&#160;fit&#160;the&#160;longest&#160;request&#160;resp.&#160;response&#160;message.&#160;The&#160;message&#160;<br/>window&#160;will&#160;show&#160;you&#160;which service requires&#160;the&#160;suggested&#160;buffer&#160;size:&#160;<br/>
&#160;<br/>
Complex&#160;services like&#160;reading&#160;the&#160;faultmemory&#160;information&#160;or&#160;<br/>upload/download/transferdata&#160;are&#160;excluded&#160;from&#160;this&#160;statistic,&#160;since&#160;the&#160;worst&#160;case&#160;<br/>response&#160;calculation is not&#160;possible.&#160;<br/>You&#160;can&#160;still&#160;set&#160;another&#160;value&#160;for&#160;the&#160;buffer&#160;size,&#160;even&#160;lower&#160;as the&#160;size suggested&#160;by&#160;<br/>GENy.&#160;At&#160;generation&#160;time,&#160;the&#160;code&#160;generator&#160;will&#160;check&#160;again&#160;the&#160;set&#160;buffer&#160;size and&#160;<br/>consider&#160;more&#160;options&#160;you&#160;have changed&#160;(like&#160;RingBuffer&#160;support)&#160;and notify&#160;you&#160;if&#160;the&#160;<br/>buffer&#160;size is too&#160;small.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Now&#160;you&#160;can&#160;try&#160;to&#160;generate&#160;your diagnostic layer,&#160;using&#160;the&#160;default&#160;settings.&#160;<br/>
&#160;<br/>
<b>6.2&#160;</b><br/>
<b>Step Two&#160;–&#160;ECU&#160;Diagnostic&#160;Configuration in GENy&#160;</b><br/>
Once&#160;the&#160;CDD&#160;content&#160;is&#160;imported,&#160;there&#160;are&#160;several&#160;options&#160;that&#160;can&#160;and&#160;shall&#160;be&#160;set&#160;up&#160;<br/>for&#160;best&#160;match&#160;on&#160;your ECU integration&#160;needs.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
21&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-22_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>What&#160;You&#160;Can&#160;Configure&#160;in GENy&#160;</b><br/>
The&#160;&#160;goal&#160;&#160;of&#160;&#160;splitting&#160;&#160;the&#160;&#160;ECU&#160;&#160;integration&#160;&#160;configuration&#160;&#160;from&#160;&#160;the&#160;&#160;ECU&#160;&#160;diagnostic&#160;<br/>specification&#160;&#160;is&#160;&#160;to&#160;&#160;provide&#160;&#160;a&#160;&#160;simplified&#160;&#160;view&#160;&#160;on&#160;&#160;what&#160;&#160;the&#160;&#160;ECU&#160;&#160;diagnostic&#160;&#160;application&#160;<br/>developer&#160;&#160;is&#160;&#160;able&#160;&#160;to&#160;&#160;configure&#160;&#160;without&#160;&#160;danger&#160;&#160;of&#160;&#160;changing&#160;&#160;the&#160;&#160;diagnostic&#160;&#160;specification&#160;<br/>provided&#160;by&#160;the&#160;OEM.&#160;&#160;<br/>If&#160;&#160;a&#160;&#160;CANdesc&#160;&#160;parameter&#160;&#160;is&#160;&#160;not&#160;&#160;available&#160;&#160;in&#160;&#160;the&#160;&#160;source&#160;&#160;diagnostic&#160;&#160;description&#160;&#160;(CDD&#160;&#160;file),&#160;<br/>you&#160;will&#160;be&#160;able&#160;to&#160;edit&#160;it in&#160;GENy,&#160;even&#160;if&#160;it&#160;is&#160;relevant&#160;for the&#160;diagnostic specification.&#160;<br/>The&#160;chapters&#160;below&#160;will&#160;show&#160;you&#160;all&#160;configuration&#160;parameters&#160;of&#160;CANdesc&#160;that&#160;can&#160;be&#160;set&#160;<br/>up&#160;in&#160;GENy.&#160;<br/>
<b>What&#160;You&#160;Can&#160;Not&#160;Configure&#160;in GENy&#160;</b><br/>
All&#160;&#160;diagnostic&#160;&#160;parameters&#160;&#160;that&#160;&#160;could&#160;&#160;affect&#160;&#160;the&#160;&#160;ECU&#160;&#160;behaviour&#160;&#160;regarding&#160;&#160;its&#160;&#160;diagnostic&#160;<br/>specification,&#160;provided&#160;by&#160;the&#160;concrete&#160;OEM&#160;or&#160;would&#160;lead&#160;to&#160;inconsistency&#160;between&#160;the&#160;<br/>tester expectations on&#160;the&#160;ECU&#160;behaviour are&#160;not&#160;editable&#160;in&#160;GENy.&#160;If&#160;a&#160;change&#160;is&#160;required&#160;<br/>on&#160;such&#160;a&#160;parameter,&#160;the&#160;diagnostic description&#160;source&#160;shall&#160;be&#160;modified,&#160;to&#160;guarantee&#160;that&#160;<br/>the&#160;OEM&#160;or/and&#160;the&#160;tester will take&#160;this change&#160;into&#160;account.&#160;<br/>
&#160;<br/>
<b>6.2.1&#160;</b><br/>
<b>Global&#160;CANdesc&#160;Settings&#160;&#160;</b><br/>
Under&#160;&#160;the&#160;&#160;generic&#160;&#160;settings&#160;&#160;you&#160;&#160;will&#160;&#160;find&#160;&#160;the&#160;&#160;options&#160;&#160;that&#160;&#160;affect&#160;&#160;the&#160;&#160;overall&#160;&#160;module&#160;<br/>performance,&#160;&#160;independently&#160;&#160;of&#160;&#160;the&#160;&#160;diagnostic&#160;&#160;services&#160;&#160;that&#160;&#160;shall&#160;&#160;be&#160;&#160;supported.&#160;&#160;In&#160;&#160;the&#160;<br/>picture and&#160;the&#160;table&#160;below&#160;follows&#160;the&#160;description&#160;of&#160;the&#160;settings&#160;for CANdesc.&#160;<br/>
&#160;<br/>
Figure&#160;6-2&#160;Example&#160;of&#160;GENy&#160;global&#160;CANdesc&#160;settings&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
22&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=23></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The&#160;default&#160;<br/>value&#160;is&#160;written&#160;<br/>in&#160;bold&#160;<br/>
Cycle&#160;Time [ms]&#160;<br/>
Always&#160;available.&#160;<br/>
Integer&#160;<br/>
<b>10&#160;</b><br/>
The&#160;DescTask&#160;(resp.&#160;<br/>
1..255&#160;<br/>
DescTimerTask)&#160;function&#160;must be&#160;<br/>called EXACTLY&#160;in the&#160;time period&#160;<br/>specified&#160;here.&#160;<br/>This&#160;is&#160;important since the&#160;time&#160;<br/>constant&#160;will&#160;be converted&#160;into&#160;a&#160;<br/>number&#160;of&#160;function&#160;calls&#160;and if&#160;this&#160;<br/>setting doesn't match&#160;the&#160;real&#160;call&#160;<br/>cycle,&#160;the&#160;component internal&#160;<br/>timeout&#160;monitors&#160;will&#160;not&#160;function&#160;<br/>properly.&#160;<br/>
Generate&#160;CANdesc&#160;&#160;Always&#160;available.&#160;<br/>
Button&#160;<br/>
<b>&#160;</b><br/>
This&#160;feature is&#160;only&#160;available after&#160;<br/>you&#160;have&#160;generated the&#160;whole&#160;<br/>CANbedded&#160;package.&#160;<br/>NOTE: If&#160;you run&#160;into problems,&#160;<br/>generate&#160;the&#160;whole package again!&#160;<br/>
Number&#160;of&#160;‘Busy-<br/>
OEM dependent&#160;<br/>
Integer&#160;<br/>
<b>0&#160;</b><br/>
The&#160;value&#160;is&#160;the maximum&#160;count&#160;of&#160;<br/>
RepeatRequest’&#160;<br/>
availability.&#160;<br/>
0..255&#160;<br/>
parallel&#160;handled&#160;diagnostic&#160;<br/>
responded&#160;<br/>
requests. Only&#160;the&#160;first diagnostic&#160;<br/>
Requests&#160;<br/>
request&#160;will&#160;be processed,&#160;all&#160;other&#160;<br/>(additonal)&#160;request,&#160;which&#160;will&#160;be&#160;<br/>received&#160;while the&#160;first one&#160;is&#160;in&#160;<br/>process, will&#160;be also received, but&#160;<br/>only&#160;responded&#160;with&#160;NRC $21&#160;<br/>('BUSY&#160;-&#160;repeat&#160;request'). If&#160;there&#160;<br/>are more requests&#160;onto the&#160;bus&#160;<br/>than&#160;this&#160;number, only&#160;the&#160;first N&#160;<br/>will&#160;be responded&#160;-&#160;all&#160;other&#160;will&#160;be&#160;<br/>just ignored.&#160;<br/>
Flashable&#160;ECU&#160;<br/>
OEM dependent&#160;<br/>
Boolean&#160;<br/>
<b>False&#160;</b><br/>
Depending&#160;on&#160;the&#160;car&#160;<br/>
availability.&#160;<br/>
True&#160;<br/>
manufacturer&#160;this&#160;option&#160;has&#160;<br/>different effects. Please,&#160;see the&#160;<br/>OEM specific&#160;technical&#160;reference&#160;<br/>document for&#160;more information.&#160;<br/>
Ring&#160;Buffer Support&#160;&#160;Always&#160;available.&#160;<br/>
Boolean&#160;<br/>
<b>False&#160;</b><br/>
In&#160;case&#160;your&#160;ECU shall&#160;send a&#160;<br/>
True&#160;<br/>
very&#160;long&#160;positive response&#160;for&#160;<br/>some services&#160;(usually&#160;when&#160;<br/>reading&#160;fault memory)&#160;you&#160;can&#160;<br/>reserve enough&#160;RAM&#160;for the&#160;<br/>diagnostic&#160;buffer to handle the&#160;<br/>longest possible response&#160;length,&#160;<br/>or&#160;you can&#160;use the built-in ring-<br/>buffer&#160;mechanism&#160;which&#160;allows&#160;<br/>usage&#160;of&#160;smaller buffer.&#160;The&#160;linear&#160;<br/>buffer usage saves&#160;ROM&#160;and&#160;run-<br/>time but&#160;needs&#160;more RAM,&#160;the&#160;<br/>ring-buffer saves&#160;RAM (you&#160;may&#160;<br/>send 4095&#160;Byte&#160;response&#160;with&#160;a&#160;<br/>20Byte&#160;buffer)&#160;but requires&#160;more&#160;<br/>ROM and causes&#160;run-time&#160;<br/>overhead&#160;when&#160;used.&#160;NOTE:&#160;This&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
23&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=24></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The&#160;default&#160;<br/>value&#160;is&#160;written&#160;<br/>in&#160;bold&#160;<br/>
option&#160;just unlocks&#160;the built-in&#160;<br/>support,&#160;but the&#160;selection&#160;usage of&#160;<br/>the&#160;feature&#160;is&#160;done&#160;at&#160;run-time by&#160;<br/>your&#160;application (for each service&#160;<br/>independently).&#160;&#160;<br/>
Forced&#160;RCR<br/>
In&#160;some cases&#160;(e.g. prior jump into&#160;<br/>
-RP&#160;<br/>
OEM dependent&#160;<br/>
Boolean&#160;<br/>
<b>False&#160;</b><br/>
Response<br/>
the&#160;FBL&#160;(FlashBootLoader), ECU&#160;<br/>
&#160;<br/>
availability.&#160;<br/>
True&#160;<br/>
busy&#160;so&#160;no&#160;task&#160;function&#160;can be&#160;<br/>called for long&#160;period of&#160;time) it&#160;is&#160;<br/>necessary&#160;to&#160;prevent the tester&#160;<br/>from&#160;ECU response timeout.&#160;<br/>Enabling&#160;this&#160;feature&#160;you&#160;will&#160;be&#160;<br/>able to send&#160;a RCR-RP&#160;<br/>(ResponseCorrectlyReceived-<br/>ResponsePending)&#160;response any&#160;<br/>time during&#160;an&#160;active serivce&#160;<br/>processing&#160;(main-handler called&#160;<br/>but no DescProcessingDone has&#160;<br/>been&#160;called&#160;yet).&#160;<br/>
Repeated&#160;Service&#160;<br/>
Always&#160;available.&#160;<br/>
Enum&#160;<br/>
<b>Deactivated&#160;&#160;</b>In&#160;some cases&#160;(usually&#160;for slow&#160;<br/>
Call&#160;Type&#160;<br/>
Always&#160;<br/>
services&#160;like reading&#160;from&#160;<br/>
Individual<b>&#160;</b><br/>
EEPROM)&#160;it is&#160;useful&#160;to&#160;let&#160;the&#160;<br/>component&#160;to&#160;poll&#160;your&#160;application&#160;<br/>(service main-handler)&#160;until&#160;the&#160;<br/>service execution&#160;is&#160;completed.&#160;<br/>Otherwise&#160;you have to&#160;leave the&#160;<br/>service's&#160;main-handler function&#160;<br/>and trigger an&#160;own&#160;additional&#160;<br/>polling&#160;task&#160;and finalize the&#160;service&#160;<br/>from&#160;there. Using&#160;the&#160;built-in&#160;<br/>polling&#160;mechanism&#160;you&#160;will&#160;save&#160;<br/>ROM and run-time.&#160;Also&#160;it&#160;prevents&#160;<br/>from&#160;confusing&#160;code&#160;structures.&#160;<br/>Always:&#160;Each main-handler&#160;will&#160;be&#160;<br/>called as&#160;long as&#160;the application&#160;<br/>didn’t call<a href="TechnicalReference_CANdescs.html#84">&#160;<i>DescProcessingDone</i>().</a>&#160;<br/>Individual:&#160;Each&#160;main-handler&#160;will&#160;<br/>decide by&#160;itself&#160;if&#160;it&#160;will&#160;be called&#160;<br/>once or&#160;as&#160;long&#160;as&#160;the&#160;application&#160;<br/>didn’t call<a href="TechnicalReference_CANdescs.html#84">&#160;<i>DescProcessingDone</i>().</a>&#160;<br/>
Production&#160;Mode&#160;<br/>
OEM dependent&#160;<br/>
Boolean&#160;<br/>
<b>False&#160;</b><br/>
Enabling&#160;the&#160;production mode&#160;will&#160;<br/>
availability.&#160;<br/>
True&#160;<br/>
set&#160;all&#160;options&#160;in the possible&#160;<br/>safest (uncritical)&#160;value.&#160;<br/>Some car&#160;manufacturers&#160;don't&#160;<br/>allow&#160;all&#160;of&#160;the features&#160;in&#160;<br/>production, so they&#160;will&#160;be&#160;turned&#160;<br/>off.&#160;<br/>
Spontaneous&#160;<br/>
Available if&#160;Service&#160;&#160;Boolean<br/>
This&#160;setting&#160;enables&#160;the&#160;possibility&#160;<br/>
&#160;<br/>
<b>False&#160;</b><br/>
Response<br/>
to&#160;send&#160;diagnostic&#160;responses&#160;<br/>
&#160;<br/>
0x86&#160;is&#160;part of&#160;the&#160;<br/>
True<b>&#160;</b><br/>
diagnostic&#160;<br/>
without&#160;a preceding request.&#160;<br/>
configuration.<br/>
This&#160;feature is&#160;needed for&#160;Service&#160;<br/>
&#160;<br/>
0x86&#160;with&#160;Transmission&#160;Type I.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
24&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=25></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The&#160;default&#160;<br/>value&#160;is&#160;written&#160;<br/>in&#160;bold&#160;<br/>
The&#160;spontaneous&#160;response&#160;can&#160;be&#160;<br/>triggered&#160;via the&#160;API&#160;<br/>DescSendApplSpontaneousRespo<br/>nse.&#160;<br/>
Supplier Notification&#160;&#160;Available if&#160;<br/>
Boolean&#160;<br/>
<b>False&#160;</b><br/>
If&#160;this&#160;option&#160;is&#160;enabled, CANdesc&#160;<br/>
Support&#160;<br/>
CANdesc&#160;<br/>
True&#160;<br/>
notifies&#160;the&#160;application on incoming&#160;<br/>
according&#160;to&#160;ISO&#160;<br/>
service requests&#160;and&#160;outgoing&#160;<br/>
14229-1 2012&#160;is&#160;<br/>
responses. CANdesc&#160;only&#160;notifies&#160;<br/>
used.&#160;<br/>
the&#160;application&#160;if&#160;the requested&#160;<br/>service&#160;is&#160;supported&#160;in the&#160;active&#160;<br/>session&#160;and security&#160;state.&#160;For&#160;<br/>more details&#160;see<a href="TechnicalReference_CANdescs.html#69">&#160;<i>10&#160;Generic&#160;<br/>Processing&#160;Notifications</i>&#160;</a><br/>
Manufacturer&#160;<br/>
Available if&#160;<br/>
Boolean&#160;<br/>
<b>False&#160;</b><br/>
If&#160;this&#160;option&#160;is&#160;enabled, CANdesc&#160;<br/>
Notification&#160;Support&#160;&#160;CANdesc&#160;<br/>
True&#160;<br/>
notifies&#160;the&#160;application on incoming&#160;<br/>
according&#160;to&#160;ISO&#160;<br/>
service requests&#160;and&#160;outgoing&#160;<br/>
14229-1 2012&#160;is&#160;<br/>
responses. CANdesc&#160;notifies&#160;the&#160;<br/>
used.&#160;<br/>
application&#160;right&#160;before the&#160;<br/>processing&#160;of&#160;the request starts&#160;<br/>and&#160;after a response&#160;has&#160;been&#160;<br/>sent. For&#160;more details&#160;see<a href="TechnicalReference_CANdescs.html#69">&#160;<i>10&#160;<br/>Generic&#160;Processing&#160;Notifications</i>&#160;</a><br/>
Unknown&#160;Services&#160;<br/>
OEM dependent&#160;<br/>
Boolean&#160;<br/>
<b>False&#160;</b><br/>
In&#160;some cases&#160;if&#160;the diagnostic&#160;<br/>
Acceptance&#160;<br/>
availability.&#160;<br/>
True&#160;<br/>
database doesn't contain&#160;all&#160;<br/>necessary&#160;service Ids,&#160;or&#160;you&#160;need&#160;<br/>a (some) test identifier(s),&#160;you&#160;can&#160;<br/>enable&#160;this&#160;option&#160;which&#160;will&#160;<br/>redirect all&#160;received requests&#160;with&#160;<br/>unknown service Ids&#160;to&#160;your&#160;<br/>application&#160;for additional&#160;<br/>acknowledgment and processing.&#160;<br/>
Unknown&#160;Services&#160;<br/>
OEM dependent&#160;<br/>
Boolean&#160;<br/>
<b>False&#160;</b><br/>
If&#160;the option 'Unknown&#160;Services&#160;<br/>
Post Handler Calls&#160;<br/>
availability.&#160;<br/>
True&#160;<br/>
Acceptance'&#160;is&#160;enabled,&#160;you may&#160;<br/>use this&#160;feature to&#160;be&#160;notified&#160;each&#160;<br/>time an unknown service&#160;<br/>processing&#160;has&#160;been&#160;<br/>accomplished.&#160;This&#160;post handler&#160;<br/>usage&#160;is&#160;the&#160;same as&#160;the one&#160;of&#160;<br/>the&#160;normal&#160;services&#160;post&#160;handlers.&#160;<br/>
Application Interface&#160;&#160;Always&#160;available.&#160;<br/>
Boolean&#160;<br/>
<b>False&#160;</b><br/>
The&#160;SW&#160;component&#160;provides&#160;built-<br/>
Assertions&#160;<br/>
True&#160;<br/>
in debug support (assertion)&#160;to&#160;<br/>ease up the integration&#160;and&#160;test&#160;<br/>into&#160;the&#160;project.&#160;<br/>In&#160;general, the usage&#160;of&#160;assertions&#160;<br/>is&#160;recommended during&#160;the&#160;<br/>integration&#160;and&#160;pre-test phases. It&#160;<br/>is&#160;not recommended to enable&#160;the&#160;<br/>assertions&#160;in production&#160;code&#160;due&#160;<br/>to&#160;increased&#160;runtime and&#160;ROM&#160;<br/>needs.&#160;The&#160;assertion checks&#160;the&#160;<br/>correctness&#160;of&#160;the assigned&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
25&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=26></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The&#160;default&#160;<br/>value&#160;is&#160;written&#160;<br/>in&#160;bold&#160;<br/>
condition and calls&#160;an error-<br/>handler&#160;in case&#160;this&#160;fails.&#160;The&#160;error&#160;<br/>handler&#160;is&#160;called&#160;with an&#160;error and&#160;<br/>line number. You&#160;can find&#160;<br/>information&#160;about&#160;the&#160;defined&#160;error&#160;<br/>numbers&#160;in the&#160;Desc.h&#160;file.&#160;<br/>
Internal&#160;Assertions&#160;<br/>
Always&#160;available.&#160;<br/>
Boolean&#160;<br/>
<b>False&#160;</b><br/>
The&#160;SW&#160;component&#160;provides&#160;built-<br/>
True&#160;<br/>
in debug support (assertion)&#160;to&#160;<br/>ease up the integration&#160;and&#160;test&#160;<br/>into&#160;the&#160;project.&#160;<br/>In&#160;general, the usage&#160;of&#160;assertions&#160;<br/>is&#160;recommended during&#160;the&#160;<br/>integration&#160;and&#160;pre-test phases. It&#160;<br/>is&#160;not recommended to enable&#160;the&#160;<br/>assertions&#160;in production&#160;code&#160;due&#160;<br/>to&#160;increased&#160;runtime and&#160;ROM&#160;<br/>needs.&#160;The&#160;assertion checks&#160;the&#160;<br/>correctness&#160;of&#160;the assigned&#160;<br/>condition and calls&#160;an error-<br/>handler&#160;in case&#160;this&#160;fails.&#160;The&#160;error&#160;<br/>handler&#160;is&#160;called&#160;with an&#160;error and&#160;<br/>line number. You&#160;can find&#160;<br/>information&#160;about&#160;the&#160;defined&#160;error&#160;<br/>numbers&#160;in the&#160;Desc.h&#160;file.&#160;<br/>
List of&#160;DANIS&#160;<br/>
Always&#160;available.&#160;<br/>
String List&#160;<br/>
<b>&#160;</b><br/>
Add&#160;an&#160;arbitrary&#160;list of&#160;DANIS&#160;<br/>
drivers&#160;<br/>
drivers&#160;for custom&#160;bus&#160;access.&#160;<br/>
&#160;<br/>Each entry&#160;here&#160;will&#160;result&#160;in a&#160;user&#160;<br/>driver,&#160;which can be used&#160;to&#160;<br/>connect CANdesc&#160;to&#160;arbitrary&#160;<br/>transport&#160;layers.&#160;<br/>
&#160;<br/>Example:&#160;&#160;<br/>Adding a&#160;driver name “MostTp” will&#160;<br/>force CANdesc&#160;to&#160;generate&#160;<br/>templates&#160;for a driver&#160;with&#160;this&#160;<br/>name.&#160;You&#160;will&#160;have only&#160;to&#160;<br/>implement the functions&#160;of&#160;the&#160;<br/>driver skeleton.&#160;<br/>
UUDT&#160;Message&#160;<br/>
Available only&#160;if&#160;<br/>
Integer&#160;<br/>
<b>100&#160;</b><br/>
This&#160;is&#160;the maximum&#160;time after&#160;<br/>
Confirmation&#160;<br/>
UUDT&#160;message&#160;<br/>
1..65535&#160;<br/>
which&#160;a UUDT&#160;(Unacknowledged&#160;<br/>
Timeout&#160;[ms]&#160;<br/>
transmission&#160;is&#160;<br/>
Unsegmented&#160;Data&#160;Transfer)&#160;<br/>
supported.&#160;<br/>
message&#160;will&#160;be&#160;deleted&#160;from&#160;the&#160;<br/>CAN drive request queue and&#160;(if&#160;<br/>possible)&#160;will&#160;be&#160;replaced&#160;by&#160;the&#160;<br/>next queued message.&#160;<br/>
Faultmemory&#160;<br/>
Available only&#160;if&#160;<br/>
Integer&#160;<br/>
<b>0&#160;</b><br/>
Limit the&#160;iteration depth&#160;for&#160;<br/>
Iteration&#160;Limiter&#160;<br/>
CANdesc&#160;provides&#160;<br/>
0..255&#160;<br/>
faultmemory&#160;read&#160;services.&#160;<br/>
fault-memory&#160;<br/>
&#160;<br/>
service&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
26&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-27_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;Type&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
The&#160;default&#160;<br/>value&#160;is&#160;written&#160;<br/>in&#160;bold&#160;<br/>
implementation.&#160;<br/>
Some faultmemory&#160;($19) services&#160;<br/>can&#160;consume&#160;much runtime&#160;when&#160;<br/>performed&#160;en&#160;bloc.&#160;To reduce the&#160;<br/>run&#160;time of&#160;the CANdesc&#160;task, use&#160;<br/>this&#160;option&#160;to limit the&#160;iteration&#160;<br/>depth of&#160;the faultmemory&#160;access&#160;<br/>function&#160;so&#160;your controller can&#160;<br/>handle&#160;the&#160;workload.&#160;<br/>ATTENTION: Depending on&#160;your&#160;<br/>Tp timeout&#160;settings,&#160;to&#160;low&#160;a&#160;<br/>number&#160;of&#160;iterations&#160;can&#160;result in&#160;<br/>an&#160;aborted transmission&#160;due to&#160;<br/>buffer underrun.&#160;<br/>
&#160;<br/>A&#160;value&#160;of&#160;0&#160;(zero)&#160;will&#160;disable&#160;any&#160;<br/>limitation.&#160;<br/>
Variant&#160;Mode&#160;<br/>
OEM dependent&#160;<br/>
Enum&#160;<br/>
<b>None&#160;</b><br/>
Note:&#160;This&#160;setting&#160;is&#160;independent&#160;<br/>
Selection&#160;<br/>
availability.&#160;<br/>
Multi&#160;Identity&#160;&#160;from&#160;communication&#160;identities!&#160;<br/>Mode&#160;<br/>
None:&#160;The&#160;diagnostics&#160;support one&#160;<br/>
VSG&#160;Mode<b>&#160;</b><br/>
configuration&#160;only.&#160;<br/>Multi&#160;Identity&#160;Mode:&#160;The&#160;<br/>diagnostics&#160;support&#160;different&#160;<br/>diagnostic&#160;variants. One&#160;variant&#160;is&#160;<br/>active a&#160;time.&#160;<br/>VSG&#160;Mode:&#160;Diagnostic&#160;Entities&#160;<br/>(SubServices, DTCs...) are&#160;<br/>grouped&#160;into&#160;VSGs.&#160;Several&#160;VSGs&#160;<br/>can&#160;be&#160;active&#160;at&#160;a&#160;time.&#160;<br/>
&#160;<br/>
<b>6.2.1.1&#160;</b><br/>
<b>Generic&#160;Processing&#160;Notifications&#160;(UDS2012)&#160;</b><br/>
On&#160;activation&#160;of&#160;the&#160;feature&#160;“Generic&#160;Processing&#160;Notifications”,&#160;GENy&#160;shows&#160;the&#160;names&#160;of&#160;<br/>the&#160;additional&#160;callbacks&#160;that&#160;will&#160;be&#160;generated.&#160;The&#160;names&#160;of&#160;the&#160;callbacks&#160;are&#160;fixed&#160;and&#160;<br/>can&#160;not&#160;be&#160;modified&#160;(see<a href="TechnicalReference_CANdescs.html#27">&#160;Figure&#160;6-3).&#160;</a>For&#160;a&#160;detailed&#160;description&#160;of&#160;the&#160;feature&#160;see&#160;chapter&#160;<br/><a href="TechnicalReference_CANdescs.html#69">10&#160;Generic Processing&#160;Notifications.</a>&#160;<br/>
&#160;<br/>
Figure&#160;6-3&#160;Activated&#160;feature&#160;“Generic&#160;Processing&#160;Notifications”&#160;<br/>
<b>6.2.2&#160;</b><br/>
<b>Service&#160;Specific&#160;Settings&#160;</b><br/>
Once&#160;the&#160;CDD&#160;file&#160;is&#160;imported&#160;you&#160;can&#160;have&#160;an&#160;overview&#160;of&#160;the&#160;supported&#160;services&#160;of&#160;your&#160;<br/>ECU:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
27&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-28_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;6-4&#160;GENy&#160;diagnostic&#160;service&#160;overview&#160;<br/>
&#160;<br/>
On&#160;this&#160;level&#160;you&#160;can&#160;also&#160;configure&#160;all&#160;services&#160;that&#160;will&#160;be&#160;supported&#160;on&#160;service&#160;Id&#160;level&#160;<br/>only.&#160;<br/>
&#160;<br/>
<b>6.2.2.1&#160;</b><br/>
<b>Generic&#160;Service&#160;Settings&#160;</b><br/>
Using&#160;&#160;the&#160;&#160;CANdesc&#160;&#160;component&#160;&#160;tree&#160;&#160;view&#160;&#160;you&#160;&#160;can&#160;explore&#160;&#160;the&#160;detailed&#160;&#160;settings&#160;for&#160;&#160;each&#160;<br/>service&#160;and&#160;its&#160;sub-services&#160;(if&#160;available).&#160;<br/>A&#160;generic sub-service&#160;setup&#160;looks like&#160;the&#160;picture below:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
28&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-29_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;6-5&#160;GENy&#160;generic&#160;sub-service&#160;setup&#160;<br/>
Almost&#160;all&#160;services&#160;have&#160;a&#160;very&#160;simple&#160;configuration&#160;view.&#160;You&#160;can&#160;see&#160;the&#160;main-handler&#160;is&#160;<br/>always available&#160;and&#160;a&#160;preview&#160;of&#160;the&#160;call-back name&#160;is shown.&#160;&#160;<br/>You&#160;can&#160;only&#160;add&#160;a&#160;pre-&#160;and&#160;/&#160;or a&#160;post-handler to&#160;such&#160;a&#160;service,&#160;if&#160;required.&#160;<br/>
&#160;<br/>
<b>6.2.2.2&#160;</b><br/>
<b>Predefined (implemented)&#160;Services&#160;in CANdesc&#160;</b><br/>
There&#160;are&#160;configurations&#160;(OEM&#160;dependent)&#160;where&#160;several&#160;services&#160;are&#160;fully&#160;implemented&#160;<br/>by&#160;&#160;CANdesc.&#160;&#160;Such&#160;&#160;service&#160;&#160;can&#160;&#160;be,&#160;&#160;StartDiagnsoticSession,&#160;&#160;SecurityAccess,&#160;<br/>DynamicallyDefinedDataIdentifier,&#160;ReadDataByPeriodicIdentifier,&#160;etc.&#160;<br/>Those&#160;services&#160;that&#160;will&#160;not&#160;be&#160;handled&#160;by&#160;the&#160;application&#160;are&#160;marked&#160;in&#160;GENy&#160;as&#160;shown&#160;<br/>on&#160;the&#160;picture:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
29&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-30_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;6-6&#160;GENy&#160;predefined&#160;sub-service&#160;setup&#160;<br/>
As&#160;you&#160;can&#160;see,&#160;the&#160;main-handler&#160;is&#160;grayed&#160;and&#160;marked&#160;as&#160;“implemented&#160;by&#160;CANdesc”.&#160;<br/>The&#160;&#160;same&#160;&#160;can&#160;apply&#160;&#160;(depends&#160;&#160;on&#160;&#160;the&#160;&#160;service)&#160;&#160;also&#160;&#160;to&#160;&#160;the&#160;&#160;pre-&#160;&#160;and&#160;&#160;post-handlers&#160;&#160;of&#160;&#160;the&#160;<br/>service.&#160;&#160;<br/>In&#160;the&#160;example&#160;on&#160;the<a href="TechnicalReference_CANdescs.html#30">&#160;<i>Figure&#160;6-6&#160;GENy&#160;predefined&#160;sub-service&#160;setup&#160;</i></a>you&#160;see&#160;that&#160;the&#160;pre-<br/>handler&#160;is&#160;still&#160;free&#160;for&#160;usage.&#160;This&#160;means&#160;you&#160;can&#160;still&#160;implement&#160;a&#160;pre-handler&#160;to&#160;check&#160;<br/>additional&#160;conditions&#160;prior&#160;CANdesc&#160;will&#160;be&#160;able&#160;to&#160;process&#160;the&#160;service.&#160;For&#160;other&#160;service&#160;it&#160;<br/>could&#160;be&#160;also&#160;the&#160;post-handler&#160;free&#160;for implementation.&#160;<br/>
&#160;<br/>
There&#160;are&#160;several&#160;services&#160;that&#160;make&#160;some&#160;exceptions&#160;to&#160;the&#160;predefined&#160;implementation&#160;<br/>rule:&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
30&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=31></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Service&#160;0x2A:&#160;</b><br/>
-&#160;&#160;PreHandler&#160;&#160;configuration&#160;&#160;is&#160;possible:&#160;&#160;If&#160;&#160;a&#160;pre-handler&#160;&#160;is&#160;required,&#160;&#160;it&#160;&#160;must&#160;&#160;be&#160;<br/>
enabled&#160;on&#160;all&#160;sub-functions&#160;of&#160;the&#160;concrete&#160;DID.&#160;The&#160;pre-handler&#160;name&#160;will&#160;<br/>be&#160;“ApplDescPreReadPeriodicDid&lt;DID instance&#160;name&gt;”.&#160;<br/>
-&#160;&#160;PreHandler&#160;on&#160;“stop&#160;all”&#160;is&#160;not&#160;used&#160;by&#160;CANdesc&#160;and&#160;will&#160;not&#160;be&#160;considered&#160;<br/>
during&#160;the&#160;code&#160;generation&#160;even&#160;if&#160;it&#160;is enabled.&#160;<br/>
-&#160;&#160;Main-Handler&#160;&#160;are&#160;&#160;set&#160;&#160;to&#160;&#160;“implemented&#160;&#160;by&#160;&#160;CANdesc”&#160;&#160;since&#160;&#160;the&#160;&#160;data&#160;&#160;reading&#160;<br/>
call-back&#160;will&#160;be&#160;the&#160;corresponding&#160;0x22&#160;DID&#160;service&#160;call.&#160;This&#160;means&#160;that&#160;if&#160;<br/>the&#160;corresponding&#160;service&#160;0x22&#160;DID&#160;has&#160;been&#160;set&#160;to&#160;use&#160;the&#160;“Signal&#160;API”,&#160;the&#160;<br/>periodic reading&#160;service&#160;will use&#160;it&#160;too.&#160;<br/>
-&#160;&#160;Post-Handlers are&#160;not&#160;supported&#160;at&#160;all.&#160;<br/>
&#160;<br/>
<b>Service&#160;0x2C:&#160;</b><br/>
-&#160;&#160;PreHandler&#160;&#160;configuration&#160;&#160;is&#160;possible:&#160;&#160;If&#160;&#160;a&#160;pre-handler&#160;&#160;is&#160;required,&#160;&#160;it&#160;&#160;must&#160;&#160;be&#160;<br/>
enabled&#160;on&#160;all&#160;sub-functions&#160;of&#160;the&#160;concrete&#160;DID.&#160;The&#160;pre-handler&#160;name&#160;will&#160;<br/>be&#160;“ApplDescPreDynDefineDid&lt;DID instance&#160;name&gt;”.&#160;<br/>
-&#160;&#160;PreHandler&#160;on&#160;“clear&#160;all”&#160;is&#160;not&#160;used&#160;by&#160;CANdesc&#160;and&#160;will&#160;not&#160;be&#160;considered&#160;<br/>
during&#160;the&#160;code&#160;generation&#160;even&#160;if&#160;it&#160;is enabled.&#160;<br/>
-&#160;&#160;Main-Handler&#160;are&#160;set&#160;to&#160;“implemented&#160;by&#160;CANdesc”&#160;since&#160;the&#160;DID&#160;definition&#160;<br/>
is&#160;always done&#160;by&#160;CANdesc.&#160;&#160;<br/>
-&#160;&#160;Post-Handler are&#160;not&#160;supported&#160;at&#160;all.&#160;<br/>
<b>6.2.2.3&#160;</b><br/>
<b>Signal&#160;Access&#160;Enabled Services&#160;</b><br/>
Some&#160;services&#160;such&#160;as&#160;the&#160;UDS&#160;ones&#160;0x22/0x2A&#160;and&#160;0x2E,&#160;can&#160;be&#160;processed&#160;on&#160;&#160;signal&#160;<br/>level. This&#160;means&#160;CANdesc&#160;will&#160;analyze&#160;the&#160;request/response&#160;data&#160;structure&#160;and&#160;generate&#160;<br/>the&#160;&#160;service&#160;&#160;main-handler,&#160;&#160;leaving&#160;&#160;to&#160;&#160;the&#160;&#160;application&#160;&#160;only&#160;&#160;the&#160;&#160;task&#160;&#160;to&#160;&#160;provide&#160;&#160;the&#160;&#160;signal&#160;<br/>values for the&#160;response,&#160;resp.&#160;to&#160;write&#160;the&#160;requested&#160;signal values to&#160;the&#160;ECU&#160;memory.&#160;<br/>The&#160;setting&#160;view&#160;of&#160;such&#160;a&#160;service&#160;is shown&#160;below:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
31&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-32_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;6-7&#160;GENy&#160;signal&#160;API&#160;enabled&#160;sub-service&#160;setup&#160;<br/>
Note:&#160;For&#160;the&#160;read&#160;dynamically&#160;defined&#160;DID&#160;service,&#160;there&#160;is&#160;no&#160;signal&#160;access&#160;since&#160;they&#160;<br/>are always implemented&#160;by&#160;CANdesc internally.&#160;<br/>
&#160;<br/>
If&#160;&#160;the&#160;&#160;“Signal&#160;API”&#160;option&#160;&#160;is&#160;&#160;not&#160;&#160;enabled&#160;&#160;this&#160;&#160;service&#160;&#160;is&#160;&#160;to&#160;&#160;be&#160;&#160;implemented&#160;&#160;like&#160;&#160;any&#160;&#160;other&#160;<br/>diagnostic&#160;service.&#160;The&#160;data&#160;object&#160;specific&#160;settings,&#160;described&#160;below,&#160;&#160;will&#160;have&#160;no&#160;effect&#160;<br/>on&#160;the&#160;code&#160;generation.&#160;<br/>If&#160;the&#160;“Signal&#160;API”&#160;option&#160;is enabled,&#160;CANdesc will&#160;generate&#160;per default a&#160;call-back&#160;function&#160;<br/>for&#160;&#160;any&#160;&#160;data&#160;&#160;object&#160;&#160;(signal)&#160;&#160;the&#160;&#160;service&#160;&#160;contains.&#160;You&#160;&#160;can&#160;&#160;specify&#160;&#160;more&#160;&#160;options&#160;&#160;on&#160;&#160;each&#160;<br/>signal,&#160;&#160;to&#160;&#160;achieve&#160;&#160;the&#160;&#160;maximum&#160;&#160;advantage&#160;&#160;of&#160;&#160;CANdesc&#160;&#160;–&#160;&#160;fully&#160;&#160;implemented&#160;&#160;diagnostic&#160;<br/>service.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
32&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=33></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-33_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-33_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-33_3.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;6-8&#160;GENy&#160;signal&#160;view&#160;of&#160;a&#160;sub-service&#160;<br/>
You&#160;can&#160;have&#160;three&#160;types of&#160;signal&#160;handling:&#160;<br/>
&#160;<br/>
Figure&#160;6-9&#160;GENy&#160;signal&#160;handler&#160;types&#160;<br/>
<b>&#160;</b><br/>
<b>FAQ&#160;<br/></b>Constant is&#160;only&#160;possible&#160;if&#160;the CDD file&#160;has&#160;contained&#160;constant&#160;value&#160;for the&#160;selected&#160;data&#160;<br/>
&#160;&#160;object. You can&#160;not&#160;specify&#160;in GENy&#160;a constant&#160;value&#160;for a signal&#160;handler.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
In&#160;case&#160;of&#160;selected&#160;“Direct&#160;Access” signal handling,&#160;the&#160;following&#160;options will be&#160;enabled:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
33&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-34_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;6-10&#160;GENy&#160;direct&#160;access&#160;signal&#160;handler&#160;settings&#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
Signal&#160;Handler&#160;Type&#160;&#160;Only&#160;for signal&#160;API&#160;&#160;Enum&#160;<br/>
<b>SignalHandler&#160;&#160;</b>Select the type&#160;of&#160;signal&#160;handler&#160;<br/>
enabled services.&#160;<br/>
Constant&#160;<br/>
&#160;<br/>
DirectAccess&#160;<br/>
Constant:&#160;The&#160;data&#160;value is&#160;<br/>constant.&#160;The&#160;data&#160;value&#160;can be&#160;<br/>used&#160;directly.&#160;This&#160;is&#160;used&#160;only&#160;<br/>when&#160;the&#160;corresponding&#160;<br/>subservice&#160;uses&#160;a&#160;signal&#160;API main&#160;<br/>handler.&#160;<br/>
&#160;<br/>Signal&#160;Handler: Use&#160;a callback&#160;<br/>function&#160;to get/set&#160;the&#160;data&#160;value.&#160;<br/>This&#160;function&#160;is&#160;used only&#160;when&#160;the&#160;<br/>corresponding&#160;subservice uses&#160;a&#160;<br/>signal&#160;API main handler.&#160;<br/>
&#160;<br/>Direct&#160;Access: Directly&#160;use&#160;a&#160;<br/>variable to access&#160;the&#160;data&#160;object.&#160;<br/>Also,&#160;a signal&#160;API main handler&#160;<br/>has&#160;to&#160;be&#160;used for this&#160;setting&#160;to&#160;<br/>have any&#160;effect.&#160;<br/>
SignalHandler&#160;<br/>
Only&#160;for signal&#160;API&#160;&#160;String&#160;<br/>
<b>&lt;DataObjectQ</b><br/>
This&#160;value&#160;is&#160;used&#160;as&#160;base&#160;for the&#160;<br/>
Function Base&#160;<br/>
enabled services&#160;<br/>
<b>ualifier&gt;+&lt;Dia</b><br/>
signal&#160;access&#160;function&#160;-&#160;depending&#160;<br/>
Name&#160;<br/>
and&#160;a signal&#160;<br/>
<b>gInstanceQual&#160;</b>on&#160;how&#160;the&#160;value&#160;is&#160;used, the&#160;<br/>
access&#160;through&#160;a&#160;<br/>
<b>ifier&gt;&#160;</b><br/>
name&#160;entered&#160;here&#160;is&#160;prefixed&#160;with&#160;<br/>
<b>SignalHandler</b>&#160;is&#160;<br/>
different prefixes, e.g&#160;<br/>
selected&#160;<br/>
ApplDescRead&#160;/&#160;ApplDescWrite.&#160;<br/>
&#160;<br/>You can&#160;override&#160;the&#160;default name,&#160;<br/>by&#160;specifying an own signal&#160;base.&#160;<br/>The&#160;Prefix&#160;(e.g.&#160;ApplDesc&#160;can&#160;not&#160;<br/>be&#160;overridden).&#160;<br/>
Signal&#160;Variable&#160;<br/>
Only&#160;for signal&#160;API&#160;&#160;String&#160;<br/>
<b>&lt;DataObjectQ</b><br/>
The&#160;name of&#160;the signal&#160;variable.&#160;<br/>
Name&#160;<br/>
enabled services&#160;<br/>
<b>ualifier&gt;&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
34&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=35></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
and&#160;if&#160;<br/>
Example:&#160;<br/>
<b>DirectAccess</b>&#160;<br/>signal&#160;handling&#160;is&#160;<br/>
c_dataTemp&#160;<br/>
selected&#160;<br/>
g_applData.bit0&#160;<br/>
Signal&#160;Variable&#160;<br/>
Only&#160;for signal&#160;API&#160;&#160;Enum&#160;<br/>
<b>Ram&#160;</b><br/>
To create&#160;the&#160;proper&#160;extern&#160;<br/>
Prototype&#160;<br/>
enabled services&#160;<br/>
None&#160;<br/>
declaration to&#160;access&#160;the signal&#160;<br/>
and&#160;if&#160;<br/>
Const&#160;<br/>
variable,&#160;the&#160;proper&#160;access&#160;<br/>
<b>DirectAccess</b>&#160;<br/>
User<b>&#160;</b><br/>
modifiers&#160;have to be&#160;specified.&#160;<br/>
signal&#160;handling&#160;is&#160;<br/>
&#160;<br/>
selected&#160;<br/>
None:&#160;No&#160;prototype is&#160;generated at&#160;<br/>all.&#160;&#34;DescType.h&#34;&#160;where the&#160;user&#160;<br/>has&#160;to&#160;define&#160;the&#160;real&#160;typedefs&#160;(for&#160;<br/>structure access&#160;for example).&#160;<br/>
&#160;<br/>Ram:&#160;The&#160;variable&#160;is&#160;located in&#160;<br/>RAM.&#160;<br/>
&#160;<br/>Const:&#160;The&#160;variable&#160;is&#160;located&#160;in&#160;<br/>ROM.&#160;<br/>
&#160;<br/>User: Set&#160;a&#160;user&#160;defined prototype.&#160;<br/>
Signal&#160;Variable&#160;User&#160;&#160;Only&#160;for signal&#160;API&#160;&#160;String&#160;<br/>
<b>Empty&#160;</b><br/>
Set&#160;the&#160;prototype of&#160;the&#160;signal&#160;<br/>
Prototype&#160;<br/>
enabled services&#160;<br/>
variable.&#160;<br/>
and&#160;if&#160;<br/>
Example:&#160;<br/>
<b>DirectAccess</b>&#160;<br/>signal&#160;handling&#160;is&#160;<br/>
boolean&#160;<br/>
selected&#160;<br/>
EcuTempType&#160;<br/>
and&#160;if&#160;the&#160;Signal&#160;<br/>Variable Prototype&#160;<br/>is&#160;set&#160;to&#160;<b>User</b>&#160;<br/>
&#160;<br/>
<b>6.2.3&#160;</b><br/>
<b>Timing Settings&#160;</b><br/>
GENy&#160;imports&#160;all&#160;possible&#160;timings&#160;that&#160;the&#160;diagnostic&#160;&#160;description&#160;source&#160;provides.&#160;Those&#160;<br/>parameters&#160;&#160;that&#160;&#160;are&#160;&#160;available&#160;&#160;in&#160;&#160;the&#160;&#160;CDD&#160;&#160;file&#160;&#160;are&#160;&#160;considered&#160;&#160;as&#160;&#160;a&#160;&#160;part&#160;&#160;of&#160;&#160;the&#160;&#160;ECU&#160;<br/>specification&#160;&#160;and&#160;&#160;are&#160;&#160;not&#160;&#160;modifiable&#160;&#160;in&#160;&#160;GENy.&#160;&#160;If&#160;&#160;a&#160;&#160;modification&#160;&#160;of&#160;&#160;those&#160;&#160;parameters&#160;&#160;is&#160;<br/>required,&#160;&#160;please&#160;&#160;change&#160;&#160;their&#160;&#160;values&#160;&#160;in&#160;&#160;the&#160;&#160;diagnostic&#160;&#160;description&#160;&#160;file&#160;&#160;and&#160;&#160;re-import&#160;&#160;it&#160;&#160;in&#160;<br/>GENy.&#160;<br/>All&#160;&#160;other&#160;&#160;parameters&#160;&#160;can&#160;&#160;be&#160;&#160;set&#160;&#160;up&#160;&#160;manually,&#160;&#160;but&#160;&#160;the&#160;&#160;default&#160;&#160;value&#160;&#160;already&#160;&#160;matches&#160;&#160;the&#160;<br/>OEM&#160;specification.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
35&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-36_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-36_2.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;6-11&#160;GENy&#160;CANdesc&#160;timing&#160;parameters&#160;<br/>
<b>6.2.4&#160;</b><br/>
<b>Security&#160;Access&#160;Settings&#160;(UDS2006)&#160;</b><br/>
If&#160;the&#160;security&#160;access&#160;service&#160;is&#160;implemented&#160;by&#160;CANdesc&#160;(see&#160;the&#160;service&#160;handler&#160;on&#160;the&#160;<br/>service&#160;0x27&#160;instances),&#160;you&#160;can&#160;set&#160;here&#160;the&#160;level&#160;specific&#160;attributes,&#160;like&#160;attempts&#160;to&#160;start&#160;<br/>the&#160;delay&#160;time,&#160;delay&#160;time&#160;on&#160;power on,&#160;etc.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>It&#160;&#160;is&#160;OEM&#160;&#160;specific&#160;&#160;property&#160;&#160;whether&#160;&#160;the&#160;security&#160;access&#160;&#160;parameters&#160;&#160;will&#160;&#160;be&#160;&#160;evaluated&#160;<br/>
<b>&#160;&#160;</b>security&#160;&#160;level&#160;&#160;specific&#160;&#160;or&#160;&#160;not.&#160;&#160;In&#160;&#160;case&#160;&#160;the&#160;&#160;security&#160;&#160;access&#160;&#160;service&#160;&#160;specification&#160;&#160;of&#160;&#160;the&#160;<br/>
concrete&#160;OEM&#160;requires&#160;only&#160;global&#160;configuration&#160;of&#160;these&#160;options,&#160;the&#160;code&#160;generator&#160;<br/>will&#160;calculate&#160;the&#160;maximum&#160;value&#160;over&#160;all&#160;levels&#160;for&#160;each&#160;parameter&#160;and&#160;this&#160;value&#160;will&#160;<br/>be&#160;used by&#160;the&#160;service implementation in&#160;CANdesc.&#160;&#160;<br/>
Example:&#160;Level&#160;1 has&#160;“Attempt&#160;Counter”&#160;=&#160;1,&#160;and&#160;Level&#160;2 has&#160;for&#160;the&#160;same&#160;parameter&#160;=&#160;<br/>3.&#160;CANdesc&#160;will&#160;use&#160;then&#160;for&#160;“Attempt&#160;Counter”&#160;=&#160;3&#160;for&#160;all&#160;security&#160;levels.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
36&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-37_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;6-12&#160;GENy&#160;CANdesc&#160;security&#160;access&#160;parameters&#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
Attempt&#160;Counter&#160;<br/>
Only&#160;if&#160;the&#160;<br/>
Integer&#160;<br/>
<b>0&#160;</b><br/>
Specifies&#160;the&#160;maximum&#160;number&#160;of&#160;<br/>
SecurityAccess&#160;<br/>
1..255&#160;<br/>
failed&#160;attempts&#160;to&#160;unlock&#160;the ECU.&#160;<br/>
state group&#160;is&#160;<br/>
If&#160;this&#160;number&#160;is&#160;reached,&#160;a&#160;delay&#160;<br/>
available&#160;<br/>
for the&#160;next security&#160;access&#160;try&#160;will&#160;<br/>be&#160;inserted.&#160;<br/>If&#160;a&#160;non-zero&#160;value&#160;is&#160;entered, the&#160;<br/>delay&#160;time&#160;must be set&#160;to&#160;a&#160;non-<br/>zero&#160;value too.&#160;<br/>
&#160;<br/>Note:&#160;This&#160;parameter&#160;has&#160;only&#160;<br/>effect only&#160;if&#160;the&#160;SecurityAccess&#160;<br/>service&#160;is&#160;handled&#160;by&#160;CANdesc.&#160;<br/>
Initial&#160;Delay&#160;[ms]&#160;<br/>
Only&#160;if&#160;the&#160;<br/>
Integer&#160;<br/>
<b>0&#160;</b><br/>
Specifies&#160;the&#160;delay&#160;time after the&#160;<br/>
SecurityAccess&#160;<br/>
1..65535&#160;<br/>
maximum&#160;retry&#160;attempt&#160;count&#160;has&#160;<br/>
state group&#160;is&#160;<br/>
been&#160;reached.&#160;<br/>
available&#160;<br/>
&#160;<br/>If&#160;a&#160;non-zero&#160;value&#160;is&#160;entered, the&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
37&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-38_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
attempt&#160;count&#160;must be set&#160;to a&#160;<br/>non-zero&#160;value&#160;too.&#160;<br/>
&#160;<br/>Note:&#160;This&#160;parameter&#160;has&#160;only&#160;<br/>effect only&#160;if&#160;the&#160;SecurityAccess&#160;<br/>service&#160;is&#160;handled&#160;by&#160;CANdesc.&#160;<br/>
PowerOn&#160;Delay&#160;[ms]&#160;&#160;Only&#160;if&#160;the&#160;<br/>
Integer&#160;<br/>
<b>0&#160;</b><br/>
Specifies&#160;the&#160;delay&#160;time at&#160;power&#160;<br/>
SecurityAccess&#160;<br/>
1..65535&#160;<br/>
on.&#160;<br/>
state group&#160;is&#160;<br/>
&#160;<br/>
available&#160;<br/>
If&#160;a&#160;non-zero&#160;value&#160;is&#160;entered, the&#160;<br/>delay&#160;time&#160;must be set&#160;to&#160;a&#160;non-<br/>zero&#160;value too.&#160;<br/>
&#160;<br/>Note:&#160;This&#160;parameter&#160;has&#160;only&#160;<br/>effect only&#160;if&#160;the&#160;SecurityAccess&#160;<br/>service&#160;is&#160;handled&#160;by&#160;CANdesc.&#160;<br/>
&#160;<br/>
<b>6.2.5&#160;</b><br/>
<b>Security&#160;Access&#160;Settings&#160;(UDS2012)&#160;</b><br/>
Due&#160;to&#160;the&#160;new&#160;features&#160;in&#160;CANdesc&#160;UDS2012,&#160;the&#160;configuration&#160;of&#160;the&#160;security&#160;levels&#160;in&#160;<br/>GENy&#160;has changed.&#160;<br/>
&#160;<br/>
Figure&#160;6-13&#160;Security&#160;settings&#160;in&#160;GENy&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
Level&#160;Specific&#160;Failed&#160;&#160;Only&#160;if&#160;the&#160;<br/>
Boolean&#160;&#160;<b>False&#160;</b><br/>
Switch&#160;to&#160;select&#160;whether&#160;a&#160;global&#160;<br/>
Access&#160;Attempt&#160;<br/>
SecurityAccess&#160;<br/>
True&#160;<br/>
false attempt&#160;counter and&#160;delay&#160;<br/>
Supervision&#160;<br/>
state group&#160;is&#160;<br/>
timer for all&#160;security&#160;levels&#160;shall&#160;be&#160;<br/>
available&#160;<br/>
used&#160;(false) or&#160;if&#160;each&#160;level&#160;has&#160;its&#160;<br/>own false&#160;attempt&#160;counter and&#160;<br/>delay&#160;timer (true).&#160;<br/>
Use Static&#160;Seed&#160;<br/>
Only&#160;if&#160;the&#160;<br/>
Boolean&#160;&#160;<b>False&#160;</b><br/>
For each&#160;level&#160;can&#160;be selected&#160;if&#160;a&#160;<br/>
SecurityAccess&#160;<br/>
True&#160;<br/>
static&#160;seed&#160;is&#160;used (true)&#160;or&#160;not&#160;<br/>
state group&#160;is&#160;<br/>
(false).&#160;Static&#160;seed means&#160;that&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
38&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=39></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
available&#160;<br/>
CANdesc&#160;stores&#160;the seed&#160;and&#160;re-<br/>uses&#160;the seed&#160;in a&#160;positive&#160;<br/>response to&#160;a&#160;seed&#160;request&#160;for that&#160;<br/>level, until&#160;the level&#160;is&#160;unlocked.&#160;<br/>
Failed&#160;Attempt&#160;<br/>
Only&#160;if&#160;the&#160;<br/>
Integer&#160;<br/>
<b>Value&#160;</b><br/>
The&#160;number&#160;of&#160;failed&#160;security&#160;<br/>
Counter to Delay&#160;<br/>
SecurityAccess&#160;<br/>
<b>imported from&#160;&#160;</b>unlock&#160;attempts&#160;allowed&#160;before a&#160;<br/>
state group&#160;is&#160;<br/>
<b>the Cdd&#160;file.</b>&#160;<br/>
delay&#160;is&#160;imposed&#160;between&#160;<br/>
available&#160;<br/>
0..65535&#160;<br/>
attempts.&#160;<br/>
Failed&#160;Attempt&#160;<br/>
Only&#160;if&#160;the&#160;<br/>
Integer&#160;<br/>
<b>Value&#160;</b><br/>
The&#160;delay&#160;time in&#160;ms&#160;which&#160;is&#160;<br/>
Delay&#160;[ms]&#160;<br/>
SecurityAccess&#160;<br/>
<b>imported from&#160;&#160;</b>imposed&#160;if&#160;the Failed&#160;Attempt&#160;<br/>
state group&#160;is&#160;<br/>
<b>the Cdd&#160;file.</b>&#160;<br/>
Counter limit has&#160;been reached.&#160;<br/>
available&#160;<br/>
0..65535&#160;<br/>
Further security&#160;access&#160;attempts&#160;<br/>are discarded,&#160;until&#160;the&#160;delay&#160;has&#160;<br/>expired.&#160;<br/>
PowerOn&#160;Delay&#160;[ms]&#160;&#160;Only&#160;if&#160;the&#160;<br/>
Integer&#160;<br/>
<b>Value&#160;</b><br/>
The&#160;delay&#160;time in ms&#160;which&#160;is&#160;<br/>
SecurityAccess&#160;<br/>
<b>imported from&#160;&#160;</b>imposed&#160;when&#160;the&#160;ECU is&#160;<br/>
state group&#160;is&#160;<br/>
<b>the Cdd&#160;file.</b>&#160;<br/>
powered on.&#160;Requests&#160;to unlock&#160;<br/>
available&#160;<br/>
0..65535&#160;<br/>
the&#160;security&#160;level&#160;are&#160;declined&#160;until&#160;<br/>the&#160;delay&#160;has&#160;expired.&#160;<br/>
&#160;<br/>
<b>6.2.6&#160;</b><br/>
<b>Scheduler&#160;Settings&#160;</b><br/>
If&#160;&#160;the&#160;&#160;ECU&#160;&#160;shall&#160;&#160;support&#160;&#160;the&#160;&#160;periodic&#160;&#160;data&#160;&#160;reading&#160;&#160;service,&#160;&#160;the&#160;&#160;following&#160;&#160;settings&#160;&#160;are&#160;<br/>relevant&#160;and&#160;shall&#160;be&#160;setup&#160;to&#160;match&#160;the&#160;ECU&#160;performance&#160;and&#160;RAM&#160;resource&#160;availability.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
39&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-40_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;6-14&#160;GENy&#160;CANdesc&#160;scheduler&#160;parameters&#160;<br/>
&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
Maximum&#160;Count&#160;of&#160;<br/>
Only&#160;if&#160;the&#160;periodic&#160;&#160;Integer&#160;<br/>
<b>5&#160;</b><br/>
The&#160;maximum&#160;number&#160;of&#160;items&#160;<br/>
Scheduled&#160;Items&#160;<br/>
data&#160;reading&#160;<br/>
1..255&#160;<br/>
that&#160;are sent&#160;periodically.&#160;<br/>
service&#160;is&#160;available&#160;<br/>
You can&#160;only&#160;request at most this&#160;<br/>
in the&#160;ECU&#160;<br/>
number&#160;of&#160;periodic&#160;DIDs,&#160;<br/>
configuration.&#160;<br/>
independently&#160;per&#160;scheduling&#160;rate.&#160;<br/>
&#160;<br/>Example:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
40&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=41></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Availability&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
If&#160;set&#160;up&#160;5&#160;items&#160;for&#160;scheduling,&#160;<br/>CANdesc&#160;will&#160;be able&#160;to&#160;schedule&#160;<br/>at&#160;most 5&#160;items&#160;at&#160;fast, 5&#160;items&#160;at&#160;<br/>slow&#160;and&#160;5&#160;items&#160;at&#160;medium&#160;rate.&#160;<br/>
&#160;<br/>Note:&#160;If&#160;the scheduler size&#160;exceeds&#160;<br/>the&#160;total&#160;number&#160;of&#160;available&#160;<br/>periodic&#160;DIDs, CANdesc&#160;will&#160;<br/>automatically&#160;reduce&#160;the&#160;size to&#160;<br/>the&#160;lowest&#160;value.&#160;<br/>
Fast/Medium/Slow&#160;<br/>
Only&#160;if&#160;the&#160;periodic&#160;&#160;Integer&#160;<br/>
<b>OEM&#160;</b><br/>
Specifies&#160;the&#160;timings&#160;of&#160;each&#160;<br/>
Scheduling&#160;Rate&#160;<br/>
data&#160;reading&#160;<br/>
<b>dependent&#160;</b><br/>
scheduling&#160;rate&#160;that&#160;the&#160;ECU&#160;<br/>
[ms]&#160;<br/>
service&#160;is&#160;available&#160;<br/>
1..65535&#160;<br/>
supports.&#160;<br/>
in the&#160;ECU&#160;<br/>configuration.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
41&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-42_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-42_2.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>7&#160;&#160;CANdescBasic&#160;Configuration&#160;in&#160;GENy&#160;</b><br/>
As&#160;&#160;already&#160;&#160;stated&#160;&#160;in&#160;&#160;<a href="TechnicalReference_CANdescs.html#20"><i>6&#160;&#160;CANdesc&#160;&#160;Configuration&#160;&#160;in&#160;&#160;GENy</i>&#160;&#160;</a>since&#160;&#160;version&#160;&#160;6.00.00,&#160;&#160;the&#160;<br/>CANdesc&#160;&#160;configuration&#160;&#160;in&#160;&#160;GENy&#160;&#160;has&#160;&#160;been&#160;&#160;changed.&#160;&#160;Both&#160;&#160;CANdesc&#160;&#160;and&#160;&#160;CANdescBasic&#160;<br/>variants&#160;&#160;share&#160;&#160;the&#160;&#160;same&#160;&#160;GUI&#160;&#160;and&#160;&#160;settings&#160;&#160;representation&#160;&#160;in&#160;&#160;GENy.&#160;&#160;Due&#160;&#160;to&#160;&#160;the&#160;&#160;reduced&#160;<br/>feature&#160;&#160;set&#160;&#160;in&#160;&#160;CANdescBasic,&#160;&#160;its&#160;&#160;GENy&#160;&#160;GUI&#160;&#160;provides&#160;&#160;you&#160;&#160;correspondingly&#160;&#160;a&#160;&#160;reduced&#160;<br/>configuration&#160;option&#160;set,&#160;covering&#160;all&#160;of&#160;the&#160;CANdescBasic requirements.&#160;&#160;<br/>
<b>7.1&#160;</b><br/>
<b>Global&#160;CANdescBasic&#160;Settings&#160;</b><br/>
CANdescBasic&#160;shares&#160;the&#160;same&#160;global&#160;settings&#160;as&#160;the&#160;CANdesc&#160;variant&#160;(refer&#160;to&#160;chapter&#160;<br/><a href="TechnicalReference_CANdescs.html#22"><i>6.2.1&#160;Global CANdesc&#160;Settings</i>).</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>CANdescBasic&#160;does not&#160;support&#160;any&#160;of&#160;the&#160;multi&#160;identity&#160;modes!&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>7.2&#160;</b><br/>
<b>Service&#160;Specific&#160;Settings&#160;</b><br/>
In&#160;CANdescBasic,&#160;you&#160;don’t&#160;have&#160;any&#160;more&#160;an&#160;external&#160;diagnostic&#160;specification&#160;document&#160;<br/>that&#160;&#160;shall&#160;&#160;be&#160;&#160;imported&#160;&#160;(like&#160;&#160;a&#160;&#160;CDD&#160;&#160;file).&#160;&#160;In&#160;&#160;your&#160;&#160;software&#160;&#160;delivery,&#160;&#160;there&#160;&#160;is&#160;&#160;already&#160;&#160;a&#160;<br/>prepared&#160;diagnostic&#160;configuration&#160;template&#160;that&#160;fulfills&#160;the&#160;concrete&#160;OEM&#160;and&#160;its&#160;diagnostic&#160;<br/>protocol requirements.&#160;&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>In CANdescBasic&#160;versions,&#160;prior&#160;6.00.00,&#160;it&#160;was&#160;possible to import&#160;information,&#160;out&#160;of&#160;a&#160;<br/>
&#160;&#160;CDD&#160;file,&#160;whether&#160;a&#160;service Id&#160;is&#160;supported&#160;or&#160;not-supported&#160;and any&#160;new&#160;sessions.&#160;In&#160;<br/>
CANdesc&#160;6.00.00&#160;and&#160;newer&#160;this&#160;feature&#160;is&#160;temporarily&#160;disabled,&#160;but&#160;you&#160;still&#160;can&#160;<br/>manually&#160;configure&#160;these&#160;changes.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Since&#160;CANdescBasic&#160;provides&#160;only&#160;a&#160;Sid&#160;view&#160;over&#160;the&#160;diagnostic&#160;services,&#160;its&#160;service&#160;specific&#160;configuration&#160;is&#160;performed&#160;<br/>
primarily&#160;within&#160;the&#160;service&#160;overview&#160;grid&#160;in&#160;GENy&#160;(refer&#160;to&#160;chapte<a href="TechnicalReference_CANdescs.html#27">r&#160;0<i>&#160;</i>&#160;</a><br/>
<a href="TechnicalReference_CANdescs.html#27">Service&#160;Specific Settings&#160;</a><br/>
&#160;<br/>
CANdescBasic&#160;&#160;also&#160;&#160;provides&#160;&#160;a&#160;&#160;built&#160;&#160;in&#160;&#160;support&#160;&#160;for&#160;&#160;some&#160;&#160;of&#160;&#160;the&#160;&#160;diagnostic&#160;&#160;services&#160;&#160;like&#160;<br/>CANdesc,&#160;&#160;but&#160;&#160;its&#160;scope&#160;is&#160;reduced&#160;(due&#160;to&#160;lack&#160;&#160;of&#160;&#160;enough&#160;service&#160;definition&#160;information)&#160;<br/>only&#160;&#160;to&#160;&#160;the&#160;&#160;most&#160;&#160;important&#160;&#160;for&#160;&#160;diagnostic&#160;&#160;communication&#160;&#160;services&#160;&#160;(e.g.&#160;<br/>DiagnosticSessionControl,&#160;TesterPresent,&#160;etc.).&#160;You&#160;will&#160;recognize&#160;these&#160;services&#160;in&#160;GENy&#160;<br/>as described&#160;in&#160;chapte<a href="TechnicalReference_CANdescs.html#29">r&#160;<i>6.2.2.2&#160;Predefined&#160;(implemented) Services&#160;in&#160;CANdesc</i>.</a>&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
42&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-43_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>7.3&#160;</b><br/>
<b>Timing Settings&#160;</b><br/>
The&#160;configuration&#160;aspect&#160;of&#160;the&#160;CANdescBasic&#160;timings&#160;settings&#160;is&#160;the&#160;same&#160;as&#160;described&#160;<br/><a href="TechnicalReference_CANdescs.html#35">in&#160;<i>6.2.3&#160;Timing&#160;Settings</i>,&#160;</a>with&#160;the&#160;difference,&#160;that&#160;here&#160;there&#160;is&#160;no&#160;CDD&#160;file&#160;but&#160;a&#160;predefined&#160;<br/>template.&#160;<br/>
&#160;<br/>
<b>7.4&#160;</b><br/>
<b>Diagnostic&#160;State&#160;Configuration&#160;</b><br/>
CANdescBasic&#160;has&#160;a&#160;built&#160;in&#160;support&#160;only&#160;for&#160;the&#160;diagnostic&#160;session&#160;states.&#160;All&#160;other&#160;states&#160;<br/>like&#160;SecurityAccess&#160;and&#160;ECU&#160;specific&#160;service&#160;&#160;execution&#160;conditions&#160;shall&#160;be&#160;implemented&#160;<br/>by&#160;the&#160;application.&#160;<br/>The&#160;supplied&#160;CANdescBasic&#160;template&#160;already&#160;includes&#160;all&#160;mandatory&#160;session,&#160;specified&#160;by&#160;<br/>the&#160;&#160;concrete&#160;&#160;OEM.&#160;&#160;If&#160;&#160;some&#160;&#160;additional&#160;&#160;sessions&#160;&#160;needed,&#160;&#160;you&#160;&#160;can&#160;&#160;add&#160;&#160;them&#160;&#160;in&#160;&#160;GENy&#160;&#160;as&#160;<br/>shown&#160;below:&#160;<br/>
&#160;<br/>
Figure&#160;7-1&#160;CANdescBasic&#160;add&#160;a&#160;user&#160;session&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
43&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=44></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-44_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-44_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-44_3.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>For&#160;any&#160;session&#160;added&#160;by&#160;you&#160;(user&#160;sessions),&#160;GENy&#160;automatically&#160;creates&#160;all&#160;session&#160;<br/>
&#160;&#160;transitions,&#160;required&#160;by&#160;the&#160;concrete diagnostic&#160;protocol&#160;(e.g.&#160;UDS,&#160;KWP2000).&#160;<br/>
Examples:&#160;<br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Service&#160;0x10:&#160;&#160;<br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;AllExistingSessions&gt;-&gt;&lt;NewSsession&gt;,&#160;&#160;<br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;NewSession&gt;-&gt;&lt;NewSession&gt;&#160;<br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Service 0x20:&#160;<br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&lt;NewSession&gt;-&gt;&lt;DefaultSession&gt;&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;allowed&#160;session&#160;Ids&#160;are&#160;protocol&#160;dependent.&#160;For&#160;example:&#160;on&#160;UDS&#160;you&#160;can&#160;not&#160;<br/>
<b>&#160;&#160;</b>specify&#160;user&#160;sessions&#160;with Ids&#160;greater&#160;than&#160;0x7F.&#160;On KWP2000&#160;any&#160;value&#160;is&#160;acceptable&#160;<br/>
for&#160;session&#160;Id.&#160;<br/>&#160;<br/>The&#160;session&#160;Id&#160;must&#160;be&#160;a unique&#160;value&#160;among&#160;all&#160;sessions,&#160;supported&#160;by&#160;your&#160;ECU.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
For&#160;the&#160;user&#160;defined&#160;session,&#160;you&#160;can&#160;any&#160;time&#160;change&#160;their&#160;name,&#160;session&#160;or&#160;completely&#160;<br/>remove&#160;them:&#160;<br/>
&#160;<br/>
Figure&#160;7-2&#160;CANdescBasic&#160;change&#160;user&#160;session&#160;name,&#160;id&#160;or&#160;completely&#160;delete&#160;user&#160;session&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
44&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=45></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-45_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-45_2.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
Once&#160;a&#160;user&#160;session&#160;has&#160;been&#160;added,&#160;you&#160;can&#160;configure&#160;for&#160;each&#160;service&#160;whether&#160;it&#160;shall&#160;<br/>be&#160;supported&#160;or&#160;not&#160;in&#160;the&#160;new&#160;session.&#160;You&#160;can&#160;do&#160;this&#160;configuration&#160;either&#160;on&#160;the&#160;service&#160;<br/>overview&#160;grid,&#160;&#160;or&#160;if&#160;there&#160;&#160;are&#160;&#160;some&#160;service&#160;&#160;that&#160;&#160;have&#160;sub-services,&#160;for&#160;each&#160;sub-service.&#160;<br/>The&#160;pictures&#160;below&#160;show&#160;each&#160;of&#160;the&#160;service&#160;level configuration&#160;views.&#160;<br/>
&#160;<br/>
Figure&#160;7-3&#160;CANdescBasic&#160;session&#160;configuration&#160;at&#160;service&#160;overview&#160;&#160;<br/>
&#160;<br/>
Figure&#160;7-4&#160;CANdescBasic&#160;session&#160;configuration&#160;at&#160;service&#160;Id&#160;level&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
45&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=46></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-46_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;7-5&#160;CANdescBasic&#160;session&#160;configuration&#160;at&#160;sub-service&#160;level&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
46&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=47></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-47_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>8&#160;&#160;Multi&#160;Identity&#160;Support&#160;</b><br/>
CANdesc&#160;allows&#160;you&#160;to&#160;use&#160;multiple&#160;diagnostic&#160;configuration&#160;sets&#160;–&#160;a&#160;use&#160;case&#160;where&#160;the&#160;<br/>ECU&#160;&#160;always&#160;&#160;communicates&#160;&#160;over&#160;&#160;the&#160;&#160;same&#160;&#160;connection,&#160;&#160;but&#160;&#160;shall&#160;&#160;implement&#160;&#160;different&#160;<br/>functionality&#160;depending&#160;on&#160;some&#160;hardware (jumper)&#160;setting.&#160;<br/>All&#160;supported&#160;configuration&#160;sets&#160;are&#160;described&#160;in&#160;the&#160;following&#160;chapters.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>Please note:&#160;&#160;<br/>
&#160;&#160;The&#160;multi&#160;identity&#160;feature&#160;of&#160;CANdesc&#160;is:&#160;<br/>
-&#160;<br/>
firstly&#160;supported&#160;in&#160;CANdesc&#160;6.00.00;&#160;<br/>
-&#160;<br/>
not&#160;supported&#160;at&#160;all&#160;in the CANdescBasic&#160;variant.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>8.1&#160;</b><br/>
<b>Single&#160;Identity&#160;Mode&#160;</b><br/>
CANdesc&#160;&#160;has&#160;&#160;a&#160;&#160;static&#160;&#160;configuration&#160;&#160;set&#160;&#160;–&#160;&#160;once&#160;&#160;all&#160;&#160;services&#160;&#160;and&#160;&#160;communication&#160;<br/>connections&#160;are&#160;&#160;configured,&#160;&#160;and&#160;&#160;the&#160;&#160;program&#160;&#160;code&#160;&#160;is&#160;flashed&#160;&#160;into&#160;&#160;the&#160;&#160;ECU&#160;&#160;there&#160;&#160;are&#160;&#160;no&#160;<br/>more configuration&#160;changes possible.&#160;<br/>
<b>8.1.1.1&#160;</b><br/>
<b>Configuration in CANdela&#160;&#160;</b><br/>
You&#160;&#160;need&#160;&#160;just&#160;&#160;to&#160;&#160;prepare&#160;&#160;the&#160;&#160;corresponding&#160;&#160;CDD&#160;&#160;variant&#160;&#160;for&#160;&#160;your&#160;&#160;ECU&#160;&#160;configuration&#160;&#160;in&#160;<br/>CANdelaStudio.&#160;<br/>
<b>8.1.1.2&#160;</b><br/>
<b>Configuration in GENy&#160;</b><br/>
Import&#160;the&#160;CDD&#160;file&#160;and&#160;the&#160;corresponding&#160;variant&#160;in&#160;GENy&#160;(refer&#160;to&#160;<i>chapte<a href="TechnicalReference_CANdescs.html#21">r&#160;6.2&#160;Step&#160;Two&#160;<br/>–&#160;ECU&#160;Diagnostic Configuration&#160;in&#160;GENy</i>&#160;</a>for&#160;details).&#160;<br/>
&#160;<br/>
<b>8.2&#160;</b><br/>
<b>VSG&#160;Mode&#160;</b><br/>
The&#160;VSG&#160;mode&#160;is a&#160;special multi identity&#160;mode,&#160;which&#160;has&#160;the&#160;following&#160;characteristics:&#160;<br/>
&#160;&#160;Allows&#160;&#160;to&#160;&#160;support&#160;&#160;multiple&#160;&#160;diagnostic&#160;&#160;configuration&#160;&#160;variants&#160;&#160;–&#160;&#160;each&#160;&#160;variant&#160;&#160;reflects&#160;&#160;a&#160;<br/>
VSG&#160;from&#160;the&#160;imported&#160;CDD&#160;file,&#160;and&#160;additionally&#160;there&#160;is&#160;a&#160;base&#160;variant&#160;that&#160;contains&#160;<br/>all&#160;services&#160;that&#160;does&#160;not&#160;belong&#160;to&#160;any&#160;VSG.&#160;<br/>
&#160;&#160;One&#160;&#160;or&#160;&#160;several&#160;&#160;configuration&#160;&#160;variants&#160;&#160;can&#160;&#160;be&#160;&#160;simultaneously&#160;&#160;activated&#160;&#160;during&#160;&#160;the&#160;&#160;ECU&#160;<br/>
initialization.&#160;The&#160;base&#160;variant&#160;is always active.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
47&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=48></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-48_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-48_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-48_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-48_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-48_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-48_6.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
CANdesc&#160;<br/>
APPL&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;<br/>
CANdesc&#160;<br/>
CANdesc&#160;<br/>
DIAG&#160;CFG&#160;<br/>
&#160;<br/>
TP&#160;<br/>
&#160;<br/>
Figure&#160;8-1&#160;CANdesc&#160;multi&#160;identity&#160;mode&#160;<br/>
CANdesc&#160;&#160;will&#160;&#160;be&#160;&#160;initialized&#160;&#160;with&#160;&#160;the&#160;&#160;base&#160;&#160;variant&#160;&#160;at&#160;&#160;ECU&#160;&#160;start&#160;&#160;up&#160;&#160;sequence.&#160;&#160;If&#160;&#160;required,&#160;<br/>additional&#160;&#160;variant(s)&#160;&#160;can&#160;&#160;be&#160;&#160;activated&#160;&#160;by&#160;&#160;the&#160;&#160;application&#160;&#160;(please&#160;&#160;refer&#160;&#160;to&#160;&#160;chapter&#160;&#160;<a href="TechnicalReference_CANdescs.html#81"><i>12.6.2&#160;<br/>Multi Variant&#160;Configuration&#160;Functions</i>&#160;</a>for&#160;more&#160;information&#160;about&#160;the&#160;variant&#160;initialization).&#160;<br/>
&#160;<br/>
<b>8.2.1&#160;</b><br/>
<b>Implementation Limitations&#160;</b><br/>
In&#160;&#160;order&#160;&#160;to&#160;&#160;generate&#160;&#160;the&#160;&#160;correct&#160;&#160;NRC&#160;&#160;for&#160;&#160;a&#160;&#160;requested&#160;&#160;service&#160;&#160;Id&#160;&#160;(e.g.&#160;&#160;0x7F&#160;<br/>(ServiceNotSupprtedInActiveSession),&#160;&#160;CANdesc&#160;&#160;considers&#160;&#160;all&#160;&#160;of&#160;&#160;its&#160;&#160;sub-services&#160;<br/>diagnostic&#160;&#160;session&#160;&#160;specific&#160;&#160;execution&#160;&#160;precondition&#160;&#160;and&#160;&#160;calculates&#160;&#160;a&#160;&#160;diagnostic&#160;&#160;session&#160;<br/>filter&#160;for&#160;the&#160;SID.&#160;In&#160;case&#160;of&#160;a&#160;multi-identity&#160;such&#160;a&#160;calculation&#160;shall&#160;be&#160;made&#160;for&#160;all&#160;of&#160;the&#160;<br/>diagnostic configuration&#160;variants,&#160;which&#160;will cost&#160;a&#160;lot&#160;of&#160;ROM&#160;resources.&#160;<br/>
&#160;<br/>
In&#160;&#160;order&#160;&#160;to&#160;&#160;keep&#160;&#160;CANdesc&#160;&#160;ROM&#160;&#160;resources&#160;&#160;as&#160;&#160;low&#160;&#160;as&#160;&#160;possible&#160;&#160;the&#160;&#160;service&#160;&#160;Id&#160;&#160;specific&#160;<br/>session&#160;&#160;filtering&#160;&#160;is&#160;&#160;created&#160;&#160;considering&#160;&#160;the&#160;&#160;superset&#160;&#160;of&#160;&#160;all&#160;&#160;sub-services&#160;&#160;it&#160;&#160;contains,&#160;<br/>independently&#160;of&#160;their&#160;configuration&#160;affiliation.&#160;Depending&#160;on&#160;the&#160;active&#160;configuration&#160;set&#160;in&#160;<br/>the&#160;ECU,&#160;this limitation&#160;can&#160;lead&#160;to&#160;the&#160;following&#160;effect:&#160;&#160;<br/>A&#160;requested&#160;service&#160;will&#160;be&#160;&#160;responded&#160;with&#160;the&#160;NRC&#160;0x12&#160;(SubfunctionNotSupported)&#160;or&#160;<br/>0x31(requestOutOfRange),&#160;&#160;depending&#160;&#160;on&#160;&#160;if&#160;&#160;it&#160;&#160;has&#160;&#160;a&#160;&#160;sub-function&#160;&#160;or&#160;&#160;not,&#160;&#160;instead&#160;&#160;of&#160;&#160;the&#160;<br/>NRC 0x7F.&#160;Such&#160;a&#160;configuration&#160;could&#160;be&#160;for example:&#160;<br/>Service&#160;0x22&#160;(ReadDataByIdentifier)&#160;supports only&#160;two&#160;DIDs:&#160;<br/>0xF100&#160;-&#160;supported&#160;only&#160;in&#160;the&#160;default&#160;diagnostic sessions&#160;and&#160;available&#160;only&#160;in&#160;variant&#160;1;&#160;<br/>0xF101&#160;–&#160;supported&#160;only&#160;in&#160;a&#160;non-default session&#160;and&#160;available&#160;only&#160;in&#160;variant&#160;2.&#160;<br/>CANdesc&#160;&#160;will&#160;&#160;summarize&#160;&#160;in&#160;&#160;this&#160;&#160;case,&#160;&#160;that&#160;&#160;service&#160;&#160;0x22&#160;&#160;is&#160;&#160;allowed&#160;&#160;in&#160;&#160;any&#160;&#160;diagnostic&#160;<br/>session&#160;since&#160;there is&#160;at&#160;least&#160;one&#160;DID supported&#160;in&#160;at&#160;least&#160;one&#160;of&#160;each&#160;session.&#160;<br/>Now&#160;&#160;let’s&#160;&#160;assume&#160;&#160;the&#160;&#160;ECU&#160;&#160;is&#160;&#160;powered&#160;&#160;up&#160;&#160;with&#160;&#160;active&#160;&#160;variant&#160;&#160;2.&#160;&#160;If&#160;&#160;the&#160;&#160;client&#160;&#160;sends&#160;&#160;a&#160;<br/>request&#160;&#160;0x22&#160;0xF100&#160;while&#160;in&#160;&#160;the&#160;default&#160;diagnostic&#160;session,&#160;&#160;CANdesc&#160;will&#160;respond&#160;with&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
48&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-49_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
the&#160;&#160;NRC&#160;&#160;0x31&#160;&#160;(DID&#160;&#160;not&#160;&#160;supported),&#160;&#160;instead&#160;&#160;of&#160;&#160;the&#160;&#160;0x7F&#160;&#160;(none&#160;&#160;of&#160;&#160;the&#160;&#160;DIDs&#160;&#160;in&#160;&#160;the&#160;&#160;active&#160;<br/>configuration&#160;is executable&#160;in&#160;the&#160;default session&#160;-&gt;&#160;the&#160;service&#160;Id&#160;itself&#160;is not&#160;executable&#160;in&#160;<br/>the&#160;session&#160;-&gt;&#160;NRC&#160;0x7F would&#160;be&#160;expected).&#160;<br/>
&#160;<br/>
<b>8.2.2&#160;</b><br/>
<b>Configuration in CANdela&#160;&#160;</b><br/>
&#160;&#160;If&#160;multiple&#160;diagnostic&#160;configuration&#160;sets&#160;shall&#160;be&#160;selectable&#160;in&#160;CANdesc,&#160;you&#160;will&#160;need&#160;a&#160;<br/>
CDD&#160;with&#160;several VSGs where each&#160;describes a&#160;diagnostic configuration&#160;set.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>CANdesc&#160;supports&#160;the&#160;multiple diagnostic&#160;configurations only&#160;on&#160;service/sub-service&#160;<br/>
<b>&#160;&#160;</b>availability&#160;level.&#160;Therefore&#160;the&#160;following&#160;limitations&#160;must&#160;be&#160;considered&#160;while creating&#160;<br/>
the&#160;separate&#160;CDD&#160;files&#160;resp.&#160;CANdela variants&#160;for&#160;CANdesc:&#160;<br/>&#160;&#160;A&#160;service can&#160;be&#160;completely&#160;deactivated&#160;within a&#160;VSG;&#160;<br/>
&#160;&#160;A&#160;sub-service (e.g.&#160;DID,&#160;sub-function,&#160;etc.)&#160;can&#160;be completely&#160;deactivated&#160;within a&#160;<br/>
VSG;&#160;<br/>
&#160;&#160;If&#160;a service exist&#160;in multiple&#160;VSGs,&#160;then&#160;it&#160;must&#160;have exactly&#160;the&#160;same properties&#160;<br/>
-&#160;<br/>
Execution&#160;pre-conditions&#160;(e.g.&#160;diagnostic&#160;session,&#160;security&#160;access,&#160;etc.)&#160;<br/>
-&#160;<br/>
Support&#160;of&#160;SPRMIB&#160;<br/>
-&#160;<br/>
Addressing&#160;mode&#160;(physical/function)&#160;<br/>
-&#160;<br/>
Response behavior&#160;(response&#160;on&#160;physical/function&#160;request)&#160;<br/>
&#160;&#160;If&#160;a sub-service exist&#160;in multiple&#160;VSGs,&#160;then it&#160;must&#160;have exactly&#160;the&#160;same&#160;<br/>
properties&#160;<br/>
-&#160;<br/>
Execution&#160;pre-conditions&#160;(e.g.&#160;diagnostic&#160;session,&#160;security&#160;access,&#160;etc.),&#160;<br/>resp.&#160;trigger&#160;of&#160;state&#160;transitions.&#160;<br/>
-&#160;<br/>
Addressing&#160;mode&#160;(physical/function)&#160;<br/>
-&#160;<br/>
Response behavior&#160;(response&#160;on&#160;physical/function&#160;request)&#160;<br/>
-&#160;<br/>
Protocol&#160;information semantic&#160;(sub-function,&#160;identifier,&#160;etc.)&#160;<br/>
-&#160;<br/>
Request&#160;resp.&#160;response&#160;content&#160;must&#160;be&#160;identical&#160;–&#160;same&#160;data&#160;<br/>structure,&#160;data&#160;types,&#160;and constant&#160;value&#160;(if&#160;any&#160;available)&#160;<br/>
&#160;&#160;Service 0x31&#160;(RoutineControlByIdentifier)&#160;specifics&#160;<br/>
-&#160;<br/>
The&#160;multi-identity&#160;varying&#160;is&#160;allowed&#160;only&#160;on&#160;RID&#160;level.&#160;If&#160;a&#160;RID&#160;is&#160;<br/>supported&#160;in&#160;multiple variants,&#160;then&#160;the&#160;sub-functions&#160;supported&#160;by&#160;this&#160;<br/>RID&#160;must&#160;be&#160;the&#160;same&#160;(i.e.&#160;it&#160;is&#160;not&#160;allowed&#160;to have one variant&#160;with only&#160;<br/>“start”&#160;sub-function&#160;and&#160;one&#160;with “start&#160;and&#160;stop”&#160;for&#160;the&#160;one&#160;and same&#160;<br/>RID).&#160;<br/>
&#160;&#160;Service 0x2F&#160;(IoControlByIdentifier)&#160;specifics&#160;<br/>
-&#160;<br/>
The&#160;multi-identity&#160;varying&#160;is&#160;allowed&#160;only&#160;on&#160;DID&#160;level.&#160;If&#160;a&#160;DID&#160;is&#160;<br/>supported&#160;in&#160;multiple variants,&#160;then&#160;the&#160;control&#160;options&#160;supported&#160;by&#160;this&#160;<br/>DID&#160;must&#160;be&#160;the&#160;same&#160;(i.e.&#160;it&#160;is&#160;not&#160;allowed&#160;to have one variant&#160;with only&#160;<br/>“ShortTermAdjustment”&#160;and&#160;one with “ShortTerm-Adjustment&#160;and&#160;<br/>ReturnControlToEcu”&#160;for&#160;the&#160;one&#160;and same&#160;DID).&#160;<br/>
&#160;<br/>If&#160;at&#160;least&#160;one of&#160;the&#160;above requirements&#160;is&#160;not&#160;fulfilled,&#160;the&#160;variant&#160;that&#160;violates&#160;the&#160;rule&#160;<br/>will&#160;not&#160;be&#160;imported.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
49&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-50_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>8.2.3&#160;</b><br/>
<b>Configuration in CANdela&#160;</b><br/>
Please&#160;follow&#160;the&#160;steps&#160;below&#160;on&#160;how&#160;to&#160;configure VSG&#160;in&#160;CANdelaStudio.&#160;<br/>
&#160;<br/>
1.&#160;&#160;Defining&#160;all&#160;available&#160;VSGs&#160;for the&#160;concrete&#160;ECU.&#160;<br/>
In&#160;CANdelaStudio,&#160;select&#160;the&#160;Vehichle&#160;System&#160;Groups view&#160;and&#160;add&#160;all&#160;necessary&#160;VSGs&#160;<br/>into&#160;the&#160;VSG&#160;pool.&#160;<br/>
&#160;<br/>
Figure&#160;8-2&#160;Defining&#160;VSGs&#160;in&#160;CANdelaStudio&#160;<br/>
The&#160;&#160;name&#160;&#160;of&#160;&#160;the&#160;&#160;created&#160;&#160;VSG&#160;&#160;will&#160;&#160;be&#160;&#160;used&#160;&#160;later&#160;&#160;by&#160;&#160;CANdesc&#160;&#160;for&#160;&#160;the&#160;&#160;diagnostic&#160;<br/>configuration&#160;&#160;constants&#160;&#160;that&#160;&#160;the&#160;&#160;CANdesc&#160;&#160;application&#160;&#160;shall&#160;&#160;use&#160;&#160;during&#160;&#160;the&#160;&#160;configuration&#160;<br/>activation&#160;phase&#160;(refer&#160;to&#160;chapte<a href="TechnicalReference_CANdescs.html#81">r&#160;<i>12.6.2&#160;Multi&#160;Variant&#160;Configuration&#160;Functions</i>).</a>&#160;<br/>
&#160;<br/>
Once&#160;&#160;all&#160;&#160;of&#160;&#160;the&#160;&#160;required&#160;&#160;VSGs&#160;&#160;are&#160;&#160;created,&#160;&#160;you&#160;&#160;can&#160;&#160;start&#160;&#160;with&#160;&#160;the&#160;&#160;service&#160;&#160;to&#160;&#160;VSG&#160;<br/>assignment.&#160;<br/>
&#160;<br/>
2.&#160;&#160;Service&#160;to&#160;VSG&#160;assignment&#160;<br/>
Using&#160;CANdelaStudio&#160;you&#160;can&#160;assign&#160;any&#160;diagnostic instance&#160;to&#160;none,&#160;one&#160;or multiple&#160;<br/>VSGs.&#160;Those&#160;services&#160;that&#160;do&#160;belong&#160;to&#160;a&#160;diagnostic instance&#160;without&#160;a&#160;VSG&#160;assignment&#160;<br/>will&#160;be&#160;considered&#160;as services&#160;of&#160;the&#160;base&#160;variant&#160;(services&#160;that&#160;are&#160;always available).&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
50&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=51></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-51_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;8-3&#160;Setting&#160;a&#160;VSG&#160;for&#160;service&#160;in&#160;CANdelaStudio&#160;<br/>
<b>8.2.4&#160;</b><br/>
<b>Configuration in GENy&#160;</b><br/>
In&#160;order&#160;to&#160;put&#160;GENy&#160;into&#160;VSG&#160;mode,&#160;you&#160;have&#160;to&#160;select&#160;&#160;it&#160;on&#160;the&#160;CANdesc&#160;component&#160;<br/>root.&#160;&#160;Please&#160;&#160;refer&#160;&#160;to&#160;&#160;the&#160;&#160;chapter&#160;&#160;<a href="TechnicalReference_CANdescs.html#22"><i>6.2.1&#160;&#160;Global&#160;&#160;CANdesc&#160;&#160;Settings</i>&#160;&#160;</a>for&#160;&#160;details&#160;&#160;about&#160;&#160;the&#160;<br/>variant&#160;selection&#160;option.&#160;&#160;<br/>Now&#160;import&#160;the&#160;CDD&#160;file,&#160;containing&#160;the&#160;VSGs&#160;in&#160;GENy&#160;as&#160;described&#160;in&#160;chapte<a href="TechnicalReference_CANdescs.html#20">r&#160;<i>6.1&#160;Step&#160;<br/>One&#160;–&#160;Importing&#160;an&#160;ECU&#160;Diagnostic Description</i>.&#160;</a>That&#160;is all.&#160;<br/>
&#160;<br/>
<b>8.3&#160;</b><br/>
<b>Multi Identity&#160;Mode&#160;</b><br/>
&#160;<br/>
Multi Identy&#160;Mode&#160;is not&#160;supported&#160;by&#160;CANdesc.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
51&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=52></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>9&#160;&#160;Diagnostic&#160;Service&#160;Implementation&#160;Specifics&#160;</b><br/>
<b>9.1&#160;</b><br/>
<b>ReadDataByIdentifier (SID $22)&#160;</b><br/>
This&#160;service&#160;has&#160;the&#160;purpose&#160;to&#160;read&#160;some&#160;predefined&#160;data&#160;records&#160;(PID).&#160;Each&#160;PID&#160;has&#160;a&#160;<br/>concrete&#160;data&#160;structure&#160;which&#160;is designed&#160;by&#160;CANdelaStudio.&#160;&#160;<br/>As&#160;the&#160;standard&#160;case&#160;the&#160;request&#160;contains&#160;a&#160;single&#160;PID.&#160;This&#160;results&#160;in&#160;a&#160;single&#160;response&#160;<br/>containing&#160;the&#160;data&#160;structure&#160;of&#160;the&#160;record.&#160;<br/>
<b>Single PID</b><br/>
<b>Sing</b><br/>
<b>&#160;mode&#160;</b><br/>
<b>le PID</b><br/>
<b>(</b><br/>
<b>&#160;mode&#160;&#160;well&#160;kno</b><br/>
<b>kn&#160;w&#160;case</b><br/>
<b>&#160;ca</b><br/>
<b>)&#160;</b><br/>
<b>se&#160;exampl</b><br/>
<b>ex</b><br/>
<b>e for P</b><br/>
<b>e f</b><br/>
<b>ID&#160;</b><br/>
<b>or P</b><br/>
<b>$1</b><br/>
<b>ID&#160;</b><br/>
<b>2</b><br/>
<b>$1&#160;34</b><br/>
Tester‘s reque<br/>
Te<br/>
st:<br/>
ster‘s reque<br/>
$22&#160;$12&#160;$34<br/>
ECU‘s response:<br/>
ECU‘s respon<br/>
$62&#160;$12&#160;$34&#160;Data bl<br/>
Da<br/>
ock<br/>
&#160;<br/>
&#160;<br/>
The&#160;UDS&#160;allows&#160;to&#160;request&#160;multiple&#160;PIDs&#160;in&#160;a&#160;single&#160;request.&#160;This&#160;results&#160;is&#160;also&#160;a&#160;single&#160;<br/>response&#160;including&#160;the&#160;data&#160;structure of&#160;each&#160;requested&#160;PID.&#160;<br/>
&#160;<br/>
<b>Multip</b><br/>
<b>Mul</b><br/>
<b>le</b><br/>
<b>tip&#160;&#160;PID mod</b><br/>
<b>&#160;PI</b><br/>
<b>e exa</b><br/>
<b>D mod</b><br/>
<b>mple for</b><br/>
<b>e exa</b><br/>
<b>&#160;</b><br/>
<b>mple for&#160;PIDs</b><br/>
<b>PID&#160;:&#160;$1234,&#160;</b><br/>
<b>$1</b><br/>
<b>$ABCD</b><br/>
<b>$A</b><br/>
Tester‘s reque<br/>
Te<br/>
st:<br/>
ster‘s reque<br/>
$22&#160;$12&#160;$34&#160;$AB<br/>
$A&#160;$CD<br/>
ECU‘s response:<br/>
ECU‘s respon<br/>
$62&#160;$12&#160;$34&#160;Data bl<br/>
Da<br/>
ock&#160;$AB<br/>
$A&#160;$CD<br/>
Data bl<br/>
Da<br/>
ock<br/>
&#160;<br/>
&#160;<br/>
CANdesc will&#160;hide&#160;this multiple&#160;PID processing&#160;from&#160;the&#160;application.&#160;To&#160;do&#160;that&#160;some&#160;minor&#160;<br/>limitations&#160;in&#160;the&#160;interface&#160;has&#160;to&#160;be&#160;made&#160;(see&#160;chapte<a href="TechnicalReference_CANdescs.html#54">r&#160;9.1.2&#160;Single&#160;PID&#160;mode).&#160;</a>To&#160;show&#160;<br/>the&#160;&#160;differences,&#160;&#160;we&#160;&#160;discuss&#160;&#160;first&#160;&#160;the&#160;&#160;standard&#160;&#160;case.&#160;&#160;In&#160;&#160;the&#160;&#160;standard&#160;&#160;case&#160;&#160;there&#160;&#160;is&#160;&#160;no&#160;<br/>multiple&#160;&#160;PID&#160;&#160;processing&#160;&#160;possible.&#160;&#160;The&#160;&#160;second&#160;&#160;chapter&#160;&#160;<a href="TechnicalReference_CANdescs.html#56">(9.1.3&#160;&#160;Multiple&#160;&#160;PID&#160;&#160;mode)&#160;&#160;</a>is&#160;<br/>showing&#160;the&#160;multiple&#160;PID processing.&#160;&#160;<br/>Which&#160;mode&#160;is&#160;used&#160;depends on&#160;the&#160;configuration&#160;(typically&#160;the&#160;OEM).&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
52&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=53></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>9.1.1&#160;</b><br/>
<b>Limitations&#160;of&#160;the&#160;service&#160;</b><br/>
<b>Session management&#160;<br/></b>This&#160;&#160;service&#160;&#160;contains&#160;&#160;no&#160;&#160;sub-function&#160;&#160;identifier&#160;&#160;which&#160;&#160;means&#160;&#160;the&#160;&#160;global&#160;&#160;state&#160;&#160;group&#160;<br/>“session”&#160;&#160;may&#160;&#160;not&#160;&#160;be&#160;&#160;selected&#160;&#160;as&#160;&#160;a&#160;&#160;“relevant&#160;&#160;group”&#160;&#160;for&#160;&#160;any&#160;&#160;instance&#160;&#160;of&#160;&#160;this&#160;&#160;service.&#160;&#160;If&#160;<br/>there&#160;is&#160;a&#160;need&#160;for&#160;a&#160;PID&#160;to&#160;be&#160;rejected&#160;under&#160;a&#160;certain&#160;session,&#160;all&#160;PIDs&#160;must&#160;follow&#160;this&#160;<br/>rule&#160;and&#160;be&#160;specified&#160;to&#160;be&#160;rejected&#160;for&#160;this&#160;session.&#160;As&#160;a&#160;result&#160;the&#160;whole&#160;SID&#160;$22&#160;will&#160;be&#160;<br/>rejected&#160;for&#160;this&#160;session.&#160;This&#160;behavior&#160;is&#160;harmonized&#160;with&#160;the&#160;UDS&#160;protocol&#160;specification,&#160;<br/>which&#160;allows service&#160;identifiers to&#160;be&#160;rejected&#160;in&#160;a&#160;session&#160;but&#160;no&#160;parameter identifiers.&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
53&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=54></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>9.1.2&#160;</b><br/>
<b>Single&#160;PID mode&#160;</b><br/>
The&#160;&#160;Single&#160;&#160;PID&#160;&#160;mode&#160;&#160;is&#160;&#160;configured&#160;&#160;automatically,&#160;&#160;if&#160;&#160;the&#160;&#160;number&#160;&#160;of&#160;&#160;PIDs&#160;&#160;that&#160;&#160;can&#160;&#160;be&#160;<br/>requested&#160;at&#160;the&#160;same&#160;time,&#160;is&#160;limited&#160;to&#160;one&#160;PID.&#160;If&#160;more&#160;than&#160;one&#160;PID&#160;is&#160;requested,&#160;the&#160;<br/>request&#160;will be&#160;rejected&#160;with&#160;‘RequestOutOfRange’&#160;(NRC $31).&#160;&#160;<br/>If&#160;the&#160;multiple&#160;PID&#160;mode&#160;of&#160;CANdesc&#160;is&#160;deactivated,&#160;the&#160;service&#160;$22&#160;will&#160;be&#160;executed&#160;and&#160;<br/>processed&#160;like&#160;any&#160;other diagnostic service&#160;without&#160;any&#160;additional specifics&#160;or limitations.&#160;<br/>
<b>9.1.2.1&#160;</b><br/>
<b>Sending a&#160;positive&#160;response&#160;using linear&#160;buffer&#160;access&#160;</b><br/>
Tester<br/>
CANdesc<br/>
Application<br/>
Check&#160;all&#160;states&#160;if&#160;the&#160;<br/>
SId[$22],Pid[$xxxx]<br/>
&#34;read&#160;PID&#34;&#160;service&#160;can&#160;<br/>
StateGroupsCheck&#160;for&#160;Pid<br/>
be&#160;executed.<br/>
If&#160;available&#160;execute&#160;the&#160;pre-handler&#160;and&#160;<br/>
ApplDescPreReadDataById_xxxx<br/>
check&#160;if&#160;the&#160;application&#160;rejected&#160;the&#160;service.<br/>
ApplDescReadDataById_xxxx<br/>
Execute&#160;the&#160;main-handler&#160;<br/>
Write&#160;data&#160;(pMsgContext-&gt;resData)<br/>
to&#160;fill&#160;the&#160;response&#160;data.<br/>
Set&#160;total&#160;response&#160;data&#160;length&#160;<br/>
(pMsgContext-&gt;resDataLen&#160;=&#160;N)<br/>
DescProcessingDone()<br/>
RSid[$62],&#160;PID[$xxxx],&#160;Data[N]<br/>
The&#160;positive&#160;response&#160;transmission&#160;will&#160;be&#160;<br/>initiated&#160;after&#160;the&#160;DescProcessingDone&#160;<br/>gets&#160;called.<br/>
&#160;<br/>
Figure&#160;9-1:&#160;Linearly&#160;written&#160;positive&#160;response&#160;on&#160;single&#160;PID&#160;request&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
54&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=55></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>9.1.2.2&#160;</b><br/>
<b>Sending a&#160;positive&#160;response&#160;using ring buffer access&#160;</b><br/>
Tester<br/>
CANdesc<br/>
Application<br/>
Check&#160;all&#160;states&#160;if&#160;the&#160;<br/>
SId[$22],Pid[$xxxx]<br/>
&#34;read&#160;PID&#34;&#160;service&#160;may&#160;<br/>
StateGroupsCheck&#160;for&#160;Pid<br/>
be&#160;executed.<br/>
If&#160;available&#160;execute&#160;the&#160;pre-handler&#160;and&#160;check&#160;if&#160;<br/>
ApplDescPreReadDataById_xxxx<br/>
the&#160;application&#160;rejected&#160;the&#160;service.<br/>
Execute&#160;the&#160;main-handler&#160;<br/>
ApplDescReadDataById_xxxx<br/>
to&#160;fill&#160;the&#160;response&#160;data.<br/>
Set&#160;total&#160;response&#160;data&#160;length&#160;<br/>
(pMsgContext-&gt;resDataLen&#160;=&#160;N)<br/>
DescRingBufferStart()<br/>
Write&#160;data&#160;(DescRingBufferWrite())<br/>
FF&#160;(RSid[$62],&#160;PID[$xxxx],&#160;Data[3])<br/>
The&#160;positive&#160;response&#160;transmission&#160;will&#160;be&#160;initiated&#160;after&#160;<br/>the&#160;DescRingBufferStart&#160;gets&#160;called&#160;and&#160;there&#160;are&#160;at&#160;<br/>least&#160;7&#160;bytes&#160;ready&#160;to&#160;be&#160;transmitted&#160;(i.e.&#160;3&#160;data&#160;bytes).<br/>
Write&#160;data&#160;(DescRingBufferWrite())<br/>
CF(Data[N-3])<br/>
&#160;<br/>
Figure&#160;9-2:&#160;“On&#160;the&#160;fly”&#160;response&#160;data&#160;writing.&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
55&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=56></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>9.1.2.3&#160;</b><br/>
<b>Sending&#160;a&#160;negative&#160;response&#160;</b><br/>
Due&#160;to&#160;the&#160;fact&#160;that&#160;the&#160;negative&#160;response&#160;handling&#160;has&#160;changed&#160;in&#160;the&#160;multiple&#160;PID&#160;mode,&#160;<br/>we&#160;&#160;recommend&#160;&#160;to&#160;&#160;do&#160;&#160;the&#160;&#160;same&#160;&#160;handling&#160;&#160;in&#160;&#160;the&#160;&#160;Single&#160;&#160;PID&#160;&#160;mode,&#160;&#160;too.&#160;&#160;Please&#160;&#160;refer&#160;&#160;the&#160;<br/>chapte<a href="TechnicalReference_CANdescs.html#58">r&#160;9.1.3.2&#160;“Ring&#160;buffer&#160;active&#160;configuration”&#160;</a>for&#160;the&#160;recommended&#160;negative&#160;response&#160;<br/>handling.&#160;<br/>
Tester<br/>
CANdesc<br/>
Application<br/>
Check&#160;all&#160;states&#160;if&#160;the&#160;<br/>
SId[$22],Pid[$xxxx]<br/>
&#34;read&#160;PID&#34;&#160;service&#160;can&#160;<br/>
StateGroupsCheck&#160;for&#160;Pid<br/>
be&#160;executed.<br/>
If&#160;available&#160;execute&#160;the&#160;pre-handler&#160;and&#160;<br/>check&#160;if&#160;the&#160;application&#160;rejected&#160;the&#160;service.<br/>
ApplDescPreReadDataById_xxxx<br/>
Execute&#160;the&#160;main-handler&#160;<br/>
ApplDescReadDataById_xxxx<br/>
to&#160;fill&#160;the&#160;response&#160;data.<br/>
DescSetNegresponse(errorCode)<br/>
The&#160;main-handler&#160;still&#160;can&#160;<br/>register&#160;any&#160;errors.<br/>
DescProcessingDone()<br/>
RSid[$7F],&#160;Sid[$22],&#160;ErrorCode[errorCode]<br/>
The&#160;negative&#160;response&#160;transmission&#160;will&#160;be&#160;<br/>initiated&#160;after&#160;the&#160;DescProcessingDone&#160;<br/>gets&#160;called.<br/>
&#160;<br/>
Figure&#160;9-3:&#160;Negative&#160;response&#160;on&#160;single&#160;PID&#160;<br/>
<b>9.1.3&#160;</b><br/>
<b>Multiple&#160;PID mode&#160;</b><br/>
The&#160;&#160;Multiple&#160;&#160;PID&#160;&#160;mode&#160;&#160;is&#160;&#160;configured&#160;&#160;automatically&#160;&#160;if&#160;&#160;the&#160;&#160;number&#160;&#160;of&#160;&#160;PIDs,&#160;&#160;that&#160;&#160;can&#160;&#160;be&#160;<br/>requested&#160;at&#160;the&#160;same&#160;time,&#160;is&#160;greater&#160;than&#160;one.&#160;If&#160;more&#160;than&#160;this&#160;predetermined&#160;number&#160;<br/>of&#160;PIDs is requested,&#160;the&#160;request&#160;will be&#160;rejected&#160;with&#160;‘RequestOutOfRange’&#160;(NRC $31).&#160;&#160;<br/>In&#160;&#160;this&#160;&#160;configuration&#160;&#160;some&#160;&#160;minor&#160;&#160;limitations&#160;&#160;must&#160;&#160;be&#160;&#160;taken&#160;&#160;into&#160;&#160;account&#160;&#160;while&#160;&#160;using&#160;&#160;the&#160;<br/>CANdesc interfaces.&#160;&#160;<br/>For&#160;the&#160;service&#160;“ReadDataByIdentifier”&#160;the&#160;ring-buffer&#160;feature&#160;can&#160;be&#160;used.&#160;Depending&#160;on&#160;<br/>the&#160;usage&#160;of&#160;this&#160;feature,&#160;there are&#160;two&#160;main&#160;use&#160;cases&#160;for the&#160;multiple&#160;PID&#160;mode.:&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
56&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=57></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>9.1.3.1&#160;</b><br/>
<b>Pure&#160;linear buffer&#160;configuration&#160;</b><br/>
The&#160;ring-buffer&#160;feature&#160;is deactivated&#160;in&#160;general.&#160;<br/>If&#160;the&#160;system&#160;doesn’t&#160;use&#160;any&#160;ring&#160;buffer&#160;access&#160;for&#160;filling&#160;the&#160;response,&#160;the&#160;PID&#160;pipeline&#160;is&#160;<br/>still&#160;&#160;quite&#160;&#160;simple&#160;&#160;and&#160;&#160;therefore&#160;&#160;with&#160;&#160;less&#160;&#160;limitations&#160;&#160;to&#160;&#160;the&#160;&#160;CANdesc&#160;&#160;API&#160;&#160;usage&#160;&#160;and&#160;<br/>application&#160;performance.&#160;<br/>
<b>9.1.3.1.1&#160;</b><br/>
<b>Sending a&#160;positive&#160;response&#160;</b><br/>
Tester<br/>
CANdesc<br/>
Application<br/>
SId[$22],Pid0[$xxxx],Pid1[$yyyy]<br/>
Before&#160;the&#160;requested&#160;PIDs&#160;will&#160;be&#160;processed,&#160;check&#160;<br/>
StateGroupsCheck&#160;for&#160;PID0[$xxxx]<br/>
all&#160;PIDs':<br/>1.&#160;States&#160;(may&#160;be&#160;executed)<br/>2.&#160;Pre-handlers.<br/>
ApplDescPreReadDataById_xxxx<br/>
StateGroupsCheck&#160;for&#160;PID1[$yyyy]<br/>
ApplDescPreReadDataById_yyyy<br/>
ApplDescReadDataById_xxxx<br/>
Execute&#160;the&#160;first&#160;PID's&#160;<br/>main-handler&#160;to&#160;fill&#160;the&#160;response&#160;<br/>data.<br/>
Write&#160;data&#160;(pMsgContext-&gt;resData)<br/>
Set&#160;total&#160;response&#160;data&#160;length&#160;<br/>
(pMsgContext-&gt;resDataLen&#160;=&#160;N)<br/>
Once&#160;the&#160;service&#160;execution&#160;of&#160;<br/>the&#160;current&#160;PID&#160;has&#160;been&#160;<br/>accomplished...<br/>
DescProcessingDone()<br/>
...execute&#160;the&#160;next&#160;<br/>queued&#160;one.<br/>
ApplDescReadDataById_yyyy<br/>
Write&#160;data&#160;(pMsgContext-&gt;resData)<br/>
Set&#160;total&#160;response&#160;data&#160;length&#160;<br/>
(pMsgContext-&gt;resDataLen&#160;=&#160;M)<br/>
DescProcessingDone()<br/>
FF&#160;(RSid[$62],&#160;PID0[$xxxx],&#160;Data[3])<br/>
CF[i](Data[N-3],PID1[$yyyy]Data[M)<br/>
The&#160;positive&#160;response&#160;transmission&#160;will&#160;be&#160;<br/>initiated&#160;after&#160;all&#160;PIDs&#160;have&#160;called&#160;<br/>DescProcessingDone&#160;and&#160;all&#160;the&#160;data&#160;...<br/>
&#160;<br/>
Figure&#160;9-4:&#160;Linearly&#160;written&#160;positive&#160;response&#160;on&#160;multiple&#160;PIDs&#160;(global&#160;ring&#160;buffer&#160;option&#160;is&#160;off)&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
57&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=58></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>9.1.3.1.2&#160;</b><br/>
<b>Sending a&#160;negative&#160;response&#160;</b><br/>
This&#160;example&#160;&#160;depicts&#160;the&#160;case&#160;where&#160;&#160;from&#160;two&#160;requested&#160;PIDs&#160;the&#160;first&#160;&#160;one&#160;may&#160;not&#160;&#160;be&#160;<br/>accessible&#160;and&#160;rejects&#160;the&#160;service&#160;execution.&#160;<br/>
Tester<br/>
CANdesc<br/>
Application<br/>
Before&#160;requested&#160;PIDs&#160;will&#160;be&#160;processed&#160;check&#160;all&#160;<br/>
SId[$22],Pid0[$xxxx],Pid1[$yyyy]<br/>
PIDs':<br/>
StateGroupsCheck&#160;for&#160;PID0[$xxxx]<br/>
1.&#160;States&#160;(may&#160;be&#160;executed)<br/>2.&#160;Pre-handlers.<br/>
ApplDescPreReadDataById_xxxx<br/>
StateGroupsCheck&#160;for&#160;PID1[$yyyy]<br/>
ApplDescPreReadDataById_yyyy<br/>
ApplDescReadDataById_xxxx<br/>
Execute&#160;the&#160;first&#160;PID's&#160;<br/>main-handler&#160;to&#160;fill&#160;the&#160;response&#160;<br/>data.<br/>
DescSetNegResponse(errorCode)<br/>
Once&#160;the&#160;service&#160;execution&#160;of&#160;<br/>the&#160;current&#160;PID&#160;has&#160;been&#160;<br/>accomplished...<br/>
DescProcessingDone()<br/>
Skip&#160;further&#160;processing&#160;<br/>
of&#160;the&#160;list<br/>
RSid[$7F],&#160;Sid[$22],&#160;ErrorCode[errorCode]<br/>
The&#160;second&#160;PID's&#160;<br/>Main-handler&#160;will&#160;not&#160;be&#160;<br/>executed.<br/>
...stops&#160;the&#160;further&#160;<br/>processing&#160;a...<br/>
&#160;<br/>
Figure&#160;9-5:&#160;Negative&#160;response&#160;on&#160;multiple&#160;PIDs&#160;(global&#160;ring&#160;buffer&#160;option&#160;is&#160;off)&#160;<br/>
<b>9.1.3.2&#160;</b><br/>
<b>Ring buffer&#160;active&#160;configuration&#160;</b><br/>
<b>Attention:</b>&#160;The&#160;Ring-Buffer&#160;in&#160;‘Multiple&#160;PID‘&#160;services&#160;can&#160;be&#160;first-time&#160;used&#160;since&#160;CANdesc&#160;<br/>version&#160;2.13.00&#160;<br/>Different&#160;concepts&#160;for the&#160;buffer&#160;handling&#160;were&#160;discussed&#160;while&#160;development.&#160;Two&#160;<br/>solutions&#160;with&#160;different&#160;pros&#160;and&#160;cons are&#160;discussed&#160;here:&#160;<br/>&#160;<br/>
&#160;&#160;<b>Multiple&#160;buffer&#160;</b><br/>
Normally&#160;&#160;each&#160;&#160;service&#160;&#160;handler&#160;&#160;(MainHandler&#160;&#160;routine)&#160;&#160;has&#160;&#160;the&#160;&#160;whole&#160;&#160;diagnostic&#160;&#160;buffer&#160;<br/>available&#160;(apart&#160;from&#160;the&#160;protocol&#160;header&#160;bytes&#160;hidden&#160;by&#160;CANdesc).&#160;Based&#160;on&#160;this&#160;logic&#160;<br/>the&#160;service&#160;$22&#160;using&#160;PID&#160;pipelining&#160;has&#160;the&#160;same&#160;tasks&#160;as&#160;the&#160;normal&#160;service&#160;processor:&#160;<br/>executing&#160;&#160;a&#160;&#160;PID&#160;&#160;handler&#160;&#160;and&#160;&#160;provide&#160;&#160;him&#160;&#160;the&#160;&#160;whole&#160;&#160;diagnostic&#160;&#160;buffer&#160;&#160;for&#160;&#160;response&#160;&#160;data.&#160;<br/>This&#160;will&#160;hide&#160;the&#160;whole&#160;process&#160;and&#160;makes&#160;the&#160;application’s&#160;life&#160;easier&#160;(no&#160;exceptions&#160;for&#160;<br/>the&#160;implementation).&#160;To&#160;realize&#160;this&#160;concept&#160;means&#160;to&#160;provide&#160;a&#160;separate&#160;diagnostic&#160;buffer&#160;<br/>for&#160;each&#160;PID&#160;which&#160;size&#160;is&#160;the&#160;same&#160;as&#160;the&#160;main&#160;one&#160;(configured&#160;by&#160;GENtool).&#160;This&#160;is&#160;a&#160;<br/>fast&#160;and&#160;quite&#160;simple&#160;solution&#160;but&#160;requires&#160;too&#160;much&#160;RAM&#160;to&#160;be&#160;reserved&#160;for&#160;only&#160;the&#160;case&#160;<br/>that&#160;&#160;sometimes&#160;&#160;the&#160;&#160;testers&#160;&#160;would&#160;&#160;like&#160;&#160;to&#160;&#160;use&#160;&#160;the&#160;&#160;maximum&#160;&#160;capacity&#160;&#160;of&#160;&#160;the&#160;&#160;ECU&#160;&#160;&#160;&#160;(i.e.&#160;<br/>requests&#160;as&#160;many&#160;PIDs as possible&#160;for this ECU&#160;in&#160;a&#160;single&#160;request).&#160;&#160;<br/>
Pros:&#160;less ROM usage&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
58&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=59></a>Technical Reference&#160;CANdesc&#160;<br/>
Cons:&#160;very&#160;high&#160;RAM&#160;usage&#160;<br/>
<b>&#160;</b><br/>
&#160;&#160;<b>virtual&#160;multiple&#160;buffer&#160;</b><br/>
This&#160;concept&#160;&#160;is&#160;more&#160;generically&#160;designed&#160;and&#160;will&#160;not&#160;&#160;have&#160;additional&#160;ROM&#160;overhead&#160;if&#160;<br/>the&#160;pipeline&#160;size&#160;&#160;will&#160;be&#160;increased.&#160;An&#160;intelligent&#160;&#160;buffer&#160;concept&#160;&#160;gives&#160;the&#160;application&#160;the&#160;<br/>whole&#160;size&#160;of&#160;the&#160;buffer for each&#160;MainHandler&#160;call.&#160;&#160;<br/>Once&#160;the&#160;whole&#160;data&#160;for&#160;the&#160;current&#160;PID&#160;has&#160;been&#160;written,&#160;the&#160;data&#160;supplement&#160;will&#160;stop&#160;<br/>(because&#160;the&#160;next&#160;PID&#160;handler&#160;will&#160;not&#160;be&#160;called).&#160;The&#160;transmission&#160;in&#160;the&#160;transport&#160;layer&#160;is&#160;<br/>started&#160;&#160;and&#160;&#160;some&#160;&#160;time&#160;&#160;later&#160;&#160;it&#160;&#160;runs&#160;&#160;into&#160;&#160;buffer&#160;&#160;under-run.&#160;This&#160;&#160;‘signal’&#160;&#160;is&#160;&#160;used&#160;&#160;to&#160;&#160;call&#160;&#160;the&#160;<br/>next&#160;PID&#160;MainHandler.&#160;This&#160;MainHandler&#160;has&#160;to&#160;provide&#160;his&#160;data&#160;very&#160;quick.&#160;Otherwise&#160;the&#160;<br/>response&#160;transmission&#160;will stop&#160;(due&#160;to&#160;a&#160;continuously&#160;buffer under-run).&#160;&#160;<br/>
Pros:&#160;&#160;less&#160;RAM&#160;usage&#160;(practically&#160;independent&#160;of&#160;the&#160;maximum&#160;list&#160;size).&#160;&#160;<br/>Cons:&#160;&#160;moderate&#160;&#160;ROM&#160;&#160;overhead&#160;&#160;/&#160;&#160;the&#160;&#160;response&#160;&#160;data&#160;&#160;must&#160;&#160;be&#160;&#160;composed&#160;&#160;very&#160;<br/>
quickly.&#160;<br/>The&#160;virtual multiple&#160;buffer&#160;concept&#160;is&#160;the&#160;implemented&#160;solution.&#160;The&#160;application&#160;can&#160;choose&#160;<br/>for each&#160;PID separately&#160;to&#160;write&#160;the&#160;data&#160;linearly&#160;or by&#160;using&#160;the&#160;ring&#160;buffer.&#160;<br/><b>performance&#160;requirements&#160;&#160;<br/></b>The&#160;application&#160;has performance&#160;requirements:&#160;<br/>
-&#160;&#160;If&#160;&#160;linear&#160;&#160;access&#160;&#160;has&#160;&#160;been&#160;&#160;chosen,&#160;&#160;the&#160;&#160;whole&#160;&#160;response&#160;&#160;data&#160;&#160;of&#160;&#160;each&#160;&#160;MainHandler&#160;<br/>
must&#160;&#160;be&#160;&#160;filled&#160;&#160;within&#160;&#160;the&#160;&#160;lower&#160;&#160;duration&#160;&#160;of&#160;&#160;the&#160;&#160;P2&#160;&#160;time&#160;&#160;and&#160;&#160;the&#160;&#160;TP&#160;&#160;confirmation&#160;<br/>timeout.&#160;&#160;Normally&#160;&#160;the&#160;&#160;P2&#160;&#160;time&#160;&#160;is&#160;&#160;shorter&#160;&#160;than&#160;&#160;the&#160;&#160;transport&#160;&#160;layers&#160;&#160;confirmation&#160;<br/>timeout&#160;&#160;so&#160;&#160;just&#160;&#160;take&#160;&#160;into&#160;&#160;account&#160;&#160;that&#160;&#160;each&#160;&#160;Main-Handler&#160;&#160;must&#160;&#160;be&#160;&#160;able&#160;&#160;to&#160;&#160;fill&#160;&#160;its&#160;<br/>response&#160;data&#160;within&#160;a&#160;time&#160;far shorter than&#160;the&#160;P2&#160;time.&#160;<br/>
-&#160;&#160;If&#160;&#160;ring&#160;&#160;buffer&#160;&#160;access&#160;&#160;has&#160;&#160;been&#160;&#160;chosen,&#160;&#160;the&#160;&#160;application&#160;&#160;has&#160;&#160;to&#160;&#160;call&#160;&#160;&#160;&#160;the&#160;<br/>
“DescRingBufferWrite” fast&#160;enough&#160;to&#160;keep&#160;TP&#160;from confirmation&#160;timeout.&#160;<br/>
<b>Negative&#160;response&#160;on PID&#160;<br/></b>The&#160;&#160;negative&#160;&#160;response&#160;&#160;handling&#160;&#160;<b>is&#160;&#160;changed&#160;&#160;</b>in&#160;&#160;the&#160;&#160;multiple&#160;&#160;PID&#160;&#160;mode!&#160;&#160;This&#160;&#160;affects&#160;&#160;all&#160;<br/>protocol-services&#160;&#160;with&#160;&#160;a&#160;&#160;activated&#160;&#160;‘May&#160;&#160;be&#160;&#160;combined’&#160;&#160;property.&#160;&#160;The&#160;&#160;UDS&#160;&#160;specification&#160;<br/>encloses&#160;&#160;only&#160;&#160;the&#160;&#160;SIDs:&#160;&#160;$22&#160;&#160;and&#160;&#160;$2A.&#160;&#160;For&#160;&#160;all&#160;&#160;other&#160;&#160;services&#160;&#160;the&#160;&#160;negative&#160;&#160;response&#160;<br/>handling&#160;is not&#160;changed!&#160;<br/>If&#160;&#160;the&#160;&#160;application&#160;has&#160;&#160;to&#160;&#160;reject&#160;&#160;a&#160;&#160;request&#160;&#160;(e.g.&#160;&#160;ignition&#160;&#160;key&#160;&#160;check)&#160;&#160;it&#160;&#160;has&#160;&#160;to&#160;do&#160;&#160;that&#160;&#160;in&#160;&#160;the&#160;<br/>PreHandler.&#160;&#160;The&#160;&#160;application&#160;&#160;is&#160;&#160;<b>not&#160;&#160;allowed</b>&#160;&#160;to&#160;&#160;call&#160;&#160;“DescSetNegResponse()”&#160;&#160;to&#160;&#160;send&#160;&#160;a&#160;<br/>negative&#160;response&#160;in&#160;any&#160;MainHandler.&#160;&#160;<br/>This&#160;limitation&#160;is&#160;based&#160;on&#160;the&#160;concept&#160;to&#160;check&#160;all&#160;reject&#160;conditions&#160;in&#160;PreHandlers&#160;before&#160;<br/>starting&#160;the&#160;transmission.&#160;This&#160;is&#160;necessary&#160;because&#160;after&#160;CANdesc&#160;has&#160;executed&#160;the&#160;first&#160;<br/>MainHandler&#160;(which&#160;starts&#160;the&#160;positive&#160;response&#160;transmission)&#160;there&#160;will&#160;&#160;be&#160;no&#160;chance&#160;to&#160;<br/>send&#160;a&#160;negative&#160;response.&#160;&#160;<br/>The&#160;&#160;usage&#160;&#160;of&#160;&#160;the&#160;&#160;concept:&#160;&#160;CANdesc&#160;&#160;starts&#160;&#160;to&#160;&#160;call&#160;&#160;all&#160;&#160;PreHandlers&#160;&#160;of&#160;&#160;this&#160;&#160;multiple&#160;&#160;PID&#160;<br/>request.&#160;&#160;If&#160;&#160;no&#160;&#160;negative&#160;&#160;response&#160;&#160;is&#160;&#160;set,&#160;&#160;CANdesc&#160;&#160;will&#160;&#160;start&#160;&#160;to&#160;&#160;call&#160;&#160;the&#160;&#160;corresponding&#160;<br/>MainHandlers.&#160;Within&#160;the&#160;first&#160;call&#160;of&#160;DescProcessingDone()&#160;the&#160;transmission&#160;is initiated.&#160;&#160;<br/><b>Note&#160;(for&#160;version 3.02.00&#160;of CANdesc&#160;and above):&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
59&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=60></a>Technical Reference&#160;CANdesc&#160;<br/>
In&#160;case&#160;the&#160;application&#160;sets&#160;an&#160;error&#160;code&#160;during&#160;the&#160;main-handler&#160;execution&#160;in&#160;non-debug&#160;<br/>(released) version&#160;of&#160;the&#160;component,&#160;depending&#160;on&#160;the&#160;situation&#160;will&#160;lead&#160;to:&#160;<br/>For service&#160;$22:&#160;<br/>
-&#160;&#160;First&#160;DID of&#160;the&#160;list main-handler: sending&#160;a&#160;negative&#160;response&#160;to&#160;service&#160;$22;&#160;<br/>
-&#160;&#160;Second&#160;or&#160;any&#160;of&#160;the&#160;succeeding&#160;DIDs in&#160;the&#160;list:&#160;transmission&#160;interruption.&#160;<br/>
For service&#160;$2A:&#160;<br/>
-&#160;&#160;Ignoring&#160;the&#160;scheduled&#160;response.&#160;<br/>
&#160;<br/>
<b>9.1.3.2.1&#160;</b><br/>
<b>Sending a&#160;positive&#160;response&#160;</b><br/>
Tester<br/>
CANdesc<br/>
Application<br/>
SId[$22],Pid0[$xxxx],Pid1[$yyyy]<br/>
Before&#160;requested&#160;PIDs&#160;will&#160;be&#160;processed&#160;check&#160;all&#160;<br/>
StateGroupsCheck&#160;for&#160;PID0[$xxxx]<br/>
PIDs':<br/>1.&#160;States&#160;(may&#160;be&#160;executed)<br/>
ApplDescPreReadDataById_xxxx<br/>
2.&#160;Pre-handlers.<br/>
StateGroupsCheck&#160;for&#160;PID1[$yyyy]<br/>
ApplDescPreReadDataById_yyyy<br/>
ApplDescReadDataById_xxxx<br/>
Execute&#160;the&#160;first&#160;PID's&#160;<br/>main-handler&#160;to&#160;fill&#160;the&#160;response&#160;<br/>data.<br/>
Write&#160;data&#160;(pMsgContext-&gt;resData)<br/>
Set&#160;total&#160;response&#160;data&#160;length&#160;<br/>
(pMsgContext-&gt;resDataLen&#160;=&#160;N)<br/>
DescProcessingDone()<br/>
FF&#160;(RSid[$62],&#160;PID0[$xxxx],&#160;Data[3])<br/>
With&#160;the&#160;first&#160;called&#160;<br/>DescProcessingDone()&#160;starts&#160;<br/>the&#160;response&#160;transmission.<br/>
CF[i](Data[N-3])<br/>
Once&#160;the&#160;whole&#160;data&#160;of&#160;&#160;the&#160;current&#160;PID&#160;has&#160;<br/>been&#160;sent&#160;the&#160;next&#160;PID&#160;main-handler&#160;will&#160;be&#160;<br/>
ApplDescReadDataById_yyyy<br/>
called&#160;to&#160;supply&#160;the&#160;response&#160;data.<br/>
Write&#160;data&#160;(pMsgContext-&gt;resData)<br/>
CF[j](Data[N-k],PID1[$yyyy]Data[m])<br/>
Set&#160;total&#160;response&#160;data&#160;length&#160;<br/>
(pMsgContext-&gt;resDataLen&#160;=&#160;M)<br/>
DescProcessingDone()<br/>
CF[l](Data[M-m])<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
60&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=61></a>Technical Reference&#160;CANdesc&#160;<br/>
Figure&#160;9-6:&#160;Linearly&#160;written&#160;response&#160;data&#160;on&#160;multiple&#160;PIDs&#160;(global&#160;ring&#160;buffer&#160;option&#160;is&#160;on)&#160;<br/>
&#160;<br/>
<b>9.1.3.2.2&#160;</b><br/>
<b>Sending a&#160;negative&#160;response&#160;</b><br/>
Tester<br/>
CANdesc<br/>
Application<br/>
SId[$22],Pid0[$xxxx],Pid1[$yyyy]<br/>
Before&#160;requested&#160;PIDs&#160;will&#160;be&#160;processed&#160;check&#160;all&#160;<br/>
StateGroupsCheck&#160;for&#160;PID0[$xxxx]<br/>
PIDs':<br/>1.&#160;States&#160;(may&#160;be&#160;executed)<br/>2.&#160;Pre-handlers.<br/>
ApplDescPreReadDataById_xxxx<br/>
StateGroupsCheck&#160;for&#160;PID1[$yyyy]<br/>
ApplDescPreReadDataById_yyyy<br/>
DescSetNegResponse(errorCode)<br/>
If&#160;error&#160;has&#160;been&#160;set&#160;-&#160;no&#160;<br/>main-hadnler&#160;processing&#160;will&#160;<br/>follow.<br/>
RSid[$7F],&#160;Sid[$22],&#160;ErrorCode[errorCode]<br/>
Send&#160;immediately&#160;<br/>negative&#160;response.<br/>
&#160;<br/>
Figure&#160;9-7:&#160;Negative&#160;response&#160;on&#160;multiple&#160;PIDs&#160;(global&#160;ring&#160;buffer&#160;option&#160;is&#160;on)&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
61&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=62></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>9.1.3.2.3&#160;</b><br/>
<b>PostHandler&#160;execution rule&#160;</b><br/>
All&#160;&#160;PostHandlers&#160;&#160;are&#160;&#160;executed&#160;&#160;after&#160;&#160;the&#160;&#160;finished&#160;&#160;response&#160;&#160;transmission&#160;&#160;(like&#160;&#160;a&#160;&#160;normal&#160;<br/>PostHandler).&#160;<br/>Independent&#160;&#160;of&#160;&#160;the&#160;&#160;ring-buffer&#160;&#160;option&#160;&#160;setting&#160;&#160;(enabled&#160;&#160;or&#160;&#160;disabled),&#160;&#160;the&#160;&#160;execution&#160;&#160;of&#160;&#160;the&#160;<br/>service&#160;&#160;$22&#160;&#160;PostHandler(s)&#160;&#160;has&#160;&#160;the&#160;&#160;following&#160;&#160;rule&#160;&#160;which&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;taken&#160;&#160;into&#160;&#160;account:&#160;<br/><b>calling&#160;the&#160;Post-Handler&#160;of&#160;a&#160;specific&#160;PID&#160;means:&#160;either&#160;the&#160;PreHandler&#160;of&#160;this&#160;PID&#160;<br/>has&#160;been previously&#160;called or&#160;its&#160;MainHandler.&#160;<br/></b>The&#160;following&#160;sequence&#160;chart&#160;depicts this:&#160;<br/>
Tester<br/>
CANdesc<br/>
Application<br/>
SId[$22],Pid0[$xxxx],Pid1[$yyyy],<br/>
Before&#160;requested&#160;PIDs&#160;will&#160;be&#160;processted&#160;check&#160;all&#160;<br/>
Pid2[$zzzz]<br/>
StateGroupsCheck&#160;for&#160;PID0[$xxxx]<br/>
PIDs':<br/>1.&#160;States&#160;(may&#160;be&#160;executed)<br/>2.&#160;Pre-handlers.<br/>
ApplDescPreReadDataById_xxxx<br/>
PID0,&#160;PID1and&#160;PID2&#160;have&#160;all&#160;<br/>post-handlers&#160;configured.<br/>
StateGroupsCheck&#160;for&#160;PID1[$yyyy]<br/>
PID1&#160;has&#160;no&#160;pre-handler&#160;<br/>cofigured.<br/>
StateGroupsCheck&#160;for&#160;PID2[$zzzz]<br/>
ApplDescPreReadDataById_zzzz<br/>
DescSetNegResponse(errorCode)<br/>
If&#160;error&#160;has&#160;been&#160;set&#160;-&#160;no&#160;<br/>main-hadnler&#160;processing&#160;will&#160;<br/>follow.<br/>
RSid[$7F],&#160;Sid[$22],&#160;ErrorCode[errorCode]<br/>
Send&#160;immediately&#160;<br/>negative&#160;response.<br/>
ApplDescPostReadDataById_xxxx<br/>
PID1&#160;has&#160;a&#160;post-handler&#160;but&#160;since&#160;<br/>the&#160;application&#160;doesn't&#160;know&#160;about&#160;<br/>its&#160;reception&#160;-&#160;no&#160;post-handler&#160;will&#160;<br/>
ApplDescPostReadDataById_zzzz<br/>
be&#160;called.<br/>
&#160;<br/>
Figure&#160;9-8:&#160;Post-Handler&#160;execution&#160;sequence.&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>9.2&#160;</b><br/>
<b>DynamicallyDefineDataIdentifier (SID&#160;$2C)&#160;(UDS)&#160;</b><br/>
The&#160;DynamicallyDefineDataIdentifier&#160;service&#160;allows&#160;the&#160;client&#160;(tester)&#160;to&#160;dynamically&#160;define&#160;<br/>in&#160;a&#160;server&#160;(ECU)&#160;a&#160;data&#160;identifier&#160;that&#160;can&#160;be&#160;read&#160;via&#160;the&#160;ReadDataByIdentifier&#160;service&#160;at&#160;<br/>a&#160;later time.&#160;<br/>The&#160;intention&#160;of&#160;&#160;this&#160;service&#160;&#160;is&#160;to&#160;provide&#160;the&#160;client&#160;&#160;with&#160;the&#160;ability&#160;to&#160;group&#160;one&#160;or&#160;more&#160;<br/>data&#160;&#160;elements&#160;&#160;into&#160;&#160;a&#160;&#160;data&#160;&#160;superset&#160;&#160;that&#160;&#160;can&#160;&#160;be&#160;&#160;requested&#160;&#160;en&#160;&#160;masse&#160;&#160;via&#160;&#160;the&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
62&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=63></a>Technical Reference&#160;CANdesc&#160;<br/>
ReadDataByIdentifier&#160;&#160;or&#160;&#160;ReadDataByPeriodicIdentifier&#160;&#160;service.&#160;&#160;The&#160;&#160;data&#160;&#160;elements&#160;&#160;to&#160;&#160;be&#160;<br/>grouped&#160;together can&#160;either be&#160;referenced&#160;by:&#160;<br/>
&#160;&#160;a&#160;source&#160;data&#160;identifier,&#160;a&#160;position&#160;and&#160;size&#160;or,&#160;<br/>&#160;&#160;a&#160;memory&#160;address&#160;and&#160;a&#160;memory&#160;length,&#160;or,&#160;<br/>&#160;&#160;a&#160;combination&#160;of&#160;the&#160;two&#160;methods&#160;listed&#160;above&#160;using&#160;multiple&#160;requests&#160;to&#160;define&#160;the&#160;<br/>
single&#160;&#160;data&#160;&#160;element.&#160;&#160;The&#160;&#160;dynamically&#160;&#160;defined&#160;&#160;dataIdentifier&#160;&#160;will&#160;&#160;then&#160;&#160;contain&#160;&#160;a&#160;<br/>concatenation&#160;of&#160;the&#160;data&#160;parameter definitions.&#160;<br/>
&#160;<br/>
The&#160;&#160;definition&#160;&#160;of&#160;&#160;the&#160;&#160;dynamically&#160;&#160;defined&#160;&#160;data&#160;&#160;identifier&#160;&#160;can&#160;&#160;either&#160;&#160;be&#160;&#160;done&#160;&#160;via&#160;&#160;a&#160;&#160;single&#160;<br/>request&#160;&#160;message&#160;&#160;or&#160;&#160;via&#160;&#160;multiple&#160;&#160;request&#160;&#160;messages.&#160;&#160;This&#160;&#160;allows&#160;&#160;for&#160;&#160;the&#160;&#160;definition&#160;&#160;of&#160;&#160;a&#160;<br/>single&#160;&#160;data&#160;&#160;element&#160;&#160;referencing&#160;&#160;source&#160;&#160;identifier(s)&#160;&#160;and&#160;&#160;memory&#160;&#160;addresses.&#160;&#160;The&#160;&#160;server&#160;<br/>has&#160;&#160;to&#160;&#160;concatenate&#160;&#160;the&#160;&#160;definitions&#160;&#160;for&#160;&#160;the&#160;&#160;single&#160;&#160;data&#160;&#160;element.&#160;&#160;A&#160;&#160;redefinition&#160;&#160;of&#160;&#160;a&#160;<br/>dynamically&#160;defined&#160;data&#160;identifier&#160;can&#160;be&#160;achieved&#160;by&#160;clearing&#160;the&#160;current&#160;definition&#160;and&#160;<br/>start over with&#160;the&#160;new definition.&#160;<br/>At&#160;last&#160;the&#160;dynamically&#160;defined&#160;data&#160;identifier&#160;consists&#160;of&#160;a&#160;list&#160;of&#160;(non-dynamically)&#160;defined&#160;<br/>data&#160;identifiers and&#160;memory&#160;area&#160;ranges&#160;that&#160;can&#160;be&#160;used&#160;in&#160;any&#160;combination.&#160;<br/>For more&#160;information,&#160;see&#160;/ISO&#160;14229-1/&#160;<br/>
&#160;<br/>
<b>9.2.1&#160;</b><br/>
<b>Feature&#160;set&#160;</b><br/>
These&#160;are the&#160;supported&#160;subfunctions&#160;for service&#160;$2C (DynamicallyDefineDataIdentifier):&#160;<br/>
<b>Subfunction&#160;Name&#160;</b><br/>
<b>Hex&#160;Value&#160;</b><br/>
defineByIdentifier&#160;<br/>
01&#160;<br/>
defineByMemoryAddress&#160;<br/>
02&#160;<br/>
clearDynamicallyDefinedDataIdentifier&#160;<br/>
03&#160;<br/>
&#160;<br/>
<b>9.2.2&#160;</b><br/>
<b>API&#160;Functions&#160;</b><br/>
The&#160;reception&#160;of&#160;a&#160;Service&#160;$2C&#160;request&#160;will&#160;either&#160;delete&#160;a&#160;DynamicDataIdentifier&#160;(DDID)&#160;<br/>or&#160;&#160;PeriodicDataIdentifier&#160;&#160;(PDID)&#160;&#160;by&#160;&#160;subfunction&#160;&#160;$03&#160;&#160;or&#160;&#160;build&#160;&#160;a&#160;&#160;DDID/PDID&#160;&#160;by&#160;&#160;(several&#160;<br/>times)&#160;using&#160;subfunction&#160;$01&#160;and/or $02.&#160;<br/>For&#160;&#160;subfunction&#160;&#160;$02&#160;&#160;(defineByMemoryAddress)&#160;&#160;there&#160;&#160;is&#160;&#160;a&#160;&#160;new&#160;&#160;application&#160;&#160;callback&#160;<br/>function&#160;(see&#160;chapte<a href="TechnicalReference_CANdescs.html#119">r&#160;12.6.13&#160;“DynamicallyDefineDataIdentifier&#160;&#160;($2C)&#160;(UDS)&#160;functions”)</a>.&#160;It&#160;<br/>allows&#160;the&#160;application&#160;to&#160;permit&#160;or&#160;deny&#160;the&#160;extension&#160;of&#160;the&#160;DDID/PDID&#160;by&#160;accessing&#160;the&#160;<br/>defined&#160;memory&#160;range.&#160;The&#160;callback&#160;function&#160;must&#160;check,&#160;if&#160;the&#160;requested&#160;memory&#160;area&#160;is&#160;<br/>readable&#160;&#160;for&#160;&#160;the&#160;&#160;external&#160;Tester&#160;&#160;and&#160;&#160;if&#160;&#160;the&#160;&#160;current&#160;&#160;security&#160;&#160;state&#160;&#160;of&#160;&#160;the&#160;&#160;ECU&#160;&#160;permits&#160;&#160;the&#160;<br/>extension&#160;&#160;of&#160;&#160;the&#160;&#160;DDID/PDID.&#160;&#160;See&#160;&#160;chapter&#160;&#160;<a href="TechnicalReference_CANdescs.html#121">12.6.13.2&#160;&#160;</a>for&#160;&#160;the&#160;&#160;full&#160;&#160;set&#160;&#160;of&#160;&#160;checks&#160;&#160;to&#160;&#160;be&#160;<br/>executed.&#160;<br/>Please&#160;&#160;note&#160;&#160;that&#160;&#160;later,&#160;&#160;when&#160;&#160;reading&#160;&#160;the&#160;&#160;DDID&#160;&#160;by&#160;&#160;using&#160;&#160;service&#160;&#160;$22&#160;<br/>(ReadDataByIdentifier),&#160;&#160;further&#160;&#160;(security)&#160;&#160;checks&#160;&#160;for&#160;&#160;each&#160;&#160;element&#160;&#160;of&#160;&#160;the&#160;&#160;DDID’s&#160;&#160;list&#160;&#160;are&#160;<br/>executed&#160;&#160;to&#160;&#160;verify&#160;&#160;that&#160;&#160;e.g.&#160;&#160;the&#160;&#160;(then&#160;&#160;active)&#160;&#160;security&#160;&#160;state&#160;&#160;permits&#160;&#160;the&#160;&#160;<i>reading</i>&#160;&#160;of&#160;&#160;the&#160;<br/>memory&#160;area&#160;or&#160;DID.&#160;These&#160;checks&#160;(of&#160;&#160;Service&#160;&#160;$22&#160;and&#160;$23)&#160;are&#160;done&#160;in&#160;&#160;the&#160;traditional&#160;<br/>sequence&#160;of&#160;Pre-,&#160;Main-&#160;and&#160;PostHandler.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
63&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=64></a>Technical Reference&#160;CANdesc&#160;<br/>
The&#160;&#160;reception&#160;&#160;of&#160;&#160;a&#160;&#160;Service&#160;&#160;$22&#160;&#160;request&#160;&#160;starts&#160;&#160;a&#160;&#160;new&#160;&#160;context&#160;&#160;in&#160;&#160;CANdesc.&#160;&#160;Typically&#160;&#160;the&#160;<br/>requested&#160;data&#160;can&#160;not&#160;be&#160;asked&#160;from&#160;the&#160;application&#160;by&#160;using&#160;one&#160;single&#160;callback&#160;function&#160;<br/>but&#160;&#160;must&#160;&#160;be&#160;&#160;constructed&#160;&#160;sequentially&#160;&#160;by&#160;&#160;collecting&#160;&#160;data&#160;&#160;for&#160;&#160;each&#160;&#160;part&#160;&#160;of&#160;&#160;the&#160;&#160;DDID’s&#160;<br/>definition&#160;list:&#160;<br/>
&#160;&#160;A&#160;&#160;requested&#160;&#160;basic&#160;&#160;source&#160;&#160;data&#160;&#160;identifier&#160;&#160;(DID)&#160;&#160;is&#160;&#160;asked&#160;&#160;of&#160;&#160;the&#160;&#160;application&#160;&#160;by&#160;&#160;the&#160;<br/>
respective&#160;callback&#160;(as&#160;for&#160;Service&#160;$22&#160;request),&#160;the&#160;result&#160;data&#160;is&#160;stripped&#160;down&#160;to&#160;<br/>the&#160;defined&#160;position&#160;and&#160;size&#160;<br/>
&#160;&#160;A&#160;memory&#160;address&#160;is&#160;read&#160;by&#160;its&#160;defined&#160;function&#160;(typically&#160;the&#160;same&#160;as&#160;used&#160;for&#160;a&#160;<br/>
Service&#160;$23&#160;request) and&#160;the&#160;defined&#160;‘size’&#160;bytes are collected.&#160;<br/>
As&#160;&#160;recommended&#160;&#160;from&#160;&#160;/ISO&#160;&#160;14229-1/&#160;&#160;to&#160;&#160;prevent&#160;&#160;data&#160;&#160;consistency&#160;&#160;problems&#160;&#160;a&#160;&#160;recursive&#160;<br/>definition&#160;of&#160;DDIDs is NOT&#160;supported.&#160;<br/>The&#160;Service&#160;$22&#160;response&#160;data&#160;is&#160;collected&#160;by&#160;splitting&#160;the&#160;service&#160;request&#160;into&#160;these&#160;basic&#160;<br/>tasks,&#160;&#160;then&#160;&#160;running&#160;&#160;the&#160;&#160;well&#160;&#160;known&#160;&#160;internal&#160;&#160;functions&#160;&#160;that&#160;&#160;were&#160;&#160;defined&#160;&#160;for&#160;&#160;them,&#160;&#160;collect&#160;<br/>their&#160;&#160;results&#160;&#160;and&#160;build&#160;&#160;up&#160;&#160;the&#160;&#160;Service&#160;&#160;$22&#160;&#160;response.&#160;Therefore,&#160;&#160;each&#160;of&#160;&#160;the&#160;above&#160;&#160;tasks&#160;<br/>starts&#160;&#160;a&#160;&#160;new&#160;&#160;context,&#160;&#160;executes&#160;&#160;the&#160;&#160;defined&#160;&#160;Pre-,&#160;&#160;Main-&#160;&#160;and&#160;&#160;Post-Handler&#160;&#160;where&#160;<br/>Application-Callbacks&#160;get&#160;data,&#160;delivers its&#160;result and&#160;finally&#160;ends its&#160;context.&#160;<br/>The&#160;recursive&#160;evaluation&#160;of&#160;DDIDs enforces&#160;the&#160;usage&#160;of&#160;MultiContext&#160;mode.&#160;&#160;<br/>We&#160;would&#160;like&#160;to&#160;point&#160;out&#160;that&#160;the&#160;described&#160;operating&#160;sequence&#160;above&#160;is&#160;completely&#160;run&#160;<br/>within&#160;&#160;CANdesc&#160;&#160;and&#160;&#160;totally&#160;&#160;transparent&#160;&#160;for&#160;&#160;the&#160;&#160;application&#160;&#160;except&#160;&#160;for&#160;&#160;the&#160;&#160;additional&#160;API&#160;<br/>callback&#160;function.&#160;Using&#160;Service&#160;$2C&#160;or&#160;$2A&#160;switches&#160;CANdesc&#160;to&#160;MultiContext&#160;mode&#160;–&#160;if&#160;<br/>your application&#160;isn’t&#160;prepared&#160;to&#160;support MultiContext&#160;mode&#160;(by&#160;using&#160;the&#160;defined&#160;macros)&#160;<br/>you’ll get&#160;compiler errors about&#160;inconsistent&#160;argument&#160;lists.&#160;<br/>
&#160;<br/>
<b>9.2.3&#160;</b><br/>
<b>Sequence&#160;Charts&#160;</b><br/>
<b>Service&#160;$2C&#160;–&#160;Define&#160;a&#160;DDID&#160;<br/></b>The&#160;&#160;following&#160;&#160;picture&#160;&#160;exemplifies&#160;&#160;the&#160;&#160;sequence&#160;&#160;of&#160;&#160;defining&#160;&#160;a&#160;&#160;DDID&#160;&#160;by&#160;&#160;several&#160;&#160;call&#160;&#160;of&#160;<br/>Service&#160;DynamicallyDefineDataIdentifier ($2C).&#160;<br/>In&#160;&#160;our&#160;&#160;example&#160;&#160;the&#160;&#160;first&#160;&#160;Service&#160;&#160;$2C&#160;&#160;request&#160;&#160;defines&#160;&#160;the&#160;&#160;DDID&#160;&#160;$F300&#160;&#160;to&#160;&#160;return&#160;&#160;two&#160;<br/>independent&#160;<br/>
memory&#160;<br/>
areas.&#160;<br/>
For&#160;<br/>
both&#160;<br/>
areas&#160;<br/>
the&#160;<br/>
callback&#160;<br/>
function&#160;<br/>
ApplDescCheckDynDidMemoryArea()&#160;&#160;is&#160;&#160;triggered&#160;&#160;and&#160;&#160;in&#160;&#160;this&#160;&#160;example&#160;&#160;the&#160;&#160;application&#160;<br/>permits&#160;both&#160;accesses.&#160;<br/>The&#160;consecutive&#160;Service&#160;$2C request&#160;extends the&#160;DDID $F300&#160;by&#160;(some&#160;fragments&#160;of) the&#160;<br/>existing&#160;DID&#160;$F010.&#160;As&#160;the&#160;here&#160;executed&#160;PreHandler&#160;does&#160;not&#160;set&#160;a&#160;Negative&#160;Response&#160;<br/>Code,&#160;&#160;CANdesc&#160;&#160;considers&#160;&#160;the&#160;&#160;extension&#160;&#160;of&#160;&#160;the&#160;&#160;DDID&#160;&#160;valid&#160;&#160;and&#160;&#160;enlarges&#160;&#160;the&#160;&#160;DDID&#160;<br/>definition.&#160;<br/>A&#160;third&#160;Service&#160;$2C request&#160;tries&#160;to&#160;extend&#160;the&#160;DDID $F300&#160;once&#160;more&#160;by&#160;another memory&#160;<br/>area.&#160;In&#160;our&#160;example&#160;the&#160;call&#160;fails,&#160;as&#160;the&#160;specified&#160;memory&#160;area&#160;($0000)&#160;is&#160;not&#160;valid&#160;for&#160;<br/>this&#160;&#160;ECU.&#160;The&#160;&#160;service&#160;&#160;is&#160;&#160;negative&#160;&#160;responded&#160;&#160;and&#160;&#160;the&#160;&#160;previous&#160;&#160;DDID&#160;&#160;specification&#160;&#160;is&#160;&#160;left&#160;<br/>untouched.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
64&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=65></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>sd&#160;Define&#160;a&#160;new&#160;&#160;DDID&#160;v&#160;ia&#160;Serv&#160;ice&#160;$2C&#160;request</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
Define&#160;DDID&#160;$F300&#160;as<br/>
$2C&#160;02&#160;F300&#160;12&#160;ABCD04&#160;FEDC05<br/>
4-byte&#160;memory&#160;block&#160;at&#160;<br/>address&#160;$ABCD&#160;and<br/>5-byte&#160;block&#160;at&#160;$FEDC<br/>
check&#160;for<br/>
ApplDescCheckDynDidMemoryArea<br/>
Addr.&#160;$ABCD,&#160;<br/>
memBlockOk<br/>
Size&#160;$04<br/>
check&#160;for<br/>
ApplDescCheckDynDidMemoryArea<br/>
Addr.&#160;$FEDC,&#160;<br/>Size&#160;$05<br/>
memBlockOk<br/>
PosResponse&#160;($6C&#160;02)<br/>
$2C&#160;01&#160;F300&#160;F010&#160;...<br/>
Extend&#160;the&#160;DDID&#160;$F300<br/>
PreHandler&#160;for&#160;DID&#160;F010<br/>
by&#160;using<br/>existing&#160;DID&#160;$F010<br/>
No&#160;Neg.&#160;RCode&#160;<br/>set&#160;--&gt;&#160;success<br/>
PosResponse&#160;($6C&#160;01)<br/>
$2C&#160;02&#160;F300&#160;12&#160;000004<br/>
Further&#160;extention&#160;fails&#160;<br/>due&#160;invalid&#160;address&#160;<br/>value&#160;($0000)&#160;in&#160;<br/>
ApplDescCheckDynDidMemoryArea<br/>
request<br/>
check&#160;for&#160;Addr.&#160;<br/>
memBlockInvAddress<br/>
$0000&#160;fails!<br/>
NegResponse&#160;($7F&#160;2C&#160;31)<br/>
&#160;<br/>
Figure&#160;9-9:&#160;Defining&#160;a&#160;DDID.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
65&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=66></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Service&#160;$22&#160;–&#160;Read a&#160;DDID&#160;<br/></b>The&#160;&#160;above&#160;&#160;defined&#160;&#160;DDID&#160;&#160;is&#160;&#160;now&#160;&#160;read&#160;&#160;by&#160;&#160;Service&#160;&#160;ReadDataByIdentifier&#160;&#160;($22).&#160;&#160;Within&#160;<br/>CANdesc&#160;&#160;the&#160;&#160;DDID&#160;&#160;is&#160;&#160;disassembled&#160;&#160;into&#160;&#160;its&#160;&#160;elements:&#160;&#160;One&#160;&#160;(virtual)&#160;&#160;request&#160;&#160;for&#160;&#160;the&#160;&#160;first&#160;<br/>memory&#160;range,&#160;another&#160;request&#160;for&#160;the&#160;second&#160;memory&#160;range&#160;and&#160;finally&#160;a&#160;request&#160;for&#160;the&#160;<br/>predefined&#160;DID $F010.&#160;<br/>
<b>sd&#160;Read&#160;defined&#160;DDID&#160;v&#160;ia&#160;Serv&#160;ice&#160;$22&#160;request</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
Read&#160;DDID&#160;$F300&#160;that<br/>
$22&#160;F300<br/>
was&#160;defined&#160;as:<br/>&#160;&#160;&#160;&#160;Addr&#160;ABCD,&#160;Size&#160;04<br/>
$23&#160;12&#160;ABCD04<br/>
&#160;+&#160;Addr&#160;FEDC,&#160;Size&#160;05<br/>&#160;+&#160;DID&#160;F010,&#160;Pos&#160;..,&#160;Size&#160;..<br/>
execute&#160;virtual&#160;<br/>$23&#160;request<br/>
PreHandler<br/>
MainHandler<br/>
PostHandler<br/>
$23&#160;12&#160;FEDC05<br/>
execute&#160;virtual&#160;<br/>$23&#160;request<br/>
PreHandler<br/>
MainHandler<br/>
PostHandler<br/>
$22&#160;F010<br/>
execute&#160;virtual&#160;<br/>$22&#160;request&#160;...<br/>
PreHandler<br/>
MainHandler<br/>
PostHandler<br/>
...&#160;and&#160;cut&#160;out&#160;the<br/>required&#160;bytes&#160;<br/>from&#160;the&#160;result<br/>
concatenate&#160;<br/>the&#160;results<br/>
PosResponse&#160;($62)<br/>
&#160;<br/>
Figure&#160;9-10:&#160;Reading&#160;a&#160;DDID.&#160;<br/>
Between&#160;&#160;<i>CANdesc</i>&#160;&#160;and&#160;&#160;the&#160;&#160;<i>application</i>&#160;&#160;the&#160;&#160;sequence&#160;&#160;looks&#160;&#160;same&#160;&#160;as&#160;&#160;if&#160;&#160;the&#160;&#160;tester&#160;&#160;would&#160;<br/>have&#160;&#160;sent&#160;&#160;3&#160;&#160;requests:&#160;&#160;(1)&#160;&#160;ReadMemoryByAddress&#160;&#160;($23)&#160;&#160;on&#160;&#160;first&#160;&#160;address&#160;&#160;range,&#160;&#160;(2)&#160;<br/>ReadMemoryByAddress&#160;&#160;($23)&#160;&#160;on&#160;&#160;second&#160;&#160;address&#160;&#160;range,&#160;&#160;and&#160;&#160;finally&#160;&#160;(3)&#160;<br/>ReadDataByIdentifier&#160;($22)&#160;on&#160;the&#160;DID&#160;$F010.&#160;Keep&#160;in&#160;mind:&#160;this&#160;is&#160;just&#160;a&#160;picture&#160;for&#160;the&#160;<br/>succession&#160;of&#160;events/API-calls&#160;-&#160;these&#160;requests&#160;are&#160;not&#160;real,&#160;the&#160;messages&#160;are never&#160;seen&#160;<br/>on&#160;the&#160;bus,&#160;the&#160;internal&#160;sequence&#160;is&#160;actually&#160;slightly&#160;different&#160;but&#160;for&#160;the&#160;application&#160;it&#160;looks&#160;<br/>the&#160;same!&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
66&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=67></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-67_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-67_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-67_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-67_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-67_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-67_6.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-67_7.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-67_8.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-67_9.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-67_10.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>9.3&#160;</b><br/>
<b>Read/Write&#160;Memory&#160;by&#160;Address&#160;(SID $23/$3D)&#160;(UDS)&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>This&#160;chapter&#160;does&#160;not&#160;apply&#160;to all&#160;ECU&#160;configurations.&#160;Only&#160;in special&#160;cases&#160;the&#160;<br/>
&#160;&#160;memory&#160;access&#160;support&#160;will&#160;be&#160;available!&#160;<br/>
<b>&#160;</b><br/>
The&#160;&#160;services&#160;&#160;$23&#160;&#160;(ReadMemoryByAddress)&#160;&#160;and&#160;&#160;$3D&#160;&#160;(WriteMemoryByAddress)&#160;&#160;are&#160;<br/>handled&#160;uniformly&#160;in&#160;CANdesc.&#160;<br/>Basically&#160;the&#160;memory&#160;by&#160;address&#160;requests&#160;look like&#160;this:&#160;<br/>
$23&#160;<br/>
FID&#160;<br/>
<i>address&#160;</i><br/>
<i>length&#160;</i><br/>
$3D&#160;<br/>
FID&#160;<br/>
<i>address&#160;</i><br/>
<i>length&#160;</i><br/>
<i>data&#160;</i><br/>
&#160;<br/>
The&#160;&#160;application&#160;&#160;need&#160;&#160;not&#160;&#160;concern&#160;&#160;itself&#160;&#160;with&#160;&#160;the&#160;&#160;details&#160;&#160;how&#160;&#160;the&#160;&#160;address&#160;&#160;and&#160;&#160;length&#160;&#160;are&#160;<br/>formatted.&#160;&#160;If&#160;&#160;a&#160;&#160;valid&#160;&#160;FID&#160;&#160;is&#160;&#160;recognized,&#160;&#160;CANdesc&#160;&#160;will&#160;&#160;extract&#160;&#160;the&#160;&#160;address&#160;&#160;and&#160;&#160;length&#160;<br/>information&#160;from&#160;the&#160;request&#160;and&#160;call&#160;an&#160;appropriate&#160;application&#160;callback.&#160;<br/>See&#160;also:&#160;<br/>&#160;ApplDescReadMemoryByAddress&#160;<a href="TechnicalReference_CANdescs.html#130">(12.6.14.1)</a>&#160;<br/>&#160;ApplDescWriteMemoryByAddress&#160;<a href="TechnicalReference_CANdescs.html#131">(12.6.14.2)</a>&#160;<br/>
<b>9.3.1&#160;</b><br/>
<b>Tasks&#160;performed by&#160;CANdesc&#160;</b><br/>
To&#160;a&#160;certain&#160;degree&#160;CANdesc validates the&#160;request.&#160;<br/>The&#160;basic&#160;format&#160;checks&#160;and&#160;service&#160;level&#160;state&#160;validation&#160;–&#160;this&#160;means&#160;e.g.&#160;security&#160;and&#160;<br/>session&#160;validation&#160;–&#160;are performed&#160;before&#160;calling&#160;the&#160;application&#160;callback.&#160;<br/>Service&#160;&#160;level&#160;&#160;state&#160;&#160;validation&#160;&#160;means&#160;&#160;that&#160;&#160;the&#160;&#160;request&#160;&#160;will&#160;&#160;be&#160;&#160;denied&#160;&#160;if&#160;&#160;all&#160;&#160;diagnostic&#160;<br/>instances of&#160;service&#160;$23&#160;or $3D are&#160;not&#160;allowed&#160;in&#160;the&#160;current&#160;state.&#160;<br/>In&#160;&#160;case&#160;&#160;of&#160;&#160;WriteMemoryByAddress&#160;&#160;the&#160;&#160;application&#160;&#160;has&#160;&#160;linear&#160;&#160;access&#160;&#160;to&#160;&#160;the&#160;&#160;whole&#160;&#160;data&#160;<br/>block&#160;to&#160;write.&#160;<br/>
<b>9.3.2&#160;</b><br/>
<b>Task&#160;to be&#160;performed&#160;by&#160;the&#160;Application&#160;</b><br/>
CANdesc&#160;currently&#160;does&#160;not&#160;provide&#160;state&#160;validation&#160;on&#160;format&#160;identifier&#160;level&#160;or&#160;memory&#160;<br/>address&#160;/&#160;memory&#160;block&#160;level.&#160;<br/>This&#160;&#160;means,&#160;&#160;that&#160;for&#160;example&#160;&#160;different&#160;&#160;memory&#160;&#160;addresses&#160;&#160;shall&#160;&#160;require&#160;&#160;different&#160;&#160;security&#160;<br/>levels,&#160;the&#160;application&#160;will&#160;have&#160;to&#160;verify&#160;that&#160;the&#160;ECU&#160;currently&#160;is&#160;in&#160;an&#160;appropriate&#160;state&#160;to&#160;<br/>access the&#160;requested&#160;memory&#160;area.&#160;<br/>
<b>9.3.3&#160;</b><br/>
<b>Repeated service&#160;calls&#160;</b><br/>
The&#160;repeated&#160;service&#160;call&#160;feature is&#160;available&#160;for the&#160;memory&#160;access callbacks.&#160;<br/>Because&#160;&#160;they&#160;&#160;have&#160;&#160;a&#160;&#160;different&#160;&#160;prototype&#160;&#160;than&#160;&#160;a&#160;&#160;normal&#160;&#160;main&#160;&#160;handler,&#160;&#160;the&#160;&#160;usual&#160;&#160;API&#160;<br/>‘DescStartRepeatedServiceCall&#160;(see<a href="TechnicalReference_CANdescs.html#105">&#160;&#160;12.6.8.1)’</a>&#160;can&#160;not&#160;&#160;be&#160;used&#160;with&#160;the&#160;memory&#160;access&#160;<br/>callbacks.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
67&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=68></a>Technical Reference&#160;CANdesc&#160;<br/>
Instead,&#160;&#160;a&#160;&#160;new&#160;&#160;API&#160;&#160;call&#160;&#160;‘DescStartMemByAddrRepeatedCall&#160;&#160;(see&#160;&#160;<a href="TechnicalReference_CANdescs.html#106">12.6.8.2)’</a>&#160;&#160;has&#160;&#160;been&#160;<br/>added.&#160;<br/>To&#160;abort the&#160;repeated&#160;service&#160;call,&#160;use&#160;the&#160;usual&#160;API.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
68&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=69></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>10&#160;&#160;Generic&#160;Processing&#160;Notifications&#160;</b><br/>
If&#160;CANdesc&#160;UDS2012&#160;is used,&#160;the&#160;feature “Generic Processing&#160;Notifications”&#160;is provided.&#160;<br/>Upon&#160;activating&#160;this&#160;feature,&#160;CANdesc will notify&#160;the&#160;application&#160;when&#160;the&#160;processing&#160;of&#160;a&#160;<br/>request&#160;starts&#160;and&#160;ends.&#160;Thereby,&#160;the&#160;notification&#160;mechanism&#160;is two-staged.&#160;On&#160;each&#160;<br/>stage&#160;there are&#160;two&#160;application&#160;callbacks,&#160;one&#160;indication&#160;and&#160;one&#160;confirmation&#160;callback.&#160;&#160;<br/>On&#160;the&#160;first&#160;stage&#160;“Manufacturer Notification&#160;Support”,&#160;CANdesc will notify&#160;the&#160;application&#160;<br/>right&#160;before&#160;the&#160;processing&#160;of&#160;a&#160;fully&#160;received&#160;request&#160;starts,&#160;by&#160;calling&#160;the&#160;function&#160;<br/><a href="TechnicalReference_CANdescs.html#140"><i>ApplDescManufacturerIndication()</i></a>.&#160;When&#160;the&#160;processing&#160;of&#160;the&#160;request&#160;has been&#160;finished,&#160;<br/>the&#160;response&#160;has been&#160;sent&#160;and&#160;all&#160;PostHandlers were called,&#160;CANdesc notifies&#160;the&#160;<br/>application&#160;again&#160;by&#160;calling&#160;the&#160;function<a href="TechnicalReference_CANdescs.html#141">&#160;<i>ApplDescManufacturerConfirmation()</i></a>.&#160;<br/>The&#160;application&#160;callbacks of&#160;the&#160;second&#160;stage&#160;“Supplier Notification&#160;Support”&#160;are&#160;named&#160;<br/>accordingly<a href="TechnicalReference_CANdescs.html#142">&#160;<i>ApplDescSupplierIndication()</i></a>&#160;and<a href="TechnicalReference_CANdescs.html#143">&#160;<i>ApplDescSupplierConfirmation()</i></a>.&#160;The&#160;<br/>indication&#160;callback&#160;is called&#160;by&#160;CANdesc&#160;after it has verified&#160;that&#160;the&#160;requested&#160;service&#160;is&#160;<br/>supported&#160;in&#160;the&#160;active&#160;session,&#160;security&#160;state&#160;and&#160;user states.&#160;The&#160;confirmation&#160;callback&#160;<br/>is also&#160;called&#160;after the&#160;response&#160;has been&#160;sent,&#160;and&#160;all&#160;PostHandlers were called,&#160;but&#160;right&#160;<br/>before&#160;the&#160;call&#160;to<a href="TechnicalReference_CANdescs.html#141">&#160;<i>ApplDescManufacturerConfirmation()</i></a>.&#160;Thus,&#160;the&#160;manufacturer and&#160;<br/>supplier&#160;callbacks are&#160;called&#160;in&#160;a&#160;nested&#160;way<a href="TechnicalReference_CANdescs.html#13">.&#160;Figure&#160;3-1&#160;</a>illustrates&#160;the&#160;order of&#160;the&#160;<br/>notification&#160;callbacks related&#160;to&#160;the&#160;processing&#160;of&#160;a&#160;service&#160;request.&#160;<br/>
<b>Application</b><br/>
<b>Prehandler</b><br/>
<b>Manufacturer&#160;</b><br/>
<b>Mainhandler</b><br/>
<b>Supplier&#160;</b><br/>
<b>Indication</b><br/>
<b>Confirmation</b><br/>
<b>Posthandler</b><br/>
<b>Supplier&#160;</b><br/>
<b>Manufacturer&#160;</b><br/>
<b>Indication</b><br/>
<b>Confirmation</b><br/>
<b>CANdesc</b><br/>
Check&#160;SID<br/>
<b>…&#160;</b>Check&#160;Format<br/>
Check&#160;Session/Security<br/>
t<br/>
<b>Request</b><br/>
<b>positive&#160;Response</b><br/>
<br/>
<b>negative&#160;Response</b><br/>
<b>Tester</b><br/>
&#160;<br/>
Figure&#160;10-1&#160;Call&#160;order&#160;of&#160;Manufacturer-&#160;and&#160;Supplier-Notficiation&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
69&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=70></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>10.1&#160;&#160;Using dynamically&#160;defined&#160;data&#160;Identifier&#160;</b><br/>
The&#160;&#160;Service&#160;&#160;DynamicallyDefineDataIdentifier&#160;&#160;allows&#160;&#160;the&#160;&#160;definition&#160;&#160;of&#160;&#160;data&#160;&#160;identifiers&#160;&#160;with&#160;<br/>other&#160;&#160;data&#160;&#160;identifiers&#160;&#160;or&#160;&#160;memory&#160;&#160;areas.&#160;&#160;These&#160;&#160;DDIDs&#160;&#160;can&#160;&#160;be&#160;&#160;read&#160;&#160;via&#160;&#160;service&#160;<br/>ReadDataByIdentifier.&#160;When&#160;reading&#160;a&#160;DDID,&#160;for&#160;each&#160;source&#160;element&#160;a&#160;virtual&#160;request&#160;is&#160;<br/>processed&#160;&#160;by&#160;&#160;CANdesc&#160;&#160;to&#160;&#160;get&#160;&#160;the&#160;&#160;information&#160;&#160;for&#160;&#160;this&#160;&#160;source&#160;&#160;element&#160;&#160;from&#160;&#160;the&#160;<br/>application(see&#160;&#160;chapte<a href="TechnicalReference_CANdescs.html#62">r&#160;&#160;9.2).</a>&#160;&#160;Because&#160;&#160;CANdesc&#160;&#160;processes&#160;&#160;the&#160;&#160;virtual&#160;&#160;requests&#160;&#160;equal&#160;&#160;to&#160;<br/>normal&#160;&#160;requests,&#160;&#160;the&#160;&#160;notification&#160;&#160;functions&#160;&#160;will&#160;&#160;not&#160;&#160;only&#160;&#160;be&#160;&#160;called&#160;&#160;for&#160;&#160;the&#160;&#160;$22&#160;&#160;request&#160;<br/>containing&#160;&#160;the&#160;&#160;DDID,&#160;&#160;but&#160;&#160;also&#160;&#160;for&#160;&#160;each&#160;&#160;virtual&#160;&#160;request.&#160;&#160;The&#160;&#160;application&#160;&#160;has&#160;&#160;to&#160;&#160;consider&#160;<br/>these&#160;additional calls,&#160;in&#160;case&#160;a&#160;DDID is requested.&#160;&#160;<br/><a href="TechnicalReference_CANdescs.html#70">Figure&#160;10-2&#160;</a>shows an&#160;example&#160;of&#160;reading&#160;a&#160;DDID with&#160;service&#160;$22.&#160;<br/>
<b>&#160;sd&#160;Read&#160;defined&#160;DDID&#160;v&#160;ia&#160;Serv&#160;ice&#160;$22&#160;request&#160;w&#160;ith&#160;Generic&#160;Processing&#160;Notifications</b><br/>
Tester<br/>
CANdesc<br/>
Application<br/>
Read&#160;DDID&#160;$F300&#160;that<br/>
$22&#160;F300()<br/>
was&#160;defined&#160;as:<br/>&#160;&#160;&#160;&#160;Addr&#160;ABCD,&#160;Size&#160;04<br/>
Manufacturer&#160;Indication()<br/>
+&#160;Addr&#160;FEDC,&#160;Size&#160;05<br/>
Confirmation&#160;calls&#160;<br/>
+&#160;DID&#160;F010,&#160;Pos&#160;..,&#160;Size&#160;..<br/>
Supplier&#160;Indication()<br/>
execute&#160;virtual&#160;<br/>
for&#160;the&#160;request&#160;to&#160;<br/>
$23&#160;request<br/>
read&#160;the&#160;DDID<br/>
$23&#160;12&#160;ABCD04()<br/>
Manufacturer&#160;Indication()<br/>
Nested&#160;confirmation&#160;<br/>
Supplier&#160;Indication()<br/>
calls&#160;for&#160;the&#160;virtual&#160;<br/>request<br/>
PreHandler()<br/>
MainHandler()<br/>
PostHandler()<br/>
Supplier&#160;Confirmation()<br/>
Manufacturer&#160;Confirmation()<br/>
...<br/>Process&#160;further&#160;<br/>virtual&#160;requests<br/>...<br/>
PosResponse&#160;($62)<br/>
PostHandler()<br/>
Supplier&#160;Confirmation()<br/>
Manufacturer&#160;Confirmation()<br/>
&#160;<br/>
Figure&#160;10-2&#160;Read&#160;out&#160;a&#160;DDID&#160;with&#160;generic&#160;processing&#160;notifications&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
70&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=71></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>11&#160;&#160;Busy&#160;Repeat&#160;Responder&#160;Support&#160;(UDS2006 and&#160;UDS2012)&#160;</b><br/>
Busy&#160;&#160;Repeat&#160;&#160;Responder&#160;&#160;is&#160;&#160;a&#160;&#160;feature,&#160;&#160;that&#160;&#160;allowes&#160;&#160;CANdesc&#160;&#160;to&#160;&#160;respond&#160;&#160;to&#160;&#160;incoming&#160;<br/>requests&#160;&#160;during&#160;&#160;the&#160;&#160;processing&#160;&#160;of&#160;&#160;another&#160;&#160;request.&#160;&#160;Such&#160;&#160;parallel&#160;&#160;requests&#160;&#160;are&#160;&#160;properly&#160;<br/>received&#160;&#160;and&#160;&#160;in&#160;&#160;the&#160;&#160;next&#160;&#160;task&#160;&#160;cycle&#160;&#160;of&#160;&#160;CANdesc&#160;&#160;responded&#160;&#160;negatively&#160;&#160;with&#160;&#160;NRC&#160;<br/>BusyRepeatRequest&#160;(0x21).&#160;&#160;<br/><a href="TechnicalReference_CANdescs.html#71">Figure&#160;11-1&#160;</a>illustrates&#160;the&#160;functionality&#160;of&#160;the&#160;Busy&#160;Repeat&#160;Responder&#160;mechanism.&#160;During&#160;<br/>the&#160;&#160;processing&#160;&#160;of&#160;&#160;Request&#160;&#160;1,&#160;&#160;Requests&#160;&#160;2&#160;and&#160;&#160;3&#160;from&#160;Tester&#160;2&#160;&#160;are&#160;&#160;responded&#160;negatively&#160;<br/>with&#160;&#160;NRC&#160;&#160;BusyRepeatRequest.&#160;&#160;After&#160;&#160;the&#160;&#160;processing&#160;&#160;of&#160;&#160;request&#160;&#160;1&#160;&#160;has&#160;&#160;finished&#160;&#160;and&#160;&#160;a&#160;<br/>positive&#160;response&#160;has&#160;been&#160;sent,&#160;Request&#160;4&#160;from&#160;Tester 2&#160;can&#160;be&#160;processed&#160;properly.&#160;<br/>
<b>&#160;sd&#160;BusyRepeatResponder</b><br/>
Tester&#160;1<br/>
Tester&#160;2<br/>
CANdesc<br/>
Request&#160;1()<br/>
CANdesc&#160;has&#160;received&#160;a&#160;<br/>request&#160;from&#160;Tester&#160;1&#160;and&#160;<br/>starts&#160;the&#160;processing<br/>
Request&#160;2()<br/>
Neg&#160;Response&#160;Busy()<br/>
Parallel&#160;requests&#160;from&#160;<br/>another&#160;tester&#160;are&#160;responded&#160;<br/>
Request&#160;3()<br/>
negatively&#160;with&#160;NRC&#160;<br/>BusyRepeatRequest<br/>
Neg&#160;Response&#160;Busy()<br/>
Pos&#160;Response&#160;for&#160;Request&#160;1()<br/>
After&#160;CANdesc&#160;has&#160;finished&#160;<br/>
Request&#160;4()<br/>
the&#160;processing&#160;of&#160;the&#160;request&#160;<br/>from&#160;Tester&#160;1,&#160;Requests&#160;from&#160;<br/>Tester&#160;2&#160;can&#160;be&#160;processed&#160;<br/>
Pos&#160;Response&#160;for&#160;Request&#160;4()<br/>
again.<br/>
&#160;<br/>
Figure&#160;11-1&#160;&#160;Illustration&#160;of&#160;the&#160;feature&#160;BusyRepeatResponder&#160;<br/>
Preconditions that&#160;must&#160;be&#160;fulfilled&#160;when&#160;using&#160;the&#160;feature&#160;Busy&#160;Repeat&#160;Responder:&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;TP&#160;must&#160;be&#160;a&#160;ISO&#160;TP&#160;from&#160;Vector with&#160;TP&#160;Class&#160;“Dynamic Normal&#160;Addressing&#160;<br/>
Multi&#160;TP”&#160;or&#160;“Dynamic&#160;Normal Fixed&#160;Addressing&#160;Multi&#160;TP”&#160;<br/>
<b>&gt;&#160;&#160;</b>In&#160;the&#160;TP&#160;configuration&#160;the&#160;feature “Extended&#160;API&#160;–&#160;Overrun&#160;Reception”&#160;must&#160;be&#160;active&#160;<br/>
<b>&gt;&#160;&#160;</b>In&#160;the&#160;TP&#160;configuration&#160;the&#160;number of&#160;Rx&#160;channels&#160;and&#160;Tx&#160;Channels&#160;must&#160;be&#160;&gt; 1&#160;<br/>
<b>&gt;&#160;&#160;</b>In&#160;case&#160;of&#160;Dynamic Normal&#160;Addressing&#160;Multi&#160;TP,&#160;a&#160;dispatcher needs&#160;to&#160;be&#160;<br/>
implemented&#160;in&#160;the&#160;application&#160;(for a&#160;detailed&#160;description&#160;see&#160;chapte<a href="TechnicalReference_CANdescs.html#158">r&#160;<i>13.12</i>)</a>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
71&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=72></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-72_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
Restrictions when&#160;using&#160;the&#160;feature&#160;Busy&#160;Repeat&#160;Responder:&#160;<br/>
<b>&gt;&#160;&#160;</b>Only&#160;physical&#160;parallel requests&#160;are&#160;responded&#160;negatively.&#160;Functional&#160;parallel requests&#160;<br/>
will&#160;NOT&#160;get&#160;a&#160;negative&#160;response.&#160;<br/>
<b>11.1&#160;&#160;Configuration in GENy&#160;</b><br/>
To&#160;&#160;activate&#160;&#160;the&#160;&#160;feature&#160;&#160;Busy&#160;&#160;Repeat&#160;&#160;Responder&#160;&#160;use&#160;&#160;the&#160;&#160;setting&#160;&#160;in&#160;&#160;the&#160;&#160;CANdesc&#160;<br/>component&#160;root&#160;(refer to&#160;chapte<a href="TechnicalReference_CANdescs.html#22">r&#160;<i>6.2.1&#160;Global&#160;CANdesc Settings).</i></a>&#160;<br/>Furthermore,&#160;&#160;the&#160;&#160;feature&#160;&#160;requires&#160;&#160;additional&#160;&#160;configuration&#160;&#160;in&#160;&#160;the&#160;&#160;TP&#160;&#160;component.&#160;&#160;The&#160;<br/>feature&#160;“Extended&#160;API&#160;–&#160;Overrun&#160;Reception”&#160;must&#160;be&#160;enabled.&#160;This&#160;setting&#160;is&#160;available&#160;in&#160;<br/>the&#160;&#160;group&#160;&#160;“Advanced&#160;&#160;Configuration”.&#160;To&#160;&#160;be&#160;&#160;able&#160;&#160;to&#160;&#160;receive&#160;&#160;another&#160;&#160;request&#160;&#160;while&#160;&#160;one&#160;&#160;is&#160;<br/>under&#160;processing,&#160;the&#160;“Number&#160;of&#160;Rx&#160;Channels”&#160;and&#160;“Number&#160;of&#160;Tx&#160;Channels”&#160;must&#160;be&#160;at&#160;<br/>least&#160;two.&#160;The&#160;number&#160;of&#160;channels can&#160;be&#160;configured&#160;in&#160;the&#160;TP&#160;Connection&#160;Groups:&#160;<br/>
&#160;<br/>
Figure&#160;11-2&#160;Example&#160;of&#160;the&#160;“Number&#160;of&#160;Rx(Tx)&#160;Channels”&#160;settings&#160;<br/>
In&#160;case&#160;of&#160;“Dynamic Normal&#160;Addressing&#160;Multi&#160;TP”&#160;a&#160;dispatcher needs to&#160;be&#160;implemented&#160;in&#160;<br/>the&#160;&#160;application.&#160;&#160;The&#160;&#160;description&#160;&#160;of&#160;&#160;the&#160;&#160;GENy&#160;&#160;configuration&#160;&#160;to&#160;&#160;integrate&#160;&#160;the&#160;&#160;dispatcher&#160;&#160;is&#160;<br/>described&#160;&#160;in&#160;&#160;chapter&#160;&#160;<a href="TechnicalReference_CANdescs.html#158"><i>13.12&#160;&#160;…use&#160;&#160;“Dynamic&#160;&#160;Normal&#160;&#160;Addressing&#160;&#160;Multi&#160;&#160;TP”&#160;&#160;with</i>&#160;&#160;multiple&#160;<br/>tester<i>.</i></a>&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
72&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=73></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12&#160;&#160;CANdesc&#160;API&#160;</b><br/>
<b>12.1&#160;&#160;API&#160;Categories&#160;</b><br/>
<b>12.1.1&#160;&#160;Single&#160;Context&#160;<br/></b>This&#160;API&#160;category&#160;is&#160;used&#160;if&#160;no&#160;parallel&#160;processing&#160;is&#160;necessary.&#160;This&#160;is&#160;typical&#160;for&#160;the&#160;ISO&#160;<br/>14229&#160;specification.&#160;<br/>
<b>12.1.2&#160;&#160;Multiple&#160;Context (only&#160;CANdesc)&#160;<br/></b>This&#160;&#160;API&#160;&#160;category&#160;&#160;is&#160;&#160;used&#160;&#160;if&#160;&#160;parallel&#160;&#160;processing&#160;&#160;is&#160;&#160;necessary.&#160;&#160;This&#160;&#160;means&#160;&#160;not&#160;&#160;that&#160;<br/>CANdesc&#160;&#160;can&#160;&#160;work&#160;&#160;with&#160;&#160;multiple&#160;&#160;instances,&#160;&#160;but&#160;&#160;only&#160;&#160;one&#160;&#160;functional&#160;&#160;request&#160;&#160;can&#160;&#160;be&#160;<br/>processed&#160;parallel to&#160;a&#160;working&#160;physical request.&#160;<br/>
<b>12.2&#160;&#160;Data&#160;Types&#160;</b><br/>
The&#160;following&#160;standard&#160;data&#160;types are&#160;used&#160;in&#160;this document:&#160;<br/>
<i><b>vuint8&#160;</b></i><br/>
Represents&#160;8&#160;bit unsigned&#160;integer value.&#160;<br/>
<i><b>vsint8&#160;</b></i><br/>
Represents&#160;8&#160;bit signed&#160;integer value.&#160;<br/>
<i><b>vuint16&#160;</b></i><br/>
Represents&#160;16&#160;bit&#160;unsigned&#160;integer value.&#160;<br/>
<i><b>vsint16&#160;</b></i><br/>
Represents&#160;16&#160;bit signed&#160;integer value.&#160;<br/>
<i><b>vuint32&#160;</b></i><br/>
Represents&#160;32&#160;bit&#160;unsigned&#160;integer value.&#160;<br/>
<i><b>vsint32&#160;</b></i><br/>
Represents&#160;32&#160;bit signed&#160;integer value.&#160;<br/>
Table&#160;12-1:&#160;standard&#160;data&#160;types&#160;<br/>
&#160;<br/>
Additional&#160;data&#160;&#160;types&#160;used&#160;&#160;in&#160;&#160;this&#160;&#160;document&#160;&#160;are&#160;&#160;described&#160;&#160;in&#160;&#160;the&#160;corresponding&#160;function&#160;<br/>description.&#160;<br/>
<b>12.3&#160;&#160;Global&#160;Variables&#160;</b><br/>
-&#160;<br/>
<b>12.4&#160;&#160;Constants&#160;</b><br/>
<b>12.4.1&#160;&#160;Component Version&#160;<br/></b>The&#160;&#160;version&#160;&#160;of&#160;&#160;the&#160;&#160;CANdesc&#160;&#160;component&#160;&#160;consist&#160;&#160;of&#160;&#160;3&#160;&#160;parts&#160;&#160;in&#160;&#160;the&#160;&#160;following&#160;&#160;format:&#160;<br/><b>MM.SS.BB</b>,&#160;<br/>Where:&#160;<br/>
&#160;&#160;<b>MM</b>&#160;is the&#160;main&#160;version&#160;of&#160;the&#160;component,&#160;<br/>
&#160;&#160;<b>SS</b>&#160;is the&#160;subversion&#160;of&#160;the&#160;component,&#160;<br/>
&#160;&#160;<b>BB</b>&#160;is the&#160;bug-fix&#160;version&#160;of&#160;the&#160;component.&#160;<br/>
To&#160;get&#160;the&#160;current&#160;CANdesc version,&#160;the&#160;application&#160;could&#160;use&#160;the&#160;following&#160;shared&#160;data:&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
73&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=74></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
<b>Description&#160;</b><br/>
g_descMainVersion&#160;<br/>
BCD&#160;<br/>
Contains&#160;the&#160;main&#160;version&#160;part.&#160;<br/>
g_descSubVersion&#160;<br/>
BCD&#160;<br/>
Contains&#160;the&#160;subversion&#160;part.&#160;<br/>
g_descBugFixVersion&#160;<br/>
BCD&#160;<br/>
Contains&#160;the&#160;bug-fix&#160;version&#160;part.&#160;<br/>
Table&#160;12-2:&#160;Version&#160;API&#160;data&#160;<br/>
Note:&#160;The&#160;version&#160;of&#160;the&#160;module&#160;is the&#160;same&#160;as the&#160;version&#160;of&#160;the&#160;generator’s DLL&#160;file.&#160;<br/>
<b>12.5&#160;&#160;Macros&#160;</b><br/>
<b>12.5.1&#160;&#160;Data&#160;exchange&#160;<br/></b>The&#160;CANdesc&#160;provides&#160;a&#160;generic&#160;API&#160;for&#160;splitting&#160;a&#160;multi-byte&#160;(up&#160;to&#160;4&#160;bytes)&#160;variable&#160;to&#160;a&#160;<br/>byte&#160;sequence&#160;with&#160;platform&#160;transparent&#160;access&#160;to&#160;each&#160;byte,&#160;and&#160;assembling&#160;a&#160;multi-byte&#160;<br/>(up&#160;to&#160;4&#160;bytes)&#160;variable&#160;from&#160;a&#160;sequence&#160;of&#160;bytes.&#160;<br/>
<b>12.5.1.1&#160;&#160;Splitting 16&#160;bit data&#160;<br/></b>The&#160;&#160;following&#160;&#160;function&#160;&#160;could&#160;&#160;be&#160;&#160;used&#160;&#160;to&#160;&#160;get&#160;&#160;platform&#160;&#160;independent&#160;&#160;access&#160;&#160;to&#160;&#160;the&#160;<br/>corresponding&#160;bytes of&#160;16&#160;bit data&#160;variable:&#160;<br/><b>vuint8&#160;DescGetHiByte(16BitData)&#160;</b><br/>
<b>&#160;</b><br/>
<b>vuint8&#160;DescGetLoByte(16BitData)&#160;</b><br/>
<b>&#160;</b><br/>
<b>12.5.1.2&#160;&#160;Splitting 32&#160;bit data&#160;<br/></b>The&#160;&#160;following&#160;&#160;function&#160;&#160;could&#160;&#160;be&#160;&#160;used&#160;&#160;to&#160;&#160;get&#160;&#160;platform&#160;&#160;independent&#160;&#160;access&#160;&#160;to&#160;&#160;the&#160;<br/>corresponding&#160;&#160;bytes of&#160;32&#160;bit data&#160;variable:&#160;<br/><b>vuint8&#160;DescGetHiHiByte(32BitData)&#160;</b><br/>
<b>&#160;</b><br/>
<b>vuint8&#160;DescGetHiLoByte(32BitData)&#160;</b><br/>
<b>&#160;</b><br/>
<b>vuint8&#160;DescGetLoHiByte(32BitData)&#160;</b><br/>
<b>&#160;</b><br/>
<b>vuint8&#160;DescGetLoLoByte(32BitData)&#160;</b><br/>
<b>&#160;</b><br/>
<b>12.5.1.3&#160;&#160;Assembling 16&#160;bit data&#160;<br/></b>The&#160;application&#160;can&#160;create&#160;the&#160;16&#160;bit signal&#160;from&#160;a&#160;byte&#160;stream&#160;using&#160;the&#160;following&#160;API:&#160;<br/><b>uint16&#160;&#160;DescMake16Bit(hiByte,&#160;loByte)&#160;<br/></b>where the&#160;<b>hiByte,&#160;loByte&#160;</b>are the&#160;corresponding&#160;bytes for the&#160;returned&#160;16&#160;bit&#160;data.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
74&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=75></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.5.1.4&#160;&#160;Assembling 32&#160;bit data&#160;<br/></b>The&#160;application&#160;can&#160;create&#160;the&#160;32&#160;bit signal&#160;from&#160;a&#160;byte&#160;stream&#160;using&#160;the&#160;following&#160;API:&#160;<br/><b>uint32&#160;DescMake32Bit(HiHiByte,&#160;HiLoByte,&#160;LoHiByte,&#160;LoLoByte)&#160;<br/></b>where&#160;the&#160;<b>HiHiByte,&#160;HiLoByte,&#160;LoHiByte,&#160;LoLoByte&#160;</b>are&#160;the&#160;corresponding&#160;bytes&#160;for&#160;the&#160;<br/>returned&#160;32&#160;bit&#160;dat&#160;<br/>
<b>12.6&#160;&#160;Functions&#160;</b><br/>
<b>12.6.1&#160;&#160;Administrative&#160;Functions&#160;</b><br/>
<b>12.6.1.1&#160;&#160;DescInitPowerOn()&#160;</b><br/>
<b>DescInitPowerOn&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescInitPowerOn</b>&#160;(DescInitParam initParameter)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescInitPowerOn</b>&#160;(DescInitParam initParameter)&#160;<br/>
<b>Parameter&#160;</b><br/>
initParameter&#160;<br/>
Manufacturer&#160;specific&#160;type,&#160;please&#160;refer&#160;‘CANdesc:&#160;OEM&#160;<br/>specifics’&#160;document&#160;&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>PowerOn Initialization of&#160;the&#160;CANdesc.&#160;&#160;<br/>This&#160;function&#160;has&#160;to&#160;be&#160;called&#160;once before all&#160;other&#160;functions&#160;of&#160;CANdesc&#160;after&#160;PowerOn.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Correctly&#160;initialized&#160;CAN-driver&#160;via&#160;<b>CanInitPowerOn()</b>&#160;and&#160;TransportLayer&#160;via&#160;<br/><b>TpInitPowerOn()</b>.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Background-loop level&#160;with&#160;global&#160;disabled&#160;interrupts&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;<b>DescInitPowerOn&#160;(initParameter)&#160;</b>must&#160;be&#160;called after&#160;<b>TpInitPowerOn()&#160;</b>was called&#160;<br/>
(please,&#160;refer&#160;the&#160;/TPMC/&#160;documentation),&#160;otherwise the&#160;reserved&#160;diagnostic&#160;<br/>connection&#160;will&#160;be&#160;los&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
75&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=76></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.1.2&#160;&#160;DescInit()&#160;</b><br/>
<b>DescInit&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescInit</b>&#160;(DescInitParam initParameter)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescInit</b>&#160;(DescInitParam initParameter)&#160;<br/>
<b>Parameter&#160;</b><br/>
initParameter&#160;<br/>
Manufacturer&#160;specific&#160;type,&#160;please&#160;refer&#160;‘CANdesc&#160;Part&#160;IV:&#160;<br/>OEM&#160;specifics’&#160;document&#160;&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Re-initialization of&#160;CANdesc.&#160;&#160;<br/>This&#160;function&#160;can&#160;be&#160;called&#160;to&#160;re-initialize CANdesc&#160;(e.g.&#160;after&#160;WakeUp).&#160;All&#160;internal&#160;states&#160;<br/>will&#160;be&#160;set&#160;to default,&#160;except&#160;the&#160;states&#160;in&#160;this&#160;initParameter&#160;(e.g.&#160;Session&#160;or&#160;<br/>CommunicationControl).&#160;<br/>
<b>Pre-conditions&#160;<br/></b>CANdesc&#160;was once initialized&#160;via&#160;<b>DescInitPowerOn&#160;()</b>&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Background-loop level&#160;with&#160;global&#160;disabled&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
76&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=77></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.1.3&#160;&#160;DescTask()&#160;</b><br/>
<b>DescTask&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescTask</b>&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescTask</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;function&#160;<i><b>DescTask()</b></i>&#160;has&#160;to be&#160;called&#160;periodically&#160;(cycle time&#160;TDescCallCycle)&#160;by&#160;the&#160;<br/>
application.&#160;<br/>Within the&#160;context&#160;of&#160;this&#160;function&#160;the&#160;interaction&#160;with the&#160;application is performed.&#160;In&#160;<br/>addition&#160;the&#160;monitoring&#160;of&#160;the&#160;timings&#160;is&#160;done,&#160;therefore&#160;the&#160;accuracy&#160;of&#160;the timings&#160;<br/>depends&#160;on&#160;the&#160;call&#160;cycle and on&#160;the&#160;accuracy&#160;of&#160;the&#160;calls.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Background-loop level&#160;or&#160;OSEK-OS&#160;Task.&#160;The&#160;task&#160;should have a&#160;lower&#160;or&#160;equal&#160;priority&#160;<br/>than all&#160;other&#160;interaction&#160;to&#160;the&#160;CANdesc&#160;component.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;May&#160;not&#160;be&#160;called&#160;if&#160;the&#160;<i><b>DescStateTask()</b></i>&#160;and&#160;<i><b>DescTimerTask()</b></i>&#160;are&#160;called.&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
77&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=78></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.1.4&#160;&#160;DescStateTask()&#160;</b><br/>
<b>DescStateTask&#160;</b><br/>
<b>Available&#160;since&#160;4.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescStateTask</b>&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescStateTask</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Motivation:&#160;Using&#160;a&#160;single&#160;task&#160;function&#160;for&#160;timers&#160;and processing&#160;leads&#160;either&#160;to slow&#160;<br/>processing&#160;or&#160;to&#160;faster&#160;timers&#160;which costs&#160;runtime&#160;for&#160;the&#160;ECU.&#160;The&#160;timers&#160;need&#160;very&#160;<br/>stable cyclical&#160;call&#160;but&#160;the processing&#160;tasks&#160;may&#160;be&#160;done&#160;“as soon as&#160;possible”&#160;(i.e.&#160;using&#160;<br/>OSEK&#160;to&#160;be&#160;assigned&#160;to&#160;lower&#160;priority&#160;task).&#160;<br/>The&#160;function&#160;<i><b>DescStateTask()</b></i>&#160;has&#160;to&#160;be&#160;called&#160;periodically&#160;by&#160;the&#160;application.&#160;It&#160;is&#160;not&#160;a&#160;<br/>timer&#160;task&#160;–&#160;it&#160;has&#160;no&#160;specific&#160;time&#160;period.&#160;As&#160;smaller&#160;this&#160;tasks&#160;call&#160;period&#160;is,&#160;so&#160;faster&#160;will&#160;<br/>be&#160;the&#160;service processing.&#160;&#160;<br/>This&#160;task&#160;function&#160;will&#160;process&#160;received&#160;request&#160;and&#160;to&#160;control&#160;the&#160;transmission&#160;of&#160;the&#160;<br/>responses.&#160;Depending&#160;on the&#160;ECU&#160;requirements&#160;it&#160;is&#160;recommended&#160;to&#160;call&#160;this&#160;task&#160;as&#160;<br/>soon as&#160;possible to&#160;avoid delays&#160;of&#160;the&#160;response&#160;(e.g.&#160;dynamically&#160;defined DID,&#160;<br/>scheduled&#160;data,&#160;etc.),&#160;but&#160;<b>take&#160;into&#160;account&#160;that&#160;within&#160;this&#160;task&#160;the&#160;corresponding&#160;<br/>MainHandler&#160;will&#160;be&#160;executed&#160;too.</b>&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Background-loop level&#160;or&#160;OSEK-OS&#160;Task.&#160;The&#160;Task&#160;should have a&#160;lower&#160;or&#160;equal&#160;priority&#160;<br/>than all&#160;other&#160;interaction&#160;to&#160;the&#160;CANdesc&#160;component.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;May&#160;not&#160;be&#160;called&#160;if&#160;the&#160;<i><b>DescTask()</b></i>&#160;is&#160;used&#160;(reentrancy&#160;is&#160;forbidden).&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
78&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=79></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.1.5&#160;&#160;DescTimerTask()&#160;</b><br/>
<b>DescTimerTask&#160;</b><br/>
<b>Available&#160;since&#160;4.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescTimerTask</b>&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescTimerTask</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Motivation:&#160;Using&#160;a&#160;single task&#160;function&#160;for&#160;timers&#160;and processing&#160;leads&#160;either&#160;to slow&#160;<br/>processing&#160;or&#160;to&#160;faster&#160;timers&#160;which costs&#160;runtime&#160;for&#160;the&#160;ECU.&#160;The&#160;timers&#160;need&#160;very&#160;<br/>stable cyclical&#160;call&#160;but&#160;the processing&#160;tasks&#160;may&#160;be&#160;done&#160;“as soon as&#160;possible”&#160;(i.e.&#160;using&#160;<br/>OSEK&#160;to&#160;be&#160;assigned&#160;to&#160;lower&#160;priority&#160;task).&#160;<br/>The&#160;function&#160;<i><b>DescTimerTask()</b></i>&#160;has&#160;to&#160;be&#160;called&#160;periodically&#160;by&#160;the&#160;application in&#160;the&#160;<br/>configured&#160;task&#160;period.&#160;It&#160;can&#160;be&#160;called&#160;as&#160;slow&#160;as possible to&#160;free&#160;run&#160;time&#160;resources.&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Background-loop level&#160;or&#160;OSEK-OS&#160;Task.&#160;The&#160;Task&#160;should have a&#160;lower&#160;or&#160;equal&#160;priority&#160;<br/>than all&#160;other&#160;interaction&#160;to&#160;the&#160;CANdesc&#160;component.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;May&#160;not&#160;be&#160;called&#160;if&#160;the&#160;<i><b>DescTask()</b></i>&#160;is&#160;used.&#160;This&#160;will&#160;lead to either&#160;reentrancy&#160;<br/>
(consistency)&#160;problems&#160;or/and&#160;to&#160;timing issues.&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
79&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=80></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.1.6&#160;&#160;DescGetActivityState()&#160;</b><br/>
<b>DescGetActivityState&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
DescContextActivity&#160;DescGetActivityState&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
DescContextActivity&#160;DescGetActivityState&#160;(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
reference&#160;to&#160;the&#160;corresponding&#160;request&#160;context&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
1. kDescContextIdle&#160;<br/>
1.&#160;&#160;There is&#160;currently&#160;no&#160;request&#160;processing&#160;(even&#160;<br/>
when scheduler&#160;is&#160;active).&#160;<br/>
2. kDescContextActiveRxBegin&#160;<br/>
2.&#160;&#160;Currently&#160;request&#160;reception&#160;is&#160;active.&#160;<br/>
3. kDescContextActiveRxEnd&#160;<br/>
3.&#160;&#160;Reception&#160;finished,&#160;request&#160;will&#160;be&#160;processed.&#160;<br/>
4. kDescContextActiveProcess&#160;<br/>
4.&#160;&#160;The&#160;request&#160;was received,&#160;is&#160;under&#160;processing&#160;<br/>
5. kDescContextActiveProcessEnd&#160;<br/>
now&#160;<br/>
6. kDescContextActiveTxReady&#160;<br/>
5.&#160;&#160;DescProcessingDone called&#160;waiting&#160;for&#160;data&#160;<br/>
before&#160;starting&#160;the&#160;transmission.&#160;<br/>
7. kDescContextActiveTx&#160;<br/>
6.&#160;&#160;Ready&#160;for&#160;response&#160;transmission.&#160;<br/>
8. kDescContextActivePostProcess&#160;<br/>
7.&#160;&#160;Transmission&#160;of&#160;the&#160;response is currently&#160;active.&#160;<br/>
&#160;<br/>
8.&#160;&#160;Transmission/processing ended.&#160;Post-processing&#160;&#160;<br/>
will&#160;be&#160;performed.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Motivation:&#160;Sometimes&#160;the&#160;knowledge about&#160;the&#160;presence&#160;of&#160;a&#160;tester&#160;is&#160;necessary.&#160;A&#160;typical&#160;<br/>use-case&#160;is&#160;to&#160;avoid the&#160;ECU&#160;from&#160;going&#160;into sleep mode.&#160;&#160;<br/>A&#160;non-default&#160;session&#160;indicates&#160;that&#160;a&#160;tester&#160;is&#160;present.&#160;But&#160;how&#160;can&#160;this&#160;be&#160;done,&#160;if&#160;the&#160;ECU&#160;is&#160;<br/>in the&#160;default&#160;session?&#160;<br/>Due&#160;to&#160;that&#160;fact&#160;&#160;the&#160;ECU&#160;application can&#160;call&#160;the&#160;function&#160;<i><b>DescGetActivityState()&#160;</b></i>any&#160;time&#160;to&#160;<br/>check&#160;if&#160;CANdesc&#160;has&#160;something&#160;to do&#160;or&#160;is&#160;in&#160;idle mode.&#160;This&#160;can&#160;be&#160;used&#160;e.g.&#160;to change&#160;the&#160;<br/>state&#160;of&#160;the&#160;ECU&#160;sleep&#160;mode.&#160;&#160;<br/><b>Note:</b>&#160;The&#160;return&#160;value&#160;is&#160;bit&#160;coded&#160;and&#160;&#160;any&#160;senseful&#160;combination&#160;of&#160;the&#160;above mentioned&#160;<br/>values&#160;is&#160;possible (e.g.&#160;<i><b>kDescContextActiveRxBegin</b></i>&#160;|&#160;<i><b>kDescContextActivePostProcess</b></i>).&#160;<br/>Please check&#160;always&#160;with bit&#160;test&#160;(and operation)&#160;and not&#160;using&#160;the&#160;value&#160;comparison.&#160;&#160;&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
80&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=81></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.2&#160;&#160;Multi Variant&#160;Configuration Functions&#160;</b><br/>
<b>12.6.2.1&#160;&#160;DescInitConfigVariant()&#160;</b><br/>
<b>DescInitConfigVariant&#160;</b><br/>
<b>Available&#160;since&#160;6.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;and&#160;Multi&#160;Context&#160;<br/>
void&#160;<b>DescInitConfigVariant</b>&#160;(DescVariantMask varMask)&#160;<br/>
<b>Parameter&#160;</b><br/>
varMask&#160;<br/>
Contains the&#160;VSG(s)&#160;that&#160;shall&#160;be&#160;active additionally&#160;to&#160;the&#160;base&#160;<br/>variant&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>After&#160;CANdesc&#160;has&#160;been&#160;initialized&#160;via one of&#160;the&#160;APIs&#160;&#160;<br/>DescInitPowerOn&#160;&#160;<br/>or&#160;&#160;<br/>DescInit;&#160;<br/>the&#160;base&#160;variant&#160;will&#160;be&#160;only&#160;active (refer&#160;to&#160;the&#160;chapter<a href="TechnicalReference_CANdescs.html#47">&#160;<i>8&#160;Multi&#160;Identity&#160;</i>&#160;</a>for&#160;more&#160;details).&#160;If&#160;<br/>additionally&#160;other&#160;variants&#160;shall&#160;be&#160;activated,&#160;this&#160;API&#160;shall&#160;be&#160;called&#160;with a&#160;parameter&#160;<br/>value&#160;that&#160;represents&#160;the&#160;variants&#160;(multiple variants&#160;can&#160;be&#160;OR-ed)&#160;that&#160;shall&#160;be&#160;activated.&#160;<br/>&#160;<br/>The&#160;variant&#160;values&#160;that&#160;shall&#160;be&#160;used&#160;for&#160;building&#160;the&#160;API&#160;parameter&#160;value&#160;are&#160;located&#160;in&#160;<br/>the&#160;desc.h&#160;file.&#160;The&#160;naming&#160;convention&#160;is&#160;as&#160;follows:&#160;<br/><b>kDescVariant&lt;variant/VSG&#160;qualifier&gt;</b>&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-Multi-&#160;variant&#160;(VSG)&#160;mode&#160;is&#160;activated&#160;for&#160;CANdesc.&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Shall&#160;not&#160;interrupt&#160;the&#160;DescTask&#160;function.&#160;<br/>
&#160;&#160;Best&#160;place&#160;to&#160;call&#160;this&#160;API&#160;is&#160;immediately&#160;after&#160;the&#160;CANdesc&#160;initialization&#160;API-call&#160;while&#160;<br/>
the&#160;interrupts&#160;are&#160;still&#160;locked.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
81&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=82></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.2.2&#160;&#160;DescGetConfigVariant()&#160;</b><br/>
<b>DescGetConfigVariant&#160;</b><br/>
<b>Available&#160;since&#160;6.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;and&#160;Multi&#160;Context&#160;<br/>
DescVariantMask&#160;<b>DescGetConfigVariant</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Variant mask&#160;<br/>
Represents&#160;the&#160;bit-mapped&#160;value&#160;of&#160;the&#160;currently&#160;active variants&#160;<br/>in the&#160;ECU.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;API&#160;returns&#160;the&#160;bit-mapped value&#160;of&#160;the&#160;currently&#160;active variants&#160;set&#160;in CANdesc.&#160;&#160;<br/>&#160;<br/>The&#160;variant&#160;values&#160;that&#160;shall&#160;be&#160;used&#160;for&#160;checking the&#160;API&#160;return value&#160;are&#160;located&#160;in&#160;the&#160;<br/>desc.h&#160;file.&#160;The&#160;naming&#160;convention&#160;is&#160;as&#160;follows:&#160;<br/><b>kDescVariant&lt;variant/VSG&#160;qualifier&gt;</b>&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-Multi-&#160;variant&#160;(VSG)&#160;mode&#160;is&#160;activated&#160;for&#160;CANdesc.&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;This&#160;API&#160;can&#160;be&#160;called&#160;from&#160;any&#160;call-context.&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;-&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
82&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=83></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.3&#160;&#160;Service&#160;Functions&#160;</b><br/>
<b>12.6.3.1&#160;&#160;DescSetNegResponse()&#160;</b><br/>
<b>DescSetNegResponse&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescSetNegResponse</b>&#160;(DescNegResCode errorCode)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescSetNegResponse</b>&#160;(vuint8 iContext, DescNegResCode errorCode)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
reference&#160;to&#160;the&#160;corresponding&#160;request&#160;context&#160;<br/>
errorCode&#160;<br/>
the&#160;<b>errorCode&#160;</b>is&#160;the&#160;one&#160;of&#160;the&#160;provided error&#160;code&#160;constants&#160;<br/>of&#160;CANdesc&#160;in&#160;the&#160;desc.h&#160;file with the&#160;following&#160;naming&#160;<br/>convention:&#160;<br/><b>kDescNrc&lt;error&#160;name&gt;</b>.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>In&#160;the&#160;PreHandler&#160;or&#160;in&#160;the&#160;MainHandler&#160;function&#160;the&#160;application has&#160;the&#160;possibility&#160;of&#160;<br/>forcing&#160;negative&#160;response with a&#160;certain negative response&#160;code&#160;for&#160;the&#160;current&#160;request&#160;<br/>when it&#160;is&#160;necessary.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Within a&#160;‘Service PreHandler’&#160;function&#160;and within or&#160;after&#160;a&#160;‘Service MainHandler’&#160;function&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Once&#160;an&#160;error&#160;was set&#160;it&#160;can&#160;not&#160;be&#160;overwritten&#160;or&#160;reset.&#160;&#160;<br/>
&#160;&#160;This&#160;function&#160;does&#160;not&#160;finish the&#160;processing of&#160;the&#160;request.&#160;It&#160;just&#160;sets&#160;a&#160;certain error&#160;<br/>
and after&#160;that&#160;the&#160;application&#160;must&#160;confirm&#160;that&#160;the request&#160;processing was&#160;completely&#160;<br/>finished&#160;by&#160;calling&#160;DescProcessingDone().&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
83&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=84></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.3.2&#160;&#160;DescProcessingDone()&#160;</b><br/>
<b>DescProcessingDone&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescProcessingDone</b>&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescProcessingDone</b>&#160;(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
reference&#160;to&#160;the&#160;corresponding&#160;request&#160;context&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>After&#160;completing&#160;the&#160;request&#160;execution&#160;the&#160;application must&#160;call&#160;the&#160;API&#160;function.&#160;<br/>By&#160;calling&#160;this&#160;function,&#160;depending&#160;on&#160;the&#160;previous&#160;actions&#160;of&#160;the&#160;application&#160;the&#160;CANdesc&#160;<br/>module will&#160;either&#160;send a&#160;response&#160;(positive/negative depending&#160;on&#160;the&#160;error&#160;state&#160;<br/>machine)&#160;or&#160;no&#160;response&#160;will&#160;be&#160;send if&#160;the&#160;application/CANdesc&#160;decides&#160;that&#160;there&#160;must&#160;<br/>be&#160;no&#160;response&#160;(please&#160;refer&#160;the&#160;Part&#160;III&#160;User&#160;Manual)&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Within or&#160;after&#160;a ‘Service MainHandler’&#160;function&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;<br/>
<b>12.6.4&#160;&#160;Service&#160;callback&#160;functions&#160;<br/></b>In&#160;CANdesc&#160;6&#160;the&#160;naming&#160;convention&#160;of&#160;the&#160;service&#160;callback&#160;function&#160;has&#160;changed&#160;due&#160;to&#160;<br/>standardization&#160;reasons.&#160;In<a href="TechnicalReference_CANdescs.html#87">&#160;Table&#160;12-3,&#160;</a>the&#160;new&#160;naming&#160;convention&#160;can&#160;be&#160;found.&#160;Earlier&#160;<br/>versions&#160;of&#160;CANdesc&#160;(&lt;&#160;6.0)&#160;used&#160;always&#160;Service-Qualifiers&#160;and&#160;Instance-Qualifiers&#160;from&#160;<br/>the&#160;&#160;CDD&#160;&#160;file.&#160;&#160;Since&#160;&#160;CANdesc&#160;&#160;6,&#160;&#160;for&#160;&#160;Service-Qualifiers&#160;&#160;always&#160;&#160;standardized&#160;&#160;names&#160;&#160;are&#160;<br/>used,&#160;&#160;whereas&#160;&#160;for&#160;&#160;Instance-Qualifiers&#160;&#160;either&#160;&#160;a&#160;&#160;standardized&#160;&#160;name&#160;&#160;or&#160;&#160;the&#160;&#160;name&#160;&#160;from&#160;&#160;the&#160;<br/>CDD&#160;file&#160;is&#160;used.&#160;The&#160;names&#160;of&#160;the&#160;service&#160;callback&#160;functions&#160;are&#160;based&#160;on&#160;the&#160;following&#160;<br/>pattern:&#160;<br/>
ApplDesc[Pre|Post]&lt;ServiceQualifier&gt;&lt;DiagInstanceQualifier&gt;&#160;<br/>
When&#160;migrating&#160;to&#160;CANdesc 6&#160;the&#160;service&#160;callbacks have&#160;to&#160;be&#160;renamed&#160;according&#160;to&#160;the&#160;<br/>new&#160;naming&#160;convention.<b>&#160;</b><br/>
<b>Service&#160;</b><br/>
<b>SubService&#160;</b><br/>
<b>Instance-Qualifier&#160;</b><br/>
<b>Service-Qualifier&#160;</b><br/>
0x01&#160;<br/>
Default&#160;<br/>
0x10&#160;<br/>
StartSession&#160;<br/>
0x02&#160;<br/>
Programming&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
84&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=85></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Service&#160;</b><br/>
<b>SubService&#160;</b><br/>
<b>Instance-Qualifier&#160;</b><br/>
<b>Service-Qualifier&#160;</b><br/>
0x03&#160;<br/>
Extended&#160;<br/>
0x01&#160;<br/>
Hard&#160;<br/>
0x02&#160;<br/>
KeyOffOn&#160;<br/>
0x11&#160;<br/>
0x03&#160;<br/>
Soft&#160;<br/>
EcuReset&#160;<br/>
0x04&#160;<br/>
EnableRapidShutDown&#160;<br/>
0x05&#160;<br/>
DisableRapidShutDown&#160;<br/>
0x14&#160;<br/>
None&#160;<br/>
DiagInfo&#160;<br/>
Clear&#160;<br/>
0x01&#160;<br/>
RNODTCBSM&#160;<br/>
ReadDtc&#160;<br/>
0x02&#160;<br/>
RDTCBSM&#160;<br/>
0x03&#160;<br/>
RDTCSSI&#160;<br/>
0x04&#160;<br/>
RDTCSSBDTC&#160;<br/>
0x05&#160;<br/>
RDTCSSBRN&#160;<br/>
0x06&#160;<br/>
RDTCEDRBDN&#160;<br/>
0x07&#160;<br/>
RNODTCBSMR&#160;<br/>
0x08&#160;<br/>
RDTCBSMR&#160;<br/>
0x09&#160;<br/>
RSIODTC&#160;<br/>
0x0A&#160;<br/>
RSUPDTC&#160;<br/>
0x0B&#160;<br/>
RFTFDTC&#160;<br/>
0x0C&#160;<br/>
RFCDTC&#160;<br/>
0x19&#160;<br/>
0x0D&#160;<br/>
RMRTFDTC&#160;<br/>
0x0E&#160;<br/>
RMRCDTC&#160;<br/>
0x0F&#160;<br/>
RMMDTCBSM&#160;<br/>
0x10&#160;<br/>
RMDEDRBDN&#160;<br/>
0x11&#160;<br/>
RNOMMDTCBSM&#160;<br/>
0x12&#160;<br/>
RNOOBDDTCBSM&#160;<br/>
0x13&#160;<br/>
ROBDDTCBSM&#160;<br/>
0x14&#160;<br/>
RDTCFDC&#160;<br/>
0x15&#160;<br/>
RDTCWPS&#160;<br/>
0x16&#160;<br/>
RDTCRDIDBDN&#160;<br/>
0x41&#160;<br/>
RWWHOBDNDTCBMR&#160;<br/>
0x42&#160;<br/>
RWWHOBDDTCBMR&#160;<br/>
0x55&#160;<br/>
RWWHOBDDTCWPS&#160;<br/>
0x22&#160;<br/>
Any&#160;<br/>
Instance-Qualifier from&#160;CDD&#160;<br/>
ReadDid&#160;<br/>
0x23&#160;<br/>
None&#160;<br/>
MemoryByAddress&#160;<br/>
Read&#160;<br/>
0x24&#160;<br/>
Any&#160;<br/>
Instance-Qualifier from&#160;CDD&#160;<br/>
ReadScalingDid&#160;<br/>
Odd&#160;Id&#160;<br/>
GetSeed&#160;<br/>
0x27&#160;<br/>
Instance-Qualifier from&#160;CDD&#160;<br/>
Even&#160;Id&#160;<br/>
SendKey&#160;<br/>
0x00&#160;<br/>
EnableRxEnableTx&#160;<br/>
0x28&#160;<br/>
CommCtrl&#160;<br/>
0x01&#160;<br/>
EnableRxDisableTx&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
85&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=86></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Service&#160;</b><br/>
<b>SubService&#160;</b><br/>
<b>Instance-Qualifier&#160;</b><br/>
<b>Service-Qualifier&#160;</b><br/>
0x02&#160;<br/>
DisableRxEnableTx&#160;<br/>
0x03&#160;<br/>
DisableRxDisableTx&#160;<br/>
0x01&#160;<br/>
ReadDidSlow&#160;<br/>
0x02&#160;<br/>
ReadDidMed&#160;<br/>
0x2A&#160;<br/>
Instance-Qualifier from&#160;CDD&#160;<br/>
0x03&#160;<br/>
ReadDidFast&#160;<br/>
0x04&#160;<br/>
ReadDidStop&#160;<br/>
0x01&#160;<br/>
DynDefineByDid&#160;<br/>
0x2C&#160;<br/>
0x02&#160;<br/>
Instance-Qualifier from&#160;CDD&#160;<br/>
DynDefineByAddr&#160;<br/>
0x03&#160;<br/>
DynDefineClear&#160;<br/>
0x2E&#160;<br/>
Any&#160;<br/>
Instance-Qualifier from&#160;CDD&#160;<br/>
WriteDid&#160;<br/>
0x00&#160;<br/>
IoCtrlRetCtrlToEcu&#160;<br/>
0x01&#160;<br/>
IoCtrlRstToDefault&#160;<br/>
0x2F&#160;<br/>
Instance-Qualifier from&#160;CDD&#160;<br/>
0x02&#160;<br/>
IoCtrlFrzCurrState&#160;<br/>
0x03&#160;<br/>
IoCtrlShortTermAdj&#160;<br/>
0x01&#160;<br/>
RtnCtrlStart&#160;<br/>
0x31&#160;<br/>
0x02&#160;<br/>
Instance-Qualifier from&#160;CDD&#160;<br/>
RtnCtrlStop&#160;<br/>
0x03&#160;<br/>
RtnCtrlReqRes&#160;<br/>
0x34&#160;<br/>
None&#160;<br/>
&#160;&#160;<br/>
RequestDownload&#160;<br/>
0x35&#160;<br/>
None&#160;<br/>
&#160;&#160;<br/>
RequestUpload&#160;<br/>
0x36&#160;<br/>
None&#160;<br/>
&#160;&#160;<br/>
TransferData&#160;<br/>
0x37&#160;<br/>
None&#160;<br/>
&#160;&#160;<br/>
RequestTransferExit&#160;<br/>
0x3D&#160;<br/>
None&#160;<br/>
MemoryByAddress&#160;<br/>
Write&#160;<br/>
0x3E&#160;<br/>
0x00&#160;<br/>
TesterPresent&#160;<br/>
Send&#160;<br/>
0x84&#160;<br/>
None&#160;<br/>
&#160;&#160;<br/>
SecuredDataTransmission&#160;<br/>
0x01&#160;<br/>
Enable&#160;<br/>
0x85&#160;<br/>
ControlDtcSetting&#160;<br/>
0x02&#160;<br/>
Disable&#160;<br/>
0x00&#160;<br/>
Stop&#160;<br/>
0x01&#160;<br/>
OnDtcStatChg&#160;<br/>
0x02&#160;<br/>
OnTmrInt&#160;<br/>
0x03&#160;<br/>
OnChgOfDid&#160;<br/>
0x04&#160;<br/>
ReportActEv&#160;<br/>
0x05&#160;<br/>
Start&#160;<br/>
0x06&#160;<br/>
Clear&#160;<br/>
0x86&#160;<br/>
Roe&#160;<br/>
0x07&#160;<br/>
OnCompOfVal&#160;<br/>
0x40&#160;<br/>
StStop&#160;<br/>
0x41&#160;<br/>
StOnDtcStatChg&#160;<br/>
0x42&#160;<br/>
StOnTmrInt&#160;<br/>
0x43&#160;<br/>
StOnChgOfDid&#160;<br/>
0x44&#160;<br/>
StReportActEv&#160;<br/>
0x45&#160;<br/>
StStart&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
86&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=87></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Service&#160;</b><br/>
<b>SubService&#160;</b><br/>
<b>Instance-Qualifier&#160;</b><br/>
<b>Service-Qualifier&#160;</b><br/>
0x46&#160;<br/>
StClear&#160;<br/>
0x47&#160;<br/>
StOnCompOfVal&#160;<br/>
0x01&#160;<br/>
VerifyFixedBaudrate&#160;<br/>
0x87&#160;<br/>
0x02&#160;<br/>
VerifySpecificBaudrate&#160;<br/>
LinkControl&#160;<br/>
0x03&#160;<br/>
TransitionBaudrate&#160;<br/>
Table&#160;12-3&#160;Naming&#160;convention&#160;of&#160;service&#160;callback&#160;functions&#160;in&#160;CANdesc&#160;6&#160;<br/>
<b>12.6.4.1&#160;&#160;Service&#160;PreHandler&#160;</b><br/>
<b>ApplDescPre&lt;Service-Qualifier&#160;+&#160;Instance-Qualifier&gt;&gt;&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescPre&lt;Service-Qualifier + Instance-Qualifier&gt;&#160;</b>(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescPre&lt;Service-Qualifier + Instance-Qualifier&gt; &#160;</b>(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
the&#160;current&#160;request&#160;context&#160;location&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;PreHandler&#160;is&#160;executed&#160;before&#160;the&#160;Service MainHandler&#160;is&#160;called.&#160;In&#160;the&#160;PreHandler,&#160;<br/>the&#160;application can&#160;hook&#160;any&#160;(especially&#160;application-specific)&#160;state&#160;validations.&#160;One&#160;<br/>PreHandler&#160;implementation&#160;may&#160;be&#160;shared&#160;with different&#160;service instances&#160;(only&#160;<br/>CANdesc).&#160;&#160;<br/>To&#160;allow&#160;quite complex&#160;operations&#160;to&#160;take&#160;place,&#160;the&#160;application has&#160;access&#160;to&#160;the&#160;request&#160;<br/>data using&#160;the&#160;context&#160;data&#160;structure&#160;(if&#160;given).&#160;&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Must&#160;be&#160;configured&#160;to&#160;‘User’&#160;in attribute ‘PreHandlerSupport’’&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
87&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=88></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.4.2&#160;&#160;Service&#160;MainHandler&#160;</b><br/>
<b>ApplDesc&lt;Service-Qualifier&#160;+&#160;Instance-Qualifier&gt;&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDesc&lt;Service-Qualifier + Instance-Qualifier&gt;&#160;</b>(DescMsgContext* pMsgContext)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDesc&lt;Service-Qualifier + Instance-Qualifier&gt;&#160;</b>(DescMsgContext*&#160;pMsgContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
typedef struct&#160;&#160;<br/>
pMsgContext&#160;<br/>
{&#160;<br/>&#160;&#160;DescMsg &#160; &#160; &#160; &#160; &#160;reqData;&#160;<br/>&#160;&#160;DescMsgLen &#160; &#160; &#160; reqDataLen;&#160;&#160;<br/>&#160;&#160;DescMsg &#160; &#160; &#160; &#160; &#160;resData;&#160;<br/>&#160;&#160;DescMsgLen &#160; &#160; &#160; resDataLen;&#160;&#160;<br/>&#160;&#160;DescMsgAddInfo &#160; msgAddInfo;&#160;<br/>&#160;&#160;vuint8 &#160; &#160; &#160; &#160; &#160; iContext;&#160;<br/>&#160;&#160;t_descUsdtNetBus busInfo;&#160;&#160;<br/>} DescMsgContext;&#160;<br/>&#160;&#160;DescBitType reqType &#160; :2; /* 0x01: Phys 0x02: Func */&#160;&#160;<br/>
DescMsgAddInfo&#160;&#160;&#160;&#160;DescBitType resOnReq &#160;:2; /* 0x01: Phys 0x02: Func */&#160;&#160;<br/>
&#160;&#160;DescBitType suppPosRes:1; /* 0x00: No &#160; 0x01: Yes &#160;*/&#160;<br/>
Read access&#160;<br/>
<b>pMsgContext-&gt;reqData</b>&#160;&#160;&#160;<br/>pointer&#160;to&#160;the&#160;first&#160;byte&#160;of&#160;the&#160;already&#160;extracted&#160;request&#160;data.&#160;<br/><b>pMsgContext-&gt;reqDataLen</b>&#160;&#160;<br/>length&#160;of&#160;the&#160;extracted&#160;request&#160;data.&#160;<br/><b>pMsgContext-&gt;iContext</b>&#160;&#160;<br/>the&#160;current&#160;request&#160;context&#160;location&#160;<br/>(used only&#160;as a&#160;handle&#160;-&#160;<i>DO&#160;NOT MODIFY</i>).&#160;<br/><b>pMsgContext-&gt;msgAddInfo.reqType</b>&#160;&#160;<br/>the&#160;current&#160;request&#160;addressing&#160;method.&#160;Could be&#160;either&#160;<br/>‚kDescFuncReq’&#160;or&#160;‚kDescPhysReq’<b>&#160;</b>(bitmapped).&#160;<br/><b>pMsgContext-&gt;msgAddInfo.suppPosRes</b>&#160;&#160;<br/>if&#160;set,&#160;no&#160;positive response will&#160;be&#160;sent.&#160;(UDS&#160;only).&#160;<br/><b>pMsgContext-&gt;busInfo&#160;<br/></b>the&#160;current&#160;request&#160;communication information&#160;(i.e.&#160;driver&#160;type&#160;(CAN,&#160;<br/>MOST,&#160;FlexRay,&#160;etc.),&#160;addressing&#160;information,&#160;communication&#160;channel&#160;<br/>number,&#160;tester&#160;address&#160;(if&#160;applicable)&#160;etc.&#160;<br/>
Write access&#160;<br/>
<b>pMsgContext-&gt;resData&#160;&#160;<br/></b>pointer&#160;to&#160;the&#160;first&#160;position&#160;where the&#160;response&#160;data can&#160;be&#160;written.&#160;<br/><b>pMsgContext-&gt;resDataLen</b>&#160;&#160;<br/>length&#160;of&#160;the&#160;written&#160;data.&#160;<br/><b>pMsgContext-&gt;msgAddInfo.resOnReq</b>&#160;&#160;<br/>can&#160;be&#160;used&#160;to disable&#160;the response&#160;transmission&#160;on&#160;the&#160;current&#160;<br/>request.&#160;If&#160;set&#160;to ‘0’&#160;no&#160;response&#160;will&#160;be&#160;transmitted.&#160;Physical&#160;and&#160;<br/>function&#160;can&#160;be&#160;set&#160;separately&#160;(bitmapped).&#160;&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
88&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=89></a>Technical Reference&#160;CANdesc&#160;<br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;MainHandler&#160;processes the&#160;service request.&#160;<br/>&#160;<br/>
Perform&#160;length&#160;validation&#160;for&#160;varying&#160;length&#160;information of&#160;request.&#160;<br/>
&#160;<br/>
Disassemble any&#160;data&#160;received&#160;with the&#160;request&#160;telegram&#160;and&#160;process it,.&#160;<br/>
&#160;<br/>
Assemble any&#160;data&#160;to&#160;be&#160;send with the&#160;response&#160;and update&#160;current&#160;response&#160;<br/>length.&#160;<br/>
&#160;<br/>
Confirm&#160;that&#160;the&#160;processing&#160;is&#160;finished.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Must&#160;be&#160;configured&#160;to&#160;‘User’&#160;in attribute ‘MainHandlerSupport’&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;If&#160;used as&#160;MainHandler&#160;for&#160;Protocol&#160;Services,&#160;the&#160;Protocol-Service-Qualifier&#160;is&#160;used&#160;<br/>
instead&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
89&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=90></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.4.3&#160;&#160;Service&#160;PostHandler&#160;</b><br/>
<b>ApplDescPost&lt;Service-Qualifier&#160;+&#160;Instance-Qualifier&gt;&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescPost&lt;Service-Qualifier + Instance-Qualifier&gt;&#160;</b>(vuint8 status)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescPost&lt;Service-Qualifier + Instance-Qualifier&gt;&#160;</b>(vuint8 iContext,&#160;<br/>vuint8&#160;status)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
the&#160;current&#160;request&#160;context&#160;location&#160;<br/>
status (bit-coded)&#160;<br/>
<b>kDescPostHandlerStateOk</b>&#160;&#160;<br/>The&#160;positive response&#160;was transmitted&#160;successfully&#160;<br/><b>kDescPostHandlerStateNegResSent</b>&#160;&#160;<br/>It&#160;was a&#160;negative response&#160;<br/><b>kDescPostHandlerStateTxFailed</b>&#160;&#160;&#160;<br/>A&#160;transmission&#160;error&#160;occurred&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Any&#160;state&#160;transition&#160;may&#160;not&#160;be&#160;performed&#160;before&#160;the&#160;current&#160;service is&#160;finished&#160;<br/>completely&#160;(the&#160;last&#160;frame of&#160;the&#160;response is&#160;sent&#160;successfully).&#160;&#160;<br/>The&#160;PostHandler&#160;is&#160;executed&#160;after&#160;a&#160;confirmation&#160;of&#160;the&#160;message&#160;transmission&#160;is&#160;received&#160;<br/>and is designated&#160;for&#160;state adaptation&#160;–&#160;all&#160;other&#160;things&#160;are already&#160;done&#160;when the&#160;<br/>PostHandler&#160;is&#160;called.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Must&#160;be&#160;configured&#160;to&#160;‘User’&#160;in attribute ‘PostHandlerSupport’&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;If&#160;used as&#160;PostHandler&#160;for&#160;Protocol&#160;Services,&#160;the&#160;Protocol-Service-Qualifier&#160;is&#160;used&#160;<br/>
instead&#160;<br/>
&#160;&#160;You&#160;can&#160;override&#160;the&#160;given&#160;name&#160;extension&#160;(Service-Qualifier&#160;+&#160;Instance-Qualifier)&#160;by&#160;<br/>
using&#160;the&#160;‘PostHandlerOverrideName’.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
90&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=91></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.5&#160;&#160;User (Unknown)&#160;Service&#160;Handling&#160;<br/></b>In&#160;some&#160;cases&#160;the&#160;ECU&#160;shall&#160;support&#160;a&#160;service&#160;which&#160;is&#160;not&#160;described&#160;in&#160;the&#160;common&#160;way&#160;<br/>for&#160;CANdesc&#160;(by&#160;means&#160;of&#160;CANdelaStudio/GENtool).&#160;With&#160;a&#160;little&#160;bit&#160;more&#160;effort&#160;inside&#160;the&#160;<br/>application&#160;&#160;than&#160;&#160;for&#160;&#160;the&#160;&#160;“known”&#160;&#160;services&#160;&#160;the&#160;&#160;ECU&#160;&#160;is&#160;&#160;still&#160;&#160;be&#160;&#160;able&#160;&#160;to&#160;&#160;support&#160;&#160;those&#160;&#160;user&#160;<br/>defined&#160;services.&#160;The&#160;effort&#160;comes&#160;form&#160;the&#160;fact&#160;that&#160;CANdesc&#160;knows&#160;nothing&#160;about&#160;this&#160;<br/>service&#160;(e.g.&#160;session,&#160;security&#160;or&#160;other&#160;states&#160;described&#160;in&#160;the&#160;CDD&#160;configuring&#160;CANdesc,&#160;<br/>addressing&#160;methods allowed&#160;for&#160;those&#160;services,&#160;etc.)&#160;and&#160;therefore&#160;the&#160;application&#160;must&#160;do&#160;<br/>this&#160;&#160;work&#160;&#160;for&#160;&#160;each&#160;&#160;user&#160;&#160;defined&#160;&#160;service&#160;&#160;by&#160;&#160;itself.&#160;&#160;In&#160;&#160;fact&#160;&#160;for&#160;&#160;CANdesc&#160;&#160;there&#160;&#160;is&#160;&#160;only&#160;&#160;one&#160;<br/>“unknown”&#160;service&#160;and&#160;it&#160;is&#160;up&#160;to&#160;the&#160;application&#160;to&#160;differentiate&#160;between&#160;multiple&#160;unknown&#160;<br/>service(s).&#160;&#160;<br/>Attention:&#160;This&#160;feature&#160;is available&#160;since&#160;version&#160;2.11.00&#160;of&#160;CANdesc(Basic).&#160;<br/>
<b>12.6.5.1&#160;&#160;How&#160;it&#160;works&#160;<br/></b>If&#160;&#160;the&#160;&#160;feature&#160;&#160;“Support&#160;&#160;Generic&#160;&#160;User&#160;&#160;Service”&#160;&#160;is&#160;&#160;enabled&#160;&#160;in&#160;&#160;the&#160;&#160;GENtool&#160;&#160;CANdesc&#160;&#160;uses&#160;<br/>following&#160;handling:&#160;<br/>
-&#160;&#160;if&#160;&#160;a&#160;&#160;service&#160;&#160;was&#160;&#160;not&#160;&#160;recognized&#160;&#160;by&#160;&#160;its&#160;&#160;SID,&#160;&#160;before&#160;&#160;the&#160;&#160;automatic&#160;&#160;negative&#160;<br/>
response&#160;&#160;transmission&#160;&#160;will&#160;&#160;be&#160;&#160;sent,&#160;&#160;the&#160;&#160;application&#160;&#160;will&#160;&#160;be&#160;&#160;called&#160;&#160;(see&#160;<br/><a href="TechnicalReference_CANdescs.html#92">12.6.5.2&#160;&#160;ApplDescCheckUserService)&#160;&#160;</a>to&#160;&#160;check&#160;&#160;this&#160;&#160;SID&#160;&#160;too.&#160;&#160;If&#160;&#160;it&#160;&#160;can&#160;&#160;not&#160;<br/>recognize&#160;it&#160;as a&#160;valid&#160;one&#160;the&#160;usual negative&#160;response&#160;will be&#160;sent.&#160;<br/>
-&#160;&#160;If&#160;&#160;the&#160;&#160;application&#160;&#160;has&#160;&#160;accepted&#160;&#160;the&#160;&#160;SID,&#160;&#160;then&#160;&#160;a&#160;&#160;special&#160;&#160;“user&#160;&#160;service”&#160;<br/>
MainHandler will be&#160;called&#160;(see<a href="TechnicalReference_CANdescs.html#94">&#160;12.6.5.4&#160;Generic User Service&#160;MainHandler).</a>&#160;<br/>
-&#160;&#160;If&#160;&#160;in&#160;&#160;GENtool&#160;&#160;“Support&#160;&#160;Generic&#160;&#160;User&#160;&#160;Service&#160;&#160;PostHandler”&#160;&#160;is&#160;&#160;set,&#160;&#160;after&#160;&#160;the&#160;<br/>
request&#160;&#160;processing&#160;&#160;has&#160;&#160;been&#160;&#160;accomplished,&#160;&#160;a&#160;&#160;special&#160;&#160;“user&#160;&#160;service”&#160;<br/>PostHandler will be&#160;called&#160;(see<a href="TechnicalReference_CANdescs.html#95">&#160;12.6.5.5&#160;Generic User Service&#160;PostHandler).</a>&#160;<br/>
<b>Note:&#160;</b><br/>
-&#160;&#160;Since&#160;CANdesc&#160;doesn’t&#160;distinguish&#160;user&#160;defined&#160;services,&#160;a&#160;special&#160;API&#160;was&#160;<br/>
designed&#160;to&#160;get&#160;the&#160;application&#160;the&#160;opportunity&#160;to&#160;dispatch&#160;among&#160;the&#160;SIDs&#160;<br/>(in&#160;MainHandler&#160;and&#160;in&#160;the&#160;PostHandler).&#160;<br/>
-&#160;&#160;The&#160;user&#160;defined&#160;services&#160;are&#160;processed&#160;on&#160;service&#160;id&#160;level&#160;which&#160;means the&#160;<br/>
application&#160;shall&#160;dispatch&#160;and&#160;do&#160;the&#160;whole&#160;format&#160;check&#160;of&#160;these&#160;requests.&#160;<br/>The&#160;state&#160;management&#160;shall&#160;be&#160;performed&#160;bye&#160;application,&#160;too.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
91&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=92></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.5.2&#160;&#160;ApplDescCheckUserService()&#160;</b><br/>
<b>ApplDescCheckUserService&#160;</b><br/>
<b>Available&#160;since&#160;2.11.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
vuint8&#160;<b>ApplDescCheckUserService&#160;</b>(DescMsgItem sid)&#160;<br/>
Multi&#160;Context&#160;<br/>
vuint8&#160;<b>ApplDescCheckUserService&#160;</b>(DescMsgItem sid)&#160;<br/>
<b>Parameter&#160;</b><br/>
sid&#160;<br/>
The&#160;service identifier&#160;which is currently&#160;under&#160;processing.&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
1.&#160;&#160;kDescOk&#160;<br/>
1.&#160;&#160;Return&#160;this&#160;value&#160;if&#160;the&#160;service id&#160;is&#160;a&#160;“user&#160;defined”&#160;one.&#160;<br/>
2.<br/>
2.&#160;&#160;Return&#160;this&#160;value&#160;if&#160;the&#160;service id&#160;is&#160;unknown&#160;for&#160;the&#160;<br/>
&#160;&#160;kDescFailed&#160;<br/>
application too.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;currently&#160;received&#160;request&#160;contains an&#160;unknown&#160;for&#160;CANdesc&#160;service Id.&#160;Within&#160;this&#160;<br/>function&#160;the&#160;ECU&#160;application has&#160;to&#160;decide&#160;immediately&#160;if&#160;the&#160;SID&#160;is&#160;one&#160;of&#160;the&#160;user&#160;<br/>defined or&#160;not.&#160;Depending on&#160;the&#160;return value,&#160;CANdesc&#160;will&#160;process&#160;further&#160;this&#160;request&#160;<br/>or&#160;will&#160;reject&#160;it&#160;by&#160;sending negative response&#160;‘ServiceNotSupported’.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>The&#160;“Support&#160;Generic&#160;User&#160;Service”&#160;option&#160;was enabled&#160;in the&#160;GENtool&#160;configuration.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()&#160;</b>(in KWP&#160;diagnostics&#160;also&#160;from&#160;RxInterrupt).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
92&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=93></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.5.3&#160;&#160;DescGetServiceId()&#160;</b><br/>
<b>DescGetServiceId&#160;</b><br/>
<b>Available&#160;since&#160;2.11.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
DescMsgItem&#160;<b>DescGetServiceId&#160;</b>(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
DescMsgItem&#160;<b>DescGetServiceId&#160;</b>(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
The&#160;current&#160;request&#160;context&#160;location&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
DescMsgItem&#160;<br/>
The&#160;service id&#160;which is currently&#160;under&#160;processing.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Reports&#160;the&#160;service id&#160;of&#160;the&#160;currently&#160;processed&#160;user-service request.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>The&#160;“Support&#160;Generic&#160;User&#160;Service”&#160;option&#160;was enabled&#160;in the&#160;GENtool&#160;configuration.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;This&#160;function&#160;may&#160;be&#160;called&#160;at&#160;any&#160;time&#160;within a&#160;diagnostic&#160;request&#160;life cycle starting&#160;at&#160;<br/>
the&#160;call&#160;of&#160;the&#160;MainHandler&#160;and&#160;ending&#160;by&#160;the&#160;PostHandler&#160;(if&#160;configured)&#160;or&#160;(if&#160;none&#160;<br/>configured)&#160;by&#160;calling&#160;&#160;<b>DescProcessingDon</b>&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
93&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=94></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.5.4&#160;&#160;Generic&#160;User&#160;Service&#160;MainHandler&#160;</b><br/>
<b>ApplDescUserServiceHandler&#160;</b><br/>
<b>Available&#160;since&#160;2.11.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescUserServiceHandler&#160;</b>(DescMsgContext* pMsgContext)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescUserServiceHandler&#160;</b>(DescMsgContext* pMsgContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
pMsgContext&#160;<br/>
Refer&#160;the&#160;section<a href="TechnicalReference_CANdescs.html#88">&#160;12.6.4.2&#160;Service MainHandler&#160;</a>for&#160;details&#160;about&#160;this&#160;<br/>parameter.&#160;<br/>
Read Access&#160;<br/>
<b>pMsgContext-&gt;reqData&#160;</b>&#160;<br/>pointer&#160;to&#160;the&#160;first&#160;byte&#160;after&#160;the&#160;service Id.&#160;<br/>The&#160;other&#160;members&#160;of&#160;the parameter&#160;are described&#160;i<a href="TechnicalReference_CANdescs.html#88">n&#160;12.6.4.2&#160;Service&#160;<br/>MainHandler&#160;</a><br/>
Write access&#160;<br/>
<b>pMsgContext-&gt;resData</b>&#160;&#160;<br/>pointer&#160;to&#160;the&#160;first&#160;byte&#160;after&#160;the&#160;response SID,&#160;where&#160;the&#160;data&#160;(incl.&#160;sub-<br/>parameters)&#160;will&#160;be&#160;written.&#160;<br/>The&#160;other&#160;members&#160;of&#160;the parameter&#160;are described&#160;i<a href="TechnicalReference_CANdescs.html#88">n&#160;12.6.4.2&#160;Service&#160;<br/>MainHandler&#160;</a><br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;MainHandler&#160;is&#160;called&#160;for&#160;all&#160;unknown service requests&#160;at&#160;service id&#160;level,&#160;so the&#160;<br/>application has&#160;to&#160;do&#160;following:&#160;<br/>&#160;<br/>
Perform&#160;service id&#160;dispatching&#160;(if&#160;more&#160;than one&#160;user&#160;defined&#160;service shall&#160;be&#160;<br/>used).&#160;<br/>
&#160;<br/>
Perform&#160;length&#160;validation&#160;for&#160;varying&#160;length&#160;information of&#160;request.&#160;<br/>
&#160;<br/>
Perform&#160;parameter&#160;(if&#160;any)&#160;validation.&#160;<br/>
&#160;<br/>
Disassemble any&#160;data&#160;received&#160;with the&#160;request&#160;telegram&#160;and&#160;process it.&#160;<br/>
&#160;<br/>
Assemble any&#160;data&#160;to&#160;be&#160;send with the&#160;response&#160;and update&#160;current&#160;response&#160;<br/>length&#160;<br/>
&#160;<br/>
Confirm&#160;that&#160;the&#160;processing&#160;is&#160;finished.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>The&#160;“Support&#160;Generic&#160;User&#160;Service”&#160;option&#160;was enabled&#160;in the&#160;GENtool&#160;configuration.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Refer&#160;the&#160;section<a href="TechnicalReference_CANdescs.html#88">&#160;12.6.4.2&#160;Service MainHandler.</a>&#160;<br/>
&#160;&#160;<b>DescGetServiceId()&#160;</b>may&#160;be&#160;called&#160;here&#160;to dispatch the&#160;SID&#160;of&#160;the&#160;currently&#160;processed&#160;<br/>
user&#160;service (refer<a href="TechnicalReference_CANdescs.html#93">&#160;12.6.5.3&#160;DescGetServiceId&#160;</a><br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
94&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=95></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.5.5&#160;&#160;Generic&#160;User&#160;Service&#160;PostHandler&#160;</b><br/>
<b>ApplDescPostUserServiceHandler&#160;</b><br/>
<b>Available&#160;since&#160;2.11.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescPostUserServiceHandler&#160;</b>(vuint8 status)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescPostUserServiceHandler</b>&#160;(vuint8 iContext, vuint8 status)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext, status&#160;<br/>
Refer<a href="TechnicalReference_CANdescs.html#90">&#160;12.6.4.3&#160;Service PostHandler&#160;</a>for&#160;information.&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;functionality&#160;of&#160;the&#160;user&#160;service PostHandler&#160;is&#160;the&#160;same as&#160;the&#160;one&#160;of&#160;the&#160;normal&#160;<br/>service PostHandler.&#160;Ref<a href="TechnicalReference_CANdescs.html#90">er&#160;12.6.4.3&#160;Service PostHandler&#160;</a>for&#160;more&#160;details.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>The&#160;“Support&#160;Generic&#160;User&#160;Service PostHandler”&#160;option&#160;was enabled&#160;in the GENtool&#160;<br/>configuration.&#160;<br/>CANdesc&#160;version &gt;=&#160;2.11.00&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Refer&#160;the&#160;section<a href="TechnicalReference_CANdescs.html#90">&#160;12.6.4.3&#160;Service PostHandler&#160;</a>for&#160;information.&#160;<br/>
&#160;&#160;<b>DescGetServiceId()&#160;</b>may&#160;be&#160;called&#160;here&#160;to dispatch the&#160;SID&#160;of&#160;the&#160;currently&#160;post-<br/>
processed&#160;user&#160;service (refer<a href="TechnicalReference_CANdescs.html#93">&#160;12.6.5.3&#160;DescGetServiceId<b>&#160;</b></a><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
95&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=96></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.6&#160;&#160;Session Handling&#160;</b><br/>
<b>12.6.6.1&#160;&#160;ApplDescCheckSessionTransition()&#160;</b><br/>
<b>ApplDescCheckSessionTransition&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescCheckSessionTransition&#160;</b>(DescStateGroup newState, DescStateGroup&#160;<br/>formerState)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescCheckSessionTransition&#160;</b>(vuint8 iContext, DescStateGroup newState,&#160;<br/>DescStateGroup formerState)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
the&#160;current&#160;request&#160;context&#160;location&#160;<br/>
newState&#160;<br/>
the&#160;CANdesc&#160;component&#160;has&#160;change&#160;to&#160;this&#160;session&#160;state&#160;<br/>
formerState&#160;<br/>
the&#160;CANdesc&#160;component&#160;has&#160;change&#160;from&#160;this&#160;session&#160;state&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;hook&#160;function&#160;will&#160;be&#160;called,&#160;while session&#160;request&#160;is&#160;received&#160;(SID&#160;$10).&#160;If&#160;the&#160;<br/>application wants&#160;to discard&#160;this&#160;request,&#160;an&#160;error&#160;must&#160;be&#160;set&#160;(via&#160;<br/><b>DescSetNegResponse()</b>&#160;).&#160;&#160;<br/>The&#160;application always&#160;has&#160;to&#160;confirm&#160;this&#160;hook&#160;function via&#160;<br/><b>DescSessionTransitionChecked().&#160;&#160;<br/></b>Both&#160;above&#160;functions&#160;can be&#160;called&#160;also outside&#160;of&#160;the&#160;context&#160;of&#160;this&#160;function&#160;(e.g.&#160;<br/>application task&#160;waiting&#160;for&#160;results&#160;form&#160;an&#160;I/O&#160;port).&#160;CANdesc&#160;will&#160;send RCR-RP&#160;<br/>response as&#160;long&#160;as&#160;the&#160;application delays&#160;the&#160;confirmation&#160;for&#160;the&#160;session transition.&#160;<br/>&#160;<br/>In some&#160;cases&#160;the&#160;application has&#160;to&#160;know&#160;whether&#160;the&#160;SPRMIB&#160;in the&#160;request&#160;was set&#160;or&#160;<br/>not.&#160;Since&#160;this&#160;API&#160;call&#160;does&#160;not&#160;contain this&#160;information,&#160;a dedicated&#160;API&#160;in CANdesc&#160;<br/>provides&#160;it:<a href="TechnicalReference_CANdescs.html#98">&#160;<i>DescIsSuppressPosResBitSet&#160;()</i>.</a>&#160;<br/>
<b>Pre-conditions&#160;<br/></b>At&#160;least&#160;one DiagnosticSessionControl&#160;service must&#160;be&#160;configured&#160;to ‘OEM’&#160;in attribute&#160;<br/>‘MainHandlerSupport’&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Call&#160;the&#160;API&#160;function&#160;<b>DescSessionTransitionChecked()</b>&#160;to&#160;end&#160;the&#160;service processing&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
96&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=97></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.6.2&#160;&#160;DescSessionTransitionChecked()&#160;</b><br/>
<b>DescSessionTransitionChecked&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescSessionTransitionChecked&#160;</b>(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescSessionTransitionChecked&#160;</b>(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
the&#160;current&#160;request&#160;context&#160;location&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>After&#160;the&#160;application has&#160;finished&#160;the&#160;processing&#160;in the&#160;hook&#160;function&#160;<br/><b>ApplDescCheckSessionTransition()&#160;</b>this&#160;function&#160;must&#160;be&#160;called.&#160;&#160;<br/>
<b>Pre-conditions&#160;<br/></b>At&#160;least&#160;one DiagnosticSessionControl&#160;service must&#160;be&#160;configured&#160;to ‘OEM’&#160;in attribute&#160;<br/>‘MainHandlerSupport’&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Within or&#160;after&#160;a ‘<b>ApplDescCheckSessionTransition()</b>’<b>&#160;</b>function&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;If&#160;this&#160;function&#160;will&#160;be&#160;called&#160;late,&#160;the&#160;CANdesc&#160;component&#160;sends&#160;automatically&#160;the&#160;<br/>
RCR-RP&#160;responses&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
97&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=98></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.6.3&#160;&#160;DescIsSuppressPosResBitSet ()&#160;</b><br/>
<b>DescIsSuppressPosResBitSet&#160;</b><br/>
<b>Available&#160;since&#160;5.07.14&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
DescBool&#160;<b>DescIsSuppressPosResBitSet&#160;</b>(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
DescBool&#160;<b>DescIsSuppressPosResBitSet&#160;</b>(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
the&#160;current&#160;request&#160;context&#160;location&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
kDescTrue&#160;<br/>
The&#160;SPRMIB&#160;is&#160;set.&#160;<br/>The&#160;SPRMIB&#160;is&#160;NOT&#160;set.<br/>
kDescFalse&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;API&#160;can&#160;be&#160;always&#160;called&#160;while a&#160;diagnostic&#160;service processing&#160;is&#160;ongoing&#160;to&#160;get&#160;the&#160;<br/>information&#160;about&#160;the&#160;SPRMIB&#160;state.&#160;All&#160;main-handlers&#160;do&#160;contain&#160;this&#160;information already&#160;<br/>in the&#160;pMsgContext&#160;parameter&#160;so&#160;use&#160;it&#160;instead of&#160;this&#160;API.&#160;&#160;<br/>In some other&#160;cases&#160;the&#160;application does not&#160;have access&#160;to&#160;the&#160;pMsgContext,&#160;and&#160;there&#160;<br/>the&#160;API&#160;can&#160;be&#160;used.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Only&#160;for&#160;UDS&#160;configurations.&#160;<br/>May&#160;be&#160;called&#160;only&#160;while a&#160;diagnostic&#160;service processing&#160;is&#160;ongoing.&#160;Otherwise invalid&#160;<br/>data can&#160;be&#160;reported.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Any.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
98&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=99></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.6.4&#160;&#160;ApplDescOnTransitionSession()&#160;</b><br/>
<b>ApplDescOnTransitionSession&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescOnTransitionSession&#160;</b>(DescStateGroup newState,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;DescStateGroup formerState)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescOnTransitionSession&#160;</b>(DescStateGroup newState,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;DescStateGroup formerState)&#160;<br/>
<b>Parameter&#160;</b><br/>
newState&#160;<br/>
the&#160;CANdesc&#160;component&#160;has&#160;change&#160;to&#160;this&#160;session&#160;state&#160;<br/>
formerState&#160;<br/>
the&#160;CANdesc&#160;component&#160;has&#160;change&#160;from&#160;this&#160;session&#160;state&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>After&#160;the&#160;positive response of&#160;a SessionControl&#160;request&#160;the&#160;session&#160;will&#160;transit&#160;to&#160;the&#160;<br/>requested&#160;session.&#160;This&#160;function&#160;informs&#160;the&#160;application that&#160;such&#160;a&#160;transition&#160;occurs.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()&#160;&#160;<br/></b>interrupts&#160;might&#160;be&#160;disabled&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Only&#160;informational&#160;function&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
99&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=100></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.6.5&#160;&#160;DescSetStateSession()&#160;</b><br/>
<b>DescSetStateSession&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescSetStateSession</b>&#160;(DescStateGroup newSession)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescSetStateSession&#160;</b>(DescStateGroup newSession)&#160;<br/>
<b>Parameter&#160;</b><br/>
newSession&#160;<br/>
the&#160;CANdesc&#160;component&#160;will&#160;change&#160;to&#160;this&#160;session&#160;state&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>By&#160;this&#160;function&#160;the&#160;state&#160;of&#160;the&#160;SessionState-group&#160;can&#160;be&#160;changed&#160;by&#160;the ECU&#160;<br/>application.&#160;The&#160;transition notification&#160;function&#160;‘ApplDescOnTransitionSession’&#160;will&#160;be&#160;<br/>called&#160;to notify&#160;the&#160;application about&#160;the&#160;new&#160;session.&#160;&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Refer&#160;the&#160;section<a href="TechnicalReference_CANdescs.html#115">&#160;12.6.11.2&#160;&#34;DescSetState&lt;StateGroup&gt;()”</a>&#160;for&#160;more&#160;details.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
100&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=101></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.6.6&#160;&#160;DescGetStateSession()&#160;</b><br/>
<b>DescGetStateSession&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
currentSession&#160;<b>DescGetStateSession</b>&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
currentSession&#160;<b>DescGetStateSession&#160;</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
currentSession&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;returns&#160;the&#160;current&#160;session&#160;state.&#160;Since&#160;the&#160;states&#160;are&#160;bit-coded the&#160;<br/>evaluation&#160;expressions&#160;may&#160;be&#160;optimized&#160;for&#160;multiple use&#160;cases.&#160;<br/>Example:&#160;Code execution&#160;only&#160;when either&#160;default&#160;or&#160;extended&#160;session&#160;is&#160;active.&#160;<br/>lState =&#160;DescGetStateSession();&#160;<br/>if ( (lState &amp; (kDescStateSession&lt;Default&gt;) | kDescStateSession&lt;Extended&gt;)) != 0 )&#160;<br/>{&#160;<br/>&#160;/*execute code*/&#160;<br/>}&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
<b>&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Refer&#160;the&#160;section<a href="TechnicalReference_CANdescs.html#114">&#160;12.6.11.1&#160;“DescGetState&lt;StateGroup&gt;()”</a>&#160;for&#160;more&#160;details.&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
101&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=102></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.6.7&#160;&#160;DescGetSessionIdOfSessionState&#160;</b><br/>
<b>DescGetSessionIdOfSessionState&#160;&#160;</b><br/>
<b>Available&#160;since&#160;3.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Any&#160;Context&#160;<br/>
DescMsgItem&#160;<b>DescGetSessionIdOfSessionState&#160;</b>(DescStateGroup sessionState)&#160;<br/>
<b>Parameter&#160;</b><br/>
sessionState&#160;<br/>
-&#160;Must&#160;be&#160;one&#160;of&#160;the&#160;valid session&#160;states&#160;(i.e.&#160;the&#160;value&#160;of&#160;the&#160;<br/>API&#160;<i>DescGetStateSession()</i>&#160;).&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
DescMsgItem&#160;<br/>
-&#160;Is&#160;the&#160;corresponding&#160;session&#160;identifier&#160;value.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;provides&#160;a&#160;conversion&#160;from&#160;a&#160;session state&#160;to its&#160;corresponding&#160;session&#160;<br/>identifier&#160;(e.g.&#160;calling&#160;this&#160;function&#160;with parameter&#160;<i><b>kDescStateSessionDefault</b></i>&#160;will&#160;return&#160;<br/><i><b>0x01</b></i>).&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
102&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=103></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.7&#160;&#160;CommunicationControl&#160;Handling&#160;<br/></b>This&#160;&#160;API&#160;&#160;is&#160;&#160;provided,&#160;&#160;if&#160;&#160;the&#160;&#160;ECU&#160;&#160;supports&#160;&#160;the&#160;&#160;serviceCommunicationControl&#160;&#160;(UDS)&#160;&#160;or&#160;<br/>service&#160;0x28/0x29&#160;Dis-/EnableNormalMessageTransmission&#160;(KWP).&#160;&#160;<br/>
<b>12.6.7.1&#160;&#160;ApplDescCheckCommCtrl()&#160;</b><br/>
<b>ApplDescCheckCommCtrl&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescCheckCommCtrl&#160;</b>(DescOemCommControlInfo* commControlInfo)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescCheckCommCtrl</b>&#160;(vuint8 iContext,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;DescOemCommControlInfo* commControlInfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
The&#160;current&#160;request&#160;context&#160;location&#160;<br/>
commControlInfo&#160;<br/>
OEM&#160;dependent&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;execution&#160;of&#160;this&#160;service is completely&#160;done&#160;within the&#160;CANdesc&#160;component.&#160;This&#160;<br/>hook&#160;function&#160;can&#160;be&#160;used to&#160;permit&#160;the&#160;application to&#160;reject&#160;the&#160;execution&#160;under&#160;some&#160;<br/>circumstance.&#160;If&#160;the&#160;application wants&#160;to&#160;discard&#160;this&#160;request,&#160;an&#160;error&#160;must&#160;be&#160;set&#160;(via&#160;<br/><b>DescSetNegResponse()</b>).&#160;<br/>The&#160;application always&#160;has&#160;to&#160;confirm&#160;this&#160;hook&#160;function (via&#160;<b>DescCommCtrlChecked()</b>).&#160;<br/>
<b>Pre-conditions&#160;<br/></b>The&#160;CommunicationControl&#160;service must&#160;be&#160;activated&#160;and&#160;the&#160;attribute&#160;<br/>‘MainHandlerSupport’&#160;has&#160;to&#160;be&#160;set&#160;to&#160;‘OEM’&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;If&#160;the&#160;API&#160;function&#160;<b>DescCommCtrlChecked()&#160;</b>will&#160;be&#160;not&#160;called,&#160;the&#160;service processing&#160;<br/>
will&#160;not&#160;end&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
103&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=104></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.7.2&#160;&#160;DescCommCtrlChecked()&#160;</b><br/>
<b>DescCommCtrlChecked&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescCommCtrlChecked&#160;</b>(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescCommCtrlChecked</b>&#160;(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
the&#160;current&#160;request&#160;context&#160;location&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;CANdesc&#160;component&#160;calls&#160;a&#160;hook&#160;function&#160;to check&#160;for&#160;the&#160;execution&#160;permission&#160;of&#160;<br/>the&#160;CommunicationControl&#160;service.&#160;Within or&#160;after&#160;this&#160;hook&#160;function&#160;<br/>(<b>ApplDescCheckCommCtrl()</b>)&#160;the&#160;application&#160;can set&#160;an&#160;error&#160;<br/>(<b>DescSetNegResponse()</b>)&#160;to&#160;reject&#160;the&#160;request.&#160;This&#160;function&#160;is&#160;used&#160;to&#160;terminate&#160;the&#160;<br/>hook&#160;function&#160;<b>ApplDescCheckCommCtrl().</b>&#160;<br/>
<b>Pre-conditions&#160;<br/></b>The&#160;CommunicationControl&#160;service must&#160;be&#160;activated&#160;and&#160;the&#160;attribute&#160;<br/>‘MainHandlerSupport’&#160;has&#160;to&#160;be&#160;set&#160;to&#160;‘OEM’&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Within or&#160;after&#160;<b>ApplDescCheckCommCtrl()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
104&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=105></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.8&#160;&#160;Periodic&#160;call&#160;of ‘Service&#160;MainHandler’&#160;</b><br/>
<b>12.6.8.1&#160;&#160;DescStartRepeatedServiceCall()&#160;</b><br/>
<b>DescStartRepeatedServiceCall&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescStartRepeatedServiceCall</b>&#160;(DescMainHandler descMainHandler)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescStartRepeatedServiceCall</b>&#160;(vuint8 iContext, DescMainHandler&#160;descMainHandler)&#160;<br/>
<b>Parameter&#160;</b><br/>
descMainHandler&#160;<br/>
Reference&#160;to&#160;a&#160;function.&#160;The&#160;function&#160;prototype&#160;must&#160;be&#160;based&#160;<br/>on&#160;a ‘Service MainHandler’.&#160;<br/>
iContext&#160;<br/>
The&#160;current&#160;request&#160;context&#160;location&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;application can&#160;use&#160;this&#160;function&#160;to&#160;get&#160;a&#160;periodic&#160;call&#160;to&#160;the&#160;specified&#160;function&#160;(in&#160;the&#160;<br/>parameter)&#160;from&#160;the&#160;CANdesc&#160;component.&#160;&#160;<br/>It&#160;is&#160;possible&#160;to use&#160;the&#160;same&#160;‘Service MainHandler’&#160;function&#160;as&#160;it&#160;is&#160;called&#160;in.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Within&#160;or&#160;after&#160;a ‘Service MainHandler’&#160;function&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;CANdesc&#160;can&#160;do&#160;no&#160;validation,&#160;if&#160;this&#160;pointer&#160;is&#160;valid.&#160;<br/>
&#160;&#160;Is&#160;the&#160;parameter&#160;NULL,&#160;the&#160;periodic&#160;calls&#160;will&#160;get&#160;stopped.&#160;<br/>
&#160;&#160;The&#160;function&#160;is&#160;called&#160;in the&#160;same&#160;cycle time&#160;(context)&#160;as&#160;the&#160;DescTask()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
105&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=106></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.8.2&#160;&#160;DescStartMemByAddrRepeatedCall()&#160;</b><br/>
<b>DescStartMemByAddrRepeatedCall&#160;</b><br/>
<b>Available&#160;since&#160;5.06.04&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescStartMemByAddrRepeatedCall</b>&#160;()&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescStartMemByAddrRepeatedCall</b>&#160;(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
The&#160;current&#160;request&#160;context&#160;location&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;application can&#160;use&#160;this&#160;function&#160;to&#160;get&#160;a&#160;periodic&#160;call&#160;to&#160;the&#160;current&#160;Read/Write&#160;<br/>memory&#160;by&#160;address&#160;handler.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Within&#160;ApplDescReadMemoryByAddress or&#160;ApplDescWriteMemoryByAddress.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;The&#160;memory&#160;access&#160;handler&#160;is&#160;called&#160;in&#160;the&#160;same&#160;cycle time&#160;(context)&#160;as&#160;the&#160;<br/>
DescTask()&#160;<br/>
&#160;<br/>
<b>12.6.9&#160;&#160;Ring Buffer Mechanism&#160;<br/></b>The&#160;ring-buffer&#160;option&#160;can&#160;be&#160;used&#160;to&#160;save&#160;RAM&#160;when&#160;some&#160;responses&#160;are&#160;quite&#160;long&#160;and&#160;<br/>reserving&#160;such&#160;space&#160;of&#160;RAM&#160;is&#160;impossible.&#160;In&#160;contrast&#160;to&#160;the&#160;linear&#160;responses,&#160;where&#160;the&#160;<br/>response&#160;data&#160;will&#160;be&#160;first&#160;written&#160;and&#160;then&#160;the&#160;transmission&#160;to&#160;the&#160;tester&#160;will&#160;be&#160;initiated,&#160;<br/>the&#160;ring-buffer&#160;concept&#160;starts&#160;a&#160;transmission&#160;as&#160;soon&#160;as&#160;it&#160;has&#160;either&#160;the&#160;whole&#160;data&#160;(for&#160;<br/>short&#160;[single&#160;frame]&#160;responses)&#160;or&#160;at&#160;least&#160;enough&#160;data&#160;to&#160;fill&#160;a&#160;first-frame&#160;of&#160;a&#160;multi-frame&#160;<br/>transmission.&#160;&#160;Once&#160;&#160;the&#160;&#160;ring&#160;&#160;buffer&#160;&#160;has&#160;&#160;been&#160;&#160;activated&#160;&#160;and&#160;&#160;the&#160;&#160;response&#160;&#160;transmission&#160;<br/>initiated,&#160;the&#160;application&#160;must&#160;supply&#160;enough&#160;data&#160;to&#160;keep&#160;the&#160;transmission&#160;away&#160;from&#160;lack&#160;<br/>of&#160;data.&#160;In&#160;multiple&#160;PID&#160;mode,&#160;the&#160;application&#160;can&#160;decide&#160;in&#160;each&#160;PID&#160;main&#160;handler&#160;to&#160;use&#160;<br/>the&#160;&#160;ring&#160;&#160;buffer&#160;&#160;or&#160;&#160;not.&#160;&#160;However,&#160;&#160;if&#160;&#160;one&#160;&#160;of&#160;&#160;the&#160;&#160;PIDs&#160;&#160;has&#160;&#160;dynamic&#160;&#160;length,&#160;&#160;the&#160;&#160;ring&#160;&#160;buffer&#160;<br/>mechanism&#160;can&#160;not&#160;be&#160;used&#160;for any&#160;PID in&#160;the&#160;list.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
106&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=107></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-107_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>The&#160;ring&#160;buffer&#160;should only&#160;be&#160;used&#160;for&#160;long&#160;responses,&#160;because using&#160;the&#160;ring&#160;buffer&#160;<br/>
&#160;&#160;instead of&#160;the&#160;linear&#160;buffer&#160;causes&#160;a&#160;runtime overhead.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
107&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=108></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.9.1&#160;&#160;DescRingBufferStart()&#160;</b><br/>
<b>DescRingBufferStart&#160;<br/>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescRingBufferStart</b>&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescRingBufferStart</b>&#160;(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
reference&#160;to&#160;the&#160;corresponding&#160;request&#160;context&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>After&#160;completing&#160;the&#160;request&#160;validation&#160;the&#160;application can&#160;decide&#160;(in&#160;runtime),&#160;if&#160;the&#160;ring-<br/>buffer&#160;mechanism&#160;should be&#160;used&#160;or&#160;not.&#160;&#160;<br/>By&#160;calling&#160;this&#160;function,&#160;the&#160;decision&#160;is&#160;made&#160;to use the&#160;ring-buffer.&#160;Otherwise&#160;<br/>DescProcessingDone()&#160;should be&#160;called,&#160;after&#160;filling&#160;the&#160;response data&#160;(in&#160;a linear&#160;way).&#160;<br/>Either&#160;DescProcessingDone()&#160;or&#160;DescRingBufferStart()&#160;will&#160;finish the&#160;response handling.&#160;<br/>Depending&#160;on&#160;the&#160;previous&#160;actions&#160;of&#160;the&#160;application&#160;the&#160;CANdesc&#160;module&#160;will&#160;either&#160;send&#160;<br/>a response&#160;(positive/negative depending&#160;on&#160;the&#160;error&#160;state&#160;machine)&#160;or&#160;no&#160;response&#160;will&#160;<br/>be&#160;send if&#160;the&#160;application/CANdesc&#160;decides&#160;that&#160;there&#160;must&#160;be&#160;no&#160;response (please&#160;refer&#160;<br/>the&#160;Part&#160;III&#160;User&#160;Manual).&#160;<br/>The&#160;transmission&#160;of&#160;the&#160;positive response will&#160;not&#160;start&#160;immediately.&#160;The&#160;application&#160;has&#160;to&#160;<br/>fill&#160;the&#160;ring-buffer&#160;first.&#160;If&#160;the&#160;ring-buffer&#160;has&#160;enough&#160;data,&#160;the&#160;transmission&#160;will&#160;be&#160;started&#160;<br/>(internally).&#160;&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;ring-buffer&#160;has&#160;been&#160;enabled&#160;in the&#160;configuration&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Within or&#160;after&#160;a ‘Service MainHandler’&#160;function&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;This&#160;API&#160;<b>must&#160;not</b>&#160;be&#160;called&#160;from&#160;any&#160;of&#160;the&#160;other&#160;handler&#160;type&#160;(Pre-&#160;or&#160;PostHandlers)&#160;<br/>
&#160;&#160;Either&#160;DescProcessingDone()&#160;or&#160;DescRingBufferStart()&#160;must&#160;be&#160;used&#160;to&#160;finish the&#160;<br/>
response handling.&#160;<br/>
&#160;&#160;Total&#160;response&#160;length&#160;must&#160;be&#160;written&#160;before!&#160;<br/>
&#160;&#160;No response&#160;data&#160;must&#160;be&#160;written&#160;before!&#160;<br/>
&#160;&#160;This&#160;function&#160;<b>must&#160;not</b>&#160;be called&#160;in interrupt&#160;context&#160;<br/>
&#160;&#160;<b>Limitation:</b>&#160;Until&#160;CANdesc&#160;version 2.13.00&#160;it&#160;was not&#160;possible to&#160;use&#160;the&#160;Ring-Buffer&#160;in&#160;<br/>
‘Multiple PID’&#160;services (as&#160;described in&#160;section<a href="TechnicalReference_CANdescs.html#56">&#160;9.1.3&#160;Multiple PID&#160;mode)</a>&#160;<br/>
&#160;&#160;<b>UDS&#160;limitation:</b>&#160;Always&#160;check&#160;the&#160;SPRMIB&#160;prior&#160;starting the&#160;ring-buffer.&#160;If&#160;this&#160;bit&#160;is&#160;<br/>
set,&#160;the&#160;ring-buffer&#160;shall&#160;not&#160;be&#160;started.&#160;Instead DescProcessingDone()&#160;must&#160;be&#160;called&#160;<br/>(see<a href="TechnicalReference_CANdescs.html#151">&#160;13.6).</a>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
108&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=109></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
<b>12.6.9.2&#160;&#160;DescRingBufferWrite()&#160;</b><br/>
<b>DescRingBufferWrite&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
vuint8&#160;<b>DescRingBufferWrite</b>&#160;(DescMsg data, DescMsgLen dataLength)&#160;<br/>
Multi&#160;Context&#160;<br/>
vuint8&#160;<b>DescRingBufferWrite</b>&#160;(vuint8 iContext, DescMsg data, DescMsgLen dataLength)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
Reference&#160;to&#160;the&#160;corresponding&#160;request&#160;context&#160;<br/>
DescMsg&#160;<br/>
Pointer&#160;to application data,&#160;which should&#160;be&#160;copied into&#160;ring-<br/>buffer.&#160;<br/>
DescMsgLen&#160;<br/>
Amount&#160;of&#160;data,&#160;which should be&#160;copied&#160;(from&#160;pointer&#160;data)&#160;into&#160;<br/>ring-buffer.&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
vuint8&#160;<br/>
<b>kDescOk</b>&#160;&#160;<br/>If&#160;the&#160;copy&#160;process&#160;was&#160;successful&#160;<br/><b>kDescFailed&#160;&#160;<br/></b>if&#160;the&#160;data&#160;are&#160;<b>not</b>&#160;copied into&#160;the&#160;ring-buffer&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;application writes data into&#160;the&#160;ring-buffer&#160;by&#160;this&#160;function.&#160;It&#160;is&#160;not&#160;necessary&#160;that&#160;the&#160;<br/>application must&#160;write&#160;the data&#160;in the&#160;context&#160;of&#160;a&#160;special&#160;API&#160;function.&#160;&#160;<br/>The&#160;write order&#160;is&#160;always&#160;linear!&#160;The&#160;first&#160;written&#160;byte is the&#160;first&#160;byte in&#160;the&#160;response&#160;<br/>message.&#160;&#160;&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
ring-buffer&#160;has&#160;been&#160;enabled&#160;in the&#160;configuration;&#160;<br/>
-&#160;<br/>
DescRingBufferStart()&#160;must&#160;be&#160;called&#160;first,&#160;to&#160;activate&#160;the&#160;ring-buffer&#160;mechanism.&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;This&#160;API&#160;shall&#160;not&#160;interrupt&#160;the&#160;DescTask.&#160;Required&#160;for&#160;the&#160;case&#160;the&#160;currently&#160;ongoing&#160;<br/>transmission&#160;is&#160;interrupted due&#160;to a&#160;communication&#160;error,&#160;and&#160;the&#160;application still&#160;writes&#160;<br/>into&#160;the&#160;buffer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;dataLength&#160;must&#160;be&#160;lower&#160;or&#160;equal&#160;to&#160;the&#160;ring-buffer&#160;size,&#160;else&#160;the&#160;function&#160;will&#160;<br/>
always&#160;fail&#160;<br/>
&#160;&#160;CANdesc&#160;has&#160;already&#160;filled&#160;the&#160;first&#160;bytes (SID,&#160;etc.)&#160;into&#160;the&#160;ring-buffer.&#160;So in&#160;the&#160;first&#160;<br/>
call&#160;of&#160;DescRingBufferWrite()&#160;the&#160;dataLength&#160;must&#160;lower&#160;as the&#160;buffer&#160;size +&#160;these&#160;<br/>byte&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
109&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=110></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.9.3&#160;&#160;DescRingBufferCancel()&#160;</b><br/>
<b>DescRingBufferCancel&#160;</b><br/>
<b>Available&#160;since&#160;5.01.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescRingBufferCancel</b>&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescRingBufferCancel</b>&#160;(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
Reference&#160;to&#160;the&#160;corresponding&#160;request&#160;context&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;application may&#160;call&#160;this&#160;API&#160;once&#160;the&#160;a data&#160;acquisition&#160;error&#160;has&#160;been occurred&#160;after&#160;<br/>the&#160;ring-buffer&#160;has&#160;been&#160;activated&#160;vi<a href="TechnicalReference_CANdescs.html#108">a&#160;<i>DescRingBufferStart()</i>.</a>&#160;<br/>&#160;<br/>CANdesc&#160;will&#160;automatically&#160;determine&#160;the&#160;appropriate&#160;action&#160;depending&#160;on&#160;its&#160;current&#160;<br/>internal&#160;state:&#160;<br/>
-&#160;<br/>
if&#160;the&#160;response data&#160;transmission&#160;has&#160;not&#160;been&#160;started&#160;yet,&#160;a&#160;negative&#160;<br/>response will&#160;be&#160;sent&#160;back.&#160;<br/>
-&#160;<br/>
If&#160;the&#160;response&#160;transmission&#160;has&#160;been&#160;started&#160;–&#160;a transmission&#160;interrupt&#160;<br/>will&#160;occur&#160;–&#160;the&#160;tester&#160;will&#160;not&#160;get&#160;a complete&#160;response.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
ring-buffer&#160;has&#160;been&#160;enabled&#160;in the&#160;configuration&#160;<br/>
-&#160;<br/>
DescRingBufferStart()&#160;must&#160;be&#160;called&#160;before&#160;to&#160;activate&#160;the&#160;ring-buffer&#160;mechanism&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;&#160;<br/>
&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
110&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=111></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.9.4&#160;&#160;DescRingBufferGetFreeSpace()&#160;</b><br/>
<b>DescRingBufferGetFreeSpace&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
DescMsgLen&#160;<b>DescRingBufferGetFreeSpace</b>&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
DescMsgLen&#160;<b>DescRingBufferGetFreeSpace</b>&#160;(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
reference&#160;to&#160;the&#160;corresponding&#160;request&#160;context&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
DescMsgLen&#160;<br/>
The&#160;amount&#160;of&#160;free&#160;space/bytes in&#160;the&#160;ring-buffer.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;returns&#160;the&#160;amount&#160;of&#160;free&#160;space/bytes in&#160;the&#160;ring-buffer.&#160;&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
ring-buffer&#160;has&#160;been&#160;enabled&#160;in&#160;the&#160;configuration&#160;<br/>
-&#160;<br/>
DescRingBufferStart()&#160;must&#160;be&#160;called&#160;before&#160;to activate&#160;the&#160;ring-buffer&#160;mechanism&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
111&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=112></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.9.5&#160;&#160;DescRingBufferGetProgress()&#160;</b><br/>
<b>DescRingBufferGetProgress&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
DescMsgLen&#160;<b>DescRingBufferGetProgress</b>&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
DescMsgLen&#160;<b>DescRingBufferGetProgress</b>&#160;(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
reference&#160;to&#160;the&#160;corresponding&#160;request&#160;context&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
DescRingBufferProgress&#160;&#160;Current&#160;byte position&#160;in the&#160;whole response.&#160;&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;returns&#160;the&#160;progress&#160;of&#160;the&#160;copy&#160;process.&#160;&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
ring-buffer&#160;has&#160;been&#160;enabled&#160;in the&#160;configuration&#160;<br/>
-&#160;<br/>
DescRingBufferStart()&#160;must&#160;be&#160;called&#160;before&#160;to activate&#160;the&#160;ring-buffer&#160;mechanism&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
112&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=113></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.10&#160;Signal&#160;Interface&#160;of CANdesc&#160;&#160;<br/></b>CANdesc&#160;&#160;will&#160;&#160;provide&#160;&#160;a&#160;&#160;signal&#160;&#160;interface&#160;&#160;to&#160;&#160;the&#160;&#160;ECU&#160;&#160;application.&#160;&#160;This&#160;&#160;can&#160;&#160;help&#160;&#160;the&#160;&#160;ECU&#160;<br/>application&#160;&#160;to&#160;&#160;assemble&#160;&#160;the&#160;&#160;response&#160;&#160;automatically.&#160;&#160;No&#160;&#160;further&#160;&#160;code&#160;&#160;changes&#160;&#160;are&#160;<br/>necessary,&#160;if&#160;a&#160;signal&#160;will&#160;move&#160;or change&#160;its&#160;size.&#160;<br/>The&#160;&#160;current&#160;&#160;implementation&#160;&#160;has&#160;&#160;only&#160;&#160;support&#160;&#160;for&#160;&#160;a&#160;&#160;synchronous&#160;&#160;signal&#160;&#160;interface.&#160;&#160;This&#160;<br/>means&#160;&#160;the&#160;&#160;ECU&#160;&#160;application&#160;has&#160;&#160;to&#160;&#160;provide&#160;the&#160;&#160;signal&#160;&#160;value&#160;&#160;within&#160;&#160;the&#160;&#160;call/context&#160;&#160;of&#160;&#160;the&#160;<br/>Signal&#160;Handler&#160;function&#160;(while&#160;reading)&#160;or&#160;to&#160;write&#160;thewithin&#160;the&#160;call/context&#160;of&#160;the&#160;&#160;Signal&#160;<br/>Handler&#160;function&#160;(while&#160;writing).&#160;<br/>
<b>12.6.10.1&#160;ApplDesc&lt;Signal-Handler&gt;()&#160;</b><br/>
<b>ApplDesc&lt;Signal-Handler&gt;&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
-&#160;<b>ApplDesc&lt;Service-Qualifier + Data-Object-Qualifier + Instance-Qualifier&gt;&#160;</b>(-)&#160;<br/>
Multi&#160;Context&#160;<br/>
-&#160;<b>ApplDesc&lt;Service-Qualifier + Data-Object-Qualifier + Instance-Qualifier&gt;&#160;</b>(-)&#160;<br/>
<b>Parameter&#160;</b><br/>
vuint8, vsint8,&#160;<br/>
Available&#160;for&#160;write services.&#160;<br/>
vuint16, vsint16,&#160;&#160;<br/>
Type&#160;depend&#160;on&#160;signal&#160;type&#160;<br/>
vuint32, vsint32,&#160;<br/>DescMsg (vuint8*)&#160;<br/>
DescMsg (vuint8*)&#160;<br/>
Available for&#160;read&#160;services and signals&#160;&gt;&#160;32&#160;bit&#160;(N&#160;bit)&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
vuint8, vsint8,&#160;<br/>
Available for&#160;read&#160;services.&#160;<br/>
vuint16, vsint16,&#160;&#160;<br/>
Type&#160;depend&#160;on&#160;signal&#160;type.&#160;<br/>
vuint32, vsint32&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>A&#160;Signal&#160;Handler&#160;is&#160;generated&#160;if&#160;the&#160;Service MainHandler&#160;is&#160;configured&#160;to&#160;be&#160;generated.&#160;In&#160;<br/>this&#160;case,&#160;writing&#160;Signal&#160;Handlers&#160;are&#160;generated&#160;for&#160;all&#160;dataObjects&#160;transported&#160;with the&#160;<br/>request&#160;and&#160;reading&#160;Signal&#160;Handlers&#160;are&#160;generated&#160;for&#160;all&#160;dataObjects&#160;transported&#160;with&#160;<br/>the&#160;response&#160;(read/write&#160;from&#160;application point&#160;of&#160;view).&#160;&#160;<br/>The&#160;data&#160;type&#160;of&#160;the&#160;Signal&#160;Handler&#160;argument&#160;depends&#160;on&#160;the&#160;dataObject&#160;which is to be&#160;<br/>processed.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Must&#160;be&#160;configured&#160;to&#160;‘generated’&#160;in attribute&#160;‘MainHandlerSupport’&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;&#160;You&#160;can&#160;override&#160;the&#160;given&#160;name&#160;extension&#160;(Service-Qualifier&#160;+&#160;Data-Object-Qualifier&#160;<br/>
+&#160;Instance-Qualifier)&#160;by&#160;using&#160;the&#160;SignalHandlerOverrideName.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
113&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=114></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.10.2&#160;Configuration of direct signal&#160;access&#160;</b><br/>
&#160;&#160;Application&#160;variable&#160;for direct&#160;access (default&#160;=&#160;not&#160;set)&#160;<br/>
If&#160;this variable&#160;is specified,&#160;an&#160;access to&#160;the&#160;given&#160;external (=&#160;application) variable&#160;is&#160;<br/>generated.&#160;Nothing&#160;has to&#160;be&#160;done&#160;by&#160;the&#160;application.&#160;The&#160;external&#160;variable&#160;must&#160;<br/>be&#160;defined&#160;inside&#160;the&#160;application.&#160;<br/>
&#160;&#160;SignalHandlerOverrideName&#160;(default = not&#160;set).&#160;<br/>
You&#160;can&#160;adapt&#160;the&#160;name&#160;of&#160;the&#160;Signal Handler setting&#160;this value.&#160;By&#160;using&#160;this&#160;<br/>“Override&#160;Name” it is also&#160;possible&#160;to&#160;reuse&#160;an&#160;already&#160;existing&#160;Signal Handler&#160;&#160;<br/>
<b>12.6.11&#160;State&#160;Handling (CANdesc&#160;only)&#160;</b><br/>
<b>12.6.11.1&#160;DescGetState&lt;StateGroup&gt;()&#160;</b><br/>
<b>DescGetState&lt;StateGroup&gt;&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
DescStateGroup&#160;<b>DescGetState&lt;StateGroup-Qualifier&gt;&#160;</b>(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
DescStateGroup&#160;<b>DescGetState&lt;StateGroup-Qualifier&gt;&#160;</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
DescStateGroup&#160;<br/>
The&#160;current&#160;state&#160;of&#160;the&#160;state&#160;group&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;returns&#160;the&#160;current&#160;session&#160;state.&#160;Since&#160;the&#160;states&#160;are&#160;bit-coded the&#160;<br/>evaluation&#160;expressions&#160;may&#160;be&#160;optimized&#160;for&#160;multiple use&#160;cases.&#160;<br/>Example:&#160;Code execution&#160;only&#160;when either&#160;the&#160;current&#160;state&#160;of&#160;this&#160;group&#160;is&#160;either&#160;state&#160;X&#160;<br/>or&#160;state&#160;Y.&#160;<br/>lState = DescGetState&lt;&#160;<b>StateGroupQualifier&#160;</b>&gt;();&#160;<br/>if ( (lState &amp; (kDescState&lt;&#160;<b>StateGroupQualifier&#160;</b>&gt;&lt;StateQualifier_X&gt;) |&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;kDescState&lt;&#160;<b>StateGroupQualifier&#160;</b>&gt;&lt;StateQualifier_Y&gt;)) != 0 )&#160;<br/>{&#160;<br/>&#160;/*execute code*/&#160;<br/>}&#160;<br/><b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;For&#160;each&#160;state&#160;of&#160;a state-group a&#160;constant&#160;is&#160;defined&#160;in desc.h:&#160;&#160;<br/>
<b>kDescState&lt;StateGroup-Qualifier&gt;&lt;StateQualifier&gt;</b>&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
114&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=115></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.11.2&#160;DescSetState&lt;StateGroup&gt;()&#160;</b><br/>
<b>DescSetState&lt;StateGroup&gt;&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void<b>&#160;DescSetState&lt;StateGroup-Qualifier&gt;&#160;</b>(DescStateGroup&#160;newState)&#160;<br/>
Multi&#160;Context&#160;<br/>
void<b>&#160;DescSetState&lt;StateGroup-Qualifier&gt;&#160;</b>(DescStateGroup newState)&#160;<br/>
<b>Parameter&#160;</b><br/>
DescStateGroup&#160;<br/>
the&#160;state&#160;in which the&#160;state&#160;group should&#160;be&#160;changed&#160;&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>By&#160;this&#160;function&#160;the&#160;state&#160;of&#160;the&#160;state-group&#160;can&#160;be changed&#160;by&#160;the&#160;ECU&#160;application.&#160;The&#160;transition&#160;<br/>notification&#160;function&#160;‘ApplDescOnTransition&lt;&#160;StateGroupQualifier&#160;&gt;’&#160;will&#160;be&#160;called&#160;to notify&#160;the&#160;<br/>application about&#160;the&#160;new&#160;state.&#160;&#160;<br/>Example:&#160;<br/>&#160;DescSetState&lt;StateGroupQualifier&gt;(kDescState&lt;StateGroupQualifier&gt;&lt;StateQualifier&gt;);&#160;&#160;<br/>&#160;<br/>This&#160;line&#160;will&#160;force CANdesc to&#160;change&#160;the&#160;state&#160;of&#160;the&#160;given&#160;state&#160;group&#160;to the&#160;new&#160;one.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-From&#160;a&#160;task&#160;with&#160;priority&#160;lower&#160;or&#160;equal&#160;to&#160;the&#160;DescTask.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;For&#160;each&#160;state&#160;of&#160;a state-group a&#160;constant&#160;will&#160;be&#160;defined in&#160;desc.h:&#160;&#160;<br/>
<b>kDescState&lt;StateGroup-Qualifier&gt;&lt;State-Qualifier&gt;</b>&#160;<br/>
&#160;&#160;The&#160;<b>ApplDescOnTransition&lt;StateGroup-Qualifier&gt;()&#160;</b>notification&#160;function is called&#160;in any&#160;<br/>
case.&#160;Also&#160;if&#160;the&#160;newState is the&#160;same as&#160;the&#160;current&#160;stat&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
115&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=116></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.11.3&#160;ApplDescOnTransition«StateGroup»()&#160;</b><br/>
<b>ApplDescOnTransition«StateGroup»&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescOnTransition&lt;StateGroup-Qualifier&gt;</b>(DescStateGroup newState,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;DescStateGroup formerState)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescOnTransition&lt;StateGroup-Qualifier&gt;&#160;</b>(DescStateGroup newState,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;DescStateGroup formerState)&#160;<br/>
<b>Parameter&#160;</b><br/>
newState&#160;<br/>
the&#160;CANdesc&#160;component&#160;has&#160;changed&#160;to&#160;this&#160;session&#160;state&#160;<br/>
formerState&#160;<br/>
the&#160;CANdesc&#160;component&#160;has&#160;changed&#160;from&#160;this&#160;session&#160;state&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;notification&#160;function&#160;will&#160;be&#160;called&#160;each time&#160;a&#160;transition&#160;has&#160;happened.&#160;&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()&#160;&#160;<br/></b>interrupts&#160;might&#160;be&#160;disabled&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;For&#160;each&#160;state&#160;of&#160;a state-group a&#160;constant&#160;will&#160;be&#160;defined in&#160;desc.h:&#160;&#160;<br/>
<b>kDescState&lt;StateGroup-Qualifier&gt;&lt;StateName-Qualifier&gt;</b>&#160;<br/>
&#160;&#160;For&#160;some exceptions&#160;(e.g.&#160;Session)&#160;the&#160;newState&#160;can&#160;be&#160;the&#160;same as&#160;the&#160;formerState.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
116&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=117></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.12&#160;Force&#160;“Response&#160;Correctly&#160;Received&#160;-&#160;Response&#160;Pending” transmission&#160;<br/></b>In&#160;&#160;some&#160;&#160;cases&#160;&#160;it&#160;&#160;is&#160;&#160;useful&#160;&#160;for&#160;&#160;the&#160;&#160;application&#160;&#160;to&#160;&#160;be&#160;&#160;sure&#160;&#160;that&#160;&#160;it&#160;&#160;has&#160;&#160;enough&#160;&#160;time&#160;&#160;to&#160;<br/>accomplish&#160;a&#160;&#160;process&#160;&#160;without&#160;&#160;causing&#160;&#160;the&#160;&#160;tester&#160;&#160;to&#160;&#160;get&#160;&#160;response&#160;timeout.&#160;&#160;In&#160;&#160;such&#160;&#160;cases&#160;<br/>the&#160;&#160;application&#160;&#160;can&#160;&#160;use&#160;&#160;the&#160;&#160;“force&#160;&#160;RCR-RP”&#160;&#160;mechanism&#160;&#160;of&#160;&#160;CANdesc,&#160;&#160;which&#160;&#160;prevents&#160;<br/>timeout&#160;between&#160;the&#160;tester and&#160;the&#160;ECU&#160;application.&#160;&#160;<br/><b>How&#160;it&#160;works:&#160;<br/></b>This&#160;feature&#160;is&#160;mostly&#160;applicable&#160;when&#160;a&#160;FlashBootLoader&#160;(FBL)&#160;is&#160;available&#160;for&#160;the&#160;ECU.&#160;<br/>Before&#160;&#160;starting&#160;&#160;it,&#160;&#160;the&#160;&#160;application&#160;&#160;wants&#160;&#160;to&#160;&#160;assure&#160;&#160;that&#160;&#160;there&#160;&#160;is&#160;&#160;enough&#160;&#160;time&#160;&#160;to&#160;&#160;perform&#160;<br/>reset&#160;&#160;and&#160;&#160;activate&#160;&#160;the&#160;&#160;FBL&#160;&#160;before&#160;&#160;the&#160;&#160;tester&#160;&#160;gets&#160;&#160;response&#160;&#160;timeout.&#160;&#160;The&#160;&#160;RCR-RP&#160;<br/>mechanism&#160;notifies&#160;the&#160;tester&#160;that&#160;some&#160;action&#160;is&#160;ongoing&#160;and&#160;so&#160;resets&#160;the&#160;timeout&#160;timer&#160;<br/>in&#160;the&#160;tester.&#160;<br/>To&#160;transmit&#160;a&#160;‘Response&#160;Correctly&#160;Received&#160;-&#160;Response&#160;Pending’&#160;response&#160;the&#160;application&#160;<br/>has&#160;&#160;to&#160;&#160;call&#160;&#160;the&#160;&#160;<a href="TechnicalReference_CANdescs.html#118">DescForceRcrRpResponse()</a>&#160;&#160;function.&#160;&#160;To&#160;&#160;be&#160;&#160;sure&#160;&#160;this&#160;&#160;response&#160;&#160;is&#160;<br/>transmitted,&#160;&#160;the&#160;&#160;application&#160;&#160;has&#160;&#160;to&#160;&#160;wait&#160;&#160;for&#160;&#160;the&#160;&#160;transmission&#160;&#160;confirmation&#160;&#160;of&#160;&#160;this&#160;&#160;forced&#160;<br/>RCR-RP&#160;&#160;response&#160;&#160;(the&#160;&#160;function&#160;&#160;<a href="TechnicalReference_CANdescs.html#119">ApplDescRcrRpConfirmation).</a>&#160;&#160;Depending&#160;&#160;on&#160;&#160;its&#160;<br/>transmission&#160;&#160;status&#160;&#160;parameter&#160;&#160;the&#160;&#160;application&#160;&#160;can&#160;&#160;decide&#160;&#160;how&#160;&#160;the&#160;&#160;processing&#160;&#160;shall&#160;<br/>continue&#160;(a&#160;jump&#160;to&#160;FBL&#160;or to&#160;close&#160;the&#160;request&#160;processingth&#160;negative&#160;response).&#160;&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
117&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=118></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.12.1&#160;DescForceRcrRpResponse()&#160;</b><br/>
<b>DescForceRcrRpResponse&#160;</b><br/>
<b>Available&#160;since&#160;2.11.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescForceRcrRpResponse</b>(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescForceRcrRpResponse</b>(vuint8 iContext)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
reference&#160;to&#160;the&#160;corresponding&#160;request&#160;context&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Calling&#160;this&#160;function&#160;the&#160;application can&#160;force&#160;CANdesc&#160;to&#160;send immediately&#160;(not&#160;later&#160;than&#160;<br/>the&#160;next&#160;call&#160;of&#160;DescTask()&#160;function)&#160;a&#160;RCR-RP&#160;response.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>CANdesc&#160;was configured to&#160;use&#160;this&#160;option&#160;(enabled&#160;in the&#160;GENtool).&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Task&#160;or&#160;interrupt.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;This&#160;function&#160;can&#160;be&#160;called:&#160;<br/>
after&#160;a&#160;call&#160;of&#160;a&#160;MainHandler&#160;function&#160;(e.g.<b>&#160;ApplDescCheckSessionTransition()</b>)&#160;<br/>and until&#160;the&#160;call&#160;of&#160;<b>ApplDescResponsePendingOverrun()&#160;</b>or&#160;<br/><b>ApplDescResponsePendingOvertimed()&#160;</b>or<b>pConfirmation().</b>&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
118&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=119></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.12.2&#160;ApplDescRcrRpConfirmation()&#160;</b><br/>
<b>ApplDescRcrRpConfirmation&#160;</b><br/>
<b>Available&#160;since&#160;2.11.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescRcrRpConfirmation</b>(vuint8 status)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescRcrRpConfirmation</b>(vuint8 iContext, vuint8 status)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
Reference&#160;to&#160;the&#160;corresponding&#160;request&#160;context&#160;<br/>
status&#160;<br/>
If&#160;the&#160;transmission&#160;was successful,&#160;the&#160;parameter&#160;value&#160;will&#160;be<i>&#160;<br/>kDescOk</i>.&#160;Otherwise&#160;–&#160;<i>kDescFailed.</i>&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Once&#160;the&#160;RCR-RP&#160;response&#160;has&#160;been&#160;forced,&#160;this&#160;function&#160;will&#160;be&#160;called&#160;in any&#160;case.&#160;The&#160;<br/>transmission&#160;status&#160;is&#160;reported&#160;by&#160;the&#160;status parameter.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>CANdesc&#160;was configured to&#160;use&#160;this&#160;option&#160;(enabled&#160;in the&#160;GENtool).&#160;<br/>
<b>Call&#160;context&#160;<br/></b>CAN&#160;Driver&#160;TX-ISR&#160;&#160;TP&#160;Confirmation&#160;&#160;this&#160;function&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Be aware&#160;of&#160;time&#160;consuming&#160;implementation&#160;for&#160;this&#160;function&#160;(interrupt&#160;call&#160;context).&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>12.6.13&#160;DynamicallyDefineDataIdentifier &#160;($2C)&#160;(UDS) functions&#160;<br/></b>Since&#160;this&#160;feature is&#160;only&#160;for&#160;some&#160;OEM&#160;available,&#160;please refer&#160;to&#160;the&#160;OEM&#160;specific&#160;documentation&#160;<br/>to&#160;find&#160;out&#160;if&#160;is&#160;applicable&#160;for&#160;your&#160;configuration.&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
119&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=120></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.13.1&#160;DescMayCallStateTaskAgain()&#160;</b><br/>
<b>DescMayCallStateTaskAgain&#160;</b><br/>
<b>Available&#160;since&#160;4.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
DescBool&#160;<b>DescMayCallStateTaskAgain</b>&#160;(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
DescBool&#160;<b>DescMayCallStateTaskAgain&#160;</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
kDescTrue&#160;<br/>
&#160;TRUE&#160;if&#160;you&#160;may&#160;call&#160;again the&#160;state&#160;task&#160;within this&#160;application&#160;<br/>task&#160;cycle.&#160;<br/>
kDescFalse&#160;<br/>
&#160;FALSE&#160;if&#160;the&#160;DescStateTask()&#160;must&#160;not&#160;be&#160;called&#160;again.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Motivation:&#160;The&#160;<i><b>DescStateTask()&#160;</b></i>can&#160;be&#160;called&#160;as&#160;fast&#160;as&#160;possible but&#160;it&#160;still&#160;can&#160;not&#160;be&#160;<br/>enough&#160;fast&#160;for&#160;complex&#160;service processing&#160;(e.g.&#160;DDIDs&#160;containing&#160;long&#160;descriptions)&#160;to&#160;<br/>match&#160;fast&#160;timing-performance&#160;requirements.&#160;This&#160;function&#160;provides&#160;the&#160;info if&#160;the&#160;<br/>application may&#160;call&#160;again the&#160;state-task&#160;in the same&#160;task&#160;context&#160;without&#160;causing&#160;endless&#160;<br/>loop (important&#160;for&#160;non-preemptive OS&#160;environments).&#160;<br/>Example of&#160;the&#160;API&#160;usage:&#160;<br/>void ApplDiagTask(void) /* application function called as fast as possible */&#160;<br/>{&#160;<br/>&#160; &#160;do /* pump the state task as long as needed */&#160;<br/>&#160; &#160;{&#160;<br/>&#160; &#160; &#160;DescStateTask();&#160;<br/>&#160; &#160;}&#160;<br/>&#160; &#160;while(<b>DescMayCallStateTaskAgain</b>() == kDescTrue);&#160;<br/>}&#160;<br/><b>Pre-conditions&#160;</b><br/>
-&#160;Preprocessor&#160;define&#160;“<b>DESC_ENABLE_HIPERFORMANCE_DYNDID_MODE</b>”&#160;is&#160;<br/>available (using&#160;user-config&#160;file in&#160;GENtool).&#160;<br/>-&#160;The&#160;application uses&#160;the split-task&#160;concept&#160;(i.e.&#160;calls&#160;<i><b>DescState-/TimerTask()</b></i>&#160;instead of&#160;<br/><i><b>DescTask()</b></i>).&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Background-loop level&#160;or&#160;OSEK-OS&#160;Task.&#160;The&#160;Task&#160;should have a&#160;lower&#160;or&#160;equal&#160;priority&#160;<br/>than all&#160;other&#160;interaction&#160;to&#160;the&#160;CANdesc&#160;component.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
120&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=121></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.13.2&#160;ApplDescCheckDynDidMemoryArea()&#160;</b><br/>
<b>ApplDescCheckDynDidMemoryArea&#160;&#160;</b><br/>
<b>Available&#160;since&#160;3.02.00&#160;</b><br/>
<b>Must be Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Any&#160;Context&#160;<br/>
DescDynDidMemCheckResult &#160;<b>ApplDescCheckDynDidMemoryArea</b>&#160;(&#160;<br/>&#160;DescDynDidMemBlockAddress srcAddr,&#160;<br/>&#160;DescDynDidMemBlockSize &#160; &#160;len &#160; &#160; &#160;);&#160;<br/>
<b>Parameter&#160;</b><br/>
srcAddr&#160;<br/>
Start&#160;address&#160;(Service $2C&#160;02&#160;request&#160;parameter&#160;‘memoryAddress’).&#160;<br/>
len&#160;<br/>
Length of&#160;block&#160;to&#160;read&#160;(Service $2C&#160;02&#160;request&#160;parameter&#160;<br/>‘memorySize’).&#160;<br/>
<b>Return&#160;code&#160;<br/></b>memBlockOk&#160;<br/>
Permit&#160;the&#160;access&#160;to&#160;requested&#160;memory&#160;block&#160;and extend the&#160;DDID.&#160;<br/>
memBlockInvAddress&#160;<br/>
Forbid the&#160;access&#160;due&#160;invalid requested&#160;memory&#160;address&#160;<br/>(requestOutOfRange).&#160;<br/>
memBlockInvSize&#160;<br/>
Forbid the&#160;access&#160;due&#160;invalid requested&#160;block&#160;length&#160;<br/>(requestOutOfRange).&#160;<br/>
memBlockInvSecurity&#160;<br/>
Forbid the&#160;access&#160;due&#160;current&#160;security&#160;mode&#160;settings&#160;prohibit&#160;the&#160;DDID&#160;<br/>definition&#160;(securityAccessDenied).&#160;<br/>
memBlockInvCondition&#160;&#160;Forbid the&#160;access&#160;due&#160;other&#160;restrictions&#160;(conditionsNotCorrect).&#160;<br/>If&#160;the&#160;memory&#160;access if&#160;forbidden,&#160;the&#160;Service $2C&#160;Request&#160;is&#160;negative responded&#160;with NRC&#160;22&#160;<br/>(conditionsNotCorrect),&#160;31 (requestOutOfRange)&#160;or&#160;33&#160;(securityAccessDenied).&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;callback&#160;function&#160;is&#160;triggered&#160;when defining&#160;a&#160;DDID&#160;that&#160;shall&#160;read&#160;bytes&#160;from&#160;the&#160;ECU’s&#160;<br/>memory&#160;(Service Request&#160;$2C&#160;02).&#160;The&#160;application&#160;can&#160;permit&#160;the&#160;(re-)definition&#160;of&#160;the&#160;DDID&#160;or&#160;<br/>forbid it.&#160;<br/>The&#160;service request&#160;is&#160;responded&#160;according&#160;to&#160;this.&#160;<br/>The&#160;application must&#160;check&#160;<br/>
&#160;&#160;if&#160;the&#160;given&#160;srcAddr&#160;and&#160;following&#160;len&#160;bytes are valid ECU&#160;addresses&#160;and&#160;if&#160;they&#160;are&#160;<br/>
readable,&#160;<br/>
&#160;&#160;if&#160;the&#160;current&#160;security&#160;state allows&#160;to define&#160;the&#160;DDID&#160;right&#160;now,&#160;<br/>&#160;&#160;if&#160;there are other&#160;conditions that&#160;may&#160;forbid the&#160;definition&#160;of&#160;the&#160;DDID.&#160;<br/>
If&#160;all&#160;checks&#160;allow&#160;the&#160;DDID&#160;definition,&#160;the&#160;callback&#160;function&#160;must&#160;return&#160;memBlockOk.&#160;<br/>FYI:&#160;When&#160;later&#160;reading&#160;the&#160;defined DDIDs&#160;by&#160;service&#160;$22,&#160;the&#160;standard&#160;checks&#160;[of&#160;Service&#160;$23&#160;<br/>ReadMemoryByAddress]&#160;are&#160;executed,&#160;that&#160;perform&#160;security&#160;checks&#160;before accessing&#160;the&#160;<br/>memory.&#160;<br/>So,&#160;above security&#160;check&#160;with service $2C&#160;shall&#160;prove that&#160;the&#160;current&#160;security&#160;state permits&#160;the&#160;<br/><i>definition</i>&#160;of&#160;the&#160;DDID,&#160;the security&#160;check&#160;in&#160;service $22&#160;(resp.&#160;$23)&#160;proves [in&#160;the&#160;context&#160;of&#160;the&#160;<br/>then existing&#160;security&#160;state]&#160;the&#160;actual&#160;<i>reading</i>&#160;of&#160;the&#160;memory&#160;range.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
121&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=122></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-122_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
<b>12.6.13.3&#160;Non-volatile&#160;memory&#160;support&#160;<br/></b>For&#160;&#160;some&#160;&#160;car-manufactures&#160;&#160;CANdesc&#160;&#160;provides&#160;&#160;NVRAM&#160;&#160;support&#160;&#160;for&#160;&#160;the&#160;&#160;dynamically&#160;<br/>defined&#160;DID&#160;definitions.&#160;There&#160;are&#160;some&#160;APIs&#160;that&#160;must&#160;be&#160;operated&#160;and&#160;some&#160;call-backs&#160;<br/>to&#160;be&#160;implemented&#160;by&#160;the&#160;application&#160;in&#160;order&#160;to&#160;get&#160;the&#160;NVRAM&#160;support&#160;fully&#160;operational.&#160;<br/>
&#160;<br/>
The&#160;following&#160;diagrams&#160;show&#160;the&#160;two&#160;oeprations&#160;on&#160;NVRAM&#160;–&#160;restore&#160;(at&#160;power&#160;on)&#160;and&#160;st&#160;<br/>ore (usuall&#160;prior power off)&#160;data.&#160;<br/>
&#160;<br/>
<b>Restore data at&#160;ECU&#160;power&#160;on&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>At&#160;each&#160;CANdesc&#160;initialization (e.g.&#160;ECU&#160;reset/&#160;power&#160;on)&#160;the&#160;“restore”&#160;procedure&#160;must&#160;<br/>
&#160;&#160;be&#160;performed!&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
122&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=123></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-123_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
Figure&#160;12-1&#160;DynDID&#160;definition&#160;restore&#160;and&#160;tester&#160;interaction&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
123&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=124></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-124_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-124_2.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>Store data at&#160;ECU&#160;power&#160;down&#160;</b><br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>The&#160;store operation&#160;can&#160;be&#160;performed&#160;at&#160;any&#160;time&#160;not&#160;only&#160;at&#160;power&#160;down.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
Figure&#160;12-2&#160;Store&#160;DynDID&#160;definitions&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
124&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=125></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.13.3.1&#160;DescDynDefineDidPowerUp()&#160;</b><br/>
<b>DescDynDefineDidPowerUp&#160;</b><br/>
<b>Available&#160;since&#160;5.06.09&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescDynDefineDidPowerUp&#160;</b>(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescDynDefineDidPowerUp&#160;</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Once&#160;the&#160;ECU&#160;has&#160;been&#160;powered&#160;one/reset&#160;or&#160;just&#160;need&#160;to&#160;be&#160;reinitialized,&#160;this&#160;API&#160;must&#160;<br/>be&#160;called&#160;to&#160;restore&#160;the&#160;dynamically&#160;defined DID&#160;content.&#160;<br/>&#160;<br/>Usually&#160;called&#160;after&#160;the&#160;NVRAM&#160;manager&#160;is&#160;initialized.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;Service 0x2C&#160;needs&#160;to&#160;store&#160;the&#160;DynDID&#160;definitions&#160;to&#160;the&#160;NVRAM&#160;(OEM&#160;specific&#160;<br/>requirement)&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;any&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Must&#160;be&#160;called&#160;after&#160;DescInitPowerOn().&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
125&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=126></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.13.3.2&#160;DescDynIdMemContentRestored ()&#160;</b><br/>
<b>DescDynIdMemContentRestored&#160;</b><br/>
<b>Available&#160;since&#160;5.06.09&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescDynIdMemContentRestored&#160;</b>(DescDynDidStorageInfo storageInfo)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescDynIdMemContentRestored&#160;</b>(DescDynDidStorageInfo storageInfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
storageInfo.nvData&#160;<br/>
Not&#160;used&#160;<br/>The&#160;size (in bytes)&#160;of&#160;the&#160;restored&#160;table.<br/>
storageInfo.nvDataSize&#160;<br/>
&#160;<br/>
The&#160;stored&#160;checksum,&#160;calculated&#160;by&#160;CANdesc&#160;at&#160;store&#160;time.&#160;<br/>
storageInfo.checkSum&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>After&#160;CANdesc&#160;has&#160;requested&#160;the&#160;application&#160;to&#160;restore&#160;the&#160;DynDID&#160;data&#160;<br/><a href="TechnicalReference_CANdescs.html#129">(“<i>ApplDescRestoreDynIdMemContent&#160;()</i>”</a>),&#160;this&#160;API&#160;must&#160;be&#160;called&#160;to&#160;notify&#160;CANdesc&#160;that&#160;<br/>the&#160;DynDID&#160;content&#160;has&#160;been&#160;restored&#160;and&#160;can&#160;be used.&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;Service 0x2C&#160;needs&#160;to&#160;store&#160;the&#160;DynDID&#160;definitions&#160;to&#160;the&#160;NVRAM&#160;(OEM&#160;specific&#160;<br/>requirement)&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;any&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;none&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
126&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=127></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.13.3.3&#160;DescDynDefineDidPowerDown&#160;()&#160;</b><br/>
<b>DescDynDefineDidPowerDown&#160;</b><br/>
<b>Available&#160;since&#160;5.06.09&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>DescDynDefineDidPowerDown&#160;</b>(void)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>DescDynDefineDidPowerDown&#160;</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>If&#160;the&#160;ECU&#160;has&#160;to be&#160;reset&#160;or&#160;just&#160;power&#160;off&#160;/shutdown,&#160;this&#160;API&#160;must&#160;be called&#160;to store&#160;the&#160;<br/>current&#160;DID&#160;definitions.&#160;&#160;<br/>&#160;<br/>In order&#160;to&#160;save E2PROM&#160;write cycles,&#160;the&#160;application may&#160;perform&#160;compare&#160;to&#160;the&#160;<br/>current&#160;E2PROM&#160;content&#160;and&#160;decide&#160;whether&#160;to&#160;store&#160;the&#160;table&#160;content&#160;or&#160;not.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;Service 0x2C&#160;needs&#160;to&#160;store&#160;the&#160;DynDID&#160;definitions&#160;to&#160;the&#160;NVRAM&#160;(OEM&#160;specific&#160;<br/>requirement)&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;any&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Shall&#160;be&#160;called&#160;prior&#160;power-down/shutdown execution&#160;<br/>
&#160;&#160;May&#160;be&#160;called&#160;any&#160;time&#160;to store&#160;the&#160;current&#160;content&#160;of&#160;the&#160;DynDID&#160;tables.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
127&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=128></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.13.3.4&#160;ApplDescStoreDynIdMemContent&#160;()&#160;</b><br/>
<b>ApplDescStoreDynIdMemContent&#160;</b><br/>
<b>Available&#160;since&#160;5.06.09&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescStoreDynIdMemContent&#160;</b>(DescDynDidStorageInfo storageInfo)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescStoreDynIdMemContent&#160;</b>(DescDynDidStorageInfo storageInfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
storageInfo.nvData&#160;<br/>
The&#160;pointer&#160;to&#160;the&#160;data&#160;to be&#160;stored;&#160;<br/>The&#160;size (in bytes)&#160;of&#160;the&#160;table;<br/>
storageInfo.nvDataSize&#160;<br/>
&#160;<br/>
The&#160;checksum&#160;value,&#160;calculated&#160;by&#160;CANdesc,&#160;to&#160;be&#160;stored.&#160;<br/>
storageInfo.checkSum&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Once&#160;this&#160;API&#160;is&#160;called&#160;by&#160;CANdesc,&#160;the&#160;application must&#160;trigger&#160;a&#160;write E2PROM&#160;<br/>procedure&#160;to&#160;store&#160;the&#160;data&#160;given&#160;by&#160;CANdesc&#160;and&#160;the&#160;checksum&#160;value.&#160;<br/>&#160;<br/>In order&#160;to&#160;save E2PROM&#160;write cycles,&#160;the&#160;application may&#160;perform&#160;compare&#160;to&#160;the&#160;<br/>current&#160;E2PROM&#160;content&#160;and&#160;decide&#160;whether&#160;to&#160;store&#160;the&#160;table&#160;content&#160;or&#160;not.&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;Service 0x2C&#160;needs&#160;to&#160;store&#160;the&#160;DynDID&#160;definitions&#160;to&#160;the&#160;NVRAM&#160;(OEM&#160;specific&#160;<br/>requirement)&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;any&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;CANdesc&#160;does not&#160;keep&#160;the&#160;data pointed&#160;by&#160;the&#160;parameter&#160;pointer&#160;during the&#160;write&#160;<br/>
operation!&#160;The&#160;application must&#160;mirror&#160;the&#160;data&#160;if&#160;needed!&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
128&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=129></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.13.3.5&#160;ApplDescRestoreDynIdMemContent ()&#160;</b><br/>
<b>ApplDescRestoreDynIdMemContent&#160;</b><br/>
<b>Available&#160;since&#160;5.06.09&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescRestoreDynIdMemContent&#160;</b>(DescDynDidStorageInfo storageInfo)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescRestoreDynIdMemContent&#160;</b>(DescDynDidStorageInfo storageInfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
storageInfo.nvData&#160;<br/>
The&#160;pointer&#160;to&#160;the&#160;data&#160;to where the&#160;stored&#160;data&#160;shall&#160;be&#160;written&#160;<br/>The&#160;size (in bytes)&#160;of&#160;the&#160;table expected.<br/>
storageInfo.nvDataSize&#160;<br/>
&#160;<br/>
Not&#160;used&#160;&#160;<br/>
storageInfo.checkSum&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Once&#160;this&#160;API&#160;is&#160;called&#160;by&#160;CANdesc,&#160;the&#160;application must&#160;trigger&#160;a&#160;read&#160;E2PROM&#160;<br/>procedure&#160;to&#160;restore&#160;the&#160;data&#160;for&#160;CANdesc&#160;and&#160;the checksum&#160;value.&#160;<br/>&#160;<br/>Once&#160;the&#160;read&#160;process&#160;has completed,&#160;the&#160;API&#160;<a href="TechnicalReference_CANdescs.html#126">“<i>DescDynIdMemContentRestored&#160;()</i>”</a>&#160;must&#160;<br/>be&#160;called&#160;to&#160;acknowledge the&#160;operation&#160;status&#160;to&#160;CANdesc.&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
-&#160;Service 0x2C&#160;needs&#160;to&#160;store&#160;the&#160;DynDID&#160;definitions&#160;to&#160;the&#160;NVRAM&#160;(OEM&#160;specific&#160;<br/>requirement)&#160;<br/>
<b>Call&#160;context&#160;</b><br/>
-&#160;any&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
129&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=130></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.14&#160;Memory&#160;Access&#160;Callbacks&#160;</b><br/>
<b>12.6.14.1&#160;ApplDescReadMemoryByAddress()&#160;</b><br/>
<b>ApplDescReadMemoryByAddress&#160;</b><br/>
<b>Available&#160;since&#160;5.06.04&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Any&#160;Context&#160;<br/>
void&#160;<b>ApplDescReadMemoryByAddress</b>&#160;(DescMsgContext* pMsgContext,&#160;<br/>t_descMemByAddrInfo* pMemInfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
pMsgContext&#160;<br/>
Refer&#160;the&#160;section<a href="TechnicalReference_CANdescs.html#88">&#160;12.6.4.2&#160;Service MainHandler&#160;</a>for&#160;details&#160;<br/>about&#160;this&#160;parameter.&#160;<br/>
pMsgContext-&gt;resData&#160;<br/>
The&#160;response&#160;buffer&#160;pointer&#160;<br/>
pMsgContext-&gt;resDataLen&#160;&#160;The&#160;actual&#160;response&#160;length&#160;<br/>
pMemInfo-&gt;address&#160;<br/>
The&#160;address&#160;to&#160;read&#160;from&#160;<br/>
pMemInfo-&gt;length&#160;<br/>
The&#160;number&#160;of&#160;bytes&#160;to&#160;read&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;callback&#160;is&#160;called&#160;for&#160;read&#160;memory&#160;by&#160;address&#160;requests.&#160;The&#160;application&#160;has&#160;to do&#160;<br/>following:&#160;<br/>&#160;<br/>
Perform&#160;memory&#160;block&#160;validation&#160;(negative response&#160;can&#160;be&#160;set&#160;by&#160;calling&#160;<br/>
<a href="TechnicalReference_CANdescs.html#83"><i>DescSetNegResponse()</i>).</a>&#160;<br/>&#160;<br/>
Optional:&#160;Perform&#160;additional&#160;state&#160;validations&#160;(negative response can&#160;be&#160;set&#160;by&#160;<br/>
calling<a href="TechnicalReference_CANdescs.html#83">&#160;<i>DescSetNegResponse()</i>).</a>&#160;<br/>&#160;<br/>
Copy&#160;the&#160;requested&#160;memory&#160;contents&#160;into&#160;the&#160;response&#160;buffer.&#160;<br/>
&#160;<br/>
Set&#160;the&#160;response data&#160;length&#160;to&#160;the&#160;number&#160;of&#160;bytes copied.&#160;<br/>
&#160;<br/>
Confirm&#160;that&#160;the&#160;processing&#160;is&#160;finished&#160;(by&#160;calling<a href="TechnicalReference_CANdescs.html#84">&#160;<i>DescProcessingDone()</i>).</a>&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
&#160;&#160;The&#160;read&#160;memory&#160;by&#160;address&#160;service is supported.&#160;<br/>
&#160;&#160;Refer&#160;to&#160;chapter<a href="TechnicalReference_CANdescs.html#67">&#160;<i>9.3&#160;Read/Write Memory&#160;by&#160;Address (SID&#160;$23/$3D)&#160;(UDS)</i>&#160;</a>for&#160;more&#160;<br/>
details&#160;of&#160;the&#160;availability&#160;of&#160;this&#160;API.&#160;If&#160;you&#160;don’t&#160;see&#160;this&#160;API&#160;provided in&#160;desc.h,&#160;then&#160;<br/>this&#160;feature&#160;is&#160;not&#160;supported&#160;for&#160;your&#160;project.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;To&#160;call&#160;this&#160;handler&#160;periodically,&#160;‘DescStartMemByAddrRepeatedCall’&#160;needs&#160;to&#160;be&#160;used&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
130&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=131></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.14.2&#160;ApplDescWriteMemoryByAddress()&#160;</b><br/>
<b>ApplDescWriteMemoryByAddress&#160;</b><br/>
<b>Available&#160;since&#160;5.06.04&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Any&#160;Context&#160;<br/>
void&#160;<b>ApplDescWriteMemoryByAddress</b>&#160;(DescMsgContext* pMsgContext,&#160;<br/>t_descMemByAddrInfo* pMemInfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
pMsgContext&#160;<br/>
Refer&#160;the&#160;section<a href="TechnicalReference_CANdescs.html#88">&#160;12.6.4.2&#160;Service MainHandler&#160;</a>for&#160;details&#160;<br/>about&#160;this&#160;parameter.&#160;<br/>
pMsgContext-&gt;reqData&#160;<br/>
The&#160;pointer&#160;to&#160;the&#160;data&#160;to&#160;store&#160;<br/>
pMemInfo-&gt;address&#160;<br/>
The&#160;address&#160;to&#160;write&#160;to&#160;<br/>
pMemInfo-&gt;length&#160;<br/>
The&#160;number&#160;of&#160;bytes&#160;to&#160;write&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;callback&#160;is&#160;called&#160;for&#160;write memory&#160;by&#160;address&#160;requests.&#160;The&#160;application&#160;has&#160;to do&#160;<br/>following:&#160;<br/>&#160;<br/>
Perform&#160;memory&#160;block&#160;validation&#160;(negative response&#160;can&#160;be&#160;set&#160;by&#160;calling&#160;<br/>
<a href="TechnicalReference_CANdescs.html#83"><i>DescSetNegResponse()</i>).</a>&#160;<br/>&#160;<br/>
Optional:&#160;Perform&#160;additional&#160;state&#160;validations&#160;(negative response can&#160;be&#160;set&#160;by&#160;<br/>
calling<a href="TechnicalReference_CANdescs.html#83">&#160;<i>DescSetNegResponse()</i>).</a>&#160;<br/>&#160;<br/>
Copy&#160;the&#160;provided data&#160;into&#160;the&#160;memory&#160;area.&#160;<br/>
&#160;<br/>
Confirm&#160;that&#160;the&#160;processing&#160;is&#160;finished&#160;(by&#160;callin<a href="TechnicalReference_CANdescs.html#84">g&#160;<i>DescProcessingDone()</i>).</a>&#160;<br/>
<b>Pre-conditions&#160;</b><br/>
&#160;&#160;The&#160;write memory&#160;by&#160;address&#160;service is supported.&#160;<br/>
&#160;&#160;Refer&#160;to&#160;chapter<a href="TechnicalReference_CANdescs.html#67">&#160;<i>9.3&#160;Read/Write Memory&#160;by&#160;Address (SID&#160;$23/$3D)&#160;(UDS)</i>&#160;</a>for&#160;more&#160;<br/>
details&#160;of&#160;the&#160;availability&#160;of&#160;this&#160;API.&#160;If&#160;you&#160;don’t&#160;see&#160;this&#160;API&#160;provided in&#160;desc.h,&#160;then&#160;<br/>this&#160;feature&#160;is&#160;not&#160;supported&#160;for&#160;your&#160;project.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;To&#160;call&#160;this&#160;handler&#160;periodically,&#160;‘DescStartMemByAddrRepeatedCall’&#160;needs&#160;to&#160;be&#160;used&#160;<br/>&#160;<br/>
<b>12.6.15&#160;Flash Boot Loader&#160;Support&#160;<br/></b>CANdesc provides some&#160;features&#160;to&#160;comply&#160;with&#160;the&#160;HIS&#160;flash&#160;boot&#160;loader procedures.&#160;&#160;<br/>These&#160;features&#160;are&#160;not&#160;released&#160;for&#160;all&#160;OEMs&#160;so&#160;if&#160;the&#160;below&#160;listed&#160;APIs&#160;are&#160;not&#160;available&#160;<br/>in&#160;your&#160;CANdesc&#160;version,&#160;then&#160;for&#160;the&#160;OEM,&#160;you&#160;currently&#160;use&#160;CANdesc,&#160;does&#160;not&#160;require,&#160;<br/>resp.&#160;has another FBL&#160;procedures.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
131&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=132></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.15.1&#160;DescSendPosRespFBL()&#160;</b><br/>
<b>DescSendPosRespFBL&#160;</b><br/>
<b>Available&#160;since&#160;4.05.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Any&#160;Context&#160;<br/>
void&#160;<b>DescSendPosRespFBL&#160;</b>(t_descFblPosRespType posRespSId)&#160;<br/>
<b>Parameter&#160;</b><br/>
posRespSId&#160;<br/>
One&#160;of&#160;the&#160;following&#160;values are&#160;allowed:&#160;<br/>&#160;&#160;kDescSendFblPosRespEcuHardReset&#160;<br/>
&#160;&#160;kDescSendFblPosRespDscDefault.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;application shall&#160;call&#160;this&#160;function&#160;as&#160;soon as&#160;possible after&#160;the&#160;initialization of&#160;the&#160;<br/>CANdesc&#160;component&#160;is&#160;done&#160;and&#160;the&#160;ECU&#160;is&#160;able to&#160;communicate.&#160;<br/>&#160;<br/>Once&#160;this&#160;function&#160;called,&#160;CANdesc&#160;will&#160;try&#160;to&#160;send the&#160;corresponding&#160;positive response&#160;<br/>as&#160;follows:&#160;<br/>&#160;&#160;kDescSendFblPosRespEcuHardReset&#160;–&#160;a positive response&#160;to EcuHardReset&#160;($51&#160;<br/>
$01)&#160;will&#160;be&#160;sent.&#160;<br/>
&#160;&#160;kDescSendFblPosRespDscDefault&#160;–&#160;a positive response to&#160;DiagnosticSessionControl&#160;<br/>
Default&#160;session&#160;($50&#160;$01&#160;$P2time&#160;$P2Star/10)&#160;will&#160;be&#160;sent.&#160;<br/>
&#160;<br/>If&#160;CANdesc&#160;is&#160;currently&#160;busy&#160;with a&#160;new&#160;tester&#160;request,&#160;there will&#160;be&#160;no&#160;response&#160;sent&#160;by&#160;<br/>this&#160;API.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>The&#160;FBL&#160;positive response&#160;feature&#160;is&#160;supported.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Any.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;See<a href="TechnicalReference_CANdescs.html#155">&#160;13.8&#160;</a><br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
132&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=133></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.15.2&#160;ApplDescInitPosResFblBusInfo()&#160;</b><br/>
<b>ApplDescInitPosResFblBusInfo&#160;</b><br/>
<b>Available&#160;since&#160;5.07.04&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Any&#160;Context&#160;<br/>
vuint8&#160;<b>ApplDescInitPosResFblBusInfo&#160;</b>(t_descUsdtNetBus* pBusInfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
pBusInfo&#160;<br/>
Reference&#160;to&#160;the&#160;bus&#160;information&#160;structure&#160;that&#160;will&#160;be&#160;<br/>initialized&#160;here.&#160;<br/>
pBusInfo-&gt;busType&#160;<br/>
The&#160;bus&#160;driver&#160;that&#160;will&#160;send the&#160;response&#160;<br/>
pBusInfo-&gt;comChannel&#160;<br/>
The&#160;communication&#160;channel&#160;on&#160;which the&#160;response will&#160;be&#160;<br/>sent.&#160;(relevant&#160;only&#160;on&#160;multi&#160;channel&#160;systems)&#160;<br/>
pBusInfo-&gt;testerId&#160;<br/>
The&#160;tester&#160;address&#160;which will&#160;be&#160;respond&#160;to.&#160;(relevant&#160;only&#160;on&#160;<br/>bus&#160;systems&#160;with source/target&#160;addresses)&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
kDescOk&#160;<br/>
Operation&#160;was successful,&#160;the&#160;FBL&#160;positive response will&#160;be&#160;<br/>sent.&#160;<br/>
kDescFailed&#160;<br/>
Operation&#160;failed&#160;–&#160;no&#160;FBL&#160;positive response will&#160;be sent.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;callback&#160;is&#160;called&#160;once the&#160;application decided to&#160;call&#160;the&#160;API<a href="TechnicalReference_CANdescs.html#132">&#160;<i>DescSendPosRespFBL</i>&#160;<br/></a>to&#160;get&#160;the&#160;concrete addressing&#160;information.&#160;&#160;<br/>&#160;<br/>The&#160;application shall&#160;initialize only&#160;the&#160;parameter&#160;described above.&#160;The&#160;optional&#160;ones can&#160;<br/>be&#160;skipped&#160;if&#160;not&#160;relevant&#160;on&#160;your&#160;system.&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;<br/></b>The&#160;FBL&#160;positive response&#160;feature&#160;is&#160;supported.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From<a href="TechnicalReference_CANdescs.html#132">&#160;<i>DescSendPosRespFBL&#160;</i></a>context.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;-&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
133&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=134></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.16&#160;Debug Interface&#160;/&#160;Assertion&#160;</b><br/>
<b>12.6.16.1&#160;ApplDescFatalError()&#160;</b><br/>
<b>ApplDescFatalError&#160;</b><br/>
<b>Available&#160;since&#160;2.00.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescFatalError</b>&#160;(vuint8 errorCode, vuint16 lineNumber)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescFatalError&#160;</b>(vuint8 errorCode, vuint16 lineNumber)&#160;<br/>
<b>Parameter&#160;</b><br/>
errorCode&#160;<br/>
The&#160;errorCode&#160;is&#160;a classification&#160;of&#160;the&#160;assertion.&#160;The&#160;<br/>errorCodes&#160;can&#160;be&#160;also&#160;found&#160;in&#160;file ‘desc.h’.&#160;The&#160;errorCodes&#160;<br/>are&#160;listed&#160;below:&#160;<br/>
lineNumber&#160;<br/>
A&#160;line&#160;number&#160;of&#160;file ‘desc.c’&#160;from&#160;which this&#160;function&#160;is&#160;called.&#160;&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;CANdesc&#160;debug interface&#160;is&#160;similar&#160;to&#160;assertion&#160;constructof&#160;common&#160;programming&#160;<br/>languages.&#160;Assertions&#160;are code checks&#160;which are&#160;written&#160;so&#160;that&#160;they&#160;should always&#160;<br/>evaluate to&#160;true.&#160;If&#160;an&#160;assertion&#160;is&#160;false,&#160;it&#160;indicates a&#160;possible bug in&#160;the&#160;program,&#160;corrupt&#160;<br/>system&#160;state&#160;or&#160;a&#160;misoperation of&#160;the&#160;user-interface.&#160;&#160;<br/>CANdesc&#160;is&#160;calling&#160;the&#160;function&#160;ApplDescFatalError()&#160;function&#160;to indicate a&#160;evaluation&#160;of&#160;<br/>an&#160;assertion&#160;to&#160;false.&#160;If&#160;this&#160;will&#160;happen&#160;it&#160;is&#160;recommended&#160;to&#160;halt&#160;the&#160;program's&#160;execution&#160;<br/>immediately.&#160;This&#160;could&#160;be&#160;reach&#160;by&#160;an&#160;endless&#160;loop in&#160;that&#160;call-back.&#160;<br/>The&#160;assertions&#160;can&#160;be&#160;disabled&#160;in the&#160;GenTool&#160;settings.&#160;The&#160;resource&#160;(ROM&#160;and runtime)&#160;<br/>consumption&#160;can&#160;be&#160;reduced by&#160;disabling&#160;the&#160;assertions.&#160;<br/>
<b>Error&#160;codes&#160;<br/>kDescAssertWrongTpTxChannel&#160;</b>(0x00):&#160;&#160;<br/>The&#160;wrong&#160;TP&#160;channel&#160;is&#160;used&#160;–&#160;verify&#160;the&#160;TP&#160;interface&#160;to&#160;the&#160;CANdesc&#160;component&#160;<br/>&#160;<br/><b>kDescAssertIndexTableInvalidReference&#160;</b>(0x02):&#160;<br/>Internal&#160;generation&#160;failure.&#160;<br/>&#160;<br/><b>kDescAssertSvcTableUnreachableItem&#160;</b>(0x03):&#160;<br/>Internal&#160;generation&#160;failure.&#160;<br/>&#160;<br/><b>kDescAssertSvcTableInvalidReference&#160;</b>(0x04):&#160;<br/>Internal&#160;generation&#160;failure.&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
134&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=135></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>kDescAssertSvcTableInconsistentNumber&#160;</b>(0x05):&#160;<br/>Internal&#160;generation&#160;failure.&#160;<br/>&#160;<br/><b>kDescAssertMissingMainHandler&#160;</b>(0x06):&#160;<br/>Internal&#160;generation&#160;failure.&#160;<br/>&#160;<br/><b>kDescAssertInvalidContextId&#160;</b>(0x08):&#160;<br/>Wrong&#160;iContext&#160;should be&#160;used&#160;-&#160;Check&#160;the&#160;consistency&#160;of&#160;the&#160;iContext&#160;parameter&#160;in the&#160;<br/>application.&#160;<br/>&#160;<br/><b>kDescAssertSvcTableIndexOutOfRange&#160;</b>(0x09):&#160;<br/>Internal&#160;generation&#160;failure.&#160;<br/>&#160;<br/><b>kDescAssertSvcInstTableIndexOutOfRange&#160;</b>(0x0A):&#160;<br/>Internal&#160;generation&#160;failure.&#160;<br/>&#160;<br/><b>kDescAssertContextIdWasModified&#160;</b>(0x0B):&#160;&#160;&#160;<br/>The&#160;iContext&#160;member&#160;of&#160;the&#160;pMsgContext&#160;parameter&#160;in the&#160;MainHandler&#160;functions&#160;are&#160;<br/>illegal&#160;modified&#160;–&#160;verify&#160;the&#160;MainHandler&#160;functions&#160;in the&#160;application&#160;&#160;<br/>&#160;<br/><b>kDescAssertProcessingDoneCallAfterResFlushing&#160;</b>(0x0E):&#160;<br/>DescProcessingDone()&#160;is&#160;called&#160;at&#160;least&#160;twice&#160;for&#160;one&#160;request&#160;–&#160;check&#160;the&#160;call&#160;of&#160;<br/>DescProcessingDone()&#160;in the&#160;application.&#160;<br/>&#160;<br/><b>kDescAssertTooLongSingleFrameResponse&#160;</b>(0x0F):&#160;<br/>Response lengthof&#160;a&#160;periodic&#160;DID&#160;is&#160;exceeding&#160;the SingleFrame length&#160;–&#160;check&#160;the&#160;<br/>response&#160;length&#160;for&#160;periodic&#160;DIDs.&#160;<br/>&#160;<br/><b>kDescAssertApplLackOfConfirmation&#160;</b>(0x11):&#160;<br/>The&#160;time&#160;for&#160;response&#160;processing&#160;is&#160;too&#160;long&#160;–&#160;verify&#160;if&#160;the&#160;call&#160;of&#160;DescProcessingDone()&#160;<br/>is&#160;done&#160;in any&#160;case.&#160;<br/>&#160;<br/><b>kDescAssertZeroStateValue&#160;</b>(0x13):&#160;<br/>The&#160;state parameter&#160;is&#160;zero&#160;–&#160;check&#160;state handling&#160;<br/>&#160;<br/><b>kDescAssertInvalidContextMode&#160;</b>(0x16):&#160;<br/>Internal&#160;runtime&#160;error&#160;<br/>&#160;<br/><b>kDescAssertUnexpectedWriteIntoRingBuffer&#160;</b>(0x17):&#160;<br/>DescRingBufferWrite()&#160;is&#160;called&#160;without&#160;activated&#160;ring-buffer&#160;<br/>&#160;<br/><b>kDescAssertRingBufferWriteExceedsTheResLen&#160;</b>(0x18):&#160;<br/>DescRingBufferWrite()&#160;is&#160;called&#160;to&#160;often&#160;&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
135&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=136></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>kDescAssertIllegalUsageOfNegativeResponse&#160;</b>(0x1A):&#160;<br/>After&#160;call&#160;of&#160;DescProcessingDone()&#160;a&#160;negative response&#160;is&#160;set&#160;&#160;<br/>&#160;<br/><b>kDescAssertDiagnosticBufferOverflow&#160;</b>(0x1B):&#160;<br/>currently&#160;not&#160;available&#160;<br/>&#160;<br/><b>kDescAssertFuncReqWoResMayNotUseRingBuffer&#160;</b>(0x1C):&#160;<br/>It&#160;is&#160;not&#160;possible&#160;to use&#160;the&#160;ring-buffer&#160;feature&#160;for&#160;functional&#160;request&#160;(KWP&#160;only)&#160;<br/>&#160;<br/><b>kDescAssertSchedulerTimerEventWithoutAnyPID&#160;</b>(0x1E):&#160;<br/>Internal&#160;runtime&#160;error&#160;<br/>&#160;<br/><b>kDescAssertSchedulerRingBufferIsActivated&#160;</b>(0x1F):&#160;<br/>For&#160;periodic&#160;DIDs&#160;it&#160;is&#160;not&#160;possible&#160;to use&#160;the&#160;ring-buffer.&#160;<br/>&#160;<br/><b>kDescAssertUnknownTpTransmissionType&#160;</b>(0x21):&#160;<br/>Internal&#160;runtime&#160;error&#160;<br/>&#160;<br/><b>kDescAssertIllegalAddRequestCount&#160;</b>(0x22):&#160;<br/>Internal&#160;runtime&#160;error&#160;<br/>&#160;<br/><b>kDescAssertNoSidCanBeReportedInIdleMode&#160;</b>(0x23):&#160;<br/>Call&#160;of&#160;DescGetSeriveId()&#160;while not&#160;a user-service is processed&#160;<br/>&#160;<br/><b>kDescAssertInvalidUsageOfForceRcrRpApi&#160;</b>(0x24):&#160;<br/>The&#160;DescForceRcrRpResponse()&#160;function&#160;is&#160;used&#160;illegal.&#160;<br/>&#160;<br/><b>kDescAssertPidResLenToCddDefNotMatched&#160;</b>(0x26):&#160;<br/>The&#160;response&#160;length&#160;set&#160;by&#160;the&#160;application&#160;do&#160;not&#160;fit&#160;to&#160;the&#160;response&#160;length&#160;defined in&#160;<br/>CANdela (cdd).&#160;<br/>&#160;<br/><b>kDescAssertPidResLenToCurrLinearFreeSpace&#160;</b>(0x27):&#160;<br/>Internal&#160;runtime&#160;error&#160;<br/>&#160;<br/><b>kDescAssertMissingDataForTransmission&#160;</b>(0x28):&#160;<br/>Internal&#160;runtime&#160;error&#160;<br/>&#160;<br/><b>kDescAssertSchedulerFreeCellNotFound&#160;</b>(0x29):&#160;<br/>Internal&#160;runtime&#160;error&#160;<br/>&#160;<br/><b>kDescAssertInvalidStateParameterValue&#160;</b>(0x2A):&#160;<br/>The&#160;state parameter&#160;value&#160;is&#160;wrong&#160;–&#160;check&#160;state&#160;handling&#160;in your&#160;application&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
136&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=137></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>kDescAssertNoFreeICNChannel&#160;</b>(0x2B):&#160;<br/>Internal&#160;runtime&#160;error&#160;<br/>&#160;<br/><b>kDescAssertInvalidDescICNClient&#160;</b>(0x2C):&#160;<br/>Internal&#160;runtime&#160;error&#160;<br/>&#160;<br/><b>kDescAssertNoFreeMsgContext&#160;</b>(0x2D):&#160;<br/>Internal&#160;runtime&#160;error&#160;<br/>&#160;<br/><b>kDescAssertUnExpectedContextWithResponse&#160;</b>(0x2E):&#160;<br/>A&#160;response&#160;will&#160;be&#160;sent&#160;out&#160;of&#160;a&#160;wrong context.&#160;&#160;<br/>&#160;<br/><b>kDescAssertIllegalCallOfRingBufferCancel</b>&#160;(0x2F):&#160;<br/>The&#160;API<a href="TechnicalReference_CANdescs.html#110">&#160;<i>DescRingBufferCancel()</i>&#160;</a>has&#160;been&#160;called&#160;for&#160;a&#160;response&#160;that&#160;is&#160;not&#160;using&#160;the&#160;ring-<br/>buffer&#160;concept&#160;(e.<a href="TechnicalReference_CANdescs.html#108">g.&#160;<i>DescRingBufferStart()</i>&#160;</a>was not&#160;called).&#160;<br/>&#160;<br/><b>kDescNetAssertWrongIsoTpRxChannel</b>&#160;(0x40):&#160;<br/>The&#160;wrong&#160;TP&#160;channel&#160;is&#160;used&#160;–&#160;verify&#160;the&#160;TP&#160;interface&#160;to&#160;the&#160;CANdesc&#160;component&#160;<br/>&#160;<br/><b>kDescNetAssertWrongIsoTpTxChannel</b>&#160;(0x41):&#160;<br/>The&#160;wrong&#160;TP&#160;channel&#160;is&#160;used&#160;–&#160;verify&#160;the&#160;TP&#160;interface&#160;to&#160;the&#160;CANdesc&#160;component&#160;<br/>&#160;<br/><b>kDescNetAssertWrongBusType</b>&#160;(0x42):&#160;<br/>The&#160;wrong&#160;bus&#160;type&#160;is&#160;used&#160;–&#160;verify&#160;the&#160;TP&#160;interface to&#160;the&#160;CANdesc&#160;component&#160;<br/>&#160;<br/><b>kDescAssertDescIcnIllegalTargetPointer&#160;</b>(0x50):&#160;<br/>Internal&#160;runtime&#160;assertion&#160;&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;<br/></b>At&#160;least&#160;on&#160;type&#160;of&#160;assertions&#160;are&#160;activated&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Form&#160;ISR&#160;or&#160;task&#160;level.&#160;The interrupts&#160;might&#160;be&#160;disabled&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;After&#160;a&#160;call&#160;of&#160;this&#160;function&#160;the&#160;system&#160;is&#160;not&#160;stable anymore.&#160;It&#160;can&#160;not&#160;be&#160;guaranteed&#160;<br/>
that&#160;this&#160;component&#160;or&#160;the whole system&#160;is&#160;still&#160;working&#160;in correct&#160;manner.&#160;&#160;<br/>
<b>12.6.17&#160;“Spontaneous&#160;Response” transmission&#160;</b><br/>
&#160;<br/>
To&#160;implement&#160;the&#160;service&#160;$86&#160;(Respone&#160;On&#160;Event)&#160;it&#160;is&#160;necessary&#160;to&#160;transmit&#160;a&#160;message&#160;<br/>without&#160;a&#160;previous&#160;request.&#160;If&#160;the&#160;same&#160;CAN&#160;ID&#160;have&#160;to&#160;be&#160;used&#160;for&#160;this&#160;reponse&#160;as&#160;for&#160;the&#160;<br/>diagnostics response,&#160;CANdesc provides an&#160;API&#160;to&#160;trigger the&#160;transmission.&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
137&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=138></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.17.1&#160;DescApplSendSpontaneousResponse()&#160;</b><br/>
<b>DescApplSendSpontaneousResponse&#160;</b><br/>
<b>Available&#160;since&#160;6.09.00&#160;</b><br/>
<b>Is&#160;Reentrant&#160;</b><br/>
<b>&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Any&#160;Context&#160;<br/>
DescBool<b>&#160;DescApplSendSpontaneousResponse</b>(DescMsg resData,&#160;&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;DescMsgLen resLen,&#160;&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;t_descUsdtNetBus* pBusInfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
resData&#160;<br/>
Pointer&#160;to an&#160;application&#160;buffer&#160;with&#160;response&#160;data (including&#160;<br/>posive response header).&#160;<br/>
resLen&#160;<br/>
Number&#160;of&#160;bytes&#160;to be&#160;sent&#160;(up&#160;to 4095&#160;bytes).&#160;<br/>
pBusInfo&#160;<br/>
Reference&#160;to&#160;the&#160;bus&#160;information&#160;structure&#160;that&#160;will&#160;be&#160;initialized&#160;<br/>here.&#160;<br/>
pBusInfo-&gt;busType&#160;<br/>
The&#160;bus&#160;driver&#160;that&#160;will&#160;send the&#160;response.&#160;<br/>
pBusInfo-&gt;comChannel&#160;<br/>
The&#160;communication&#160;channel&#160;on&#160;which the&#160;response will&#160;be&#160;sent.&#160;<br/>(relevant&#160;only&#160;on&#160;multi&#160;channel&#160;systems).&#160;<br/>
pBusInfo-&gt;testerId&#160;<br/>
The&#160;tester&#160;address&#160;which will&#160;be&#160;respond&#160;to&#160;(relevant&#160;only&#160;on&#160;<br/>bus&#160;systems&#160;with source/target&#160;addresses).&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
kDescTrue&#160;<br/>
Operation&#160;was successful,&#160;the&#160;response will&#160;be&#160;sent.&#160;<br/>
kDescFalse&#160;<br/>
Operation&#160;failed&#160;–&#160;no&#160;response&#160;will&#160;be&#160;sent.&#160;<br/>
<b>Functional&#160;Description</b>&#160;<br/>Calling&#160;this&#160;function&#160;the&#160;application can&#160;force&#160;CANdesc&#160;to&#160;send immediately&#160;a&#160;<br/>spontaneous&#160;response.&#160;<br/>If&#160;CANdesc&#160;is&#160;currently&#160;busy&#160;with a&#160;tester&#160;request,&#160;there will&#160;be&#160;no&#160;response sent&#160;by&#160;this&#160;<br/>API&#160;and&#160;kDescFalse&#160;will&#160;be&#160;returned.&#160;<br/>If&#160;this&#160;API&#160;returns&#160;kDescTrue,&#160;the&#160;application shall&#160;wait&#160;for&#160;the&#160;<br/><a href="TechnicalReference_CANdescs.html#139"><i>ApplDescSpontaneousResponseConfirmation()</i>&#160;</a>prior&#160;initiating&#160;a&#160;new&#160;spontaneous&#160;<br/>transmission.&#160;<br/>
<b>Pre-conditions&#160;<br/></b>CANdesc&#160;was configured to&#160;use&#160;this&#160;option&#160;(enabled&#160;in the&#160;GENtool).&#160;Only&#160;possible to&#160;<br/>configure&#160;if&#160;Service 0x86&#160;is&#160;contained in&#160;the&#160;cdd.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>Task&#160;or&#160;interrupt.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;-&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
138&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=139></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.17.2&#160;ApplDescSpontaneousResponseConfirmation()&#160;</b><br/>
<b>ApplDescSpontaneousResponseConfirmation&#160;</b><br/>
<b>Available&#160;since&#160;6.09.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescSpontaneousResponseConfirmation</b>(vuint8 status)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescSpontaneousResponseConfirmation</b>&#160;(vuint8 iContext, vuint8 status)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
Will&#160;be&#160;always&#160;“kDescPrimContext”.&#160;<br/>
status&#160;<br/>
If&#160;the&#160;transmission&#160;was successful,&#160;the&#160;parameter&#160;value&#160;will&#160;be<i>&#160;<br/>kDescOk</i>.&#160;Otherwise&#160;–&#160;<i>kDescFailed.</i>&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Once&#160;the&#160;spontaneous&#160;response has&#160;been&#160;successfully&#160;triggered&#160;(ref.&#160;<br/><a href="TechnicalReference_CANdescs.html#138"><i>DescApplSendSpontaneousResponse()</i>)</a>,&#160;this&#160;function&#160;will&#160;be&#160;called&#160;in any&#160;case.&#160;The&#160;<br/>transmission&#160;status&#160;is&#160;reported&#160;by&#160;the&#160;status parameter.&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Only&#160;available if&#160;the&#160;API<a href="TechnicalReference_CANdescs.html#138">&#160;<i>DescApplSendSpontaneousResponse()</i>&#160;</a>is&#160;available.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>CAN&#160;Driver&#160;TX-ISR&#160;&#160;TP&#160;Confirmation&#160;&#160;this&#160;function&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;Be aware&#160;of&#160;time&#160;consuming&#160;implementation&#160;for&#160;this&#160;function&#160;(interrupt&#160;call&#160;context).&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
139&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=140></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.18&#160;Generic&#160;Processing&#160;Notifications&#160;&#160;</b><br/>
<b>12.6.18.1&#160;ApplDescManufacturerIndication&#160;</b><br/>
<b>ApplDescManufacturerIndication&#160;</b><br/>
<b>Available&#160;since&#160;6.13.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescManufacturerIndication</b>(vuint8&#160;sid,&#160;<br/>
vuint8* data,&#160;<br/>
vuint16 length,&#160;<br/>
vuint8 reqType,&#160;<br/>
t_descUsdtNetBus* pBusInfo)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescManufacturerIndication</b>(vuint8 iContext,&#160;<br/>
vuint8&#160;sid,&#160;<br/>
vuint8* data,&#160;<br/>
vuint16 length,&#160;<br/>
vuint8 reqType,&#160;<br/>
t_descUsdtNetBus* pBusInfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
The&#160;current&#160;request&#160;context&#160;location&#160;<br/>(used only&#160;as a&#160;handle&#160;-&#160;<i>DO&#160;NOT MODIFY</i>).&#160;<br/>
sid&#160;<br/>
The&#160;service identifier&#160;of&#160;the&#160;received&#160;service&#160;request.&#160;<br/>
data&#160;<br/>
Pointer&#160;to&#160;the&#160;first&#160;byte of&#160;the&#160;request&#160;data&#160;(without&#160;service&#160;<br/>identifier&#160;byte).&#160;<br/>
length&#160;<br/>
Length of&#160;the&#160;request&#160;data (without&#160;service identifier&#160;byte)&#160;<br/>
reqType&#160;<br/>
The&#160;current&#160;request&#160;addressing&#160;method.&#160;Could be&#160;either&#160;<br/>‚kDescFuncReq’&#160;or&#160;‚kDescPhysReq’<b>&#160;</b>(bitmapped).&#160;<br/>
pBusInfo&#160;<br/>
The&#160;current&#160;request&#160;communication information&#160;(i.e.&#160;driver&#160;type&#160;<br/>(CAN,&#160;MOST,&#160;FlexRay,&#160;etc.),&#160;addressing&#160;information,&#160;<br/>communication&#160;channel&#160;number,&#160;tester&#160;address&#160;(if&#160;applicable)&#160;<br/>etc.&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called&#160;right&#160;before&#160;CANdesc&#160;starts&#160;the&#160;processing&#160;of&#160;a&#160;received&#160;request.&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
140&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=141></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Only&#160;available if&#160;the&#160;feature&#160;“Manufacturer&#160;Notification Support”&#160;is&#160;activated&#160;and CANdesc&#160;<br/>UDS2012&#160;is&#160;used.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;<br/>&#160;<br/>
<b>12.6.18.2&#160;ApplDescManufacturerConfirmation&#160;</b><br/>
<b>ApplDescManufacturerConfirmation&#160;</b><br/>
<b>Available&#160;since&#160;6.13.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescManufacturerConfirmation</b>(vuint8 status)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescManufacturerConfirmation</b>(vuint8 iContext,&#160;<br/>
vuint8 status)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
The&#160;current&#160;request&#160;context&#160;location&#160;<br/>(used only&#160;as a&#160;handle&#160;-&#160;<i>DO&#160;NOT MODIFY</i>).&#160;<br/>
status&#160;<br/>
<b>kDescPostHandlerStateOk</b>&#160;&#160;<br/>The&#160;positive response&#160;was transmitted&#160;successfully&#160;<br/><b>kDescPostHandlerStateNegResSent</b>&#160;&#160;<br/>It&#160;was a&#160;negative response&#160;<br/><b>kDescPostHandlerStateTxFailed</b>&#160;&#160;&#160;<br/>A&#160;transmission&#160;error&#160;occurred&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called&#160;after&#160;the&#160;processing&#160;of&#160;a&#160;request&#160;has&#160;been&#160;finished,&#160;a response&#160;has&#160;<br/>been&#160;sent&#160;(or&#160;sending&#160;has&#160;failed)&#160;and all&#160;service PostHandlers&#160;were&#160;called.&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Only&#160;available if&#160;the&#160;feature&#160;“Manufacturer&#160;Notification Support”&#160;is&#160;activated&#160;and CANdesc&#160;<br/>UDS2012&#160;is&#160;used.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask&#160;()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
141&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=142></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>12.6.18.3&#160;ApplDescSupplierIndication&#160;</b><br/>
<b>ApplDescSupplierIndication&#160;</b><br/>
<b>Available&#160;since&#160;6.13.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescSupplierIndication</b>(vuint8&#160;sid,&#160;<br/>
vuint8* data,&#160;<br/>
vuint16 length,&#160;<br/>
vuint8 reqType,&#160;<br/>
t_descUsdtNetBus* pBusInfo)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescSupplierIndication</b>(vuint8 iContext,&#160;<br/>
vuint8&#160;sid,&#160;<br/>
vuint8* data,&#160;<br/>
vuint16 length,&#160;<br/>
vuint8 reqType,&#160;<br/>
t_descUsdtNetBus* pBusInfo)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
The&#160;current&#160;request&#160;context&#160;location&#160;<br/>(used only&#160;as a&#160;handle&#160;-&#160;<i>DO&#160;NOT MODIFY</i>).&#160;<br/>
sid&#160;<br/>
The&#160;service identifier&#160;of&#160;the&#160;received&#160;service request.&#160;<br/>
data&#160;<br/>
Pointer&#160;to&#160;the&#160;first&#160;byte of&#160;the&#160;request&#160;data&#160;(without&#160;service&#160;<br/>identifier&#160;byte).&#160;<br/>
length&#160;<br/>
Length of&#160;the&#160;request&#160;data (without&#160;service identifier&#160;byte)&#160;<br/>
reqType&#160;<br/>
The&#160;current&#160;request&#160;addressing&#160;method.&#160;Could be&#160;either&#160;<br/>‚kDescFuncReq’&#160;or&#160;‚kDescPhysReq’<b>&#160;</b>(bitmapped).&#160;<br/>
pBusInfo&#160;<br/>
The&#160;current&#160;request&#160;communication information&#160;(i.e.&#160;driver&#160;type&#160;<br/>(CAN,&#160;MOST,&#160;FlexRay,&#160;etc.),&#160;addressing&#160;information,&#160;<br/>communication&#160;channel&#160;number,&#160;tester&#160;address&#160;(if&#160;applicable)&#160;<br/>etc.&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called&#160;during&#160;the&#160;processing&#160;of&#160;a&#160;request,&#160;after&#160;CANdesc&#160;has verified&#160;that&#160;<br/>the&#160;requested&#160;service is allowed&#160;in the&#160;active session&#160;and security&#160;state.&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
142&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=143></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Only&#160;available if&#160;the&#160;feature&#160;“Supplier&#160;Notification&#160;Support”&#160;is&#160;activated&#160;and CANdesc&#160;<br/>UDS2012&#160;is&#160;used.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;<br/>
<b>12.6.18.4&#160;ApplDescSupplierConfirmation&#160;</b><br/>
<b>ApplDescSupplierConfirmation&#160;</b><br/>
<b>Available&#160;since&#160;6.13.00&#160;</b><br/>
<b>Is&#160;callback&#160;</b><br/>
<b>&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Context&#160;<br/>
void&#160;<b>ApplDescSupplierConfirmation</b>(vuint8 status)&#160;<br/>
Multi&#160;Context&#160;<br/>
void&#160;<b>ApplDescSupplierConfirmation</b>(vuint8 iContext,&#160;<br/>
vuint8 status)&#160;<br/>
<b>Parameter&#160;</b><br/>
iContext&#160;<br/>
The&#160;current&#160;request&#160;context&#160;location&#160;<br/>(used only&#160;as a&#160;handle&#160;-&#160;<i>DO&#160;NOT MODIFY</i>).&#160;<br/>
status&#160;<br/>
<b>kDescPostHandlerStateOk</b>&#160;&#160;<br/>The&#160;positive response&#160;was transmitted&#160;successfully&#160;<br/><b>kDescPostHandlerStateNegResSent</b>&#160;&#160;<br/>It&#160;was a&#160;negative response&#160;<br/><b>kDescPostHandlerStateTxFailed</b>&#160;&#160;&#160;<br/>A&#160;transmission&#160;error&#160;occurred&#160;<br/>
<b>Return&#160;&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called&#160;after&#160;the&#160;processing&#160;of&#160;a&#160;request&#160;has&#160;been&#160;finished,&#160;a response&#160;has&#160;<br/>been&#160;sent&#160;(or&#160;sending&#160;has&#160;failed)&#160;and all&#160;service PostHandlers&#160;were&#160;called.&#160;It&#160;is&#160;called&#160;<br/>before<a href="TechnicalReference_CANdescs.html#141">&#160;<i>ApplDescManufacturerConfirmation()</i></a>.&#160;<br/>&#160;<br/>
<b>Pre-conditions&#160;<br/></b>Only&#160;available if&#160;the&#160;feature&#160;“Supplier&#160;Notification&#160;Support”&#160;is&#160;activated&#160;and CANdesc&#160;<br/>UDS2012&#160;is&#160;used.&#160;<br/>
<b>Call&#160;context&#160;<br/></b>From&#160;<b>DescTask&#160;()</b>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
143&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=144></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>13&#160;&#160;How&#160;To…&#160;</b><br/>
&#160;<br/>
<b>13.1&#160;&#160;…implement&#160;a&#160;protocol service&#160;MainHandler&#160;</b><br/>
&#160;<br/><i>//1. Read ProtocolService&#160;<br/>//&#160;-&#160;dynamic length&#160;<br/>//&#160;-&#160;PIDs&#160;<br/></i>&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescManiOnTimerEvent_storeEvent</b>(DescMsgContext<b>*</b>&#160;<br/>pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Check the length */</i>&#160;<br/>&#160;&#160;<b>if</b>(pMsgContext<b>-&gt;</b>reqDataLen&#160;<b>&gt;</b>&#160;2)&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* Check the sub-parameters */</i>&#160;<br/>&#160; &#160;&#160;vuint16&#160;param;&#160;<br/>&#160; &#160;&#160;<i>/* Compose one parameter combining the HiByte and the LoByte in this order*/</i>&#160;<br/>&#160; &#160;&#160;param&#160;<b>=</b>&#160;<b>DescMake16Bit</b>(pMsgContext<b>-&gt;</b>reqData[0], pMsgContext<b>-&gt;</b>reqData[1]);&#160;<br/>&#160;<br/>&#160; &#160;&#160;<i>/* Dispatch the parameter */</i>&#160;<br/>&#160; &#160;&#160;<b>switch</b>(param)&#160;<br/>&#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160;&#160;<b>case</b>&#160;0xFFFF<b>:</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>if</b>(pMsgContext<b>-&gt;</b>reqDataLen&#160;<b>!=</b>&#160;0xFFFF)&#160;<br/>&#160; &#160; &#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<i>/* Write some data (skip the parameter offsets 0 und 1) */</i>&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;pMsgContext<b>-&gt;</b>resData[2]&#160;<b>=</b>&#160;<b>DescGetLoByte</b>(0x1234);&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;pMsgContext<b>-&gt;</b>resData[3]&#160;<b>=</b>&#160;<b>DescGetHiByte</b>(0x1234);&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<i>/* Set the response length */</i>&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;pMsgContext<b>-&gt;</b>resDataLen&#160;<b>=</b>&#160;4;&#160;<br/>&#160; &#160; &#160; &#160;&#160;}&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>else</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-&gt;</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160; &#160; &#160; &#160;&#160;}&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>break</b>;&#160;<br/>&#160; &#160; &#160;&#160;<b>default:</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<i>/* unknown parameter */</i>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-&gt;</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160; &#160;&#160;}&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<b>else</b>&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<i>/* In this case we did&#160;everything in the main-handler */</i>&#160;<br/>&#160;&#160;<b>DescProcessingDone</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/><i>//2. Read ProtocolService&#160;<br/>//&#160;-&#160;dynamic length&#160;<br/>//&#160;-&#160;sub-function&#160;</i><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
144&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=145></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescManiOnTimerEvent_storeEvent</b>(DescMsgContext<b>*</b>&#160;<br/>pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Check the length */</i>&#160;<br/>&#160;&#160;<b>if</b>(pMsgContext<b>-&gt;</b>reqDataLen&#160;<b>&gt;</b>&#160;1)&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* Dispatch the sub-function */</i>&#160;<br/>&#160; &#160;&#160;<b>switch</b>(pMsgContext<b>-&gt;</b>reqData[0])&#160;<br/>&#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160;&#160;<b>case</b>&#160;0xFF<b>:</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>if</b>(pMsgContext<b>-&gt;</b>reqDataLen&#160;<b>!=</b>&#160;0xFFFF)&#160;<br/>&#160; &#160; &#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<i>/* Format check ok: write some data (skip the&#160;parameter) */</i>&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;pMsgContext<b>-&gt;</b>resData[1]&#160;<b>=</b>&#160;<b>DescGetLoByte</b>(0x1234);&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;pMsgContext<b>-&gt;</b>resData[2]&#160;<b>=</b>&#160;<b>DescGetHiByte</b>(0x1234);&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<i>/* Set the response length */</i>&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<i>/* Hint: if the response length wasn't set, zero value is assumed! */</i>&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;pMsgContext<b>-&gt;</b>resDataLen&#160;<b>=</b>&#160;3;&#160;<br/>&#160; &#160; &#160; &#160;&#160;}&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>else</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<i>/* Wrong sub-parameter format */</i>&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-&gt;</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160; &#160; &#160; &#160;&#160;}&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>break</b>;&#160;<br/>&#160; &#160; &#160;&#160;<b>default:</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<i>/* Unknown sub-function */</i>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-&gt;</b>iContext,&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;kDescNrcSubfunctionNotSupported);&#160;<br/>&#160; &#160;&#160;}&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<b>else</b>&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<i>/* In this case we did everything in&#160;the main-handler */</i>&#160;<br/>&#160;&#160;<b>DescProcessingDone</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>}&#160;<br/>&#160;<br/><i>//3. Write ProtocolService&#160;<br/>//&#160;-&#160;dynamic length&#160;<br/>//&#160;-&#160;PIDs&#160;<br/></i>&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescManiOnTimerEvent_storeEvent</b>(DescMsgContext<b>*</b>&#160;<br/>pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Check the sub-parameters */</i>&#160;<br/>&#160;&#160;vuint16&#160;param;&#160;<br/>&#160;<br/>&#160;&#160;<i>/* Check the length */</i>&#160;<br/>&#160;&#160;<b>if</b>(pMsgContext<b>-&gt;</b>reqDataLen&#160;<b>&gt;</b>&#160;2)&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* Compose one parameter combining the HiByte and the LoByte in this order&#160;<br/>*/</i>&#160;<br/>&#160; &#160;&#160;param&#160;<b>=</b>&#160;<b>DescMake16Bit</b>(pMsgContext<b>-&gt;</b>reqData[0], pMsgContext<b>-&gt;</b>reqData[1]);&#160;<br/>&#160;<br/>&#160; &#160;&#160;<i>/* Dispatch&#160;the parameter */</i>&#160;<br/>&#160; &#160;&#160;<b>switch</b>(param)&#160;<br/>&#160; &#160;&#160;{&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
145&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=146></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160; &#160; &#160;&#160;<b>case</b>&#160;0xFFFF<b>:</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>if</b>(pMsgContext<b>-&gt;</b>reqDataLen&#160;<b>!=</b>&#160;0xFFFF)&#160;<br/>&#160; &#160; &#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<i>/* Copy from the request data to your application */</i>&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<i>/* Use the data pointed by: pMsgContext-&gt;reqData[2],&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160;pMsgContext-&gt;reqData[3], etc.*/</i>&#160;<br/>&#160; &#160; &#160; &#160;&#160;}&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>else</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-&gt;</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160; &#160; &#160; &#160;&#160;}&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>break</b>;&#160;<br/>&#160; &#160; &#160;&#160;<b>default:</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<i>/* unknown parameter */</i>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-&gt;</b>iContext,&#160;kDescNrcRequestOutOfRange);&#160;<br/>&#160; &#160;&#160;}&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<b>else</b>&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<i>/* In this case we did everything in the main-handler */</i>&#160;<br/>&#160;&#160;<i>/* Hint: if the response length wasn't set, zero value is assumed! */</i>&#160;<br/>&#160;&#160;<b>DescProcessingDone</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>}&#160;<br/>&#160;<br/><i>//4. Write ProtocolService&#160;<br/>//&#160;-&#160;dynamic length&#160;<br/>//&#160;-&#160;Sub-function&#160;<br/></i>&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescManiOnTimerEvent_storeEvent</b>(DescMsgContext<b>*</b>&#160;<br/>pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Check the sub-parameters */</i>&#160;<br/>&#160;&#160;vuint16&#160;param;&#160;<br/>&#160;<br/>&#160;&#160;<i>/* Check the length */</i>&#160;<br/>&#160;&#160;<b>if</b>(pMsgContext<b>-&gt;</b>reqDataLen&#160;<b>&gt;</b>&#160;2)&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* Compose one parameter combining the HiByte and the LoByte in this order*/</i>&#160;<br/>&#160; &#160;&#160;param&#160;<b>=</b>&#160;<b>DescMake16Bit</b>(pMsgContext<b>-&gt;</b>reqData[0], pMsgContext<b>-&gt;</b>reqData[1]);&#160;<br/>&#160;<br/>&#160; &#160;&#160;<i>/* Dispatch&#160;the parameter */</i>&#160;<br/>&#160; &#160;&#160;<b>switch</b>(param)&#160;<br/>&#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160;&#160;<b>case</b>&#160;0xFFFF<b>:</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>if</b>(pMsgContext<b>-&gt;</b>reqDataLen&#160;<b>!=</b>&#160;0xFFFF)&#160;<br/>&#160; &#160; &#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<i>/* Copy from the request data to your application */</i>&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<i>/* Use the data pointed by: pMsgContext-&gt;reqData[2],&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160;pMsgContext-&gt;reqData[3], etc.*/</i>&#160;<br/>&#160; &#160; &#160; &#160;&#160;}&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>else</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;{&#160;<br/>&#160; &#160; &#160; &#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-&gt;</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160; &#160; &#160; &#160;&#160;}&#160;<br/>&#160; &#160; &#160; &#160;&#160;<b>break</b>;&#160;<br/>&#160; &#160; &#160;&#160;<b>default:</b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;<i>/* unknown sub-function&#160;<b>/</b></i><b>&#160;<br/>&#160; &#160; &#160; &#160;&#160;DescSetNegResponse</b>(pMsgContext-&gt;iContext,&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
146&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=147></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;kDescNrcSubfunctionNotSupported);&#160;&#160;<br/>&#160; &#160;&#160;}&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<b>else</b>&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<i>/* In this case we did everything in the main-handler */</i>&#160;<br/>&#160;&#160;<i>/* Hint: if the response&#160;length wasn't set, zero value is assumed! */</i>&#160;<br/>&#160;&#160;<b>DescProcessingDone</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>}&#160;<br/>&#160;<br/>
<b>13.2&#160;&#160;…implement&#160;a&#160;service&#160;MainHandler&#160;</b><br/>
&#160;<br/><i>//5. Read Service&#160;<br/>//&#160;-&#160;dynamic length&#160;<br/>//&#160;-&#160;sub-function/PID&#160;<br/></i>&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescManiOnTimerEvent_storeEvent</b>(DescMsgContext<b>*</b>&#160;<br/>pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Check the length */</i>&#160;<br/>&#160;&#160;<b>if</b>(pMsgContext<b>-&gt;</b>reqDataLen&#160;<b>!=</b>&#160;0xFFFF)&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* Format check ok: write some data */</i>&#160;<br/>&#160; &#160;&#160;pMsgContext<b>-&gt;</b>resData[0]&#160;<b>=</b>&#160;<b>DescGetLoByte</b>(0x1234);&#160;<br/>&#160; &#160;&#160;pMsgContext<b>-&gt;</b>resData[1]&#160;<b>=</b>&#160;<b>DescGetHiByte</b>(0x1234);&#160;<br/>&#160; &#160;&#160;<i>/* Set&#160;the response length */</i>&#160;<br/>&#160; &#160;&#160;<i>/* Hint: if the response length wasn't set, zero value is assumed! */</i>&#160;<br/>&#160; &#160;&#160;pMsgContext<b>-&gt;</b>resDataLen&#160;<b>=</b>&#160;2;&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<b>else</b>&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* Wrong sub-function format */</i>&#160;<br/>&#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-&gt;</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160;&#160;}&#160;<br/>&#160;<br/>&#160;&#160;<i>/* In this case we did everything in the main-handler */</i>&#160;<br/>&#160;&#160;<b>DescProcessingDone</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/><i>//6. Read Service&#160;<br/>//&#160;-&#160;static length&#160;<br/>//&#160;-&#160;sub-function/PID&#160;<br/></i>&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescManiOnTimerEvent_storeEvent</b>(DescMsgContext<b>*</b>&#160;<br/>pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Format check ok: write some data */</i>&#160;<br/>&#160;&#160;pMsgContext<b>-&gt;</b>resData[0]&#160;<b>=</b>&#160;<b>DescGetLoByte</b>(0x1234);&#160;<br/>&#160;&#160;pMsgContext<b>-&gt;</b>resData[1]&#160;<b>=</b>&#160;<b>DescGetHiByte</b>(0x1234);&#160;<br/>&#160;&#160;<i>/* Set the response length */</i>&#160;<br/>&#160;&#160;<i>/* Hint: if the response length wasn't set, zero value is assumed! */</i>&#160;<br/>&#160;&#160;pMsgContext<b>-&gt;</b>resDataLen&#160;<b>=</b>&#160;2;&#160;<br/>&#160;<br/>&#160;&#160;<i>/* In this case we did everything in the main-handler */</i>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
147&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=148></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;&#160;<b>DescProcessingDone</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/><i>//7. Write Service&#160;<br/>//&#160;-&#160;dynamic length&#160;<br/>//&#160;-&#160;sub-function/PID&#160;<br/></i>&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescManiOnTimerEvent_storeEvent</b>(DescMsgContext<b>*</b>&#160;<br/>pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Check the length */</i>&#160;<br/>&#160;&#160;<b>if</b>(pMsgContext<b>-&gt;</b>reqDataLen&#160;<b>!=</b>&#160;0xFFFF)&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* Format check ok: write some data */</i>&#160;<br/>&#160; &#160;&#160;<i>/* Copy from the request data to your application */</i>&#160;<br/>&#160; &#160;&#160;<i>/* Use the data pointed by: pMsgContext-&gt;reqData[0],&#160;&#160;<br/>&#160; &#160; &#160; &#160;pMsgContext-&gt;reqData[1], etc.*/</i>&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<b>else</b>&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* Wrong sub-function format */</i>&#160;<br/>&#160; &#160;&#160;<b>DescSetNegResponse</b>(pMsgContext<b>-&gt;</b>iContext, kDescNrcInvalidFormat);&#160;<br/>&#160;&#160;}&#160;<br/>&#160;<br/>&#160;&#160;<i>/* In this case we did everything in the main-handler */</i>&#160;<br/>&#160;&#160;<i>/* Hint: if the response length wasn't set, zero value is assumed! */</i>&#160;<br/>&#160;&#160;<b>DescProcessingDone</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/><i>//8. Write &#160;Service&#160;<br/>//&#160;-&#160;static length&#160;<br/>//&#160;-&#160;sub-function/PID&#160;<br/></i>&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescManiOnTimerEvent_storeEvent</b>(DescMsgContext<b>*</b>&#160;<br/>pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Copy from the request data to your application */</i>&#160;<br/>&#160;&#160;<i>/* Use the data pointed by: pMsgContext-&gt;reqData[0], pMsgContext-&gt;reqData[1], &#160; &#160;&#160;<br/>&#160; &#160; &#160;etc.*/</i>&#160;<br/>&#160;<br/>&#160;&#160;<i>/* In this case we did everything in the main-handler */</i>&#160;<br/>&#160;&#160;<i>/* Hint: if the response length wasn't&#160;set, zero value is assumed! */</i>&#160;<br/>&#160;&#160;<b>DescProcessingDone</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>}&#160;<br/>&#160;<br/>
<b>13.3&#160;&#160;…implement&#160;a&#160;Signal&#160;Handler&#160;</b><br/>
&#160;<br/><i>//1. ReadSignalHandler&#160;<br/>//&#160;-&#160;length &lt;=&#160;4Byte&#160;<br/>// Limitations: No DescProcessingDone() or DescSetNegResponse() allowed.&#160;<br/></i>&#160;<br/>vuintx DESC_API_CALLBACK_TYPE&#160;<b>ApplDescGetTemp</b>(<b>void</b>)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Return directly the signal value */</i>&#160;<br/>&#160;&#160;<b>return</b>&#160;(vuintx)0xFFFF;&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
148&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=149></a>Technical Reference&#160;CANdesc&#160;<br/>
}&#160;<br/>&#160;<br/>&#160;<br/><i>//2. ReadSignalHandler&#160;<br/>//&#160;-&#160;length &gt;&#160;4Byte&#160;<br/>// Limitations: No DescProcessingDone() or DescSetNegResponse() allowed.&#160;<br/></i>&#160;<br/>DescMsgLen DESC_API_CALLBACK_TYPE&#160;<b>ApplDescGetTemp</b>(DescMsg tgt)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Copy the signal data into the buffer pointed by &#34;tgt&#34;.*/</i>&#160;<br/>&#160;&#160;<i>/* Return the amount of written bytes */</i>&#160;<br/>&#160;&#160;<b>return</b>&#160;0;&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/><i>//3. WriteSignalHandler&#160;<br/>//&#160;-&#160;length &lt;=&#160;4Byte&#160;<br/>// Limitations: No DescProcessingDone() or DescSetNegResponse() allowed.&#160;<br/></i>&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescGetTemp</b>(vuintx data)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* &#34;data&#34; contains the signal value as-is from the request.&#160;&#160;<br/>&#160; &#160; &#160;Copy it into your application. */</i>&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/><i>//4. ReadSignalHandler&#160;<br/>//&#160;-&#160;length &gt;&#160;4Byte&#160;<br/>// Limitations: No DescProcessingDone() or DescSetNegResponse() allowed.&#160;<br/></i>&#160;<br/>DescMsgLen DESC_API_CALLBACK_TYPE&#160;<b>ApplDescGetTemp</b>(DescMsg src)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Copy the signal data from the buffer pointed by &#34;src&#34;.*/</i>&#160;<br/>&#160;&#160;<i>/* Return the amount of copied bytes */</i>&#160;<br/>&#160;&#160;<b>return</b>&#160;0;&#160;<br/>}&#160;<br/>&#160;<br/><i>&#160;</i><br/>
<b>13.4&#160;&#160;…implement&#160;a&#160;Packet Handler&#160;</b><br/>
<i>//1. ReadPacketHandler&#160;<br/>// Limitations: No DescProcessingDone() or DescSetNegResponse() allowed.&#160;<br/></i>&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescGetTemp</b>(DescMsg pMsg)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* Copy the signal value into the &#34;pMsg&#34; buffer. */</i>&#160;<br/>&#160;&#160;pMsg[0]&#160;<b>=</b>&#160;<b>DescGetLoByte</b>(0x1234);&#160;<br/>&#160;&#160;pMsg[1]&#160;<b>=</b>&#160;<b>DescGetLoByte</b>(0x1234);&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/><i>&#160;</i><br/>
<b>13.5&#160;&#160;…implement&#160;a&#160;state&#160;transition function&#160;&#160;</b><br/>
&#160;<br/><i>//1. StateTransitionNotification&#160;<br/>// Limitations: No DescProcessingDone() or DescSetNegResponse() allowed.&#160;</i><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
149&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=150></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescOnTransitionSession</b>(DescStateGroup&#160;<br/>formerState, DescStateGroup newState)&#160;<br/>{&#160;<br/>&#160;&#160;<i>/* You are just notified that this state group has performed a transition from&#160;&#160;<br/>&#160; &#160;* &#34;formerState&#34; to the &#34;newState&#34;. */</i>&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
150&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=151></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>13.6&#160;&#160;…work&#160;with the&#160;ring-buffer&#160;mechanism&#160;</b><br/>
<b>13.6.1&#160;&#160;with&#160;asynchronous&#160;write&#160;</b><br/>
TPMC<br/>
Desc<br/>
Appl_MainHandler<br/>
Appl_MainHandler_2<br/>
EEPROM&#160;<br/>
Appl_PostHandler<br/>
Driver<br/>
call<br/>
Analyze&#160;and&#160;validate&#160;request<br/>
It&#160;is&#160;not&#160;possible&#160;to&#160;write&#160;data&#160;as&#160;in&#160;<br/>
Write&#160;response&#160;length&#160;the&#160;standard&#160;way&#160;if&#160;a&#160;ring-buffer&#160;will&#160;<br/>
be&#160;used&#160;(standard&#160;way&#160;is,&#160;to&#160;write&#160;to&#160;<br/>DescMsgContext-&gt;ResData)<br/>
DescRingBufferStart()<br/>
DescRingBufferWrite(*&#160;dataPtr,&#160;dataLength)<br/>
Now&#160;-&#160;it&#160;is&#160;possibel&#160;to&#160;<br/>
Enough&#160;data&#160;are&#160;<br/>
write&#160;data&#160;to&#160;the&#160;ring-buffer<br/>
stored&#160;in&#160;the&#160;<br/>ring-buffer&#160;to&#160;start&#160;<br/>the&#160;transmission<br/>
DescRingBufferWrite(*&#160;dataPtr,&#160;dataLength)<br/>
DescRingBufferWrite(*&#160;dataPtr,&#160;dataLength)<br/>
StartTransmission<br/>
Not&#160;enough&#160;free&#160;<br/>bytes&#160;to&#160;write&#160;<br/>new&#160;data<br/>
TP&#160;reads&#160;<br/>asynchronous&#160;the&#160;<br/>
DescRingBufferGetFreeSpace<br/>
data&#160;out&#160;of&#160;the&#160;<br/>ring-buffer<br/>
return&#160;countOfFreeBytesInRingBuffer<br/>
TpCopyToCan<br/>
DescRingBufferGetFreeSpace<br/>
return&#160;countOfFreeBytesInRingBuffer<br/>
DescRingBufferWrite(*&#160;dataPtr,&#160;dataLength)<br/>
TpCopyToCan<br/>
DescRingBufferGetProgress<br/>
return&#160;currentBytePosition<br/>
FinishTransmission<br/>
Call&#160;of&#160;Service&#160;Post&#160;Handler<br/>
&#160;<br/>
<i>//1. Read Service (with&#160;asynchronous Ring-Buffer)&#160;<br/>//&#160;-&#160;static length&#160;<br/>//&#160;-&#160;sub-function/PID&#160;<br/></i>&#160;<br/>vuint8&#160;g_iContext;&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
151&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=152></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescReadDTC</b>(DescMsgContext<b>*</b>&#160;pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;vuint8&#160;lData;&#160;<br/>&#160;&#160;<i>/* Format check already done by CANdesc */</i>&#160;<br/>&#160;<br/>&#160;&#160;<i>/* Analysis of request has to&#160;done by ECU application */</i>&#160;<br/>&#160;<br/>&#160;&#160;<i>/* Set the response length */</i>&#160;<br/>&#160;&#160;pMsgContext<b>-&gt;</b>resDataLen&#160;<b>=</b>&#160;16;&#160;<br/>&#160;<br/>&#160;&#160;<i>/* Fill the first data */</i>&#160;<br/>&#160;&#160;lData&#160;<b>=</b>&#160;5;&#160;<br/>&#160;<br/>&#160;&#160;<i>/* Store iContext for further interaction with CANdesc */</i>&#160;<br/>&#160;&#160;g_iContext&#160;<b>=</b>&#160;pMsgContext<b>-&gt;</b>iContext;&#160;<br/>&#160;&#160;<i>/* check only on services with sub-function (e.g. 0x19) */</i>&#160;<br/>&#160;&#160;if(pMsgContext<b>-&gt;</b>msgAddInfo.suppPosRes != 0)&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* since no response required&#160;–&#160;skip further processing */</i>&#160;<br/>&#160; &#160;&#160;<b>DescProcessingDone</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>&#160;&#160;}&#160;<br/>
else&#160;<br/>
&#160;&#160;{&#160;<br/>&#160; &#160;<i>/* Now we have to set CANdesc into the Ring-Buffer mode */</i>&#160;<br/>&#160; &#160;<b>DescRingBufferStart</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>&#160; &#160;<i>/* Now it is possible to write into the Ring-Buffer */</i>&#160;<br/>&#160; &#160;<b>DescRingBufferWrite</b>(pMsgContext<b>-&gt;</b>iContext, &amp;lData,&#160;1);&#160;<br/>&#160;&#160;<br/>&#160; &#160;<i>/* Now trigger e.g. an EEPROM read event */</i>&#160;<br/>&#160; &#160;<b>...&#160;<br/>&#160;&#160;</b>}&#160;<br/>}&#160;<br/>&#160;&#160;&#160;&#160;&#160;<br/><b>EEPROM_TASK</b>(xyz)&#160;<br/>{&#160;<br/>&#160;&#160;vuint8 lDTC[3];&#160;<br/>&#160;<br/>&#160;&#160;<b>...</b>&#160;<br/>&#160;&#160;<i>/* Wait for EEPROM event */</i>&#160;<br/>&#160;&#160;<i>/* EEPROM event is finished with reading */</i>&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<b>DescRingBufferWrite</b>(g_iContext, &amp;lDTC,&#160;3);&#160;<br/>&#160;&#160;<i>/* Now trigger next EEPROM reading */</i>&#160;<br/>&#160;&#160;}&#160;<br/>}&#160;<br/>&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
152&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=153></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>13.6.2&#160;&#160;with&#160;synchronous&#160;write&#160;</b><br/>
Desc<br/>
Appl_MainHandler<br/>
Appl_MainHandler_2<br/>
EEPROM&#160;<br/>
Appl_PostHandler<br/>
Driver<br/>
call<br/>
Analyze&#160;and&#160;validate&#160;request<br/>
write&#160;response&#160;length<br/>
DescRingBufferStart<br/>
DescRingBufferWrite(*&#160;dataPtr,&#160;dataLength)<br/>
DescStartRepeatedServiceCall(&amp;ApplMainHandler_2)<br/>
Within&#160;this&#160;function&#160;<br/>
Activate&#160;the&#160;<br/>
call&#160;the&#160;data&#160;can&#160;be&#160;<br/>
multiple&#160;service&#160;<br/>
written&#160;synchronous.<br/>
call&#160;to&#160;get&#160;a&#160;<br/>periodic&#160;call&#160;from&#160;<br/>CANdesc<br/>
call<br/>
GetEEPROMData<br/>
DescRingBufferWrite(*&#160;dataPtr,&#160;dataLength)<br/>
call<br/>
DescRingBufferGetFreeSpace<br/>
return&#160;countOfFreeBytesInRingBuffer<br/>
call<br/>
DescRingBufferGetFreeSpace<br/>
return&#160;countOfFreeBytesInRingBuffer<br/>
GetEEPROMData<br/>
DescRingBufferWrite(*&#160;dataPtr,&#160;dataLength)<br/>
PostHandler<br/>
&#160;<br/>
<i>//2. Read Service (with synchronous Ring-Buffer)&#160;<br/>//&#160;-&#160;static length&#160;<br/>//&#160;-&#160;sub-function/PID&#160;<br/></i>&#160;<br/><b>extern</b>&#160;<b>void</b>&#160;<b>ApplDescReadDTC_AddOn</b>(DescMsgContext<b>*</b>&#160;pMsgContext);&#160;<br/>&#160;<br/><b>void</b>&#160;DESC_API_CALLBACK_TYPE&#160;<b>ApplDescReadDTC</b>(DescMsgContext<b>*</b>&#160;pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;vuint8&#160;lData;&#160;<br/>&#160;&#160;<i>/* Format check&#160;already done by CANdesc */</i>&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
153&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=154></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;&#160;<i>/* Analysis of request has to done by ECU application */</i>&#160;<br/>&#160;<br/>&#160;&#160;<i>/* Set the response length */</i>&#160;<br/>&#160;&#160;pMsgContext<b>-&gt;</b>resDataLen&#160;<b>=</b>&#160;16;&#160;<br/>&#160;<br/>&#160;&#160;<i>/* Fill the first data */</i>&#160;<br/>&#160;&#160;lData&#160;<b>=</b>&#160;5;&#160;<br/>&#160;<br/><i>&#160;&#160;/* check only on services with sub-function (e.g. 0x19) */</i>&#160;<br/>&#160;&#160;if(pMsgContext<b>-&gt;</b>msgAddInfo.suppPosRes != 0)&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* since no response required&#160;–&#160;skip further processing */</i>&#160;<br/>&#160; &#160;&#160;<b>DescProcessingDone</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>&#160;&#160;}&#160;<br/>
else&#160;<br/>{&#160;<br/>
&#160;&#160;&#160;&#160;<i>/* Now we have to set CANdesc into the Ring-Buffer mode */</i>&#160;<br/>&#160;&#160;&#160;&#160;<b>DescRingBufferStart</b>(pMsgContext<b>-&gt;</b>iContext);&#160;<br/>&#160;&#160;&#160;&#160;<i>/* Now it is possible to write into the Ring-Buffer */</i>&#160;<br/>&#160;&#160;&#160;&#160;<b>DescRingBufferWrite</b>(pMsgContext<b>-&gt;</b>iContext, &amp;lData,&#160;1);&#160;<br/>&#160;<br/>&#160;&#160;&#160;&#160;<i>/* Use RepeatedSeriveCall feature to poll e.g. EEPROM driver */</i>&#160;&#160;&#160;<br/>&#160;&#160;&#160;&#160;<b>DescStartRepeatedServiceCall</b>(pMsgContext<b>-&gt;</b>iContext, &amp;ApplDescReadDTC_AddOn);&#160;<br/>
}&#160;<br/>
}&#160;<br/>&#160;<br/><b>void</b>&#160;<b>ApplDescReadDTC_AddOn</b>(DescMsgContext<b>*</b>&#160;pMsgContext)&#160;<br/>{&#160;<br/>&#160;&#160;vuint8 lDTC[3];&#160;<br/>&#160;&#160;DescMsgLen freeSpace;&#160;<br/>&#160;&#160;<i>/* Check if enough space is free in ring-buffer */</i>&#160;<br/>&#160;&#160;freeSpace&#160;<b>=</b>&#160;<b>DescRingBufferGetFreeSpace</b>();&#160;<br/>&#160;&#160;<b>if</b>&#160;(freeSpace&#160;<b>&gt;=</b>&#160;3)&#160;<br/>&#160;&#160;<i>/* try to read from EEPROM */</i>&#160;<br/>&#160;&#160;{&#160;<br/>&#160;&#160;<i>/* Success&#160;-&#160;result is in lDTC */</i>&#160;<br/>&#160; &#160;&#160;<b>DescRingBufferWrite</b>(pMsgContext<b>-&gt;</b>iContext, &amp;lDTC,&#160;3);&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;<b>else</b>&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;<i>/* nothing to do, wait for next MainHandler call, ring-buffer is full */</i>&#160;<br/>&#160;&#160;}&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/>
<b>13.7&#160;&#160;…prevent&#160;the&#160;ECU&#160;going to sleep&#160;while&#160;diagnostic&#160;is&#160;active&#160;&#160;</b><br/>
Most&#160;car&#160;manufactures&#160;have&#160;the&#160;requirement&#160;to&#160;keep&#160;the&#160;ECU&#160;alive&#160;while&#160;the&#160;diagnostic&#160;<br/>layer is active;&#160;including&#160;a&#160;pending&#160;request&#160;or&#160;a&#160;non-default&#160;session&#160;is currently&#160;active.&#160;<br/>This&#160;&#160;requirement&#160;&#160;is&#160;handled&#160;&#160;by&#160;&#160;CANdesc&#160;for&#160;&#160;some&#160;&#160;car&#160;&#160;manufactures&#160;&#160;(see&#160;&#160;OEM&#160;&#160;specific&#160;<br/>TechnicalReference_CANdesc document&#160;for&#160;details)&#160;<br/>The&#160;&#160;following&#160;&#160;code&#160;&#160;example&#160;&#160;shows&#160;&#160;all&#160;&#160;necessary&#160;&#160;steps&#160;&#160;to&#160;&#160;keep&#160;&#160;the&#160;&#160;ECU&#160;&#160;alive&#160;&#160;while&#160;<br/>diagnostic jobs&#160;are running&#160;(e.g.&#160;non-default session):&#160;<br/>{&#160;<br/>&#160;&#160;DescContextActivity&#160;lActivity;&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
154&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=155></a>Technical Reference&#160;CANdesc&#160;<br/>
&#160;&#160;DescStateGroup&#160;lState;&#160;<br/>&#160;<br/>&#160;&#160;lAcitvity&#160;=&#160;DescGetActivityState();&#160;<br/>&#160;&#160;lState&#160;=&#160;DescGetStateSession();&#160;<br/>&#160;&#160;&#160;<br/>&#160;&#160;/* check for a pending request or a non-default session */&#160;<br/>&#160;&#160;if&#160;( ((lState&#160;&amp;&#160;kDescStateSessionDefault) == 0) ||&#160;&#160;<br/>&#160; &#160; &#160; &#160;(lActivity&#160;!=&#160;kDescContextIdle) )&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;/* Force to stay alive */&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;else&#160;<br/>&#160;&#160;{&#160;<br/>&#160; &#160;&#160;/* Ready for sleeping */&#160;<br/>&#160;&#160;}&#160;<br/>}&#160;<br/>
<b>13.8&#160;&#160;…send a&#160;positive&#160;response&#160;without request after&#160;FBL&#160;flash job&#160;</b><br/>
According&#160;to&#160;some&#160;specifications&#160;the&#160;application&#160;has&#160;to&#160;send&#160;a&#160;positive&#160;response&#160;either&#160;to&#160;<br/>“diagnostic&#160;&#160;session&#160;&#160;control&#160;&#160;–&#160;&#160;default&#160;&#160;session”&#160;&#160;or&#160;&#160;“ECU&#160;&#160;reset&#160;&#160;–&#160;&#160;hard&#160;&#160;reset”&#160;&#160;after&#160;&#160;a&#160;<br/>successful&#160;&#160;flash&#160;&#160;job&#160;&#160;without&#160;&#160;a&#160;&#160;request.&#160;&#160;The&#160;&#160;Flash&#160;&#160;Boot&#160;&#160;Loader&#160;&#160;has&#160;&#160;to&#160;&#160;set&#160;&#160;a&#160;&#160;flag&#160;&#160;(reset&#160;<br/>response&#160;&#160;flag)&#160;&#160;in&#160;&#160;RAM&#160;&#160;or&#160;&#160;EEPROM&#160;&#160;which&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;evaluated&#160;&#160;by&#160;&#160;the&#160;&#160;application&#160;&#160;at&#160;<br/>startup.&#160;&#160;Depending&#160;&#160;on&#160;&#160;its&#160;&#160;value&#160;&#160;the&#160;&#160;application&#160;&#160;has&#160;&#160;to&#160;&#160;call&#160;&#160;the&#160;&#160;CANdesc&#160;&#160;function&#160;<br/><a href="TechnicalReference_CANdescs.html#132"><i>DescSendPosRespFBL()&#160;</i></a>with&#160;the&#160;appropriate&#160;response&#160;ID.&#160;<br/>CANdesc provides the&#160;AP<a href="TechnicalReference_CANdescs.html#132">I&#160;<i>DescSendPosRespFBL()&#160;</i></a>for this&#160;purpose.&#160;<br/>Due&#160;&#160;to&#160;&#160;bus&#160;&#160;communication&#160;&#160;is&#160;&#160;necessary&#160;&#160;to&#160;&#160;send&#160;&#160;the&#160;&#160;positive&#160;&#160;response;&#160;&#160;some&#160;&#160;limitations&#160;<br/>have&#160;to&#160;be&#160;handled&#160;by&#160;the&#160;application:&#160;<br/>1) Bus communication&#160;is to&#160;be&#160;requested&#160;by&#160;the&#160;application&#160;<br/>
2)&#160;If&#160;bus&#160;communication&#160;is&#160;possible,&#160;the&#160;application&#160;has&#160;to&#160;call<a href="TechnicalReference_CANdescs.html#132">&#160;<i>DescSendPosRespFBL()</i>.&#160;<br/></a>CANdescBasic will send&#160;the&#160;positive&#160;response.&#160;<br/>3)&#160;The&#160;application&#160;will&#160;be&#160;called&#160;<a href="TechnicalReference_CANdescs.html#133">(<i>ApplDescInitPosResFblBusInfo()</i>)&#160;</a>to&#160;provide&#160;the&#160;concrete&#160;<br/>addressing&#160;information&#160;of&#160;the&#160;response.&#160;<br/>4) Bus communication&#160;can&#160;be&#160;released&#160;by&#160;the&#160;application.&#160;<br/>
<b>13.9&#160;&#160;…enforce&#160;CANdesc&#160;to use&#160;ANSI&#160;C instead of hardware&#160;optimized bit type&#160;&#160;</b><br/>
CANdesc&#160;&#160;uses&#160;&#160;per&#160;&#160;default&#160;&#160;the&#160;&#160;bit-type&#160;&#160;definition&#160;&#160;provided&#160;&#160;by&#160;&#160;the&#160;&#160;CANdriver,&#160;&#160;since&#160;&#160;it&#160;&#160;is&#160;<br/>selected&#160;&#160;as&#160;&#160;optimal&#160;&#160;for&#160;&#160;the&#160;&#160;concrete&#160;&#160;CPU.&#160;&#160;On&#160;&#160;this&#160;&#160;way&#160;&#160;the&#160;&#160;CANdesc&#160;&#160;ROM&#160;&#160;and&#160;&#160;RAM&#160;<br/>resource&#160;consumption&#160;is kept&#160;as low&#160;as possible.&#160;<br/>Due&#160;to&#160;the&#160;complexity&#160;of&#160;some&#160;CANdesc&#160;data&#160;structures&#160;there&#160;can&#160;be&#160;problems&#160;on&#160;certain&#160;<br/>compilers with&#160;special&#160;bit-structure compiler options.&#160;&#160;<br/>If&#160;you&#160;encounter&#160;such&#160;problems&#160;either&#160;at&#160;compile&#160;or&#160;at&#160;run-time,&#160;you&#160;can&#160;turn&#160;the&#160;ANSIC&#160;C&#160;<br/>bit-type&#160;support&#160;in&#160;CANdesc&#160;on.&#160;To&#160;do&#160;that,&#160;just&#160;add&#160;a&#160;user&#160;configuration&#160;file&#160;in&#160;GENy&#160;with&#160;<br/>the&#160;following&#160;content:&#160;<br/>#define&#160;DESC_USE_ANSI_C_BIT_TYPE&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
155&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=156></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-156_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
<b>13.10&#160;&#160;…configure&#160;Extended&#160;Addressing&#160;</b><br/>
If&#160;Extended&#160;Addressing&#160;is&#160;used&#160;as&#160;TP&#160;Addressing&#160;mode&#160;some&#160;additional&#160;settings&#160;have&#160;to&#160;<br/>be&#160;done.&#160;&#160;“<i>DescCheckTA</i>” has&#160;to&#160;be&#160;set&#160;for the&#160;“<i>Target&#160;Address&#160;Message&#160;Filter</i>” in&#160;GENy.&#160;<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;13-1&#160;GENy&#160;TP&#160;configuration&#160;<br/>
Additional&#160;&#160;a&#160;&#160;user&#160;&#160;configuration&#160;&#160;file&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;used&#160;&#160;to&#160;&#160;configure&#160;&#160;the&#160;&#160;functional&#160;&#160;target&#160;<br/>address.&#160;An&#160;example&#160;for the&#160;content&#160;of&#160;the&#160;user configuration&#160;file&#160;is&#160;given&#160;below.&#160;&#160;&#160;<br/>&#160;<br/>
#define&#160;kDescOemExtAddrFuncTargetAddr &#160;0xFE &#160;&#160;<br/>
<b>13.11&#160;&#160;…use&#160;Multiple&#160;Addressing&#160;&#160;</b><br/>
This&#160;&#160;chapter&#160;&#160;is&#160;&#160;a&#160;&#160;short&#160;&#160;summary&#160;&#160;of&#160;&#160;additional&#160;&#160;information&#160;&#160;that&#160;&#160;the&#160;&#160;application&#160;&#160;has&#160;&#160;to&#160;<br/>provide&#160;for CANdesc&#160;if&#160;the&#160;Tp&#160;addressing&#160;mode&#160;is Multiple&#160;Addressing.&#160;<br/>In&#160;the&#160;case&#160;that&#160;a&#160;positive&#160;response&#160;has&#160;to&#160;be&#160;send&#160;after&#160;FBL&#160;flash&#160;job&#160;of&#160;the&#160;application,&#160;<br/>please&#160;&#160;assure&#160;&#160;that&#160;&#160;the&#160;&#160;correct&#160;&#160;addressing&#160;&#160;information&#160;&#160;are&#160;&#160;provided&#160;&#160;in&#160;&#160;the&#160;&#160;callback &#160;<br/><a href="TechnicalReference_CANdescs.html#133"><i>ApplDescInitPosResFblBusInfo()</i>.</a>&#160;<br/>Furthermore,&#160;the&#160;“Rx&#160;Get&#160;Buffer”&#160;and&#160;“Rx&#160;Indication”&#160;functions&#160;have&#160;to&#160;be&#160;redirected&#160;to&#160;the&#160;<br/>application&#160;if&#160;one&#160;of&#160;the&#160;Tp&#160;Addressing&#160;modes&#160;is&#160;Normal Addressing.&#160;This&#160;can&#160;be&#160;done&#160;in&#160;<br/>the&#160;&#160;GENy&#160;&#160;configuration&#160;&#160;of&#160;&#160;the&#160;&#160;TP,&#160;&#160;a&#160;&#160;callback&#160;&#160;name&#160;&#160;different&#160;&#160;from&#160;&#160;the&#160;&#160;one&#160;&#160;that&#160;&#160;is&#160;<br/>implemented&#160;in&#160;CANdesc has&#160;to&#160;be&#160;entered.&#160;&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
156&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=157></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-157_1.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;13-2&#160;GENy&#160;TP&#160;callbacks&#160;<br/>
The&#160;&#160;callbacks&#160;&#160;have&#160;&#160;to&#160;&#160;be&#160;&#160;implemented&#160;&#160;in&#160;&#160;the&#160;&#160;application.&#160;&#160;In&#160;&#160;the&#160;&#160;Get&#160;&#160;Buffer&#160;&#160;function&#160;&#160;the&#160;<br/>CAN Id&#160;has to&#160;be&#160;set&#160;for the&#160;FC in&#160;the&#160;case&#160;of&#160;Normal&#160;Addressing,&#160;<br/>&#160;<br/>/* Example: A configuration with only CANdesc Tp connections and only one Tp&#160;<br/>Tx/Rx channel. */&#160;<br/>TP_MEMORY_MODEL_DATA canuint8*&#160;DispatcherDescGetBuffer(canuint8 tpChannel,&#160;<br/>canuint16 datLen)&#160;<br/>{&#160;<br/>&#160;&#160;TP_MEMORY_MODEL_DATA canuint8*&#160;retPtr = V_NULL;&#160;<br/>&#160;<br/>&#160;&#160;retPtr = DescGetBuffer(tpChannel, datLen);&#160;<br/>&#160;<br/>&#160; &#160;if(retPtr != V_NULL)&#160;<br/>&#160; &#160;{&#160;<br/>&#160; &#160;&#160;if((TpRxGetAddressingFormat(tpChannel) == kTpNormalAddressing))&#160;<br/>&#160; &#160;&#160;{&#160;<br/>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;/*&#160;kApplNormalAddressingTxId, have to defined&#160;by the application*/&#160;<br/>&#160; &#160; &#160; &#160;&#160;TpRxSetTransmitID(tpChannel, kApplNormalAddressingTxId);&#160;<br/>&#160; &#160;&#160;}&#160;<br/>&#160; &#160;}&#160;<br/>&#160; &#160; &#160;&#160;&#160;<br/>&#160;return&#160;retPtr;&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
157&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=158></a>Technical Reference&#160;CANdesc&#160;<br/>
The&#160;&#160;response&#160;&#160;ID&#160;&#160;for&#160;&#160;Normal&#160;&#160;Addressing&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;set&#160;&#160;in&#160;&#160;the&#160;&#160;Indication&#160;&#160;function.&#160;&#160;The&#160;<br/>response&#160;Id&#160;has&#160;to&#160;be&#160;set&#160;after the&#160;call&#160;of&#160;<i>DescPhysReqInd().</i>&#160;<br/>
&#160;<br/>/* Example: A configuration with only CANdesc Tp connections and only one Tp&#160;<br/>Tx/Rx channel. */&#160;<br/>void&#160;DispatcherDescPhysReqInd(canuint8 tpChannel, canuint16 datLen)&#160;<br/>{&#160;<br/>&#160;&#160;vuint8 addressingType = (TpRxGetAddressingFormat(tpChannel));&#160;<br/>&#160;<br/>&#160;&#160;DescPhysReqInd(tpChannel, datLen);&#160;<br/>&#160;<br/>&#160;&#160;/*Set CAN IDs for the Response*/&#160;<br/>&#160;&#160;if(addressingType&#160;== kTpNormalAddressing)&#160;<br/>&#160;&#160;{&#160;<br/>
/*&#160;kApplNormalAddressingTxId and kApplNormalAddressingPhysRxId, have to&#160;<br/>defined&#160;by&#160;&#160; &#160;&#160;the&#160;&#160; &#160;application*/&#160;<br/>TpTxSetChannelID(0&#160;/*tpTxChannel*/, kApplNormalAddressingTxId,&#160;<br/>kApplNormalAddressingPhysRxId);&#160;<br/>/* tpTxChannel = 0 is only&#160;possible&#160;because only one Tx Channel is&#160;<br/>configured.*/&#160;<br/>
&#160;&#160;}&#160;<br/>}&#160;<br/>&#160;<br/>&#160;<br/>
<b>13.12&#160;&#160;…use&#160;“Dynamic&#160;Normal&#160;Addressing Multi&#160;TP”&#160;with multiple&#160;tester&#160;</b><br/>
This&#160;&#160;chapter&#160;&#160;is&#160;&#160;a&#160;&#160;short&#160;&#160;summary&#160;&#160;of&#160;&#160;additional&#160;&#160;information&#160;&#160;that&#160;&#160;the&#160;&#160;application&#160;&#160;has&#160;&#160;to&#160;<br/>provide&#160;for&#160;CANdesc&#160;if&#160;the&#160;Tp&#160;addressing&#160;mode&#160;is&#160;“Dynamic&#160;Normal&#160;Addressing&#160;Multi&#160;TP”&#160;<br/>with&#160;more than&#160;one&#160;tester.&#160;<br/>In&#160;the&#160;case&#160;that&#160;a&#160;positive&#160;response&#160;has&#160;to&#160;be&#160;send&#160;after&#160;FBL&#160;flash&#160;job&#160;of&#160;the&#160;application,&#160;<br/>please&#160;&#160;assure&#160;&#160;that&#160;&#160;the&#160;&#160;correct&#160;&#160;addressing&#160;&#160;information&#160;&#160;are&#160;&#160;provided&#160;&#160;in&#160;&#160;the&#160;&#160;callback &#160;<br/><a href="TechnicalReference_CANdescs.html#133"><i>ApplDescInitPosResFblBusInfo()</i>.&#160;</a>&#160;<br/>Furthermore,&#160;the&#160;“Rx&#160;Get&#160;Buffer”&#160;function&#160;has&#160;to&#160;be&#160;redirected&#160;to&#160;the&#160;application.&#160;This&#160;can&#160;<br/>be&#160;done&#160;in&#160;the&#160;GENy&#160;configuration&#160;of&#160;the&#160;TP,&#160;a&#160;callback name&#160;different&#160;from&#160;the&#160;one&#160;that&#160;is&#160;<br/>implemented&#160;in&#160;CANdesc has&#160;to&#160;be&#160;entered.&#160;&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
158&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=159></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-159_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc-159_2.png"/><br/>
Technical Reference&#160;CANdesc&#160;<br/>
&#160;<br/>
Figure&#160;13-3&#160;GENy&#160;TP&#160;callbacks&#160;(physical&#160;addressing)&#160;<br/>
&#160;<br/>
The&#160;&#160;“Get&#160;&#160;Buffer”&#160;&#160;function&#160;&#160;of&#160;&#160;the&#160;&#160;functional&#160;&#160;connection&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;redirected&#160;&#160;to&#160;&#160;the&#160;<br/>application&#160;too.&#160;<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;13-4&#160;GENy&#160;TP&#160;callbacks&#160;(functional&#160;addressing)&#160;<br/>
&#160;<br/>
The&#160;callbacks&#160;have&#160;to&#160;be&#160;implemented&#160;in&#160;the&#160;application.&#160;&#160;The&#160;received&#160;CAN&#160;ID&#160;has&#160;to&#160;be&#160;<br/>mapped&#160;to&#160;the&#160;&#160;corresponding&#160;transmit&#160;CAN&#160;ID&#160;and&#160;the&#160;TP&#160;connection&#160;number&#160;has&#160;to&#160;be&#160;<br/>set&#160;in&#160;the&#160;xxxGetBuffer&#160;callback:&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
159&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=160></a>Technical Reference&#160;CANdesc&#160;<br/>
TP_MEMORY_MODEL_DATA canuint8* DispatcherDescGetBuffer(canuint8 tpChannel,&#160;<br/>canuint16 datLen)&#160;<br/>{&#160;<br/>&#160;&#160;TP_MEMORY_MODEL_DATA canuint8* retPtr = V_NULL;&#160;&#160;<br/>&#160;<br/>&#160;&#160;switch(TpRxGetChannelID(tpChannel))&#160;<br/>&#160;&#160;{&#160;<br/>&#160;&#160;case&#160;kDispatcherRxDiagPhysCanId:&#160;<br/>&#160; &#160;&#160;TpRxSetTransmitID(tpChannel, kDispatcherTxDiagPhysCanId);&#160;<br/>&#160; &#160;&#160;TpRxSetConnectionNumber(tpChannel, kDescDiagConnection);&#160;<br/>&#160; &#160;&#160;retPtr = DescGetBuffer(tpChannel, datLen);&#160;<br/>&#160; &#160;&#160;break;&#160;<br/>&#160;<br/>&#160;&#160;case&#160;kDispatcherRxDiagAddPhysCanId:&#160;<br/>&#160; &#160;&#160;TpRxSetTransmitID(tpChannel, kDispatcherTxDiagAddPhysCanId);&#160;<br/>&#160; &#160;&#160;TpRxSetConnectionNumber(tpChannel, kDescDiagAddConnection);&#160;<br/>&#160; &#160;&#160;retPtr = DescGetBuffer(tpChannel, datLen);&#160;<br/>&#160; &#160;&#160;break;&#160;<br/>&#160;<br/>&#160;&#160;default:&#160;<br/>&#160; &#160;&#160;;&#160;<br/>&#160;&#160;}&#160;<br/>&#160;&#160;return&#160;retPtr;&#160;<br/>}&#160;<br/>&#160;<br/>
&#160;<br/>
The&#160;&#160;receiced&#160;&#160;CAN&#160;&#160;ID&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;mapped&#160;&#160;to&#160;&#160;the&#160;&#160;corresponding&#160;&#160;transmit&#160;&#160;CAN&#160;&#160;ID&#160;&#160;in&#160;&#160;the&#160;<br/>xxxGetFuncBuffer&#160;callback.&#160;&#160;Furthermore&#160;it&#160;is&#160;important,&#160;that&#160;&#160;the&#160;physical&#160;Rx&#160;ID&#160;is&#160;set&#160;for&#160;<br/>the&#160;response&#160;and&#160;not&#160;the&#160;functional&#160;one.&#160;This&#160;CAN&#160;ID&#160;is&#160;used&#160;to&#160;recognize&#160;the&#160;FC&#160;of&#160;the&#160;<br/>tester in&#160;case&#160;of&#160;a&#160;multiframe&#160;response:&#160;<br/>TP_MEMORY_MODEL_DATA canuint8* DispatcherDescGetFuncBuffer(vuint16 dataLength)&#160;<br/>{&#160;<br/>&#160;&#160;TP_MEMORY_MODEL_DATA canuint8* retPtr = V_NULL;&#160;<br/>&#160;<br/>&#160;&#160;switch(TpFuncGetReceiveCanID())&#160;<br/>&#160;&#160;{&#160;<br/>&#160;&#160;case&#160;kDispatcherRxDiagFunc:&#160;<br/>&#160; &#160;&#160;TpFuncSetTransmitCanID(kDispatcherTxDiagPhysCanId);&#160;<br/>&#160; &#160;&#160;TpFuncSetReceiveCanID(kDispatcherRxDiagPhysCanId);&#160;<br/>&#160; &#160;&#160;retPtr = DescGetFuncBuffer(dataLength);&#160;<br/>&#160; &#160;&#160;break;&#160;<br/>&#160;<br/>&#160;&#160;case&#160;kDispatcherRxDiagAddFunc:&#160;<br/>&#160; &#160;&#160;TpFuncSetTransmitCanID(kDispatcherTxDiagAddPhysCanId);&#160;<br/>&#160; &#160;&#160;TpFuncSetReceiveCanID(kDispatcherRxDiagAddPhysCanId);&#160;<br/>&#160; &#160;&#160;retPtr = DescGetFuncBuffer(dataLength);&#160;<br/>&#160; &#160;&#160;break;&#160;<br/>&#160;<br/>&#160;&#160;default:&#160;<br/>&#160; &#160;&#160;;&#160;<br/>&#160;&#160;}&#160;<br/>&#160;<br/>&#160;&#160;return&#160;retPtr;&#160;<br/>}&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
160&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=161></a>Technical Reference&#160;CANdesc&#160;<br/>
The&#160;&#160;code&#160;&#160;examples&#160;&#160;above&#160;&#160;are&#160;for&#160;2&#160;testers,&#160;&#160;in&#160;&#160;the&#160;&#160;example&#160;&#160;are&#160;&#160;some&#160;&#160;defines&#160;&#160;used&#160;&#160;that&#160;<br/>have&#160;to&#160;be&#160;provided&#160;by&#160;the&#160;application&#160;corresponding&#160;to&#160;the&#160;configuration.&#160;<br/>
&#160;<br/>
<b>Define&#160;</b><br/>
<b>Description&#160;</b><br/>
kDispatcherRxDiagPhysCanId&#160;<br/>
Physical request&#160;CAN&#160;ID of&#160;the&#160;first&#160;tester&#160;<br/>
kDispatcherRxDiagFuncCanId&#160;<br/>
Functional request&#160;CAN ID of&#160;the&#160;first&#160;tester&#160;<br/>
kDispatcherTxDiagPhysCanId&#160;<br/>
Response&#160;CAN&#160;ID&#160;of&#160;the&#160;first&#160;tester&#160;<br/>
kDispatcherRxDiagAddPhysCanId&#160;<br/>
Physical request&#160;CAN&#160;ID of&#160;the&#160;second&#160;tester&#160;<br/>
kDispatcherRxDiagAddFuncCanId&#160;<br/>
Functional request&#160;CAN ID of&#160;the&#160;second&#160;tester&#160;<br/>
kDispatcherTxDiagAddPhysCanId&#160;<br/>
Response&#160;CAN&#160;ID&#160;of&#160;the&#160;second&#160;tester&#160;<br/>
kDispatcherTxDiagTpChannel&#160;<br/>
Transmit&#160;&#160;Tp&#160;&#160;Channel&#160;&#160;of&#160;&#160;CANdesc.&#160;&#160;If&#160;&#160;only&#160;&#160;one&#160;<br/>Tp&#160;Channel is&#160;used,&#160;it is has to&#160;be&#160;set&#160;to&#160;zero.&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
161&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=162></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>14&#160;&#160;Related&#160;documents&#160;</b><br/>
&#160;<br/>
<b>Abbreviation&#160;&#160;File&#160;Name&#160;</b><br/>
<b>Description&#160;</b><br/>
/KWP2000/&#160;<br/>
&#160;<br/>
Keyword 2000&#160;protocol&#160;<br/>
/TPMC/&#160;<br/>
&#160;<br/>
User&#160;&#160;manual&#160;&#160;of&#160;&#160;the&#160;&#160;multi-connection&#160;&#160;transport&#160;&#160;layer&#160;<br/>module.&#160;&#160;The&#160;&#160;transport&#160;&#160;layer&#160;&#160;is&#160;&#160;implemented&#160;<br/>according&#160;to&#160;/ISO&#160;15765/&#160;<br/>
/ISO&#160;15765/&#160;&#160;&#160;<br/>
This&#160;&#160;ISO&#160;&#160;standard&#160;&#160;describes&#160;&#160;diagnostics&#160;&#160;and&#160;<br/>diagnostics on&#160;CAN.&#160;&#160;<br/>
<b>Note:&#160;</b>If&#160;no&#160;file&#160;name&#160;is given,&#160;the&#160;document&#160;is not&#160;provided&#160;by&#160;Vector.&#160;&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
162&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=163></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>15&#160;&#160;Glossary&#160;</b><br/>
&#160;<br/>
<b>Abbreviation&#160;&#160;Description&#160;&#160;<br/>CANdb&#160;</b><br/>
<b>CAN&#160;d</b>ata<b>b</b>ase&#160;by&#160;Vector which&#160;is used&#160;by&#160;Vector tools.&#160;&#160;<br/>
<b>CANdesc&#160;</b><br/>
<b>CAN&#160;d</b>iagnostics<b>&#160;e</b>mbedded<b>&#160;s</b>oftware<b>&#160;c</b>omponent<b>&#160;</b><br/>
<b>CDD&#160;</b><br/>
<b>C</b>ANdela&#160;<b>D</b>iagnostic&#160;<b>D</b>atabase<b>&#160;</b><br/>
<b>CF&#160;</b><br/>
<b>C</b>onsecutive&#160;<b>F</b>rame&#160;(transport protocol&#160;frame)&#160;<br/>
<b>CCL&#160;</b><br/>
<b>C</b>ommunication&#160;<b>C</b>ontrol&#160;<b>L</b>ayer&#160;<br/>
<b>DBC&#160;</b><br/>
CAN database&#160;format&#160;of&#160;the&#160;Vector&#160;company,&#160;which&#160;is used&#160;by&#160;the&#160;<br/>GENtool to&#160;gather information&#160;about&#160;the&#160;ECUs in&#160;the&#160;network, their&#160;<br/>communication&#160;relations,&#160;message&#160;definitions,&#160;signals of&#160;<br/>messages,&#160;network related&#160;information&#160;(e.g.&#160;manufacturer type,&#160;<br/>network management&#160;type,&#160;etc.).&#160;<br/>
<b>ECU&#160;</b><br/>
<b>E</b>lectronic&#160;<b>C</b>ontrol&#160;<b>U</b>nit&#160;<br/>
<b>FBL&#160;</b><br/>
<b>F</b>lash&#160;<b>B</b>oot&#160;<b>L</b>oader&#160;<br/>
<b>KWP&#160;2000&#160;</b><br/>
<b>K</b>ey<b>w</b>ord&#160;<b>P</b>rotocol&#160;<b>2000</b>&#160;<br/>
<b>OSEK&#160;</b><br/>
German&#160;&#160;abbreviation,&#160;&#160;“<b>O</b>ffene&#160;&#160;<b>S</b>ysteme&#160;&#160;und&#160;&#160;deren&#160;&#160;Schnittstellen&#160;<br/>für&#160;die&#160;<b>E</b>lektronik&#160;im&#160;<b>K</b>raftfahrzeug”,&#160;means&#160;“open&#160;systems&#160;and&#160;the&#160;<br/>corresponding&#160;interfaces&#160;for automotive&#160;electronics”&#160;<br/>
<b>RCR-RP&#160;</b><br/>
<b>R</b>equest<b>&#160;C</b>orrectly<b>&#160;R</b>eceived<b>&#160;–&#160;R</b>esponse<b>&#160;P</b>ending<b>&#160;</b><br/>
<b>SF&#160;</b><br/>
<b>S</b>ingle<b>&#160;F</b>rame<b>&#160;</b><br/>
<b>SID&#160;</b><br/>
<b>S</b>ervice&#160;<b>Id</b>entifier&#160;<br/>
<b>SPRMIB&#160;</b><br/>
<b>S</b>uppress&#160;<b>P</b>ositive&#160;<b>R</b>esponse&#160;<b>M</b>essage&#160;<b>I</b>ndication&#160;<b>B</b>it&#160;<br/>
<b>TP&#160;</b><br/>
<b>T</b>ransport&#160;<b>P</b>rotocol&#160;&#160;<br/>
<b>UDS&#160;</b><br/>
<b>U</b>nified&#160;<b>D</b>iagnostic&#160;<b>S</b>ervices<b>&#160;&#160;</b><br/>
<b>VSG&#160;</b><br/>
<b>V</b>ehicle<b>&#160;S</b>ystem<b>&#160;G</b>roup<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
163&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name=164></a>Technical Reference&#160;CANdesc&#160;<br/>
<b>16&#160;&#160;Contact&#160;</b><br/>
Visit&#160;our website&#160;for&#160;more information&#160;on&#160;<br/>
&#160;<br/>
<b>&gt;&#160;&#160;</b>News&#160;<br/>
<b>&gt;&#160;&#160;</b>Products&#160;<br/>
<b>&gt;&#160;&#160;</b>Demo&#160;software&#160;<br/>
<b>&gt;&#160;&#160;</b>Support&#160;<br/>
<b>&gt;&#160;&#160;</b>Training&#160;data&#160;<br/>
<b>&gt;&#160;&#160;</b>Addresses&#160;<br/>
&#160;<br/>
<b>www.vector.com&#160;</b><br/>
2013,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;3.07.00&#160;<br/>
164&#160;/&#160;164&#160;<br/>
based&#160;on&#160;template&#160;version&#160;5.1.0&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_CANdescs.html#2">1 History</a></li>
<li><a href="TechnicalReference_CANdescs.html#12">2 Introduction</a></li>
<li><a href="TechnicalReference_CANdescs.html#13">3 Documents this one refers to…</a></li>
<li><a href="TechnicalReference_CANdescs.html#14">4 Architecture Overview</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#14">4.1 CANdesc – Internal processing</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#14">4.1.1 Diagnostic protocol</a></li>
<li><a href="TechnicalReference_CANdescs.html#15">4.1.2 How does this flow actually work?</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#18">4.2 Application interface flow</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#18">4.2.1 Session- and CommunicationControl</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#19">5 Advanced Configuration</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#19">5.1 Configure DBC attributes for diagnostics</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#20">6 CANdesc Configuration in GENy</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#20">6.1 Step One – Importing an ECU Diagnostic Description</a></li>
<li><a href="TechnicalReference_CANdescs.html#21">6.2 Step Two – ECU Diagnostic Configuration in GENy</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#22">6.2.1 Global CANdesc Settings</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#27">6.2.1.1 Generic Processing Notifications (UDS2012)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#27">6.2.2 Service Specific Settings</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#28">6.2.2.1 Generic Service Settings</a></li>
<li><a href="TechnicalReference_CANdescs.html#29">6.2.2.2 Predefined (implemented) Services in CANdesc</a></li>
<li><a href="TechnicalReference_CANdescs.html#31">6.2.2.3 Signal Access Enabled Services</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#35">6.2.3 Timing Settings</a></li>
<li><a href="TechnicalReference_CANdescs.html#36">6.2.4 Security Access Settings (UDS2006)</a></li>
<li><a href="TechnicalReference_CANdescs.html#38">6.2.5 Security Access Settings (UDS2012)</a></li>
<li><a href="TechnicalReference_CANdescs.html#39">6.2.6 Scheduler Settings</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#42">7 CANdescBasic Configuration in GENy</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#42">7.1 Global CANdescBasic Settings</a></li>
<li><a href="TechnicalReference_CANdescs.html#42">7.2 Service Specific Settings</a></li>
<li><a href="TechnicalReference_CANdescs.html#43">7.3 Timing Settings</a></li>
<li><a href="TechnicalReference_CANdescs.html#43">7.4 Diagnostic State Configuration</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#47">8 Multi Identity Support</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#47">8.1 Single Identity Mode</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#47">8.1.1.1 Configuration in CANdela</a></li>
<li><a href="TechnicalReference_CANdescs.html#47">8.1.1.2 Configuration in GENy</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#47">8.2 VSG Mode</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#48">8.2.1 Implementation Limitations</a></li>
<li><a href="TechnicalReference_CANdescs.html#49">8.2.2 Configuration in CANdela</a></li>
<li><a href="TechnicalReference_CANdescs.html#50">8.2.3 Configuration in CANdela</a></li>
<li><a href="TechnicalReference_CANdescs.html#51">8.2.4 Configuration in GENy</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#51">8.3 Multi Identity Mode</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#52">9 Diagnostic Service Implementation Specifics</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#52">9.1 ReadDataByIdentifier (SID $22)</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#53">9.1.1 Limitations of the service</a></li>
<li><a href="TechnicalReference_CANdescs.html#54">9.1.2 Single PID mode</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#54">9.1.2.1 Sending a positive response using linear buffer access</a></li>
<li><a href="TechnicalReference_CANdescs.html#55">9.1.2.2 Sending a positive response using ring buffer access</a></li>
<li><a href="TechnicalReference_CANdescs.html#56">9.1.2.3 Sending a negative response</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#56">9.1.3 Multiple PID mode</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#57">9.1.3.1 Pure linear buffer configuration</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#57">9.1.3.1.1 Sending a positive response</a></li>
<li><a href="TechnicalReference_CANdescs.html#58">9.1.3.1.2 Sending a negative response</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#58">9.1.3.2 Ring buffer active configuration</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#60">9.1.3.2.1 Sending a positive response</a></li>
<li><a href="TechnicalReference_CANdescs.html#61">9.1.3.2.2 Sending a negative response</a></li>
<li><a href="TechnicalReference_CANdescs.html#62">9.1.3.2.3 PostHandler execution rule</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#62">9.2 DynamicallyDefineDataIdentifier (SID $2C) (UDS)</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#63">9.2.1 Feature set</a></li>
<li><a href="TechnicalReference_CANdescs.html#63">9.2.2 API Functions</a></li>
<li><a href="TechnicalReference_CANdescs.html#64">9.2.3 Sequence Charts</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#67">9.3 Read/Write Memory by Address (SID $23/$3D) (UDS)</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#67">9.3.1 Tasks performed by CANdesc</a></li>
<li><a href="TechnicalReference_CANdescs.html#67">9.3.2 Task to be performed by the Application</a></li>
<li><a href="TechnicalReference_CANdescs.html#67">9.3.3 Repeated service calls</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#69">10 Generic Processing Notifications</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#70">10.1 Using dynamically defined data Identifier</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#71">11 Busy Repeat Responder Support (UDS2006 and UDS2012)</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#72">11.1 Configuration in GENy</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#73">12 CANdesc API</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#73">12.1 API Categories</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#73">12.1.1 Single Context</a></li>
<li><a href="TechnicalReference_CANdescs.html#73">12.1.2 Multiple Context (only CANdesc)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#73">12.2 Data Types</a></li>
<li><a href="TechnicalReference_CANdescs.html#73">12.3 Global Variables</a></li>
<li><a href="TechnicalReference_CANdescs.html#73">12.4 Constants</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#73">12.4.1 Component Version</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#74">12.5 Macros</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#74">12.5.1 Data exchange</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#74">12.5.1.1 Splitting 16 bit data</a></li>
<li><a href="TechnicalReference_CANdescs.html#74">12.5.1.2 Splitting 32 bit data</a></li>
<li><a href="TechnicalReference_CANdescs.html#74">12.5.1.3 Assembling 16 bit data</a></li>
<li><a href="TechnicalReference_CANdescs.html#75">12.5.1.4 Assembling 32 bit data</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#75">12.6 Functions</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#75">12.6.1 Administrative Functions</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#75">12.6.1.1 DescInitPowerOn()</a></li>
<li><a href="TechnicalReference_CANdescs.html#76">12.6.1.2 DescInit()</a></li>
<li><a href="TechnicalReference_CANdescs.html#77">12.6.1.3 DescTask()</a></li>
<li><a href="TechnicalReference_CANdescs.html#78">12.6.1.4 DescStateTask()</a></li>
<li><a href="TechnicalReference_CANdescs.html#79">12.6.1.5 DescTimerTask()</a></li>
<li><a href="TechnicalReference_CANdescs.html#80">12.6.1.6 DescGetActivityState()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#81">12.6.2 Multi Variant Configuration Functions</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#81">12.6.2.1 DescInitConfigVariant()</a></li>
<li><a href="TechnicalReference_CANdescs.html#82">12.6.2.2 DescGetConfigVariant()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#83">12.6.3 Service Functions</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#83">12.6.3.1 DescSetNegResponse()</a></li>
<li><a href="TechnicalReference_CANdescs.html#84">12.6.3.2 DescProcessingDone()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#84">12.6.4 Service callback functions</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#87">12.6.4.1 Service PreHandler</a></li>
<li><a href="TechnicalReference_CANdescs.html#88">12.6.4.2 Service MainHandler</a></li>
<li><a href="TechnicalReference_CANdescs.html#90">12.6.4.3 Service PostHandler</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#91">12.6.5 User (Unknown) Service Handling</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#91">12.6.5.1 How it works</a></li>
<li><a href="TechnicalReference_CANdescs.html#92">12.6.5.2 ApplDescCheckUserService()</a></li>
<li><a href="TechnicalReference_CANdescs.html#93">12.6.5.3 DescGetServiceId()</a></li>
<li><a href="TechnicalReference_CANdescs.html#94">12.6.5.4 Generic User Service MainHandler</a></li>
<li><a href="TechnicalReference_CANdescs.html#95">12.6.5.5 Generic User Service PostHandler</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#96">12.6.6 Session Handling</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#96">12.6.6.1 ApplDescCheckSessionTransition()</a></li>
<li><a href="TechnicalReference_CANdescs.html#97">12.6.6.2 DescSessionTransitionChecked()</a></li>
<li><a href="TechnicalReference_CANdescs.html#98">12.6.6.3 DescIsSuppressPosResBitSet ()</a></li>
<li><a href="TechnicalReference_CANdescs.html#99">12.6.6.4 ApplDescOnTransitionSession()</a></li>
<li><a href="TechnicalReference_CANdescs.html#100">12.6.6.5 DescSetStateSession()</a></li>
<li><a href="TechnicalReference_CANdescs.html#101">12.6.6.6 DescGetStateSession()</a></li>
<li><a href="TechnicalReference_CANdescs.html#102">12.6.6.7 DescGetSessionIdOfSessionState</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#103">12.6.7 CommunicationControl Handling</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#103">12.6.7.1 ApplDescCheckCommCtrl()</a></li>
<li><a href="TechnicalReference_CANdescs.html#104">12.6.7.2 DescCommCtrlChecked()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#105">12.6.8 Periodic call of ‘Service MainHandler’</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#105">12.6.8.1 DescStartRepeatedServiceCall()</a></li>
<li><a href="TechnicalReference_CANdescs.html#106">12.6.8.2 DescStartMemByAddrRepeatedCall()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#106">12.6.9 Ring Buffer Mechanism</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#108">12.6.9.1 DescRingBufferStart()</a></li>
<li><a href="TechnicalReference_CANdescs.html#109">12.6.9.2 DescRingBufferWrite()</a></li>
<li><a href="TechnicalReference_CANdescs.html#110">12.6.9.3 DescRingBufferCancel()</a></li>
<li><a href="TechnicalReference_CANdescs.html#111">12.6.9.4 DescRingBufferGetFreeSpace()</a></li>
<li><a href="TechnicalReference_CANdescs.html#112">12.6.9.5 DescRingBufferGetProgress()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#113">12.6.10 Signal Interface of CANdesc</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#113">12.6.10.1 ApplDesc&lt;Signal-Handler&gt;()</a></li>
<li><a href="TechnicalReference_CANdescs.html#114">12.6.10.2 Configuration of direct signal access</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#114">12.6.11 State Handling (CANdesc only)</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#114">12.6.11.1 DescGetState&lt;StateGroup&gt;()</a></li>
<li><a href="TechnicalReference_CANdescs.html#115">12.6.11.2 DescSetState&lt;StateGroup&gt;()</a></li>
<li><a href="TechnicalReference_CANdescs.html#116">12.6.11.3 ApplDescOnTransition«StateGroup»()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#117">12.6.12 &#160;Force “Response Correctly Received - Response Pending” transmission</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#118">12.6.12.1 DescForceRcrRpResponse()</a></li>
<li><a href="TechnicalReference_CANdescs.html#119">12.6.12.2 ApplDescRcrRpConfirmation()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#119">12.6.13 DynamicallyDefineDataIdentifier &#160;($2C) (UDS) functions</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#120">12.6.13.1 DescMayCallStateTaskAgain()</a></li>
<li><a href="TechnicalReference_CANdescs.html#121">12.6.13.2 ApplDescCheckDynDidMemoryArea()</a></li>
<li><a href="TechnicalReference_CANdescs.html#122">12.6.13.3 Non-volatile memory support</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#125">12.6.13.3.1 DescDynDefineDidPowerUp()</a></li>
<li><a href="TechnicalReference_CANdescs.html#126">12.6.13.3.2 DescDynIdMemContentRestored ()</a></li>
<li><a href="TechnicalReference_CANdescs.html#127">12.6.13.3.3 DescDynDefineDidPowerDown ()</a></li>
<li><a href="TechnicalReference_CANdescs.html#128">12.6.13.3.4 ApplDescStoreDynIdMemContent ()</a></li>
<li><a href="TechnicalReference_CANdescs.html#129">12.6.13.3.5 ApplDescRestoreDynIdMemContent ()</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#130">12.6.14 Memory Access Callbacks</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#130">12.6.14.1 ApplDescReadMemoryByAddress()</a></li>
<li><a href="TechnicalReference_CANdescs.html#131">12.6.14.2 ApplDescWriteMemoryByAddress()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#131">12.6.15 Flash Boot Loader Support</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#132">12.6.15.1 DescSendPosRespFBL()</a></li>
<li><a href="TechnicalReference_CANdescs.html#133">12.6.15.2 ApplDescInitPosResFblBusInfo()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#134">12.6.16 Debug Interface / Assertion</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#134">12.6.16.1 ApplDescFatalError()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#137">12.6.17 “Spontaneous Response” transmission</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#138">12.6.17.1 DescApplSendSpontaneousResponse()</a></li>
<li><a href="TechnicalReference_CANdescs.html#139">12.6.17.2 ApplDescSpontaneousResponseConfirmation()</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#140">12.6.18 &#160;Generic Processing Notifications</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#140">12.6.18.1 ApplDescManufacturerIndication</a></li>
<li><a href="TechnicalReference_CANdescs.html#141">12.6.18.2 ApplDescManufacturerConfirmation</a></li>
<li><a href="TechnicalReference_CANdescs.html#142">12.6.18.3 ApplDescSupplierIndication</a></li>
<li><a href="TechnicalReference_CANdescs.html#143">12.6.18.4 ApplDescSupplierConfirmation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#144">13 How To…</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#144">13.1 …implement a protocol service MainHandler</a></li>
<li><a href="TechnicalReference_CANdescs.html#147">13.2 …implement a service MainHandler</a></li>
<li><a href="TechnicalReference_CANdescs.html#148">13.3 …implement a Signal Handler</a></li>
<li><a href="TechnicalReference_CANdescs.html#149">13.4 …implement a Packet Handler</a></li>
<li><a href="TechnicalReference_CANdescs.html#149">13.5 …implement a state transition function</a></li>
<li><a href="TechnicalReference_CANdescs.html#151">13.6 …work with the ring-buffer mechanism</a>
<ul>
<li><a href="TechnicalReference_CANdescs.html#151">13.6.1 with asynchronous write</a></li>
<li><a href="TechnicalReference_CANdescs.html#153">13.6.2 with synchronous write</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#154">13.7 …prevent the ECU going to sleep while diagnostic is active</a></li>
<li><a href="TechnicalReference_CANdescs.html#155">13.8 …send a positive response without request after FBL flash job</a></li>
<li><a href="TechnicalReference_CANdescs.html#155">13.9 …enforce CANdesc to use ANSI C instead of hardware optimized bit type</a></li>
<li><a href="TechnicalReference_CANdescs.html#156">13.10 …configure Extended Addressing</a></li>
<li><a href="TechnicalReference_CANdescs.html#156">13.11 …use Multiple Addressing</a></li>
<li><a href="TechnicalReference_CANdescs.html#158">13.12 …use “Dynamic Normal Addressing Multi TP” with multiple tester</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdescs.html#162">14 Related documents</a></li>
<li><a href="TechnicalReference_CANdescs.html#163">15 Glossary</a></li>
<li><a href="TechnicalReference_CANdescs.html#164">16 Contact</a></li>
</ul>
<hr/>
</body>
</html>
