---
title: TechnicalReference_CANdesc_KWP_GMs
linkTitle: TechnicalReference_CANdesc_KWP_GMs
weight: 41
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-1_1.png"/><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/><b>CANdesc&#160;<br/></b>Technical Reference&#160;<br/>GM / Opel specifics&#160;<br/>&#160;<br/>Version 3.1.0&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
Authors&#160;<br/>
Mishel Shishmanyan;&#160;Christoph Rätz; Oliver Garnatz;&#160;<br/>Matthias Heil; Katrin&#160;Thurow&#160;<br/>
Status&#160;<br/>
<b>Released</b>&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-2_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>1&#160;&#160;History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Mishel Shishmanyan&#160;<br/>
2002-05-07&#160;<br/>
0.9.0 Creation&#160;<br/>
Christoph Rätz&#160;<br/>
2002-07-31&#160;<br/>
0.9.4&#160;<br/>
Reworked and released&#160;<br/>
Mishel Shishmanyan&#160;<br/>
2002-12-12&#160;<br/>
1.0.0&#160;<br/>
Added requirements for&#160;<br/>ProgrammingMode (Sid $A5) and&#160;<br/>DeviceControl(Sid $AE)&#160;<br/>Released&#160;<br/>
Mishel Shishmanyan&#160;<br/>
2003-04-09&#160;<br/>
1.1.0&#160;<br/>
Added default CANdelaStudio&#160;<br/>attribute settings for GM/OPEL&#160;<br/>ECUs&#160;<br/>
Oliver Garnatz&#160;<br/>
2003-12-19&#160;<br/>
2.0.0&#160;<br/>
Adapted to CANdesc 2.xx.xx&#160;<br/>New Word template used.&#160;<br/>
Oliver Garnatz&#160;<br/>
2004-05-14&#160;<br/>
2.1.0&#160;<br/>
Replaced AppDesc&#160;with ApplDesc&#160;<br/>Changed support level of ‘Security&#160;<br/>access’&#160;<br/>
Oliver Garnatz, Mishel&#160;<br/>
2004-07-15&#160;<br/>
2.2.0&#160;<br/>
Added description of CANdesc&#160;<br/>
Shishmanyan&#160;<br/>
OBD support&#160;<br/>
Mishel Shishmanyan&#160;<br/>
2006-05-02&#160;<br/>
2.3.0 Added:&#160;<br/>
-&#160;&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">Service&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">DynamicallyDefineMessag<br/>e ($2C)&#160;</a><br/>
- Service&#160;<br/>
DefinePIDByAddress ($2D)<br/>
-&#160;&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">The PacketHandler&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">(another type of service&#160;<br/>processor)&#160;</a><br/>
Modified:&#160;<br/>
- Cosmetics&#160;<br/>-&#160;&#160;All&#160;APIs described in&#160;<br/>
detailed table form&#160;<br/>
Removed:&#160;<br/>
- None&#160;<br/>
Jason Wolbers&#160;<br/>
2006-08-03&#160;<br/>
2.4.0 Improved&#160;<br/>
wording&#160;<br/>
Mishel Shishmanyan&#160;<br/>
2006-10-22&#160;<br/>
2.5.0 Added:&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15">-&#160;6.1 “<i>ECU Address&#160;configuration”</i></a><br/>
Mishel Shishmanyan&#160;<br/>
2006-11-03&#160;<br/>
2.6.0 Modified:&#160;<br/>
&#160;- 6.1.2&#160;<i>“Multi address ECU&#160;<br/>(dynamic addressing)”</i>&#160;<br/>
Mishel Shishmanyan&#160;<br/>
2007-12-14&#160;<br/>
2.7.0 Modified:&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#73">-&#160;8.3&#160;<i>“Service attributes”</i></a><i>&#160;</i><br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
2&#160;/&#160;&#160;80<br/>
&#160;<br/>
<hr/>
<a name=3></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-3_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#33"><i>-&#160;7.6 ”Service&#160;<br/>DisableNormalCommunication&#160;<br/>($28)”</i></a><i>&#160;<br/>&#160;<br/></i>Removed:&#160;<br/>&#160;- 6.1.2 “Multi address ECU&#160;<br/>(dynamic addressing)” –&#160;only&#160;<br/>target addresses 0xFE and 0xFD&#160;<br/>(for gateways only) are accepted&#160;<br/>by CANdesc.&#160;<br/>
Mishel Shishmanyan&#160;<br/>
2010-12-21&#160;<br/>
2.8.0 Modified:&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15"><i>-&#160;6.1&#160;ECU Address&#160;configuration&#160;<br/></i></a>Added:&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#32"><i>-&#160;7.5&#160;Service SecurityAccess ($27)</i></a><br/>
Matthias Heil&#160;<br/>
2011-04-20&#160;<br/>
3.0.0 Modified:&#160;<br/>
&#160;- Update to new formatting&#160;<br/>&#160;-&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#50"><i>7.11&#160;Service ProgrammingMode&#160;<br/>($A5)&#160;<br/></i></a>Added:&#160;<br/>&#160;-&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#14"><i>5.3&#160;Update from&#160;earlier versions&#160;<br/></i></a>&#160;-&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#75"><i>8.4&#160;State group for the&#160;<br/>Programming Sequence</i></a><b>&#160;</b><br/>
Katrin Thurow&#160;<br/>
2011-12-16&#160;<br/>
3.1.0 Modified:&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24"><i>6.6.3&#160;High speed programming&#160;<br/>mode state&#160;</i></a><br/>
&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
3&#160;/&#160;&#160;80<br/>
&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-4_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>Contents</b>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#2"><b>1</b>&#160;&#160;<b>History........................................................................................................................</b></a><b>.......&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#2">2</a></b>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#7"><b>2</b>&#160;&#160;<b>Related documents&#160;..........................................................................................................&#160;7</b></a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#8"><b>3</b>&#160;&#160;<b>Overview&#160;.......................................................................................................................</b></a><b>....&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#8">8</a></b>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#9"><b>4</b>&#160;&#160;<b>CANdesc support by&#160;diagnostic service&#160;.......................................................................&#160;9</b></a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#13"><b>5</b>&#160;&#160;<b>Important application requirements&#160;.............................................................................&#160;13</b></a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#13">5.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#13">Initialization&#160;.....................................................................................................&#160;13</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#14">5.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#14">DeviceControl ($AE) service requirement&#160;......................................................&#160;14</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#14">5.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#14">Update from earlier versions...........................................................................&#160;14</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15"><b>6</b>&#160;&#160;<b>GM/Opel specific functionality......................................................................................&#160;15</b></a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15">6.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15">ECU Address&#160;configuration.............................................................................&#160;15</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15">6.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15">Gateway ECUs&#160;...............................................................................................&#160;15</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15">6.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15">Virtual network management&#160;..........................................................................&#160;15</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15">6.1.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#15">Diagnostic activity notification.........................................................................&#160;15</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#17">6.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#17">Request validation&#160;..........................................................................................&#160;17</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">6.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">Timeout events&#160;...............................................................................................&#160;18</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">6.3.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">Tester present timeout&#160;....................................................................................&#160;18</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">6.4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#18">Using the extended negative response&#160;..........................................................&#160;18</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#19">6.4.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#19">Sending an extended negative response during service processing..............&#160;19</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#20">6.4.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#20">Sending an unsolicited extended negative response&#160;.....................................&#160;20</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#20">6.5&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#20">Sending an unsolicited single frame response&#160;...............................................&#160;20</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#21">6.6&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#21">GM/Opel CANdesc state machine access......................................................&#160;21</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#22">6.6.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#22">Normal communication&#160;state&#160;..........................................................................&#160;22</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#23">6.6.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#23">Programming mode state................................................................................&#160;23</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">6.6.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">High speed&#160;programming mode state.............................................................&#160;24</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">6.7&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">The PacketHandler (another type of service processor).................................&#160;24</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#25">6.7.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#25">PacketHandler API..........................................................................................&#160;25</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#29"><b>7</b>&#160;&#160;<b>GM/Opel service implementations&#160;...............................................................................&#160;29</b></a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#29">7.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#29">Service InitiateDiagnosticOperation ($10)&#160;......................................................&#160;29</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#29">7.1.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#29">Service DisableAllDTCs ($10 $02)&#160;.................................................................&#160;29</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30">7.1.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30">Service EnableDTCsDuringDeviceControl ($10&#160;$03)&#160;.....................................&#160;30</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30">7.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#30">Service ReadFailureRecordData ($12)...........................................................&#160;30</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">7.2.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">Service ReadFailureRecordIdentifiers&#160;($12 $01)............................................&#160;31</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">7.2.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">Service ReadFailureRecordParameters ($12 $02).........................................&#160;31</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
4&#160;/&#160;&#160;80<br/>
&#160;<br/>
<hr/>
<a name=5></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-5_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">7.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#31">Service ReturnToNormalMode ($20)&#160;..............................................................&#160;31</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">7.4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">Service ReadDataByParameterIdentifier ($22)...............................................&#160;32</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">7.4.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">Reading a dynamically defined PID (Parameter Identifier).............................&#160;32</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">7.5&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#32">Service SecurityAccess&#160;($27).........................................................................&#160;32</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#33">7.6&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#33">Service DisableNormalCommunication ($28).................................................&#160;33</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">7.7&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#35">Service DynamicallyDefineMessage ($2C).....................................................&#160;35</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">7.8&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">Operations on dynamically definable DPIDs&#160;..................................................&#160;36</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">7.8.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">Defining a dynamically definable DPID...........................................................&#160;36</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">7.8.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#36">Reading a dynamically definable DPID&#160;..........................................................&#160;36</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#41">7.9&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#41">Service DefinePIDByAddress ($2D)&#160;...............................................................&#160;41</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#42">7.10&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#42">Operations on dynamically definable PIDs&#160;.....................................................&#160;42</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#42">7.10.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#42">Defining a dynamically definable PID&#160;.............................................................&#160;42</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#44">7.10.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#44">Reading a dynamically definable PID&#160;.............................................................&#160;44</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">7.11&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">Service ProgrammingMode ($A5)&#160;..................................................................&#160;50</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">7.11.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#50">Allowing programming&#160;mode ($A5 $01/$02)&#160;..................................................&#160;50</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#51">7.11.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#51">Entering programming&#160;mode ($A5 $03)&#160;.........................................................&#160;51</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#51">7.11.2.1&#160;&#160;FBL&#160;start on EnterProgrammingMode ($A5 $03)&#160;...........................................&#160;51</a>&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#52">7.11.2.2&#160;&#160;FBL&#160;start on RequestDownload ($34).............................................................&#160;52</a>&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#52">7.11.2.3&#160;&#160;Concluding programming&#160;mode......................................................................&#160;52</a>&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#53">7.11.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#53">Considerations when upgrading&#160;.....................................................................&#160;53</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#53">7.12&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#53">Service ReadDiagnosticInformation ($A9)......................................................&#160;53</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">7.12.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#54">ReadStatusOfDTCByNumber ($A9 $80)&#160;........................................................&#160;54</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#57">7.12.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#57">ReadStatusOfDTCByStatusMask ($A9 $81)...................................................&#160;57</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#62">7.12.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#62">SendOnChangeDTCCount ($A9 $82)&#160;............................................................&#160;62</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">7.13&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">Service ReadDataByPacketIdentifier&#160;($AA)....................................................&#160;66</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.13.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#67">Handling undefined use&#160;cases........................................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.13.1.1&#160;&#160;Service $AA&#160;handling for&#160;undefined dynamically definable DPIDs.................&#160;67</a>&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.13.1.2&#160;&#160;Service $AA&#160;handling for&#160;undefined referenced dynamically defined PIDs&#160;....&#160;67</a>&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.13.1.3&#160;&#160;Service $AA&#160;handling for&#160;unaccessible referenced PIDs................................&#160;67</a>&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.14&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#67">Service DeviceControl ($AE)&#160;..........................................................................&#160;67</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#69">7.15&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#69">Service TesterPresent&#160;($3E)&#160;...........................................................................&#160;69</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#70"><b>8</b>&#160;&#160;<b>CANdelaStudio default attribute settings&#160;....................................................................&#160;70</b></a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#71">8.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#71">Diagnostic class attributes&#160;..............................................................................&#160;71</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#72">8.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#72">Diagnostic instance attributes&#160;.........................................................................&#160;72</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#73">8.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#73">Service attributes&#160;............................................................................................&#160;73</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#75">8.4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#75">State group for the Programming Sequence...................................................&#160;75</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#76"><b>9</b>&#160;&#160;<b>OBD support...................................................................................................................&#160;76</b></a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#76">9.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#76">CAN identifiers................................................................................................&#160;76</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#76">9.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#76">Restrictions&#160;.....................................................................................................&#160;76</a>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
5&#160;/&#160;&#160;80<br/>
&#160;<br/>
<hr/>
<a name=6></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-6_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">CANdelaStudio default attribute settings for OBD services&#160;............................&#160;77</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.3.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">Diagnostic classes&#160;..........................................................................................&#160;77</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">CANgen configuration.....................................................................................&#160;77</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.4.1&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">DBC attribute settings for the OBD request message&#160;....................................&#160;77</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.4.2&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">CANgen&#160;version &lt; 4.15.00..............................................................................&#160;77</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.4.3&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#77">CANgen version&#160;≥&#160;4.15.00..............................................................................&#160;77</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#78">9.4.4&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#78">GENy configuration.........................................................................................&#160;78</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#78">9.5&#160;</a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#78">CANdesc configuration (without a Powertrain CANdela template)&#160;.................&#160;78</a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#79"><b>10</b>&#160;&#160;<b>Debug assertion codes..................................................................................................&#160;79</b></a>&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#80"><b>11</b>&#160;&#160;<b>Contact........................................................................................................................</b></a><b>....&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#80">80</a></b>&#160;<br/><i><b>&#160;</b></i><br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
6&#160;/&#160;&#160;80<br/>
&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-7_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-7_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-7_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-7_4.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>2&#160;&#160;Related documents&#160;</b><br/>
X<b>&#160;&#160;</b>Technical Reference CANdesc &#160;<br/>
X<b>&#160;&#160;</b>User Manual CANdesc&#160;<br/>
&#160;<br/>
<b>User&#160;Manual</b><br/>
<b>Technical</b><br/>
<b>Technical</b><br/>
<b>Reference</b><br/>
<b>Reference</b><br/>
<b>General</b><br/>
<b>OEM</b><br/>
<b>You are&#160;here</b><br/>
&#160;<br/>
Figure 2-1&#160;Manuals and References for CANdesc&#160;<br/>
All GM/Opel specific CANdesc topics are described within this technical reference.&#160;Topics&#160;<br/>which are common to all OEMs (e.g. features, concepts) are located in the general&#160;<br/>technical reference document&#160;“TechnicalReference_CANdesc”. &#160;<br/>For faster integration, please refer to the user manual document “UserManual_CANdesc”.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
7&#160;/&#160;&#160;80<br/>
&#160;<br/>
<hr/>
<a name=8></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-8_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>3&#160;&#160;Overview&#160;</b><br/>
The GM/Opel version of CANdesc uses&#160;an&#160;internal implementation to handle many&#160;<br/>diagnostic tasks. Many of these tasks are&#160;realized through generated code (constants,&#160;<br/>state count, etc.) which gives&#160;more flexibility&#160;to&#160;the application&#160;in&#160;case of specification&#160;or&#160;<br/>variant changes. On the other hand, there are “built-in” diagnostic service implementations&#160;<br/>which can free the application from some very complex tasks (e.g.&#160;<br/>ReadDiagnosticInformation (SID&#160;$A9), ReadDataByPacketIdentifier (SID $AA), etc.) and&#160;<br/>hide all of the underlying functionality under a simple signal interface for the application. In&#160;<br/>addition, CANdesc also handles&#160;certain GM/Opel&#160;specific management functionality (e.g.&#160;<br/>virtual networks) in order to fully comply with GM/Opel diagnostic specifications.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
8&#160;/&#160;&#160;80<br/>
&#160;<br/>
<hr/>
<a name=9></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-9_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>4&#160;&#160;CANdesc&#160;support by&#160;diagnostic service&#160;</b><br/>
CANdesc provides three possible levels of support independently for each diagnostic&#160;<br/>service – complete, assisted, or basic.&#160;The level of support varies according to CANdesc&#160;<br/>capability and user selection in&#160;CANdelaStudio.&#160;All three&#160;levels of support provide&#160;<br/>complete communication handling (including&#160;all transport protocol&#160;processing and error&#160;<br/>handling), diagnostic session and timer&#160;management, and basic error checking. &#160;<br/>Communication handling not only includes testing&#160;support of service, but also&#160;consistency&#160;<br/>of service, sub-function and/or&#160;identifier combination.&#160;A&#160;validity check of the addressing&#160;<br/>method and data length is performed. Parallel&#160;requests&#160;are managed (SID $3E, $AA, and&#160;<br/>$A9) when allowed.&#160;As error handling is a significant part of any ECU software, all low&#160;<br/>level errors are handled internally by CANdesc. Finally, CANdesc assists with the&#160;<br/>connection to GMLAN (e.g. supervision and&#160;management of the VN&#160;timer,&#160;message&#160;<br/>transmission mode, bus speed switching, etc.).&#160;<br/>
<b>Complete&#160;</b><br/>
Complete support means that CANdesc is capable of handling the diagnostic transaction&#160;<br/>without requesting support from&#160;the ECU application.&#160;The ECU developer need not&#160;<br/>provide any code to help implement the diagnostic feature; CANdesc&#160;handles all&#160;<br/>processing.&#160;In the case where diagnostic messages contain real-time data, or “signals”,&#160;<br/>CANdesc can map that data to global variables&#160;in the ECU application and read/write the&#160;<br/>values directly to/from&#160;RAM without calling any ECU application callbacks; the ECU&#160;<br/>developer does not have to concern himself&#160;with the protocol level implementation. If a&#160;<br/>service modifies a diagnostic state group, CANdesc notifies&#160;the application using a&#160;<br/>callback function.&#160;<br/>
<b>Assisted&#160;</b><br/>
Assisted support means that CANdesc is capable of fully parsing request messages and&#160;<br/>building response messages, but it does not contain the logic necessary to execute the&#160;<br/>request or determine data values.&#160;The ECU developer must provide callbacks&#160;for&#160;<br/>CANdesc to fill these logic gaps,&#160;which typically&#160;come&#160;in the form of calculating a signal&#160;<br/>value, controlling an I/O port, or perhaps executing an ECU-specific&#160;feature such as a self-<br/>test or EEPROM access routine.&#160;<br/>
<b>Basic&#160;</b><br/>
Basic support means that CANdesc is only capable of identifying that the ECU application&#160;<br/>must process the request.&#160;The&#160;ECU application may have to&#160;provide logic to validate the&#160;<br/>request message and build the response byte-by-byte.&#160;This level of support is only used&#160;<br/>where code generation is not&#160;practical or supported.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
9&#160;/&#160;&#160;80<br/>
&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-10_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>RequestCurrentDiagnosticData ($01) –&#160;Assisted&#160;</b><br/>
The application must&#160;implement only the handling of this service (no request length&#160;<br/>validation). &#160;<br/>
<b>RequestFreezeFrameData&#160;($02) –&#160;Assisted&#160;</b><br/>
The application must&#160;implement only the handling of this service (no request length&#160;<br/>validation).&#160;<br/>
<b>RequestEmissionRelatedDTC ($03) –&#160;Assisted&#160;</b><br/>
The application must&#160;implement only the handling of this service (no request length&#160;<br/>validation).<b>&#160;</b><br/>
<b>ClearDiagnosticInformation ($04) –&#160;Assisted&#160;</b><br/>
The application must provide a function that clears fault memory. &#160;<br/>
<b>RequestTestResultsForNonContinouslyMonitoredSystems ($06) –&#160;Assisted&#160;</b><br/>
The application must&#160;implement only the handling of this service (no request length&#160;<br/>validation).&#160;<br/>
<b>RequestTestResultsForContinouslyMonitoredSystems ($07) –&#160;Assisted&#160;</b><br/>
The application must&#160;implement only the handling of this service (no request length&#160;<br/>validation).&#160;<br/>
<b>RequestControlOfOnBoardSystemTestOrComponent ($08) –&#160;Assisted&#160;</b><br/>
The application must&#160;implement only the handling of this service (no request length&#160;<br/>validation when the request data length is a constant value).&#160;<br/>
<b>RequestVehicleInformation ($09) –&#160;Assisted&#160;</b><br/>
The application must&#160;implement only the handling of this service (no request length&#160;<br/>validation).&#160;<br/>
<b>InitiateDiagnosticOperation ($10) –&#160;Assisted&#160;</b><br/>
The application must provide a function that&#160;implements the logic to enable/disable the&#160;<br/>settings of DTCs.&#160;<br/>
<b>ReadFailureRecordData&#160;($12) – Basic&#160;</b><br/>
The application must provide a&#160;function that implements the&#160;request parsing (validation)&#160;<br/>and the logic to report the failure record data.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
10&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=11></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-11_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>ReadDataByIdentifier ($1A) – Complete&#160;</b><br/>
CANdesc completely&#160;implements&#160;this service for DIDs whose&#160;data maps&#160;to global&#160;<br/>variables.&#160;Assisted support is provided for&#160;DIDs whose data&#160;does not map to global&#160;<br/>variables.&#160;<br/>
<b>ReturnToNormalMode ($20) – Complete&#160;</b><br/>
The application must provide&#160;an implementation for the event-based callbacks triggered by&#160;<br/>this service.&#160;<br/>
<b>ReadDataByParameterIdentifier ($22) – Complete&#160;</b><br/>
CANdesc completely&#160;implements&#160;this service for PIDs whose data maps to global&#160;<br/>variables.&#160;Assisted support is provided for PIDs whose data does not map to global&#160;<br/>variables. In&#160;any&#160;case, multiple&#160;PID handling (in a single request) is handled internally by&#160;<br/>CANdesc.&#160;<br/>
<b>ReadMemoryByAddress ($23) – Basic&#160;</b><br/>
The application must provide a&#160;function to determine if the&#160;requested address is valid and&#160;<br/>a function to return the data stored at the requested address.&#160;<br/>
<b>SecurityAccess ($27) – Basic&#160;</b><br/>
The application must provide functions, which&#160;implement the security&#160;access mechanism.&#160;<br/>By utilizing a diagnostic state group, CANdesc&#160;can track the current security level and&#160;<br/>assist the application in determining if&#160;a request is allowed at the given time.&#160;<br/>
<b>DisableNormalCommunication ($28) – Complete&#160;</b><br/>
CANdesc completely implements this service.&#160;<br/>
<b>DynamicallyDefineMessage ($2C) – Complete&#160;</b><br/>
CANdesc completely implements this service.&#160;<br/>
<b>DefinePIDByAddress ($2D) – Complete&#160;</b><br/>
CANdesc completely implements this service.&#160;<br/>
<b>RequestDownload ($34) – Basic&#160;</b><br/>
The application must implement this service.&#160;<br/>
<b>TransferData&#160;($36) – Basic&#160;</b><br/>
The application must implement this service.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
11&#160;/&#160;80<br/>
&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-12_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-12_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>WriteDataByIdentifier ($3B) – Complete&#160;</b><br/>
CANdesc completely&#160;implements&#160;this service for DIDs whose&#160;data maps&#160;to global&#160;<br/>variables.&#160;Assisted support is provided for&#160;DIDs whose data&#160;does not map to global&#160;<br/>variables.&#160;<br/>
<b>TesterPresent ($3E) – Complete&#160;</b><br/>
CANdesc completely implements this service.&#160;<br/>
<b>ReportProgrammedState ($A2) – Complete&#160;</b><br/>
CANdesc completely&#160;implements this service&#160;if the programmed state maps&#160;to a global&#160;<br/>variable.&#160;Assisted support is provided if the programmed state does not map to a global&#160;<br/>variable.<b>&#160;</b><br/>
<b>ProgrammingMode ($A5) –&#160;Assisted &#160;</b><br/>
The application must only provide functions&#160;that implement programming mode requests.&#160;<br/>CANdesc performs state checking internally.&#160;<br/>
<b>ReadDiagnosticInformation ($A9) –&#160;Assisted&#160;</b><br/>
The application must provide&#160;functions that read fault memory and construct the response&#160;<br/>messages byte-by-byte.&#160;The application must provide functions to retrieve the number of&#160;<br/>fault codes and to step through the list of&#160;fault codes matching the requested mask.&#160;<br/>Moreover, it has to detect a change in&#160;the number&#160;of DTCs. CANdesc&#160;handles the&#160;<br/>scheduler internally.&#160;<br/>
<b>ReadDataByPacketIdentifier ($AA) – Complete&#160;</b><br/>
CANdesc completely&#160;implements this service for DPIDs whose data maps to global&#160;<br/>variables.&#160;Assisted support is provided for&#160;DPIDs whose data does&#160;not map to global&#160;<br/>variables.&#160;The scheduler is handled internally by CANdesc.&#160;<br/>
<b>DeviceControl ($AE) –&#160;Assisted&#160;</b><br/>
The application must provide&#160;device-specific functions that implement the control&#160;<br/>algorithms.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Diagnostic&#160;services other than those&#160;listed above&#160;are not supported by CANdesc in any&#160;<br/>
<b>&#160;&#160;</b>way and must be implemented entirely by the ECU developer as a workaround.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
12&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-13_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>5&#160;&#160;Important application requirements&#160;</b><br/>
<b>5.1&#160;</b><br/>
<b>Initialization&#160;</b><br/>
In order to initialize the GM/Opel CANdesc component, the application must call the&#160;<br/>following function:&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>DescInitPowerOn</b>&#160;(DescInitParam initParameter)&#160;<br/>
<b>Parameter&#160;<br/></b>initParameter&#160;<br/>
Initialization parameter&#160;<br/>
(recommended: ‘kDescPowerOnInitParam’)&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
Power-on initialization of the CANdesc component. &#160;<br/>
The application must&#160;call this function once after power-on, before all other CANdesc functions.&#160;<br/>
&#160;<br/>
The GM/Opel&#160;version of CANdesc has&#160;no special behavior for initialization; therefore, the initialization&#160;<br/>function&#160;can&#160;be called with&#160;any parameter value. Even&#160;so, it is recommended that the ECU developer use&#160;<br/>‘kDescPowerOnInitParam’&#160;for the parameter value.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;<b>DescInitPowerOn&#160;(initParameter)&#160;</b>must&#160;be called after&#160;<b>TpInitPowerOn()&#160;</b>(please refer to the&#160;transport&#160;<br/>
protocol documentation) or&#160;any reserved&#160;diagnostic&#160;connection will&#160;be lost.&#160;<br/>
X&#160;&#160;<b>DescInitPowerOn&#160;(initParameter)</b>&#160;calls&#160;<b>DescInit()</b>&#160;internally for further initializations&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level with&#160;global interrupts disabled&#160;&#160;<br/>
Table 5-1&#160;&#160;&#160;DescInitPowerOn&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
13&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=14></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-14_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>DescInit</b>&#160;(DescInitParam initParameter)&#160;<br/>
<b>Parameter&#160;<br/></b>initParameter&#160;<br/>
Initialization parameter&#160;<br/>
(recommended: ‘kDescPowerOnInitParam’)&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
Re-initializes&#160;the CANdesc component.&#160;<br/>
The application can call this&#160;function to re-initialize CANdesc (e.g. after wakeup).&#160;All internal states will be&#160;<br/>set to their default values.&#160;<br/>
&#160;<br/>
The GM/Opel&#160;version of CANdesc has&#160;no special behavior for initialization; therefore, the initialization&#160;<br/>function&#160;can&#160;be called with&#160;any parameter value. Even&#160;so, it is recommended that the ECU developer use&#160;<br/>‘kDescPowerOnInitParam’&#160;for the parameter value.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;The application has already initialized CANdesc once&#160;by calling&#160;<b>DescInitPowerOn()</b>&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level with&#160;global interrupts disabled&#160;<br/>
Table 5-2&#160;&#160;&#160;DescInit&#160;<br/>
<b>5.2&#160;</b><br/>
<b>DeviceControl ($AE) service requirement&#160;</b><br/>
The GM/Opel diagnostic specification requires that device control activity shall be limited&#160;<br/>by tester present timeout. &#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">Please refer to the section&#160;<i>Service DeviceControl ($AE)</i></a>&#160;for&#160;more&#160;details.&#160;<br/>
<b>5.3&#160;</b><br/>
<b>Update from earlier versions&#160;</b><br/>
The behavior of the CANdesc embedded module has not changed fundamentally&#160;in&#160;<br/>CANdesc version 6.x, but the&#160;configuration is&#160;much more&#160;independent from the CDD&#160;<br/>settings. Many options that were previously&#160;only configurable as attributes in the CDD file&#160;<br/>are now available for configuration&#160;in the GENy configuration tool.&#160;<br/>As part of this change, the&#160;naming scheme for service callbacks is now more independent&#160;<br/>from the CDD contents and&#160;more adherent to&#160;the&#160;GMW3110 specification.&#160;This will require&#160;<br/>modification of existing application code to fit the new naming scheme.&#160;<br/>In addition,&#160;the implementation of mode&#160;$A5 was changed to use the standard CANdesc&#160;<br/>state management feature.&#160;You can now easily have service execution depend&#160;on the&#160;<br/>reprogramming sequence, e.g.&#160;prevent a service from executing while programming mode&#160;<br/>is active. Please also&#160;refer to chapter&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#50"><i>7.11&#160;-&#160;Service ProgrammingMode ($A5)</i>&#160;for more</a>&#160;<br/>information.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
14&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-15_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>6&#160;&#160;GM/Opel specific functionality&#160;&#160;</b><br/>
<b>6.1&#160;</b><br/>
<b>ECU Address configuration&#160;</b><br/>
GM/Opel use extended addressing for the&#160;functional request message. By default,&#160;<br/>CANdesc will accept&#160;any request with target address 0xFE.&#160;There are some other use&#160;<br/>cases that are considered to be&#160;supported with the help of user configuration files (refer&#160;<br/>the “<i>TechnicalReference_CANdesc.pdf</i>” for configuration details).&#160;<br/>
<b>6.1.1&#160;&#160;Gateway&#160;ECUs&#160;<br/></b>According to&#160;the GMW3110 v1.6, gateways shall be accessible also via the special target&#160;<br/>address 0xFD.&#160;To&#160;enable the reception on this&#160;address, please insert into your user&#160;<br/>configuration file for CANdesc the following definition:&#160;<br/>#define&#160;DESC_ENABLE_GW_ECU_ADDR&#160;&#160;<br/>
<b>6.1.2&#160;&#160;Virtual network&#160;management&#160;<br/></b>A&#160;GMLAN/IVLAN specific implementation is&#160;built into CANdesc, which completely&#160;<br/>integrates CANdesc into a GM/Opel project. CANdesc manages all aspects of the&#160;<br/>diagnostics&#160;VN, including activation of the&#160;VN in the GMLAN handler and then deactivation&#160;<br/>of the VN after diagnostic inactivity (e.g. missing tester) as described in GMW-3110. &#160;<br/>When the first diagnostic request is received, CANdesc will activate&#160;the diagnostics VN to&#160;<br/>provide communication capability&#160;with the tester.&#160;The VN is then automatically deactivated&#160;<br/>under the following conditions:&#160;<br/>
X<b>&#160;&#160;</b>8 seconds after the diagnostic request “ReturnToNormalMode” ($20) is received&#160;<br/>
X<b>&#160;&#160;</b>8 seconds after the tester present timeout&#160;<br/>
X<b>&#160;&#160;</b>8 seconds after the last response is sent, or&#160;in the case of requests that do not send a&#160;<br/>
response, 8 seconds after the request is completely processed&#160;<br/>
<b>6.1.3&#160;&#160;Diagnostic activity&#160;notification&#160;<br/></b>CANdesc notifies the application via a callback function when a diagnostic session begins&#160;<br/>(the first diagnostic request) and&#160;when it ends (the deactivation conditions&#160;listed above).&#160;<br/>These callbacks are listed below.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
15&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-16_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescOnDiagActive</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
When&#160;the first diagnostic request (after&#160;ECU power-on or wakeup) is received, regardless&#160;of the addressing&#160;<br/>method, CANdesc calls this&#160;function&#160;to notify the application that ECU diagnostics&#160;are now active (so that&#160;<br/>the application can begin diagnostic&#160;specific tasks, for instance).&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;None&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Interrupt context, if the CAN-driver&#160;is configured&#160;to handle receive messages&#160;in interrupt mode&#160;&#160;<br/>
X&#160;&#160;Background-loop level task context, if the CAN-driver&#160;is configured&#160;to handle&#160;receive messages in&#160;<br/>
polling mode&#160;<br/>
Table 6-1&#160;&#160;&#160;ApplDescOnDiagActive&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescOnDiagInactive</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
Once the conditions for deactivating the&#160;diagnostics&#160;VN are met (i.e. the diagnostics VN timer reaches&#160;<br/>zero), CANdesc&#160;calls this function&#160;to notify the application that ECU diagnostics are no longer&#160;active (so&#160;<br/>that the application&#160;can end&#160;diagnostic specific&#160;tasks to lower CPU utilization, for instance).&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;None&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context of&#160;<b>DescTimerTask()</b>.&#160;<br/>
Table 6-2&#160;&#160;&#160;ApplDescOnDiagInactive&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
16&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=17></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-17_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>6.2&#160;</b><br/>
<b>Request validation&#160;</b><br/>
The GM/Opel version of CANdesc is capable of&#160;performing the following request&#160;<br/>validations:&#160;<br/>
X<b>&#160;&#160;</b>Is the designed diagnostic buffer big enough to&#160;hold the whole request? If the request is&#160;<br/>
physically addressed, the GM/Opel CANdesc implementation will accept it even if the&#160;<br/>length is greater than the defined buffer and let the “request&#160;length validation” routine&#160;<br/>handle the situation. If the request is functionally addressed and the length is greater&#160;<br/>than the defined buffer,&#160;it will be ignored (regardless of whether it would normally send a&#160;<br/>response). &#160;<br/>
X<b>&#160;&#160;</b>Is the requested SID supported? If the SID is not relevant for the ECU, CANdesc will&#160;<br/>
automatically send a negative response with&#160;error code “ServiceNotSupported” ($11).&#160;<br/>Further processing will be aborted.&#160;<br/>
X<b>&#160;&#160;</b>Is the request addressing method for the&#160;SID correct?&#160;Two cases are possible:&#160;<br/>
X<b>&#160;&#160;</b>The requested SID normally provides a response (as defined in CANdelaStudio). In&#160;<br/>
this case, CANdesc will send a negative response with error code&#160;<br/>“ConditionsNotCorrect” ($22). Further processing will be aborted.&#160;<br/>
X<b>&#160;&#160;</b>The requested SID normally does not provide a response (as defined in&#160;<br/>
CANdelaStudio). In this case, the request will be ignored.&#160;<br/>
X<b>&#160;&#160;</b>Does the request meet the minimum required&#160;length (to be distinguishable from other&#160;<br/>
instances)? Each request is formatted as shown in the figure below:&#160;<br/>
&#160;<br/>
&#160;&#160;1Byt&#160;N Bytes (N&#160;= 0..n)<br/>
L&#160;Bytes&#160;(L&#160;=&#160;0..l)&#160;<br/>
SID&#160;<br/>
SID_EXT&#160;<br/>
Application data<br/>
Service&#160;instance&#160;qualification&#160;<br/>“Service&#160;head”&#160;<br/>
&#160;<br/>
Figure 6-1&#160;Request message logical format&#160;<br/>
X<b>&#160;&#160;</b>In order to process the request further,&#160;the service instance must be found (which&#160;<br/>
provides more detailed information about the request than the SID alone); therefore,&#160;<br/>the request must be at least n + 1 bytes&#160;in length, where n is service dependent.&#160;<br/>
X<b>&#160;&#160;</b>If the length is less than the minimum allowed (as defined in CANdelaStudio),&#160;<br/>
CANdesc will send a negative response with error code&#160;<br/>“SubfunctionNotSupportedInvalidFormat” ($12). Further processing will be aborted.&#160;<br/>
X<b>&#160;&#160;</b>Is the requested service instance supported&#160;by the ECU? If not, CANdesc will send a&#160;<br/>
negative response with error code “SubfunctionNotSupportedInvalidFormat” ($12).&#160;<br/>Further processing will be aborted.&#160;<br/>
X<b>&#160;&#160;</b>Is the total request length correct?&#160;Two cases are possible:&#160;<br/>
X<b>&#160;&#160;</b>The request length is dynamic. In this case, no automated check can be performed,&#160;<br/>
and the task will be left&#160;to the application.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
17&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=18></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-18_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-18_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-18_3.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
X<b>&#160;&#160;</b>The request length is fixed. In this case,&#160;CANdesc will check if the current request&#160;<br/>
length matches the expected length (as&#160;defined in CANdelaStudio). If not, a&#160;<br/>negative response with error code “SubfunctionNotSupportedInvalidFormat” ($12)&#160;<br/>will be sent. Further processing will be aborted.&#160;<br/>
X<b>&#160;&#160;</b>Does the requested service instance have&#160;a defined pre-handler function (please refer&#160;<br/>
to the user manual CANdesc document “UserManual_CANdesc” for more details about&#160;<br/>pre-handlers)? If so, it will be&#160;called.&#160;This allows the application to extend the built-in&#160;<br/>validation with additional custom checks.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>If the request passes all&#160;of the above validation checks, the&#160;main-handler is called&#160;<br/>
&#160;&#160;(please refer to the user&#160;manual CANdesc for more details about main-handlers) for&#160;<br/>
further processing.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>6.3&#160;</b><br/>
<b>Timeout events&#160;</b><br/>
<b>6.3.1&#160;&#160;Tester present timeout&#160;<br/></b>Once the tester present timer has been activated, the tester must send the diagnostic&#160;<br/>service “Tester Present” ($3E) periodically&#160;in order to keep the timer running.&#160;<br/>In case of a timeout, the&#160;diagnostic state will be initialized exactly the same as&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#31"><i>Service&#160;<br/>ReturnToNormalMode ($20)</i></a>. &#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>CANdesc will automatically send an&#160;unsolicited&#160;positive response for the&#160;<br/>
&#160;&#160;“ReturnToNormalMode” ($20) diagnostic service&#160;(see sectio<a href="TechnicalReference_CANdesc_KWP_GMs.html#20">n&#160;<i>6.5</i></a>&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#20"><i>Sending an&#160;</i></a><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#20"><i>unsolicited single frame response</i></a>).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>6.4&#160;</b><br/>
<b>Using the extended negative response&#160;</b><br/>
The GM/Opel version of CANdesc supports&#160;the extended negative response format to&#160;<br/>specify service faults more precisely.&#160;This response has the following format:&#160;<br/>
<b>$7F $AE $E3 $xx $yy (DeviceControlLimitsExceeded)</b>&#160;<br/>
where $xx and $yy are the extended failure codes (as defined in an ECU specific&#160;<br/>diagnostic specification).&#160;<br/>There are two possible ways to&#160;send an extended negative response:&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
18&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-19_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>6.4.1&#160;&#160;Sending an extended negative response during service processing&#160;<br/></b>If the application is currently processing&#160;a request which requires an extended negative&#160;<br/>response, the standard function&#160;<b>DescSetNegResponse(errorCode)</b>&#160;(please refer to the&#160;<br/>general technical reference document “TechnicalReference_CANdesc” for more details)&#160;<br/>cannot be used. Instead, the&#160;following function is defined:&#160;<br/>
<b>Prototype&#160;</b><br/>
Single Context&#160;<br/>void&#160;<b>DescSetExtNegResponse&#160;</b>(DescNegResCode errorCode, &#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; DescExtNegResCode &#160;extErrorCode)&#160;<br/>
Multi Context&#160;<br/>void&#160;<b>DescSetExtNegResponse&#160;</b>(vuint8 iContext, &#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; DescNegResCode errorCode, &#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; DescExtNegResCode &#160;extErrorCode)&#160;<br/>
<b>Parameter&#160;<br/></b>iContext&#160;<br/>
Reference to the corresponding request context&#160;<br/>
errorCode&#160;<br/>
One of the error&#160;code constants&#160;defined&#160;by CANdesc (located in the&#160;<br/>generated desc.h file) with&#160;the following naming&#160;convention:&#160;<br/>
<b>kDescNrc&lt;error name&gt;</b>.&#160;<br/>
Normally, only error&#160;code&#160;0xE3 is used.&#160;<br/>
extErrorCode&#160;<br/>
A&#160;two byte value which is&#160;ECU/use-case dependent&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
In the pre-handler or&#160;main-handler&#160;callback, the&#160;application&#160;can&#160;call&#160;this function&#160;to send an&#160;extended&#160;<br/>negative response.&#160;<br/>
Normally, this extended negative response is only useful for service&#160;$AE, but the&#160;function may&#160;be used for&#160;<br/>any currently active service (prior to calling&#160;<b>DescProcessingDone()</b>).&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;The application must already have initialized&#160;CANdesc by calling&#160;<b>DescInitPowerOn()</b>&#160;<br/>
X&#160;&#160;The define DESC_ENABLE_EXT_NEG_RES_CODE_HANDLING&#160;must exist in the generated&#160;code&#160;<br/>
X&#160;&#160;Once an error code has been set it cannot be overwritten or reset. &#160;<br/>
X&#160;&#160;This function&#160;does not finish the processing of the request.&#160;The application must&#160;confirm that the&#160;<br/>
request processing is&#160;completely finished&#160;by calling&#160;<b>DescProcessingDone()</b>.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Within a service pre-handler&#160;callback and&#160;within or&#160;after a service main-handler&#160;callback&#160;<br/>
Table 6-3&#160;&#160;&#160;DescSetExtNegResponse&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
19&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-20_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-20_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>6.4.2&#160;&#160;Sending an unsolicited extended negative response&#160;<br/></b>If the application is&#160;not currently processing&#160;a request but an extended negative response&#160;<br/>must be sent, the function above cannot be used. Instead, a generic&#160;API for transmitting&#160;<br/>an unsolicited response can be used. In this&#160;case, the application must compose the&#160;<br/>response message on its own.&#160;The following is&#160;an example using the format description&#160;<br/>from the beginning&#160;of section 6.4:&#160;<br/>
&#160;<br/>
Figure 6-2&#160;&#160;Example code for transmitting an&#160;unsolicited response&#160;<br/>
<b>6.5&#160;</b><br/>
<b>Sending an unsolicited single frame response&#160;</b><br/>
If service “DeviceControl” ($AE) has been&#160;activated and the application detects that&#160;<br/>conditions&#160;have changed detrimentally (e.g. they are “out of limits”) since service&#160;<br/>activation, GM/Opel requires that an unsolicited extended negative response shall be sent&#160;<br/>by the ECU.&#160;To&#160;accomplish this, the following&#160;API is provided which allows the ECU&#160;<br/>developer to send any single frame message using the physically addressed diagnostic&#160;<br/>response CAN ID.&#160;This&#160;API is not just a simple “re-transmitter”, calling the&#160;TP&#160;with the&#160;<br/>application data, but it also synchronizes the request&#160;with the current CANdesc&#160;<br/>reception/transmission state machine:&#160;<br/>
X<b>&#160;&#160;</b>If CANdesc is currently receiving a&#160;request, the unsolicited response will be delayed&#160;<br/>
until the reception finishes (either with success or failure).&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
20&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-21_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
X<b>&#160;&#160;</b>If CANdesc is currently transmitting a response, the unsolicited response will be delay&#160;<br/>
until the transmission finishes (either with success or failure).&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#21">See&#160;Table 6-4 &#160;DescTransmitSingleFrame for the&#160;</a>API description.&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>DescTransmitSingleFrame</b>(DescMsg resData, vuint8 resLen)&#160;<br/>
<b>Parameter&#160;<br/></b>resData&#160;<br/>
Pointer to the&#160;application data&#160;<br/>
resLen&#160;<br/>
The length of&#160;the data (in bytes) to be sent&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;is called by CANdesc to&#160;send the unsolicited positive response on&#160;a tester present timeout or&#160;<br/>by the application to send&#160;an unsolicited&#160;extended negative response.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;The application must already have initialized&#160;CANdesc by calling&#160;<b>DescInitPowerOn().</b>&#160;<br/>
X&#160;&#160;The data pointed to by&#160;resData&#160;is not cached (copied to another buffer) by CANdesc, so the&#160;ECU&#160;<br/>
developer&#160;should be&#160;careful not to use&#160;automatic&#160;variable references (non-static function local&#160;<br/>variables).&#160;<br/>
X&#160;&#160;The length of the data may&#160;not exceed&#160;the transport&#160;layer single frame length (seven bytes in the case&#160;<br/>
of normal addressing and six bytes in the case of extended addressing).&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context&#160;<br/>
Table 6-4&#160;&#160;&#160;DescTransmitSingleFrame&#160;<br/>
<b>6.6&#160;</b><br/>
<b>GM/Opel CANdesc state machine access&#160;</b><br/>
The states&#160;relevant to&#160;the programming&#160;sequence are modeled as a normal CANdesc&#160;<br/>state group.&#160;This also enables all the usual&#160;state group related callbacks and functions for&#160;<br/>transition notification, access to&#160;the current state, and a function to modify the current&#160;<br/>state. For naming convention and an&#160;API description, please refer to&#160;the general CANdesc&#160;<br/>technical reference.&#160;<br/>The state group and its states’&#160;names have&#160;been fixed to provide a consistent&#160;API&#160;<br/>independent from the configuration. Normally the names would depend on the settings&#160;in&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#75">the CDD file. Please refer to&#160;<i>Table 8-4 &#160;Programming&#160;&#160;Sequence state group</i>&#160;for the exact&#160;<br/></a>names.&#160;<br/>For compatibility reasons CANdesc still provides the&#160;API described in this chapter although&#160;<br/>they be replaced by the state machine&#160;API.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
21&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-22_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>6.6.1&#160;&#160;Normal communication state&#160;<br/></b>&#160;<br/>
<b>Prototype&#160;<br/></b>vuint8&#160;<b>DescGetCommState</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;<br/></b>kDescCommDisabled&#160;<br/>
Normal message transmission is&#160;deactivated&#160;<br/>
kDescCommEnabled&#160;<br/>
Normal message transmission is&#160;activated&#160;<br/>
<b>Functional Description&#160;</b><br/>
The application can call this&#160;function&#160;at any time to obtain the current transmission state.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;The application must already have initialized&#160;CANdesc by calling&#160;<b>DescInitPowerOn()</b>.&#160;<br/>
X&#160;&#160;The same information can be retrieved using&#160;<b>DescGetStateProgrammingMode&#160;()</b>.&#160;<br/>
X&#160;&#160;State information updates&#160;<b>after</b>&#160;any post handler&#160;of mode $28.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Any&#160;<br/>
Table 6-5&#160;&#160;&#160;DescGetCommState&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
22&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-23_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>6.6.2&#160;&#160;Programming mode state&#160;<br/></b>&#160;<br/>
<b>Prototype&#160;<br/></b>vuint8&#160;<b>DescGetProgMode</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;<br/></b>-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;<br/></b>kDescProgModeIdle&#160;<br/>
No enter&#160;programming&#160;mode&#160;request up to&#160;now&#160;<br/>
kDescProgModeAccepted&#160;&#160;Enter programming mode&#160;accepted&#160;(but&#160;not active yet)&#160;<br/>kDescProgModeActive&#160;<br/>
Enter programming mode sequence&#160;complete&#160;<br/>
<b>Functional Description&#160;</b><br/>
The application can call this&#160;function&#160;at any time to&#160;read the “enter&#160;programming&#160;mode”&#160;sequence&#160;state.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;The application must already have initialized&#160;CANdesc by calling&#160;<b>DescInitPowerOn()</b>.&#160;<br/>
X&#160;&#160;The same information can be retrieved using&#160;<b>DescGetStateProgrammingMode&#160;().</b>&#160;<br/>
X&#160;&#160;State information updates&#160;<b>after</b>&#160;any post handler&#160;of mode $A5.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Any&#160;<br/>
Table 6-6&#160;&#160;&#160;DescGetProgMode&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
23&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=24></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-24_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>6.6.3&#160;&#160;High speed programming mode state&#160;<br/></b>&#160;<br/>
<b>Prototype&#160;</b><br/>
Single channel&#160;<br/>vuint8&#160;<b>DescGetHiSpeedMode</b>&#160;(void)&#160;<br/>
Multiple channel&#160;<br/>
<b>vuint8 DescGetHiSpeedMode (</b>vuint8 commChannel<b>)</b>&#160;<br/>
<b>Parameter&#160;</b><br/>
c<b>ommChannel&#160;</b><br/>
Communication channel on which CANdesc is&#160;running&#160;<br/>
<b>Return code&#160;<br/></b>kDescHiSpeedModeIdle&#160;<br/>
No enter&#160;programming&#160;mode&#160;request up to&#160;now.&#160;<br/>
kDescHiSpeedModeAccepted&#160;&#160;Enter high&#160;speed programming mode&#160;accepted (but not active yet)&#160;<br/>kDescHiSpeedModeActive&#160;<br/>
Enter high&#160;speed programming mode sequence complete&#160;<br/>
<b>Functional Description&#160;</b><br/>
This function&#160;can be&#160;called&#160;by the application at any time to see if the programming mode&#160;requires&#160;a switch&#160;<br/>to high speed&#160;mode. &#160;<br/>
If the define DESC_ENABLE_FLASHABLE_ECU exists&#160;in&#160;the generated&#160;code, then the application&#160;should&#160;<br/>call this&#160;function within the&#160;callback<a href="TechnicalReference_CANdesc_KWP_GMs.html#51">&#160;<i>ApplDescOnEnterProgMode</i></a>&#160;to decide whether to switch into high&#160;<br/>speed mode.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;The result is&#160;only valid for the channel on which CANdesc is&#160;running.&#160;<br/>
X&#160;&#160;The application has already initialized CANdesc once&#160;by calling&#160;<b>DescInitPowerOn().</b>&#160;<br/>
X&#160;&#160;The define DESC_ENABLE_REQ_HISPEED_PROG must exist in&#160;the generated code (if the ECU must&#160;<br/>
support service $A5 $02).&#160;<br/>
X&#160;&#160;Idle&#160;and&#160;Accepted&#160;can&#160;be retrieved using&#160;<b>DescGetStateProgrammingMode&#160;()</b>&#160;<br/>
X&#160;&#160;Active&#160;can&#160;be queried using IlNwmGetState()&#160;<br/>
X&#160;&#160;State information updates&#160;after any post&#160;handler&#160;of mode $A5.&#160;<br/>&#160;<br/>Call context&#160;<br/>
X&#160;&#160;Any&#160;<br/>
Table 6-7&#160;&#160;&#160;DescGetHiSpeedMode&#160;<br/>
&#160;<br/>
<b>6.7&#160;</b><br/>
<b>The PacketHandler (another type of service processor)&#160;</b><br/>
A&#160;main-handler is the typical callback function for request processing (please refer to the&#160;<br/>general technical reference document “TechnicalReference_CANdesc” for more details).&#160;<br/>For the GM/Opel version of CANdesc, a diff<a href="TechnicalReference_CANdesc_KWP_GMs.html#66">erent type of service processor for&#160;<i>Service&#160;<br/>ReadDataByPacketIdentifier ($AA)</i>&#160;is necessary – the PacketHandler</a>.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
24&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=25></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-25_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
A&#160;PacketHandler is a very simple callback that has only&#160;one&#160;task – to query the application&#160;<br/>data and place it into the correct position of the response&#160;data buffer.&#160;The application may&#160;<br/>not use the negative response&#160;API with a PackedHandler.&#160;The&#160;API works asynchrounously,&#160;<br/>to allow moving time-consuming operations to different task contexts.&#160;<br/>.&#160;<br/>
<b>6.7.1&#160;&#160;PacketHandler API&#160;<br/></b>&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescReadPack&lt;Instance-Qualifier&gt;</b>&#160;(DescMsg pMsg)&#160;<br/>
<b>Parameter&#160;<br/></b>pMsg&#160;<br/>
A&#160;pointer to a&#160;buffer where&#160;the application must copy its data&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
CANdesc calls this function&#160;to query the application for the response data related&#160;to &lt;Instance-Qualifier&gt;.&#160;<br/>The application can provide the data within this function,&#160;or it can exit the function and provide&#160;it later on&#160;<br/>the task level. When the data is ready, the application&#160;must call&#160;<b>DescDataPacketProcessingDone()</b>.&#160;<br/>
Once the application&#160;calls&#160;<b>DescDataPacketProcessingDone()</b>, the PacketHandler assembles the data to&#160;<br/>be sent with the response (the response&#160;length is predefined in CANdelaStudio&#160;by the DPID data structure&#160;<br/>definition).&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;The application may not call&#160;<b>DescProcessingDone()</b>.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level context of DescStateTask().&#160;<br/>
Table 6-8&#160;&#160;&#160;PacketHandler&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
25&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=26></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-26_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>DescDataPacketProcessingDone&#160;</b>(DescDataPacketProcessStatus status)&#160;<br/>
<b>Parameter&#160;</b><br/>
status&#160;<br/>
Valid values:&#160;<br/>
X&#160;&#160;kDescDataPacketOk&#160;– if&#160;the application copied the&#160;data successfully&#160;<br/>
X&#160;&#160;kDescDataPacketFailedSendDummy&#160;– if the application encountered&#160;<br/>
an error while obtaining the requested data. CANdesc&#160;will transmit the&#160;<br/>UUDT&#160;response, but it will contain only the message&#160;padding&#160;pattern and&#160;<br/>no actual data.&#160;<br/>
X&#160;&#160;kDescDataPacketFailedDoNotSend&#160;- if the application encountered&#160;<br/>
an error while obtaining the requested data. No UUDT&#160;response will&#160;be&#160;<br/>sent.&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
The application must&#160;call this function when it has finished&#160;the&#160;<b>ApplDescReadPack&lt;Instance-Qualifier&gt;&#160;<br/>(DescMsg pMsg)</b>&#160;request.&#160;<br/>
This function&#160;allows the ECU developer to&#160;have a very slow PacketHandler&#160;(e.g. read data&#160;from&#160;another&#160;<br/>CPU).&#160;<br/>
The CANdesc scheduler&#160;can process only one DPID at&#160;a time, so once the data&#160;has been copied to the&#160;<br/>pMsg buffer the application should call this function immediately to avoid long&#160;scheduler delays (time jitter&#160;<br/>from the configured scheduler rates).&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;CANdesc must have previously&#160;called a&#160;PacketHandler callback&#160;<b>ApplDescReadPack&lt;Instance-</b><br/>
<b>Qualifier&gt;&#160;(DescMsg pMsg)</b>.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level context of DescStateTask().&#160;<br/>
Table 6-9&#160;&#160;&#160;DescDataPacketProcessingDone&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
26&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-27_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>sd&#160;PacketHandler&#160;for&#160;CANdesc 4.xx</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$AA&#160;$01 [DPID]<br/>
ApplDescReadPack&lt;Instance-Qualifier&gt;&#160;(pMessage)<br/>
[UUDT] [DPID] [pMsg]<br/>
[status&#160;==&#160;kDescDataPacketOk&#160;]:&#160;DescDataPacketProcessingDone&#160;(status&#160;)<br/>
&#160;<br/>
Figure 6-3&#160;&#160;Asynchronous PacketHandler&#160;for&#160;current CANdesc versions&#160;<br/>
&#160;<br/>
<b>sd&#160;PacketHandler&#160;for&#160;CANdesc&#160;4.xx ($78)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$AA&#160;$01 [DPID]<br/>
ApplDescReadPack&lt;Instance-Qualifier&gt;&#160;(pMessage)<br/>
[ResponsePending&#160;time =&#160;P2]:&#160;[USDT]&#160;$7F&#160;$AA&#160;$78<br/>
[status&#160;==&#160;kDescDataPacketOk&#160;]:&#160;DescDataPacketProcessingDone&#160;(status&#160;)<br/>
[UUDT] [DPID] [pMsg]<br/>
&#160;<br/>
Figure 6-4&#160;&#160;Asynchronous PacketHandler&#160;with&#160;delayed processing of the first data packet &#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
27&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-28_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>sd&#160;PacketHandler&#160;for&#160;CANdesc&#160;4.xx (Dummy)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT]&#160;$AA&#160;$01 [DPID]<br/>
ApplDescReadPack&lt;Instance-Qualifier&gt;&#160;(pMessage)<br/>
[status==kDescDataPacketFailedSendDummy]:&#160;DescDataPacketProcessingDone (status&#160;)<br/>
[UUDT]&#160;[DPID]&#160;00 00 00 00&#160;00 00&#160;00<br/>
&#160;<br/>
Figure 6-5&#160;&#160;Asynchronous PacketHandler&#160;with&#160;dummy&#160;response,&#160;due to an application error&#160;while obtaining response data &#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
28&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-29_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-29_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7&#160;&#160;GM/Opel service implementations&#160;</b><br/>
<b>7.1&#160;</b><br/>
<b>Service InitiateDiagnosticOperation ($10)&#160;</b><br/>
CANdesc implements a special handling of the following sub-functions of this service:&#160;<br/>
X<b>&#160;&#160;</b>“DisableAllDtcs” (sub-function $02)&#160;<br/>
X<b>&#160;&#160;</b>“EnableDtcsDuringDeviceControl” (sub-function $03)&#160;<br/>
WakeUpLinks (sub-function $04) can be implemented using standard main- and post-<br/>handlers.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The actual implementation of these&#160;services is&#160;still left to the&#160;application,&#160;controlled by&#160;<br/>
&#160;&#160;the callbacks mentioned below. CANdesc only manages the internal states&#160;and&#160;<br/>
performs service validation.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>7.1.1&#160;&#160;Service DisableAllDTCs ($10 $02)&#160;<br/></b>&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescOnDisableAllDtc</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
Once the service $10 $02&#160;execution has completed&#160;with&#160;success,&#160;CANdesc calls this function to notify the&#160;<br/>application about the new state of the diagnostics module.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;In this callback the application must implement the actual disabling of DTCs.&#160;<br/>
X&#160;&#160;Also&#160;refer to&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#32"><i>ApplDescOnReturnToNormalMode</i>&#160;in o</a>rder to re-enable DTCs.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context of DescStateTask()&#160;<br/>
Table 7-1&#160;&#160;&#160;ApplDescOnDisableAllDtc&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
29&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-30_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-30_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.1.2&#160;&#160;Service EnableDTCsDuringDeviceControl ($10 $03)&#160;<br/></b>&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescOnEnableDtcsChangeDuringDevCntrl</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
Once the service $10 $03&#160;execution has completed&#160;with&#160;success,&#160;CANdesc calls this function to notify the&#160;<br/>application about the new state of the diagnostics module.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;In this callback, the application must&#160;enable DTCs during device control.&#160;<br/>
X&#160;&#160;Also&#160;refer to&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#32"><i>ApplDescOnReturnToNormalMode.</i></a>&#160;<br/>
Call context&#160;<br/>
<b>&gt;&#160;&#160;</b>Background-loop level task context of DescStateTask().&#160;<br/>
Table 7-2&#160;&#160;&#160;ApplDescOnEnableDtcChangeDuringDevCntrl&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>CANdesc activates the tester present timer for both service instances above.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>7.2&#160;</b><br/>
<b>Service ReadFailureRecordData ($12)&#160;</b><br/>
CANdesc does not offer any special support for this service, but since the definition of the&#160;<br/>service is not compatible with&#160;the dispatching ability of CANdesc,&#160;there are limitations on&#160;<br/>the application design:&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
30&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-31_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-31_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.2.1&#160;&#160;Service ReadFailureRecordIdentifiers ($12 $01)&#160;<br/>Request&#160;<br/></b>CANdesc fully dispatches the diagnostic request; the application does not have to perform&#160;<br/>validation.&#160;<br/><b>Response&#160;<br/></b>Depending on the report type requested (PID or DPID), the application must place one of&#160;<br/>the following values into&#160;the first&#160;data&#160;byte of the response message:&#160;<br/>
X<b>&#160;&#160;</b>0x00 - for report by PID&#160;<br/>
X<b>&#160;&#160;</b>0x01 - for report by DPID&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The ECU can support either reports&#160;by PID or DPID, but not both.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>7.2.2&#160;&#160;Service ReadFailureRecordParameters ($12 $02)&#160;<br/>Request&#160;<br/></b>The diagnostic request $12 $02 uses a PID parameter,&#160;which is not automatically&#160;<br/>dispatched by CANdesc.&#160;As a result, CANdesc generates only one function callback&#160;<br/>(main-handler) for all service $12 $02 requests.&#160;The application must validate the PID&#160;<br/>parameter,&#160;check the request length,&#160;and then process the PID accordingly.&#160;<br/><b>Response&#160;<br/></b>CANdesc does not automatically include the&#160;PID parameter in the response message for&#160;<br/>service $12 $02.&#160;The application must perform this task.&#160;<br/>
<b>7.3&#160;</b><br/>
<b>Service ReturnToNormalMode ($20)&#160;</b><br/>
CANdesc completely&#160;handles this service&#160;and performs the following actions after a&#160;<br/>positive response has been sent (or after finishing service execution when the request&#160;<br/>does not require a response):&#160;<br/>
X<b>&#160;&#160;</b>The tester present timer will be deactivated.&#160;<br/>
X<b>&#160;&#160;</b>If communication was disabled, it will be re-enabled. CANdesc will notify the application&#160;<br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#34">via the callback function&#160;<i>ApplDescOnEnableNormalComm</i></a>.&#160;<br/>
X<b>&#160;&#160;</b>The network management timer&#160;will be started by a new request (timeout: 8 seconds).&#160;<br/>
X<b>&#160;&#160;</b><a href="TechnicalReference_CANdesc_KWP_GMs.html#62">If the service&#160;<i>SendOnChangeDTCCount ($A9 $82)</i>&#160;was active, CANdesc will notify the&#160;</a><br/>
application to deactivate it by calling the function&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#65"><i>ApplDescDisableOnChangeDtcCount</i>.&#160;</a><br/>
X<b>&#160;&#160;</b>The scheduling mechanism for the&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#66"><i>Service ReadDataByPacketIdentifier ($AA)</i></a>&#160;will be&#160;<br/>
deactivated,&#160;and the scheduler lists&#160;will be cleared.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
31&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-32_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
CANdesc also notifies the application of the return to normal mode event via the function&#160;<br/>call&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#32"><i>ApplDescOnReturnToNormalMode</i></a>:&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescOnReturnToNormalMode</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
CANdesc calls this function&#160;on completion&#160;of service&#160;$20 processing (after the&#160;response has been sent, if&#160;<br/>applicable)&#160;or a tester present timeout.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;None&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context of DescStateTask().&#160;<br/>
Table 7-3&#160;&#160;&#160;ApplDescOnReturnToNormalMode&#160;<br/>
<b>7.4&#160;</b><br/>
<b>Service ReadDataByParameterIdentifier ($22)&#160;</b><br/>
The description for this service is located&#160;in the general technical reference document&#160;<br/>“TechnicalReference_CANdesc”. Detailed below&#160;are only the deviations and behavior not&#160;<br/>defined in the general technical reference.&#160;<br/>
<b>7.4.1&#160;&#160;Reading a dynamically&#160;defined&#160;PID (Parameter Identifier)&#160;<br/></b>Some PIDs are statically defined in CANdelaStudio (i.e. their data structure is predefined&#160;<br/>at compile time); however, others can only be&#160;defined at runtime using a special service&#160;<br/>request (see&#160;<i>&#160;<br/>Service DefinePIDByAddress&#160;</i>($2D). These&#160;dynamically&#160;definable PIDs&#160;have no data&#160;<br/>definitions at power-on,&#160;so if the tester tries to read them&#160;the result is undefined (according&#160;<br/>to GMW-3110 version 1.6). In this situation,&#160;CANdesc sends a positive response with no&#160;<br/>actual data (only the response service ID&#160;($62) and the PID number&#160;from the request). &#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#44">Please refer to the sequence in&#160;<i>Figure 7-9&#160;The dynamically definable PID is not defined.</i></a>&#160;<br/>
<b>7.5&#160;</b><br/>
<b>Service SecurityAccess ($27)&#160;</b><br/>
In general,&#160;the application shall implement&#160;this&#160;service by itself, but CANdesc already&#160;<br/>handles some of the tasks regarding this implementation. In&#160;the following, you will learn&#160;<br/>about what&#160;already has been done for you by&#160;CANdesc&#160;and about&#160;the remained parts to&#160;<br/>be implemented by your application.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
32&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=33></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-33_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>CANdesc tasks:&#160;</b><br/>
X<b>&#160;&#160;</b>Service format verification.&#160;<br/>
This step includes: request length&#160;and supported sub-service checks.&#160;<br/>
X<b>&#160;&#160;</b>Sub-service execution&#160;preconditions specified in the CDD file.&#160;<br/>
X<b>&#160;&#160;</b>SecurityAccess state change&#160;<br/>
according to the CDD file on positive&#160;response for “send-key” service(s).&#160;<br/>
<b>Application tasks:&#160;</b><br/>
X<b>&#160;&#160;</b>Additional preconditions checks (pre-handling).&#160;<br/>
X<b>&#160;&#160;</b>Seed-key sequence verification.&#160;<br/>
X<b>&#160;&#160;</b>Timeout monitoring for next seed retry.&#160;<br/>
X<b>&#160;&#160;</b>MEC and vulnerability flag implementation (if applicable).&#160;<br/>
X<b>&#160;&#160;</b>Seed generation.&#160;<br/>
X<b>&#160;&#160;</b>Key computation and verification upon requested key.&#160;<br/>
X<b>&#160;&#160;</b>In case of valid keys, starting of the&#160;TesterPresent timer in&#160;CANdesc&#160;(see&#160;API<i>&#160;</i><br/>
<a href="TechnicalReference_CANdesc_KWP_GMs.html#68">DescActivateS1Timer).&#160;</a>The best place to do&#160;that would be the post-handler of a “send-<br/>key” service. Just verify if the service has been responded positively,&#160;and the response&#160;<br/>was sent successfully.&#160;For details about service post-handling, please refer the OEM&#160;<br/>independent CANdesc&#160;TechnicalReference file located in&#160;the delivered software&#160;<br/>package.&#160;<br/>
<b>7.6&#160;</b><br/>
<b>Service DisableNormalCommunication ($28)&#160;</b><br/>
The GM/Opel version of CANdesc takes the&#160;following actions prior sending the positive&#160;<br/>response:&#160;<br/>
X<b>&#160;&#160;</b>Requests GMLAN/IVLAN to disable normal communication&#160;<br/>
X<b>&#160;&#160;</b>If the disable normal communication request succeeds:&#160;<br/>
X<b>&#160;&#160;</b>Sets the new communication status (<i>kDescCommDisabled</i>)&#160;<br/>
X<b>&#160;&#160;</b>Activates the tester present timer&#160;<br/>
X<b>&#160;&#160;</b><a href="TechnicalReference_CANdesc_KWP_GMs.html#34">Notifies the application via the function call&#160;<i>ApplDescOnDisableNormalComm</i></a>.&#160;<br/>
X<b>&#160;&#160;</b>Positive response will be sent&#160;<br/>
X<b>&#160;&#160;</b>If the disable normal communication request fails:&#160;<br/>
X<b>&#160;&#160;</b>A&#160;negative response with NRC $22 (ConditionsNotCorrect) will be sent&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
33&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-34_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescOnDisableNormalComm</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
CANdesc calls this function&#160;once normal message transmission has been disabled by a service $28&#160;<br/>request and the resulting positive response has been&#160;sent.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;None&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context of DescStateTask().&#160;<br/>
Table 7-4&#160;&#160;&#160;ApplDescOnDisableNormalComm&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescOnEnableNormalComm</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
Once normal&#160;message transmission&#160;has been restored, CANdesc calls this function to notify the&#160;<br/>application.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;None&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context of DescStateTask().&#160;<br/>
Table 7-5&#160;&#160;&#160;ApplDescOnEnableNormalComm&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
34&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=35></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-35_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.7&#160;</b><br/>
<b>Service DynamicallyDefineMessage ($2C)&#160;</b><br/>
The GM diagnostic specification (GMW-3110 version 1.6) allows some DPIDs to be&#160;<br/>defined at runtime by the tester, rather than at compile time. Using this technique, the&#160;<br/>tester can map one or more PIDs (statically&#160;or dynamically defined) to a DPID and then&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#66">read them back via&#160;<i>Service ReadDataByPacketIdentifier ($AA)</i></a>.&#160;<br/>CANdesc completely implements this service;&#160;no application implementation is required.&#160;<br/>The diagram below depicts the relationship&#160;between statically and dynamically defined&#160;<br/>DPIDs and PIDs and the services that can access them.&#160;<br/>&#160;<br/>
Service ID $22&#160;<br/>
Read<br/>
PID pool&#160;<br/>
(static and&#160;<br/>
Find<br/>
dynamic)&#160;<br/>
&#160;<br/>
Service ID $2C&#160;<br/>
&#160;<br/>
Refer<br/>
Define<br/>
Dynamically&#160;<br/>
Read<br/>
definable&#160;<br/>
&#160;<br/>
DPID&#160;pool<br/>
Service ID $AA&#160;<br/>
Read<br/>
Static defined&#160;<br/>
DPID pool&#160;<br/>
&#160;<br/>
Figure 7-1&#160;&#160;Dynamically&#160;defined DPID service relations&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
35&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-36_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.8&#160;</b><br/>
<b>Operations on dynamically&#160;definable DPIDs&#160;</b><br/>
Dynamically definable DPIDs can be defined and read.&#160;The following sections illustrate&#160;<br/>these operations with sequence charts&#160;involving the tester, CANdesc, and application.&#160;<br/>
<b>7.8.1&#160;&#160;Defining a dynamically&#160;definable DPID&#160;<br/></b>If the requested parameters are valid (both PIDs referenced and DPID to be&#160;defined are&#160;<br/>valid, request has the correct length, etc.), CANdesc&#160;overwrites the current DPID definition&#160;<br/>with the new list of PIDs.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>If the tester&#160;request contains multiple&#160;instances of the same PID, the resulting DPID&#160;<br/>
<b>&#160;&#160;</b>definition will contain multiple instances as well.&#160;CANdesc does not verify that all of the&#160;<br/>
requested PIDs are unique. &#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>7.8.2&#160;&#160;Reading a dynamically&#160;definable DPID&#160;<br/></b>When a read operation is performed on a dynamically definable DPID, four scenarios are&#160;<br/>possible:&#160;<br/>-&#160;&#160;The DPID is not defined&#160;<br/>-&#160;&#160;The DPID is defined, but the data is not accessible at the moment&#160;<br/>-&#160;&#160;The DPID is defined, and the data is accessible&#160;<br/>-&#160;&#160;The DPID is defined, but one of the contained PIDs is dynamically definable and it has&#160;<br/>
not been defined&#160;<br/>
&#160;<br/>If the DPID is not defined, the CANdesc&#160;scheduler will send UUDT&#160;messages with no&#160;<br/>actual data content (only zeros):&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
36&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-37_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-37_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>sd&#160;Read&#160;DynDPID (not&#160;defined)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT&#160;]&#160;$AA&#160;[rate&#160;=&#160;fast]&#160;[DPID]<br/>
[UUDT&#160;]&#160;$DPID&#160;$00&#160;$00 $00 $00 $00&#160;$00&#160;$00<br/>
[UUDT&#160;]&#160;$DPID&#160;$00&#160;$00 $00 $00 $00&#160;$00&#160;$00<br/>
&#160;<br/>
Figure 7-2&#160;Dynamically&#160;definable DPID is not defined&#160;<br/>
The next example assumes that&#160;the dynamically definable&#160;DPID has already been defined&#160;<br/>and references a single PID. In addition, the reading of this PID is not&#160;possible at the time&#160;<br/>of data access (e.g. the data is corrupted), and therefore the application would like to reject&#160;<br/>the PID processing. In this situation,&#160;the UUDT&#160;response message would once again&#160;<br/>contain no actual data (only zeros):&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>In the case&#160;where multiple PIDs are contained in the DPID,&#160;and some of them cannot&#160;<br/>
<b>&#160;&#160;</b>be processed with success, these PIDs will be skipped in the&#160;UUDT&#160;response. &#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
37&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-38_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>sd&#160;Read&#160;DynDPID&#160;(PID&#160;failed)</b><br/>
<b>Tester</b><br/>
<b>CANdesc[M&#160;AIN]</b><br/>
<b>CANdesc[DYN_DPID]</b><br/>
<b>Application</b><br/>
[USDT&#160;] $AA&#160;[rate&#160;=&#160;fast] [DPID]<br/>
DescProcessDynDPID(DPID)<br/>
Send virtual&#160;request($22 [PID])<br/>
ApplDescReadDataByIdentifier_PID<br/>
DescSetNegResponse(kDescNrcConditionsNotCorrect)<br/>
DescProcessingDone<br/>
Send Response($7F&#160;$22 $22)<br/>
[UUDT&#160;]&#160;$DPID&#160;$00 $00&#160;$00 $00 $00&#160;$00 $00<br/>
&#160;<br/>
Figure 7-3&#160;Single referenced PID cannot provide any&#160;data&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
38&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=39></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-39_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
If the PID is accessible at the&#160;time of the request, the UUDT&#160;message will contain its data:&#160;<br/>
<b>sd&#160;Read&#160;DynDPID&#160;(PID&#160;ok)</b><br/>
<b>Tester</b><br/>
<b>CANdesc[M&#160;AIN]</b><br/>
<b>CANdesc[DYN_DPID]</b><br/>
<b>Application</b><br/>
[USDT&#160;] $AA&#160;[rate&#160;=&#160;fast] [DPID]<br/>
DescProcessDynDPID(DPID)<br/>
Send virtual&#160;request($22&#160;[PID])<br/>
ApplDescReadDataByIdentifier_PID<br/>
Copy&#160;data<br/>
DescProcessingDone<br/>
Send&#160;Response($62 [PID]&#160;[Data])<br/>
[UUDT&#160;]&#160;$DPID [Data]<br/>
&#160;<br/>
Figure 7-4&#160;Reading the dynamically&#160;defined&#160;DPID succeeds&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
39&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-40_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-40_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
Since dynamically&#160;defined DPIDs can also&#160;contain dynamically definable PIDs, any&#160;<br/>dynamically definable PIDs within the requested DPID must be defined, or&#160;the resulting&#160;<br/>UUDT&#160;response will not contain any actual data (only zeros):&#160;<br/>
<b>sd&#160;Read DynDPID&#160;(DynPID not&#160;defined)</b><br/>
<b>Tester</b><br/>
<b>CANdesc[M&#160;AIN]</b><br/>
<b>CANdesc[DYN_DPID]</b><br/>
<b>Application</b><br/>
[USDT&#160;]&#160;$AA&#160;[rate&#160;=&#160;fast]&#160;[DPID]<br/>
DescProcessDynDPID(DPID)<br/>
Send virtual&#160;request($22&#160;[PID])<br/>
Send Response($62 [PID])<br/>
[UUDT&#160;]&#160;$DPID&#160;$00 $00&#160;$00 $00&#160;$00 $00&#160;$00<br/>
&#160;<br/>
Figure 7-5&#160;Dynamically&#160;definable PID, referenced by&#160;the&#160;DPID, is not defined&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>When a read operation is performed on a DPID&#160;which contains a dynamically definable&#160;<br/>
<b>&#160;&#160;</b>PID that is not defined but also other&#160;defined PIDs, the resulting UUDT&#160;response will&#160;<br/>
not contain the data for this PID. &#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
40&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=41></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-41_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.9&#160;</b><br/>
<b>Service DefinePIDByAddress ($2D)&#160;</b><br/>
The GM diagnostic specification (GMW-3110 version 1.6) allows some PIDs to be defined&#160;<br/>at runtime by the tester, rather&#160;than at compile time. Using this&#160;technique, the tester can&#160;<br/>map a certain memory area to&#160;a PID and then read it back&#160;via&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#32"><i>Service&#160;<br/>ReadDataByParameterIdentifier ($22)</i>&#160;or p</a>ack the PID into a DPID (<a href="TechnicalReference_CANdesc_KWP_GMs.html#35"><i>Service&#160;<br/>DynamicallyDefineMessage ($2C)</i>) for future read operations</a>&#160;via&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#66"><i>Service&#160;<br/>ReadDataByPacketIdentifier ($AA)</i>.&#160;<br/></a>CANdesc completely&#160;implements this service.&#160;The application must only implement the&#160;<br/>memory area validation and access functionality.&#160;&#160;<br/>The diagram below depicts the relationship&#160;between statically and dynamically defined&#160;<br/>PIDs and the services that can access them.&#160;<br/>&#160;<br/>
Read<br/>
Service ID $22<br/>
PID pool<br/>
Read<br/>
Dynamically<br/>
definable&#160;PID&#160;<br/>
Service ID $2D<br/>
Define<br/>
pool<br/>
&#160;<br/>
Figure 7-6&#160;Dynamically&#160;defined PID service relations&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
41&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-42_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.10&#160;&#160;Operations on dynamically&#160;definable PIDs&#160;<br/></b>Dynamically definable PIDs can be defined and&#160;read.&#160;The following sections illustrate&#160;<br/>these operations with sequence charts&#160;involving the tester, CANdesc, and application.&#160;<br/>
<b>7.10.1&#160;&#160;Defining a dynamically&#160;definable PID&#160;<br/></b>If the requested memory area parameters are valid and do not refer to a secured location,&#160;<br/>the following diagram applies:&#160;<br/>
<b>sd&#160;Definition&#160;of&#160;memory&#160;block&#160;(ok)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
$2D&#160;[PID]&#160;[m&#160;em&#160;Address]&#160;[m&#160;em&#160;Size]<br/>
ApplDescCheckDynPidM&#160;em&#160;oryArea(m&#160;em&#160;Address,&#160;m&#160;em&#160;Size)<br/>
m&#160;em&#160;BlockOk<br/>
Update definition&#160;of&#160;PID<br/>
$6D&#160;[PID]<br/>
&#160;<br/>
Figure 7-7&#160;&#160;Definition of dynamically&#160;definable PID&#160;with valid parameter&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
42&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-43_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
If the application detects a problem with the&#160;requested memory area (e.g. bad location&#160;<br/>reference, security protection, etc.),&#160;the sequence below will take place:&#160;<br/>
<b>sd Definition&#160;of&#160;memory&#160;block&#160;(failed)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
$2D&#160;[PID] [m&#160;em&#160;Address]&#160;[m&#160;em&#160;Size]<br/>
ApplDescCheckDynPidM&#160;em&#160;oryArea(m&#160;em&#160;Address,&#160;m&#160;em&#160;Size)<br/>
m&#160;em&#160;BlockInvSecurity<br/>
Convert&#160;UseCase-&gt;NRC<br/>
$7F&#160;$2D&#160;[NRC&#160;=&#160;$31]<br/>
&#160;<br/>
Figure 7-8 Defining of a dynamically&#160;definable PID&#160;failed due to security&#160;violation&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
43&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=44></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-44_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.10.2&#160;&#160;Reading a dynamically&#160;definable PID&#160;<br/></b>When a read operation is&#160;performed on a dynamically definable PID, three scenarios&#160;are&#160;<br/>possible:&#160;<br/>-&#160;&#160;The PID is not defined&#160;<br/>-&#160;&#160;The PID is defined, but the data&#160;is not accessible at the moment&#160;<br/>-&#160;&#160;The PID is defined, and the data is accessible&#160;<br/>&#160;<br/>If the PID is not defined, CANdesc returns a positive response with no actual data bytes:&#160;<br/>
<b>sd Read&#160;DynPID&#160;(not&#160;defined)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
$22 [PID]<br/>
$62&#160;[PID]<br/>
&#160;<br/>
Figure 7-9&#160;&#160;The dynamically&#160;definable PID is not defined&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
44&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=45></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-45_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
If the application has already&#160;accepted the PID read request (in&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#47"><i>ApplDescCheckDynPidMemoryArea</i></a>) but it cannot complete&#160;the read operation, a negative&#160;<br/>response can still be sent back to the tester:&#160;<br/>
<b>sd&#160;Read&#160;DynPID&#160;(failed)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
$22 [PID]<br/>
ApplDescReadDynPidM&#160;em&#160;Content(m&#160;em&#160;Address,&#160;m&#160;em&#160;Size)<br/>
[ResponsePending tim&#160;e =&#160;P2]:&#160;$7F&#160;$22 $78<br/>
DescReadDynPidM&#160;em&#160;ContentDone(m&#160;em&#160;BlockInvCondition)<br/>
$7F&#160;$22&#160;$22<br/>
&#160;<br/>
Figure 7-10&#160;&#160;Application error&#160;when reading the&#160;memory&#160;block&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
45&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=46></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-46_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
In the ideal case, the application writes&#160;the data into the supplied data&#160;buffer (see&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#47"><i>ApplDescCheckDynPidMemoryArea</i></a>) and acknowledges the end of&#160;writing with success:&#160;<br/>
<b>sd&#160;Read&#160;DynPID&#160;(ok)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
$22 [PID]<br/>
ApplDescReadDynPidM&#160;em&#160;Content(m&#160;em&#160;Address,&#160;m&#160;em&#160;Size)<br/>
[ResponsePending tim&#160;e =&#160;P2]:&#160;$7F&#160;$22 $78<br/>
DescReadDynPidM&#160;em&#160;ContentDone(m&#160;em&#160;BlockOk)<br/>
$62 [PID]&#160;[Data]<br/>
&#160;<br/>
Figure 7-11&#160;&#160;Reading of dynamically&#160;defined PID succeeds&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
46&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=47></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-47_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
Single Context&#160;<br/>DescDynPidMemAccessResult&#160;<b>ApplDescCheckDynPidMemoryArea&#160;</b>(&#160;<br/>const DescDynPidMemBlockInfo* const memArea)&#160;<br/>
Multi Context&#160;<br/>DescDynPidMemAccessResult&#160;<b>ApplDescCheckDynPidMemoryArea&#160;</b>(&#160;<br/>vuint8 iContext,&#160;<br/>
const DescDynPidMemBlockInfo* const memArea)&#160;<br/>
<b>Parameter&#160;<br/></b>iContext&#160;<br/>
Current request handle (reserved for future use)&#160;<br/>
memArea&#160;<br/>
A&#160;pointer to the memory area definition which must be validated by&#160;the&#160;<br/>
&#160;<br/>
application&#160;<br/>
<b>&gt;&#160;</b><br/>
Address[]&#160;<br/>
The requested start address (can be a 2,&#160;3 or 4 byte array)&#160;<br/>
<b>&gt;&#160;</b><br/>
size&#160;<br/>
The requested memory block&#160;size&#160;<br/>
<b>Return code&#160;<br/></b>memBlockOk&#160;<br/>
The requested&#160;area is&#160;valid (no memory protection violation, range&#160;ok, etc.)&#160;<br/>
memBlockInvAddress&#160;<br/>
The requested&#160;memory address is&#160;invalid (wrong&#160;memory access)&#160;<br/>
memBlockInvSize&#160;<br/>
The requested&#160;memory&#160;size is invalid (e.g. out of range)&#160;<br/>
memBlockInvSecurity&#160;&#160;The requested memory address and size are valid, but the area is&#160;protected&#160;<br/>
by security&#160;<br/>
memBlockInvCondition&#160;The access conditions are not correct&#160;<br/><b>Functional Description&#160;</b><br/>
CANdesc calls this function&#160;when the tester requests&#160;a&#160;valid $2D service (according to the specification).&#160;<br/>The application must validate the memory area&#160;parameters.&#160;<br/>
When&#160;the application exits the function, CANdesc generates&#160;the appropriate NRC based on&#160;the application&#160;<br/>return value.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;service $2D.&#160;<br/>
X&#160;&#160;This function&#160;runs&#160;synchronously,&#160;so the&#160;application should exit the&#160;function as&#160;quickly as possible.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context of DescStateTask().&#160;<br/>
Table 7-6&#160;&#160;&#160;ApplDescCheckDynPidMemoryArea&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
47&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=48></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-48_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
Single Context&#160;<br/>void&#160;<b>ApplDescReadDynPidMemContent</b>&#160;(DescMsg pMsg,&#160;<br/>const DescDynPidMemBlockInfo* const memArea)&#160;<br/>
Multi Context&#160;<br/>void&#160;<b>ApplDescReadDynPidMemContent</b>&#160;(vuint8 iContext,&#160;<br/>DescMsg pMsg,&#160;<br/>
const DescDynPidMemBlockInfo* const memArea)&#160;<br/>
<b>Parameter&#160;<br/></b>iContext&#160;<br/>
Current request handle (reserved for future use)&#160;<br/>
pMsg&#160;<br/>
A&#160;pointer to a&#160;buffer where&#160;the application must write the requested&#160;memory&#160;<br/>contents&#160;<br/>
memArea&#160;<br/>
A&#160;pointer to the memory area definition which the application can use for&#160;data&#160;<br/>
&#160;<br/>
acquisition:&#160;<br/>
<b>&gt;&#160;</b><br/>
Address[]&#160;<br/>
The requested start address (can be a 2,&#160;3 or 4 byte array)&#160;<br/>
<b>&gt;&#160;</b><br/>
size&#160;<br/>
The requested memory block&#160;size&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
Once defined,&#160;a dynamically&#160;definable PID can be read&#160;by the tester using&#160;service $22. Dynamically&#160;<br/>defined PIDs have special main-handlers which are implemented internally by CANdesc.&#160;These main-<br/>handlers call&#160;this function&#160;to retrieve the&#160;data at the requested memory address.&#160;&#160;<br/>
CANdesc does not use a&#160;direct memory access implementation for this service since certain ranges may&#160;<br/>be located in&#160;slow&#160;(external) memory chips that require&#160;extended periods of time&#160;to access.&#160;As a result, this&#160;<br/>data acquisition function is designed to&#160;be asynchronous.&#160;<br/>
Once the requested data bytes have been written into&#160;the buffer pointed to by pMsg, the application must&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#49">call&#160;<i>DescReadDynPidMemContentDone</i></a>&#160;to acknowledge that the operation is&#160;complete.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Only available if the ECU supports&#160;service $2D.&#160;<br/>
<b>&gt;&#160;&#160;</b>This function&#160;runs&#160;asynchronously,&#160;so once the application exits this function&#160;it can take as much time&#160;<br/>
as necessary&#160;to complete the requested&#160;operation&#160;<br/>
Call context&#160;<br/>
<b>&gt;&#160;&#160;</b>Background-loop level task context of DescStateTask().&#160;<br/>
Table 7-7&#160;&#160;&#160;ApplDescReadDynPidMemContent&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
48&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-49_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
Single Context&#160;<br/>void&#160;<b>DescReadDynPidMemContentDone&#160;</b>(DescDynPidMemAccessResult result)&#160;<br/>
Multi Context&#160;<br/>void&#160;<b>DescReadDynPidMemContentDone</b>&#160;(vuint8 iContext, &#160;<br/>
DescDynPidMemAccessResult result)&#160;<br/>
<b>Parameter&#160;<br/></b>iContext&#160;<br/>
The request handle previously passed as&#160;a parameter to the application in the&#160;<br/>callbac<a href="TechnicalReference_CANdesc_KWP_GMs.html#48">k&#160;<i>ApplDescReadDynPidMemContent.</i></a>&#160;<br/>
result&#160;<br/>
The result of the operation:&#160;<br/>
X&#160;&#160;memBlockOk:&#160;The requested area is valid (no memory protection&#160;<br/>
violation, range ok, etc.)&#160;<br/>
X&#160;&#160;memBlockInvAddress:&#160;The requested&#160;memory address is not valid&#160;<br/>
(bad memory&#160;access)&#160;<br/>
X&#160;&#160;memBlockInvSize:&#160;The requested memory size is invalid (e.g. out of&#160;<br/>
range)&#160;<br/>
X&#160;&#160;memBlockInvSecurity:&#160;The requested memory address and&#160;size are&#160;<br/>
valid, but the area&#160;is protected by security&#160;<br/>
X&#160;&#160;memBlockInvCondition:&#160;The access&#160;conditions&#160;are not correct&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
Once the data requested by<a href="TechnicalReference_CANdesc_KWP_GMs.html#48">&#160;<i>ApplDescReadDynPidMemContent</i>&#160;h</a>as been written into the buffer pointed to&#160;<br/>by pMsg, the&#160;application must call this&#160;function&#160;to acknowledge that&#160;the operation is complete.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;service $2D.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context of DescStateTask().&#160;<br/>
Table 7-8&#160;&#160;&#160;DescReadDynPidMemContentDone&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
49&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_1.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_2.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_3.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_4.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_5.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_6.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_7.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_8.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_9.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_10.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_11.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_12.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_13.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_14.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_15.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_16.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_17.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_18.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_19.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_20.png"/><br/>
<img class="yflip" src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-50_21.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.11&#160;&#160;Service ProgrammingMode ($A5)&#160;<br/></b>This service is implemented completely&#160;using the CANdesc state management. &#160;<br/>The programming sequence follows&#160;the state graph shown below:&#160;<br/>
<b>stm&#160;PreProgramming Sequence</b><br/>
<b>Normal</b><br/>
DescInitPowerOn()<br/>
+&#160;kDescStateProgrammingModeNormal<br/>
ECUPowerOn<br/>
Successfully&#160;processed SID&#160;$28<br/>
<b>CommHalted</b><br/>
+&#160;kDescStateProgrammingModeCommHalted<br/>
Request&#160;$A5&#160;$02<br/>
Request&#160;$A5 $01<br/>
[ApplDescPreRequestProgrammingMode_HiSpeed]<br/>
[ApplDescPreRequestProgrammingMode]<br/>
<b>Requested</b><br/>
Request&#160;$A5 $02 [ApplDescPreRequestProgrammingMode]<br/>
<b>Requested_HiSpeed</b><br/>
+&#160;kDescStateProgrammingModeRequested<br/>
+&#160;kDescStateProgrammingModeRequested_HiSpeed<br/>
Request&#160;$A5&#160;$01 [ApplDescPreRequestProgrammingMode_HiSpeed]<br/>
Request&#160;$A5 $03<br/>
Request&#160;$A5 $03<br/>
<b>Activ&#160;e</b><br/>
+&#160;kDescStateProgrammingModeActive<br/>
&#160;<br/>
Figure 7-12&#160;&#160;Programming mode flowchart&#160;<br/>
To&#160;further restrict service execution based on the current state in the programming&#160;<br/>sequence, please refer to&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#70"><i>8 -&#160;CANdelaStudio default attribute settings</i></a>&#160;regarding the setup&#160;<br/>of the corresponding state&#160;group in CANdela studio.&#160;<br/>
<b>7.11.1&#160;&#160;Allowing programming mode ($A5 $01/$02)&#160;<br/></b>Prior to activating programming mode, the tester must ask the ECU for permission.&#160;The&#160;<br/>application may accept or deny this request using a standard prehandler for the respective&#160;<br/>level. CANdesc will activate these prehanders per default.&#160;<br/>Prehandler names can be changed in&#160;the CDD file or the configuration tool, for your&#160;<br/>reference the default names are:&#160;<br/>
X<b>&#160;&#160;</b>$A5 $01:&#160;ApplDescPreRequestProgrammingMode&#160;<br/>
X<b>&#160;&#160;</b>Compatibility note:&#160;This completely replaces the dedicated callback&#160;<br/>
ApplDescMayEnterProgMode&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
50&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=51></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-51_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-51_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
X<b>&#160;&#160;</b>$A5 $02:&#160;ApplDescPreRequestProgrammingMode_HiSpeed&#160;<br/>
X<b>&#160;&#160;</b>Compatibility note:&#160;This completely replaces the dedicated callback&#160;<br/>
ApplDescMayEnterHiSpeedProgMode&#160;<br/>
Please also&#160;refer to the general&#160;CANdesc technical reference for further information about&#160;<br/>prehandler implementation.&#160;<br/>
<b>7.11.2&#160;&#160;Entering programming mode ($A5 $03)&#160;<br/></b>Once the entire programming mode sequence is&#160;complete, the application usually makes&#160;<br/>the jump to the bootloader (FBL)&#160;in one of two ways. Both strategies are discussed in the&#160;<br/>following sections.&#160;<br/>
<b>7.11.2.1&#160;&#160;FBL start on EnterProgrammingMode ($A5 $03)&#160;<br/></b>If the application jumps to the FBL&#160;on this service, the ECU developer must&#160;<b>enable</b>&#160;the&#160;<br/>“Flashable ECU” option in the generation tool. CANdesc will notify the application to&#160;<br/>perform the FBL&#160;jump by calling the function&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#51"><i>ApplDescOnEnterProgMode</i>. The&#160;</a>application&#160;<br/>can use the function<i>&#160;&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#24">DescGetHiSpeedMode&#160;&#160;</a></i>to determine if a high speed mode switch&#160;<br/>must be performed manually.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>If the application jumps to the FBL&#160;on this service, it must manage the bus speed&#160;<br/>
&#160;&#160;switching manually.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescOnEnterProgMode</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
CANdesc will&#160;call this function so the application can perform the FBL&#160;jump.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;To&#160;enable this&#160;notification, the ECU developer must&#160;<b>enable</b>&#160;the “Flashable ECU” option in the&#160;<br/>
generation&#160;tool (the define DESC_ENABLE_FLASHABLE_ECU exists&#160;in the generated code).&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context of DescStateTask().&#160;<br/>
Table 7-9&#160;&#160;&#160;ApplDescOnEnterProgMode&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
51&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=52></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-52_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-52_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.11.2.2&#160;&#160;FBL start on RequestDownload ($34)&#160;<br/></b>If the application jumps to the FBL&#160;on this service, the ECU developer must&#160;<b>disable</b>&#160;the&#160;<br/>option “Flashable ECU” in the&#160;generation tool. CANdesc will&#160;automatically&#160;handle the high&#160;<br/>speed switching (if necessary) to comply with the tester expectations.&#160;The application must&#160;<br/>only implement the service main-handler and perform the jump to the FBL. In order to&#160;<br/>verify that the programming mode sequence was completed successfully, the ECU&#160;<br/>developer can call the function&#160;<b>DescGetProgMode()</b>&#160;in the main-handler.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The ECU developer must&#160;<b>disable</b>&#160;the option “Flashable ECU” in the generation tool&#160;<br/>
&#160;&#160;when no FBL&#160;is present&#160;in the ECU.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>7.11.2.3&#160;&#160;Concluding programming mode&#160;<br/></b>Once the flashing activity has concluded (through a service $20 tester&#160;request or tester&#160;<br/>present timeout), the GM/Opel&#160;diagnostic specification states&#160;that the ECU shall perform a&#160;<br/>software reset.&#160;Two scenarios are possible:&#160;<br/><b>&gt;&#160;&#160;</b>If the ECU was actually re-flashed,&#160;the FBL&#160;should perform the reset. &#160;<br/>
<b>&gt;&#160;&#160;</b>If the ECU was not actually re-flashed (the tester was re-flashing another ECU or the&#160;<br/>
ECU is not flashable), CANdesc notifies the application to perform an ECU reset via the&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#52">function call&#160;<i>ApplDescForceEcuReset</i></a>.&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescForceEcuReset</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
CANdesc calls this function&#160;to notify&#160;the application that it shall perform an ECU reset.&#160;<br/>
It is not required that the application perform the reset&#160;within this function&#160;call since it may need to prepare&#160;<br/>first (by saving RAM variables&#160;into EEPROM, for instance).&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;None&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context of DescStateTask().&#160;<br/>
Table 7-10&#160;&#160;&#160;ApplDescForceEcuReset&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
52&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=53></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-53_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>7.11.3&#160;&#160;Considerations when&#160;upgrading&#160;<br/></b>The callback functions used by CANdesc have&#160;changed in version 6.x.&#160;The following&#160;APIs&#160;<br/>are no longer used and need to be replaced by service prehandlers:&#160;<br/>
X<b>&#160;&#160;</b>ApplDescMayEnterProgMode&#160;<br/>
X<b>&#160;&#160;</b>ApplDescMayEnterHiSpeedProgMode&#160;<br/>
<b>7.12&#160;&#160;Service ReadDiagnosticInformation ($A9)&#160;<br/></b>This service supplies&#160;the tester with information about various DTC statuses (e.g. on&#160;<br/>change count of the DTCs, a list of all DTCs&#160;matching a given status mask, etc.).&#160;<br/>Since the DTC storage and management&#160;is application specific,&#160;the implementation of the&#160;<br/>diagnostic service “ReadDiagnosticInformation” (RDI) ($A9) generalizes this functionality,&#160;<br/>reducing the application task to&#160;a few callback implementations.&#160;<br/>&#160;<br/>The ECU developer&#160;should keep the following&#160;important properties in mind when&#160;<br/>designing the application:&#160;<br/>
1.&#160;&#160;When an $A9 sub-function has been requested, CANdesc cannot process another&#160;<br/>
request until after the first UUDT&#160;response message has&#160;been sent.&#160;<br/>
2.&#160;&#160;While processing and sending the list of matching DTCs for an $A9 $81 request,&#160;<br/>
CANdesc can process another request except $A9 $80.&#160;<br/>
3.&#160;&#160;CANdesc can process the requests $A9&#160;$80 and $A9 $81 in parallel with $A9 $82.&#160;<br/>4.&#160;&#160;Application callbacks are handled asynchronously.&#160;<br/>
&#160;<br/>Here is a parallel service execution matrix:&#160;<br/>
<b>&#160; &#160; &#160; &#160; &#160;Active&#160;</b><br/>
<b>$A9 $80&#160;</b><br/>
<b>$A9 $81&#160;</b><br/>
<b>$A9 $82&#160;</b><br/>
<b>Other requests&#160;</b><br/>
<b>&#160;</b><br/>
<b>(except scheduled&#160;<br/>$AA&#160;)&#160;</b><br/>
<b>Requested&#160;</b><br/>
<b>$A9 $80&#160;</b><br/>
Not possible&#160;<br/>
Not possible&#160;<br/>
Possible after&#160;<br/>
Not possible&#160;<br/>
the first UUDT&#160;is&#160;<br/>sent&#160;<br/>
<b>$A9 $81&#160;</b><br/>
Not possible&#160;<br/>
Not possible&#160;<br/>
Possible after&#160;<br/>
Not possible&#160;<br/>
the first UUDT&#160;is&#160;<br/>sent&#160;<br/>
<b>$A9 $82&#160;</b><br/>
Not possible&#160;<br/>
Possible after&#160;<br/>
Possible after&#160;<br/>
Not possible&#160;<br/>
the first UUDT&#160;is&#160;&#160;the first UUDT&#160;is&#160;<br/>sent&#160;<br/>
sent&#160;<br/>
<b>Other requests&#160;&#160;</b>Not possible&#160;<br/>
Possible after&#160;<br/>
Possible after&#160;<br/>
Not possible&#160;<br/>
the first UUDT&#160;is&#160;&#160;the first UUDT&#160;is&#160;<br/>sent&#160;<br/>
sent&#160;<br/>
Table 7-11&#160;&#160;&#160;Service $A9 parallel execution matrix&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
53&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=54></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-54_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-54_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The RCR-RP&#160;responses in the sequence diagrams below are shown for better timing&#160;<br/>
&#160;&#160;request-response relation understanding; however, if the application is fast enough&#160;<br/>
there will be no RCR-RP&#160;response sent.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>7.12.1&#160;&#160;ReadStatusOfDTCByNumber ($A9 $80)&#160;<br/></b>CANdesc processes this service as shown below.&#160;<br/>&#160;<br/>If the application finds the requested DTC number with the given failure type byte, the&#160;<br/>following sequence will be executed:&#160;<br/>
<b>sd&#160;ReadStatusOfDTCByNumber&#160;(good)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT&#160;]&#160;$A9&#160;$80&#160;[DT&#160;C]&#160;[FailureT&#160;ypeByte]<br/>
ApplDescGetDtcStatusByNum&#160;ber(DT&#160;C,&#160;FailureT&#160;ypeByte)<br/>
[ResponsePending&#160;tim&#160;e&#160;=&#160;P2]:&#160;[USDT&#160;]&#160;$7F&#160;$A9&#160;$78<br/>
[ResponsePending&#160;tim&#160;e =&#160;P3M&#160;ax]:&#160;[USDT&#160;]&#160;$7F&#160;$A9 $78<br/>
DescRdiDtcStatusByNum&#160;berFound(StatusByte)<br/>
[UUDT&#160;] $80&#160;[DT&#160;C][FailureT&#160;ypeByte][StatusByte]<br/>
&#160;<br/>
Figure 7-13&#160;&#160;Request $A9 $80 where the requested fault type combination&#160;was found&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
54&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=55></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-55_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
If the requested fault type combination is&#160;not supported by the ECU, the following&#160;<br/>sequence will be executed:&#160;<br/>
<b>sd&#160;ReadStatusOfDTCByNumber&#160;(failed)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT&#160;]&#160;$A9 $80&#160;[DT&#160;C]&#160;[FailureT&#160;ypeByte]<br/>
ApplDescGetDtcStatusByNum&#160;ber(DT&#160;C,&#160;FailureT&#160;ypeByte)<br/>
[ResponsePending tim&#160;e =&#160;P2]:&#160;[USDT&#160;]&#160;$7F&#160;$A9 $78<br/>
[ResponsePending&#160;tim&#160;e&#160;=&#160;P3M&#160;ax]:&#160;[USDT&#160;]&#160;$7F&#160;$A9&#160;$78<br/>
DescRdiDtcStatusByNum&#160;berNotFound<br/>
[USDT&#160;]&#160;$7F&#160;$A9 $31<br/>
&#160;<br/>
Figure 7-14&#160;&#160;Request $A9 $80 where the requested fault type combination&#160;was not found&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
55&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=56></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-56_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
Here are the detailed descriptions of&#160;the&#160;APIs used in&#160;the above diagrams:&#160;<br/>&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescGetDtcStatusByNumber&#160;</b>(vuint16 dtcNum, vuint8 failureTypeByte)&#160;<br/>
<b>Parameter&#160;<br/></b>dtcNum&#160;<br/>
The requested DTC&#160;number&#160;<br/>
failureTypeByte&#160;<br/>
The requested&#160;failure-type byte&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
CANdesc calls this function&#160;to query the application for the request combination&#160;of DTC number and&#160;<br/>failure-type byte. When the application&#160;finds this&#160;combination, it must acknowledge this by calling the&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#57">function&#160;<i>DescRdiDtcStatusByNumberFound</i>. If the applicatio</a>n cannot find a matching entry, it must&#160;<br/>acknowledge&#160;this by calling&#160;the function&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#57"><i>DescRdiDtcStatusByNumberNotFound</i>.&#160;</a><br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;$A9&#160;sub-function&#160;$80&#160;<br/>
X&#160;&#160;The application can call&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#57"><i>DescRdiDtcStatusByNumberFound&#160;</i>or&#160;<i>DescRdiDtcStatusByNumberNotFound&#160;</i></a><br/>
within this function, or it can exit this function and call&#160;one of them later on the application task level.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context (same as DescStateTask()).&#160;<br/>
Table 7-12&#160;&#160;&#160;ApplDescGetDtcStatusByNumber&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
56&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=57></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-57_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>DescRdiDtcStatusByNumberFound</b>&#160;(vuint8 statusByte)&#160;<br/>
<b>Parameter&#160;<br/></b>statusByte&#160;<br/>
The current status of the DTC which&#160;was passed as&#160;a parameter in the&#160;<br/>callbac<a href="TechnicalReference_CANdesc_KWP_GMs.html#56">k&#160;<i>ApplDescGetDtcStatusByNumber</i>&#160;</a><br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
The application can call this&#160;function&#160;to acknowledge&#160;the successful&#160;search&#160;result&#160;of the DTC number and&#160;<br/>failure-type byte combination which&#160;were passed as&#160;parameters in&#160;the callback&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#56"><i>ApplDescGetDtcStatusByNumber.</i></a>&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;$A9&#160;sub-function&#160;$80&#160;<br/>
X&#160;&#160;CANdesc must have previously called&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#56"><i>ApplDescGetDtcStatusByNumber</i></a>&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context&#160;<br/>
Table 7-13&#160;&#160;&#160;DescRdiDtcStatusByNumberFound&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>DescRdiDtcStatusByNumberNotFound</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
The application can call this&#160;function&#160;to acknowledge&#160;the unsuccessful search result of the DTC number&#160;<br/>and failure-type byte combination which&#160;were passed&#160;as parameters in the callback&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#56"><i>ApplDescGetDtcStatusByNumber</i>&#160;</a><br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;$A9&#160;sub-function&#160;$80&#160;<br/>
X&#160;&#160;CANdesc must have previously called&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#56"><i>ApplDescGetDtcStatusByNumber</i></a>&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context&#160;<br/>
Table 7-14&#160;&#160;&#160;DescRdiDtcStatusByNumberNotFound&#160;<br/>
<b>7.12.2&#160;&#160;ReadStatusOfDTCByStatusMask ($A9 $81)&#160;<br/></b>This service transmits a list of DTCs and their properties back to the tester. CANdesc uses&#160;<br/>an iteration-based process to request each element of the list from the application.&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
57&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=58></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-58_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-58_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The iterator&#160;parameter discussed below is only provided to help the application keep&#160;<br/>
&#160;&#160;track of where it should&#160;begin/continue searching the list.&#160;The value of this parameter&#160;<br/>
has no meaning to CANdesc.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>CANdesc processes this service as shown below.&#160;<br/>If the application finds DTCs that match the given status mask byte, the following&#160;<br/>sequence will be executed:&#160;<br/>
<b>sd&#160;ReadStatusOfDTCByStatusM&#160;ask&#160;(At&#160;Least&#160;one DTC&#160;found)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT&#160;] $A9&#160;$81&#160;[DT&#160;C] [StatusM&#160;ask]<br/>
ApplDescGetDtcStatusByM&#160;ask(iter&#160;=&#160;0,&#160;StatusM&#160;ask)<br/>
[ResponsePending tim&#160;e&#160;=&#160;P2]:<br/>[USDT&#160;]&#160;$7F&#160;$A9&#160;$78<br/>
[ResponsePending&#160;tim&#160;e =&#160;P3M&#160;ax]:<br/>[USDT&#160;]&#160;$7F&#160;$A9 $78<br/>
DescRdiDtcStatusByM&#160;askFound(iter&#160;=&#160;X,&#160;DT&#160;C0,&#160;FailureT&#160;ypeByte0,&#160;StatusByte0)<br/>
[UUDT&#160;]&#160;$81&#160;[DT&#160;C0][FailureT&#160;ypeByte0][StatusByte0]<br/>
ApplDescGetDtcStatusByM&#160;ask(iter&#160;=&#160;X,&#160;StatusM&#160;ask)<br/>
DescRdiDtcStatusByM&#160;askFound(iter&#160;=&#160;Y,&#160;DT&#160;C1,&#160;FailureT&#160;ypeByte1,&#160;StatusByte1)<br/>
[UUDT&#160;]&#160;$81&#160;[DT&#160;C1][FailureT&#160;ypeByte1][StatusByte1]<br/>
ApplDescGetDtcStatusByM&#160;ask(iter&#160;=Y, StatusM&#160;ask)<br/>
DescRdiDtcStatusByM&#160;askNotFound(StatusAvailabilityM&#160;ask)<br/>
[UUDT&#160;]&#160;$81&#160;$00&#160;$00&#160;$00&#160;[StatusAvailabilityM&#160;ask]<br/>
&#160;<br/>
Figure 7-15&#160;&#160;Request $A9 $81 where the application&#160;found two&#160;DTCs&#160;with the&#160;requested status mask&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
58&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=59></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-59_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-59_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Notes&#160;<br/></b>1.&#160;&#160;If the application cannot send the second and the following DTCs&#160;matching the requested&#160;<br/>
&#160;<br/>
mask within&#160;P2ecu time,&#160;CANdesc will&#160;not&#160;send further RCR-RP&#160;messages back to the&#160;<br/>tester.&#160;<br/>
2.&#160;&#160;Although CANdesc can process another&#160;request after the first UUDT&#160;response&#160;has been&#160;<br/>
sent, if that next request is either $A9 $80&#160;or $A9 $81&#160;the request&#160;will be rejected&#160;with&#160;<br/>negative response “ConditionsNotCorrect” ($22).&#160;<br/>
3.&#160;&#160;CANdesc can&#160;process $A9&#160;$80 or $A9 $81 requests&#160;again once the&#160;“End of DTC report”&#160;<br/>
message has been sent..&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>If the application cannot find any DTCs matching the requested status&#160;mask, CANdesc will&#160;<br/>only send the final UUDT&#160;response as shown below:&#160;<br/>
<b>sd&#160;ReadStatusOfDTCByStatusM&#160;ask&#160;(No&#160;DTC&#160;found)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[USDT&#160;]&#160;$A9&#160;$81 [DT&#160;C]&#160;[StatusM&#160;ask]<br/>
ApplDescGetDtcStatusByM&#160;ask(iter&#160;=&#160;0,&#160;StatusM&#160;ask)<br/>
[ResponsePending tim&#160;e&#160;=&#160;P2]:&#160;[USDT&#160;]&#160;$7F&#160;$A9&#160;$78<br/>
[ResponsePending tim&#160;e =&#160;P3M&#160;ax]:&#160;[USDT&#160;]&#160;$7F&#160;$A9 $78<br/>
DescRdiDtcStatusByM&#160;askNotFound(StatusAvailabilityM&#160;ask)<br/>
[UUDT&#160;]&#160;$81 $00 $00 $00&#160;[StatusAvailabilityM&#160;ask]<br/>
&#160;<br/>
Figure 7-16&#160;&#160;Request $A9 $81 where the application cannot find any&#160;DTCs&#160;with&#160;the requested status mask&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
59&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=60></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-60_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
Here are the detailed descriptions of&#160;the&#160;APIs used in&#160;the above diagrams:&#160;<br/>&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescGetDtcStatusByMask&#160;</b>(vuint16 iterPos, vuint8 statusMask)&#160;<br/>
<b>Parameter&#160;</b><br/>
iterPos&#160;<br/>
An iterator for the search&#160;start position (abstract)&#160;<br/>
statusMask&#160;<br/>
The status mask that the DTC&#160;shall match (OR-ed)&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
CANdesc calls this function&#160;to query the application for the first/next DTC number&#160;that has at least one bit&#160;<br/>in its status&#160;byte matching&#160;the parameter&#160;<i>statusMask</i>. When the application finds this combination, it must&#160;<br/>acknowledge&#160;this by calling&#160;the function&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#61"><i>DescRdiDtcStatusByMaskFound</i>. If the appli</a>cation&#160;cannot find any&#160;<br/>(more) matching DTCs, it must acknowledge this&#160;by calling the function&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#61"><i>DescRdiDtcStatusByMaskNotFound</i>.&#160;</a><br/>
The application can use the iterator&#160;parameter as&#160;a&#160;marker to&#160;continue the search from a&#160;certain position&#160;<br/>instead of implementing a counter or&#160;state machine.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;$A9&#160;sub-function&#160;$81&#160;<br/>
X&#160;&#160;The application can call&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#61"><i>DescRdiDtcStatusByMaskFound</i></a>&#160;or<a href="TechnicalReference_CANdesc_KWP_GMs.html#61">&#160;<i>DescRdiDtcStatusByMaskNotFound</i></a>&#160;within&#160;<br/>
this&#160;function, or it can exit this&#160;function and call one of&#160;them later on&#160;the application task level.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context (same as DescStateTask()).&#160;<br/>
Table 7-15&#160;&#160;&#160;ApplDescGetDtcStatusByMask&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
60&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=61></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-61_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>DescRdiDtcStatusByMaskFound&#160;</b>(DescRdiDtcRecord *pDtcReport)&#160;<br/>
<b>Parameter&#160;</b><br/>
vuint16 nextIterPos&#160;<br/>
The position&#160;of the current&#160;matching&#160;DTC&#160;<br/>
vuint16 dtcNum&#160;<br/>
The DTC number&#160;which&#160;matches the&#160;given mask&#160;<br/>
vuint8 failureTypeByte&#160;&#160;The failure type byte of the DTC&#160;<br/>
vuint8 statusByte&#160;<br/>
The actual status byte value of the DTC&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
The application can call this&#160;function&#160;to acknowledge&#160;the&#160;successful&#160;search&#160;result&#160;of the statusMask which&#160;<br/>was passed as&#160;a parameter in the callback&#160;<i>ApplDescGetDtcStatusByMask</i>.&#160;<br/>
The parameter pDtcReport is a pointer to&#160;a DTC property structure. Since CANdesc will immediately copy&#160;<br/>the contents&#160;of this structure, the ECU developer can use an automatic variable to save RAM.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;$A9&#160;sub-function&#160;$81.&#160;<br/>
X&#160;&#160;CANdesc must have previously called&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#60"><i>ApplDescGetDtcStatusByMask</i>&#160;</a><br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task contex&#160;<br/>
Table 7-16&#160;&#160;&#160;DescRdiDtcStatusByMaskFound&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>DescRdiDtcStatusByMaskNotFound</b>&#160;(vuint8 dtcSam)&#160;<br/>
<b>Parameter&#160;</b><br/>
dtcSam&#160;<br/>
Represents the status availability mask&#160;of the fault memory manager (i.e.&#160;<br/>which bits&#160;of the status&#160;mask are relevant for the ECU).&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
The application can call this&#160;function&#160;to acknowledge&#160;that there were no (more)&#160;DTCs found that match the&#160;<br/>statusMask which&#160;was passed as&#160;a parameter in the callback&#160;<i>ApplDescGetDtcStatusByMask</i>&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;$A9&#160;sub-function&#160;$81.&#160;<br/>
X&#160;&#160;CANdesc has previously called&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#60"><i>ApplDescGetDtcStatusByMask.</i></a>&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context&#160;<br/>
Table 7-17&#160;&#160;&#160;DescRdiDtcStatusByMaskNotFound&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
61&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=62></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-62_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.12.3&#160;&#160;SendOnChangeDTCCount ($A9 $82)&#160;<br/></b>This service manages the background application monitor which detects&#160;DTC count&#160;<br/>changes. In an effort to more efficiently manage this&#160;functionality,&#160;CANdesc notifies the&#160;<br/>application via function callbacks to&#160;activate/deactivate the monitor.&#160;&#160;<br/>CANdesc processes this service as shown below.&#160;<br/>If the tester sends a request for this service with a non-zero status mask, the DTC count&#160;<br/>monitor shall be activated:&#160;<br/>
<b>sd&#160;Send&#160;on change&#160;DTC&#160;count&#160;request&#160; (Enable)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[StatusM&#160;ask&#160;!=&#160;0]: [USDT&#160;] $A9&#160;$82&#160;[StatusM&#160;ask]<br/>
ApplDescEnableOnChangeDtcCount<br/>
[ResponsePending tim&#160;e =&#160;P2]:&#160;[USDT&#160;]&#160;$7F&#160;$A9 $78<br/>
[ResponsePending&#160;tim&#160;e&#160;=&#160;P3M&#160;ax]:&#160;[USDT&#160;]&#160;$7F&#160;$A9 $78<br/>
DescRdiOnDtcCountChanged(NewCount0)<br/>
[UUDT&#160;]&#160;$82 [NewCount0]<br/>
DescRdiOnDtcCountChanged(NewCount1)<br/>
[UUDT&#160;]&#160;$82 [NewCount1]<br/>
&#160;<br/>
Figure 7-17&#160;&#160;Request $A9 $82 with activation&#160;of the background DTC count&#160;monitor&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
62&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=63></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-63_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
If the tester sends a request for this service with a status mask of zero, the background&#160;<br/>monitoring shall be deactivated:&#160;<br/>
<b>sd&#160;Send&#160;on&#160;change DTC&#160;count&#160;request&#160;&#160;(Disable)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[StatusM&#160;ask&#160;==&#160;0]:&#160;[USDT&#160;]&#160;$A9&#160;$82 [StatusM&#160;ask]<br/>
ApplDescDisableOnChangeDtcCount<br/>
[UUDT&#160;]&#160;$82 $00&#160;$00<br/>
&#160;<br/>
Figure 7-18&#160;&#160;Request $A9 $82 with explicit deactivation of the background DTC&#160;count monitor.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
63&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=64></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-64_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-64_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
Since this service is monitored for tester&#160;present timeouts, when no more $3E requests are&#160;<br/>received the DTC count monitor shall be deactivated:&#160;<br/>
<b>sd&#160;Send&#160;on&#160;change DTC&#160;count&#160;request&#160;&#160;(Timeout)</b><br/>
<b>Tester</b><br/>
<b>CANdesc</b><br/>
<b>Application</b><br/>
[StatusM&#160;ask&#160;!=&#160;0]:&#160;[USDT&#160;]&#160;$A9&#160;$82 [StatusM&#160;ask]<br/>
ApplDescEnableOnChangeDtcCount<br/>
[ResponsePending tim&#160;e&#160;=&#160;P2]:&#160;[USDT&#160;]&#160;$7F&#160;$A9&#160;$78<br/>
[ResponsePending&#160;tim&#160;e&#160;=&#160;P3M&#160;ax]:&#160;[USDT&#160;]&#160;$7F&#160;$A9 $78<br/>
DescRdiOnDtcCountChanged(NewCount0)<br/>
[UUDT&#160;]&#160;$82&#160;[NewCount0]<br/>
DescRdiOnDtcCountChanged(NewCount1)<br/>
[UUDT&#160;]&#160;$82&#160;[NewCount1]<br/>
T&#160;esterPresent&#160;T&#160;im&#160;eout<br/>
ApplDescDisableOnChangeDtcCount<br/>
&#160;<br/>
Figure 7-19&#160;&#160;Request $A9 $82 with deactivation of&#160;the background DTC count&#160;monitor by&#160;timeout.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>In addition&#160;to tester present timeout, CANdesc will react&#160;in the same way on&#160;the&#160;<br/>
&#160;&#160;following events:&#160;<br/>
X&#160;&#160;The tester&#160;sends a&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#31"><i>Service&#160;ReturnToNormalMode ($20)</i>&#160;re</a>quest&#160;<br/>
X&#160;&#160;The application calls the function&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#66"><i>DescRdiDeactivateOnChangeDtcCount</i>.&#160;</a><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>CANdesc can process&#160;this request in parallel to an $A9 $81 request after the first UUDT&#160;<br/>response has been sent.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
64&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=65></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-65_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
Here are the detailed descriptions of&#160;the&#160;APIs used in&#160;the above diagrams:&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescEnableOnChangeDtcCount</b>&#160;(vuint8 statusMask)&#160;<br/>
<b>Parameter&#160;</b><br/>
statusMask&#160;<br/>
The status mask which the&#160;application shall apply as&#160;a filter for the DTC&#160;count&#160;<br/>monitor (i.e.&#160;which DTCs shall be monitored)&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
CANdesc calls this function&#160;to tell the application that it&#160;shall activate&#160;DTC&#160;count monitoring. From this&#160;point&#160;<br/>on, the application shall send the DTC count on change by calling the function&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#66"><i>DescRdiOnDtcCountChanged</i></a>.&#160;<br/>
CANdesc does not store the requested&#160;statusMask; it must be stored by the application&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;$A9&#160;sub-function&#160;$82.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context (same as DescStateTask()).&#160;<br/>
Table 7-18&#160;&#160;&#160;ApplDescEnableOnChangeDtcCount&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>ApplDescDisableOnChangeDtcCount</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
CANdesc calls this function&#160;to notify&#160;the application that&#160;it shall deactivate DTC count monitoring. From this&#160;<br/>point on, the application&#160;shall not send the DTC count on change&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;$A9&#160;sub-function&#160;$82.&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context (same as DescStateTask()).&#160;<br/>
Table 7-19&#160;&#160;&#160;ApplDescDisableOnChangeDtcCount&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
65&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=66></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-66_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>DescRdiOnDtcCountChanged</b>&#160;(vuint16 newCount)&#160;<br/>
<b>Parameter&#160;</b><br/>
newCount&#160;<br/>
The new count of DTCs that match the&#160;mask that was passed as&#160;a parameter&#160;<br/>by the function&#160;<i>ApplDescEnableOnChangeDtcCount</i>.&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
The application can call this&#160;function&#160;to notify CANdesc that the DTC count has changed. CANdesc will&#160;<br/>send&#160;a UUDT&#160;response back to&#160;the tester.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;$A9&#160;sub-function&#160;$82.&#160;<br/>
X&#160;&#160;CANdesc must have previously called the function<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">&#160;<i>ApplDescEnableOnChangeDtcCount.</i></a>&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context&#160;<br/>
Table 7-20&#160;&#160;&#160;DescRdiOnDtcCountChanged&#160;<br/>
&#160;<br/>
<b>Prototype&#160;<br/></b>void&#160;<b>DescRdiDeactivateOnChangeDtcCount</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;</b><br/>
The application can call this&#160;function&#160;to notify CANdesc that it has&#160;stopped DTC count monitoring.&#160;<br/>CANdesc will&#160;call the functi<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">on&#160;<i>ApplDescDisableOnChangeDtcCount</i></a>&#160;to acknowledge this event.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;Only available if the ECU supports&#160;$A9&#160;sub-function&#160;$82.&#160;<br/>
X&#160;&#160;CANdesc must have previously called the function<a href="TechnicalReference_CANdesc_KWP_GMs.html#65">&#160;<i>ApplDescEnableOnChangeDtcCount.</i></a>&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context.&#160;<br/>
Table 7-21&#160;&#160;&#160;DescRdiDeactivateOnChangeDtcCount&#160;<br/>
<b>7.13&#160;&#160;Service ReadDataByPacketIdentifier ($AA)&#160;<br/></b>This service allows the tester to read a&#160;DPID (data packet identifier) either once or&#160;<br/>periodically&#160;with three possible speeds (slow,&#160;medium, or fast). CANdesc completely&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
66&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=67></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-67_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
handles this service. Only the PacketHandlers may be implemented by the application as&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#24">described in section&#160;6.7&#160;The PacketHandler (another type of service processor).&#160;</a><br/>
<b>7.13.1&#160;&#160;Handling undefined use cases&#160;<br/></b>There are some use cases which are not covered or completely described in the GM/Opel&#160;<br/>diagnostic&#160;specification.&#160;The following sections describe&#160;these cases along with the&#160;<br/>resulting CANdesc behaviour. &#160;<br/>
<b>7.13.1.1&#160;&#160;Service $AA handling for undefined dynamically&#160;definable DPIDs&#160;<br/></b>According to GMW-3110 version 1.6, if the tester requests&#160;an undefined dynamically&#160;<br/>definable DPID with service $AA&#160;the result is&#160;undefined. In this situation, CANdesc sends&#160;<br/>a UUDT&#160;response with no&#160;actual data (byte zero is&#160;the DPID number and the remaining&#160;<br/>bytes are padded).&#160;<br/>
<b>7.13.1.2&#160;&#160;Service $AA handling for undefined referenced dynamically&#160;defined PIDs&#160;<br/></b>As mentioned in section&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#32"><i>7.4.1</i>&#160;<i>Reading a dynamically defined&#160;PID (Parameter Identifier),</i></a>&#160;<br/>the undefined PID contained by the DPID will contain no data. In this situation, CANdesc&#160;<br/>sends a UUDT&#160;response with no actual data&#160;(byte zero is the DPID number and the&#160;<br/>remaining bytes are padded).&#160;<br/>
<b>7.13.1.3&#160;&#160;Service $AA handling for unaccessible referenced PIDs&#160;<br/></b>A&#160;dynamically defined DPID references one or&#160;more PIDs. If any of&#160;those PIDs are not&#160;<br/>accessible to the application for any reason&#160;(e.g. security access, current ECU state,&#160;<br/>memory access error,&#160;etc.) at the time&#160;the scheduler needs the data, CANdesc sends a&#160;<br/>UUDT&#160;response with no actual data (byte zero&#160;is the DPID number and the remaining&#160;<br/>bytes are padded).&#160;<br/>
<b>7.14&#160;&#160;Service DeviceControl ($AE)&#160;<br/></b>The application must completely implement&#160;this service. In addition, the GM/Opel&#160;<br/>diagnostic&#160;specification requires that the tester present&#160;timeout monitoring shall be&#160;<br/>activated once a DeviceControl service&#160;has been executed. Since CANdesc manages the&#160;<br/>tester present timer,&#160;the application must call the function&#160;<a href="TechnicalReference_CANdesc_KWP_GMs.html#68"><i>DescActivateS1Timer</i></a>&#160;to fulfill&#160;<br/>this requirement.&#160;The proper location for this&#160;is the PostHandler for every CPID (Control&#160;<br/>Packet Identifier) except 0x00 (reserved for “terminate device control”).&#160;To&#160;facilitate this,&#160;<br/>the ECU developer should select ‘User’&#160;as the PostHandler attribute for these CPIDs in&#160;<br/>CANdela Studio.&#160;These PostHandlers must then evaluate the status parameter (see&#160;<br/>TechnicalReference_CANdesc) and if the result is ok (i.e. CANdesc has successfully sent&#160;<br/>the positive response) the applicat<a href="TechnicalReference_CANdesc_KWP_GMs.html#68">ion must call the function&#160;<i>DescActivateS1Timer</i></a>.&#160;<br/>&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
67&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=68></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-68_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-68_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-68_3.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>To reduce ROM usage and improve run-time, the ECU developer can use&#160;the&#160;<br/>
&#160;&#160;“PostHanlderOverrideName” attribute in CANdelaStudio to define a single PostHandler&#160;<br/>
used by all&#160;CPIDs.&#160;<br/>
Please refer<a href="TechnicalReference_CANdesc_KWP_GMs.html#73">&#160;to section&#160;<i>8.3&#160;Service attributes</i>&#160;for&#160;</a>more details.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>Here is an example how the ECU developer could implement&#160;the PostHandler:&#160;<br/>
&#160;<br/>
Figure 7-20&#160;PostHandler for&#160;“DeviceControl” ($AE)&#160;<br/>
&#160;<br/>
<b>Prototype&#160;</b><br/>
void&#160;<b>DescActivateS1Timer&#160;</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional Description&#160;<br/></b>The application can call this function&#160;to enable tester present&#160;timeout monitoring.&#160;This&#160;function is&#160;<br/>normally only used in the “DeviceControl” ($AE) service PostHandler.&#160;<br/>&#160;<br/>
This function&#160;will not restart the tester present timer!&#160;&#160;Only the tester can reset the timer,&#160;by sending&#160;the&#160;<br/>“TesterPresent” ($3E) service.&#160;<br/>
<b>Particularities and Limitations&#160;</b><br/>
X&#160;&#160;None&#160;<br/>
Call context&#160;<br/>
X&#160;&#160;Background-loop level task context (same as DescStateTask()).&#160;<br/>
Table 7-22&#160;&#160;&#160;DescActivateS1Timer&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
68&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=69></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-69_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-69_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>7.15&#160;&#160;Service TesterPresent ($3E)&#160;<br/></b>CANdesc implements this service by reloading&#160;the tester present timer with the original&#160;<br/>timeout value.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>This service&#160;does not activate tester present timeout monitoring! &#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
69&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=70></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-70_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-70_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>8&#160;&#160;CANdelaStudio default attribute settings&#160;</b><br/>
In order to use the features of CANdesc&#160;described in this document, the ECU developer&#160;<br/>must set the CANdelaStudio attributes appropriately for the&#160;corresponding services and/or&#160;<br/>their instances as described below.&#160;<br/>The ECU developer configures CANdelaStudio attributes on three levels:&#160;<br/>
X<b>&#160;&#160;Diagnostic Class</b>&#160;(like “Ecu identification”, “Security access”, etc.)&#160;<br/>
X<b>&#160;&#160;Diagnostic Instance</b>&#160;(like “(DID $90) Vehicle Identification Number”,&#160;<br/>
“RequestProgrammingModeHighSpeed”, etc.)&#160;<br/>
X<b>&#160;&#160;Service</b>&#160;(like “Read” or “Write” on&#160;<b>Diagnostic Instance</b>&#160;“(DID $90) Vehicle Identification&#160;<br/>
Number”).&#160;<br/>
The picture below illustrates these&#160;three levels in CANdelaStudio:&#160;<br/>
<b>&#160;</b><br/>
Figure 8-1&#160;&#160;CANdelaStudio views&#160;<br/>
Legend: &#160;<br/>
X<b>&#160;&#160;</b>RED: &#160;<br/>
&#160;Diagnostic Class&#160;<br/>
X<b>&#160;&#160;</b>BLUE: &#160;<br/>
&#160;Diagnostic Instance&#160;<br/>
X<b>&#160;&#160;</b>YELLOW:&#160;&#160;&#160;&#160;Service&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
70&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=71></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-71_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-71_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>8.1&#160;</b><br/>
<b>Diagnostic class attributes&#160;</b><br/>
CANdesc is designed to handle certain events&#160;on a diagnostic class basis; therefore, the&#160;<br/>ECU developer must configure the attributes on the diagnostic&#160;class level.&#160;The relevant&#160;<br/>services and their attribute configurations are listed below.&#160;<br/>
&#160;<br/>
Figure 8-2&#160;&#160;Diagnostic Class level attributes&#160;<br/>
<b>Diagnostic Class name&#160;</b><br/>
<b>MainHandler&#160;&#160;PreHandler&#160;</b><br/>
<b>PacketHandler&#160;&#160;PostHandler&#160;</b><br/>
<b>Support (for&#160;&#160;Support (for&#160;&#160;Support&#160;</b><br/>
<b>Support (for&#160;</b><br/>
<b>all Protocol&#160;</b><br/>
<b>all Protocol&#160;</b><br/>
<b>all Protocol&#160;</b><br/>
<b>Service)&#160;</b><br/>
<b>Services)&#160;</b><br/>
<b>Services)&#160;</b><br/>
Failure Record Data –&#160;<br/>
<b>USER&#160;</b><br/>
None None&#160;&#160;None&#160;<br/>
Parameters&#160;<br/>Dynamic Data Packets&#160;<br/>
None&#160;<br/>
None&#160;<br/>
<b>All</b>&#160;<br/>
None&#160;<br/>
Data Packet&#160;<br/>
<b>OEM</b>&#160;<br/>
None&#160;<br/>
<b>All OEM&#160;</b><br/>
Programming mode&#160;<br/>
<b>OEM</b>&#160;<br/>
None None&#160;&#160;<b>OEM</b>&#160;<br/>
Table 8-1&#160;&#160;&#160;Default ‘Diagnostic Class’&#160;attribute settings&#160;<br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
71&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=72></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-72_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-72_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>8.2&#160;</b><br/>
<b>Diagnostic instance attributes&#160;</b><br/>
CANdesc is designed to handle certain events&#160;on a diagnostic instance basis; therefore,&#160;<br/>the ECU developer must configure the attributes on the diagnostic instance level.&#160;The&#160;<br/>relevant services and their attribute configurations are listed below.&#160;<br/>
&#160;<br/>
Figure 8-3&#160;&#160;Diagnostic Instance level attributes&#160;<br/>
&#160;<br/>
<b>Diagnostic Class name where Diagnostic&#160;</b><br/>
<b>PacketHandler Option&#160;</b><br/>
<b>Instances shall be configured&#160;</b><br/>
&#160;<br/>
<b>Default&#160;</b><br/>
<b>Optional&#160;</b><br/>
Data Packet&#160;<br/>
<b>USER Generated&#160;</b><br/>
Table 8-2&#160;&#160;&#160;Default ‘Diagnostic instance’&#160;attribute settings&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
72&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=73></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-73_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-73_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>8.3&#160;</b><br/>
<b>Service attributes&#160;</b><br/>
CANdesc is designed to handle certain events&#160;on a diagnostic service basis;&#160;therefore, the&#160;<br/>ECU developer must configure the attributes&#160;on the diagnostic service level.&#160;The relevant&#160;<br/>services and their attribute configurations are listed below.&#160;<br/>
&#160;<br/>
Figure 8-4&#160;&#160;Service related attributes&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
73&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=74></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-74_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-74_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
&#160;<br/><b>Notes</b>:&#160;<br/>
<b>Service (and&#160;</b><br/>
<b>MainHandler&#160;&#160;PreHandler&#160;&#160;PreHandler&#160;</b><br/>
<b>PostHandler&#160;&#160;PostHandler&#160;</b><br/>
<b>sub-service) ID&#160;&#160;Support (for&#160;&#160;Support &#160;</b><br/>
<b>OverrideName&#160;</b><br/>
<b>Support&#160;</b><br/>
<b>OverrideName&#160;</b><br/>
<b>that shall be&#160;</b><br/>
<b>Service)&#160;</b><br/>
<b>configured&#160;<br/></b>$10 $02&#160;<br/>
<b>Generated&#160;</b><br/>
None &#160;<br/>
<b>OEM&#160;</b><br/>
&#160;<br/>
<b>(User)&#160;</b><br/>
$10 $03&#160;<br/>
<b>Generated&#160;</b><br/>
None &#160;<br/>
<b>OEM</b>&#160;<br/>
&#160;<br/>
<b>(User)</b>&#160;<br/>
$20&#160;<br/>
<b>OEM</b>&#160;<br/>
None&#160;<br/>
<b>&#160;OEM&#160;</b><br/>
<b>&#160;</b><br/>
$28&#160;<br/>
<b>OEM&#160;</b>1)&#160;<br/>
None &#160;<br/>
None&#160;&#160;&#160;<br/>
$3E&#160;<br/>
<b>Generated&#160;</b><br/>
&#160;<br/>
&#160;<br/>
<b>OEM&#160;</b><br/>
&#160;<br/>
<b>(User) &#160;</b><br/>
$A9 $80&#160;<br/>
<b>OEM OEM</b>&#160;<br/>
&#160;None&#160;<br/>
&#160;<br/>
$A9 $81&#160;<br/>
<b>OEM OEM</b>&#160;<br/>
&#160;None&#160;<br/>
&#160;<br/>
$A9 $82&#160;<br/>
<b>OEM&#160;</b><br/>
None &#160;<br/>
<b>OEM</b>&#160;<br/>
&#160;<br/>
$AE $00&#160;<br/>
User&#160;<br/>
None&#160;<br/>
&#160;<br/>
None&#160;<br/>
&#160;<br/>
$AE $01-$FF&#160;<br/>
User&#160;<br/>
None&#160;<br/>
&#160;<br/>
<b>User&#160;</b><br/>
One function for all&#160;<br/>sub-services&#160;(see&#160;<br/><a href="TechnicalReference_CANdesc_KWP_GMs.html#67"><i>Service&#160;<br/>DeviceControl&#160;<br/>($AE)</i>)&#160;</a><br/>
Table 8-3&#160;&#160;&#160;Default ‘Service’&#160;attribute settings&#160;<br/>
<b>&gt;&#160;&#160;</b>All cells defined as “None” can optionally be&#160;replaced only by “User” attributes when&#160;<br/>
desired.&#160;<br/>
<b>&gt;&#160;&#160;</b>Some data access services (e.g. $22,&#160;$1A, $3B and $AA) use “Generated”&#160;<br/>
MainHandler (for $AA&#160;PacketHandler) support.&#160;This eliminates the need for the&#160;<br/>application to correctly order the data&#160;in&#160;the response message (it must only return the&#160;<br/>data; CANdesc will assemble the response in the correct order)&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;</b><br/>
1)&#160;It is not possible to implement the&#160;<b>MainHandler</b>&#160;for service&#160;<b>$28</b>&#160;in your application&#160;<br/>
<b>&#160;&#160;</b>since CANdesc (since version 5.05.04) uses this service callback.&#160;To evaluate the&#160;<br/>
service execution conditions, you can use the&#160;<b>PreHandler</b>&#160;to perform those checks and&#160;<br/>to reject the&#160;service if needed.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
74&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=75></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-75_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-75_2.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>8.4&#160;</b><br/>
<b>State group for the Programming Sequence&#160;</b><br/>
The CANdesc implementation for the programming mode sequence relies on a state&#160;<br/>machine that can be defined as CANdela Studio state group. &#160;<br/>
<b>State Group&#160;</b><br/>
<b>State Qualifier&#160;</b><br/>
<b>Blocked&#160;&#160;Transitions&#160;</b><br/>
<b>Qualifier&#160;</b><br/>
<b>Services&#160;</b><br/>
ProgrammingMode&#160;&#160;Normal&#160;<br/>
$A5 $xx&#160;&#160;$28 -&gt; CommHalted&#160;<br/>
CommHalted&#160;<br/>
$A5 $03&#160;&#160;$A5 $01 -&gt; Requested&#160;<br/>
$A5 $02 -&gt; Requested_HiSpeed&#160;<br/>$20 -&gt; Normal&#160;<br/>
Requested&#160;<br/>
None&#160;<br/>
$A5 $02 -&gt; Requested_HiSpeed&#160;<br/>$A5 $03 -&gt;&#160;Active&#160;<br/>$20 -&gt; Normal&#160;<br/>
Requested_HiSpeed&#160;None&#160;<br/>
$A5 $01 -&gt; Requested&#160;<br/>$A5 $03 -&gt;&#160;Active&#160;<br/>$20 -&gt; Normal&#160;<br/>
Active &#160;<br/>
$A5 $xx&#160;&#160;$20 -&gt; Normal&#160;<br/>
Table 8-4&#160;&#160;&#160;Programming Sequence state group&#160;<br/>
CANdesc will generate these states and transitions even if they do not exist in the CDD&#160;<br/>file. Otherwise, CANdesc will&#160;reuse what is already present, and add/remove all missing&#160;<br/>states and/or transitions.&#160;<br/>This means you cannot change the programming sequence by means of changing&#160;the&#160;<br/>state configuration, but you&#160;<b>can</b>&#160;put the correct sequence in the CDD file (using the exact&#160;<br/>qualifiers from the table above).&#160;This opens up the possibility to block further services from&#160;<br/>executing in any of these states. &#160;<br/>E.g. if you want to block all $AE services&#160;from executing while programming mode is&#160;<br/>‘Active’, you can model this in CANdela Studio, and CANdesc will do the rest for you.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Since the StateGroup ‘ProgrammingMode’&#160;follows the usual&#160;state group&#160;<br/>
&#160;&#160;implementation, all functionality regarding state groups is available for use.&#160;Especially&#160;<br/>
the callback&#160;ApplDescOnTransitionProgrammingMode will notify your application&#160;of any&#160;<br/>state change.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
75&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=76></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-76_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>9&#160;&#160;OBD support&#160;</b><br/>
What is special about&#160;OBD support? &#160;GM/Opel uses extended&#160;addressing for functionally&#160;<br/>addressed enhanced diagnostic services; however, functionally addressed OBD requests&#160;<br/>must use normal addressing. Due to this, CANdesc&#160;uses two&#160;separate reception paths.&#160;<br/>Additionally, the message definition of some OBD services does&#160;not match the generic&#160;<br/>service instance generator used by CANdesc so they can only be supported on the&#160;<br/>protocol service level. &#160;<br/>
<b>9.1&#160;</b><br/>
<b>CAN identifiers&#160;</b><br/>
<b>Enhanced diagnostic services&#160;</b><br/>
GM specifies enhanced diagnostic service requirements in GMW-3110.&#160;<br/>
<b>CAN ID 0x101 - 11-bit extended addressing USDT&#160;</b><br/>
This ID is only used for functionally addressed enhanced diagnostic requests. Functionally&#160;<br/>addressed OBD requests must&#160;use CAN ID 0x7DF.&#160;<br/>
<b>OBD services&#160;</b><br/>
GM uses the OBD service requirements described in ISO15031-5.<b>&#160;</b><br/>
<b>CAN ID 0x7DF - 11-bit normal addressing USDT&#160;</b><br/>
This ID is only used for functionally addressed OBD requests.&#160;Functionally addressed&#160;<br/>enhanced diagnostic requests must use CAN ID 0x101.&#160;<br/>
<b>CAN ID 0x7E0-0x7EF&#160;- 11-bit normal addressing USDT&#160;</b><br/>
These IDs&#160;are used for physically addressed&#160;OBD requests to individual ECUs that&#160;<br/>support OBD services. ECUs using these IDs for OBD services may also elect to use the&#160;<br/>same IDs for physically addressed enhanced diagnostic services; however, ECUs&#160;that do&#160;<br/>not support OBD services may not use these IDs for enhanced diagnostic services.&#160;<br/>
<b>9.2&#160;</b><br/>
<b>Restrictions&#160;</b><br/>
SID $01, $02, $06, $08 and $09 must be handled at the diagnostic class level when the&#160;<br/>‘may be combined’&#160;property is enabled in CANdelaStudio.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
76&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=77></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-77_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>9.3&#160;</b><br/>
<b>CANdelaStudio default attribute settings for OBD services&#160;</b><br/>
<b>9.3.1&#160;&#160;Diagnostic classes&#160;<br/></b>Powertrain diagnostic and freeze&#160;frame data (EOBD) – SID $01 / $02&#160;<br/>Emission related trouble codes – SID $03 / $07 / $04&#160;<br/>Test results for non-continuously monitored systems (EOBD) – SID $06&#160;<br/>Control of on-board system, test,&#160;or component (EOBD) – SID $08&#160;<br/>Vehicle information (EOBD) – SID $09&#160;<br/>&#160;<br/>
<b>Service&#160;</b><br/>
<b>PreHandler&#160;&#160;MainHandler&#160;PostHandler&#160;PacketHandler</b><br/>
<b>ID&#160;</b><br/>
<b>Support&#160;</b><br/>
<b>Support&#160;</b><br/>
<b>Support&#160;</b><br/>
<b>Support&#160;</b><br/>
<b>(On Protocol&#160;</b><br/>
<b>level)&#160;</b><br/>
$01 None&#160;<br/>
<b>User&#160;</b><br/>
None None&#160;<br/>
$02 None&#160;<br/>
<b>User</b>&#160;<br/>
None None&#160;<br/>
$06 None&#160;<br/>
<b>User</b>&#160;<br/>
None None&#160;<br/>
$08 None&#160;<br/>
<b>User</b>&#160;<br/>
None None&#160;<br/>
$09 &#160;<br/>
None&#160;<br/>
<b>User</b>&#160;<br/>
None None&#160;<br/>
Table 9-1&#160;&#160;&#160;Diagnostic class specific&#160;attributes&#160;<br/>
<b>9.4&#160;</b><br/>
<b>CANgen configuration&#160;</b><br/>
<b>9.4.1&#160;&#160;DBC attribute settings for the OBD request&#160;message &#160;<br/></b>A&#160;message cannot be supported by both the Interaction&#160;Layer and CANdesc. For this&#160;<br/>reason, diagnostic messages must have the attribute “GenMsgNoIalSupport” set to “yes”&#160;<br/>(or,&#160;depending on the DBC version,&#160;the attribute “GenMsgILSupport” set to “no”).&#160;The DBC&#160;<br/>author is responsible for setting this attribute.&#160;<br/>
<b>9.4.2&#160;&#160;CANgen version &lt; 4.15.00&#160;<br/></b>In older CANgen versions, no automatic configuration of OBD support is performed so the&#160;<br/>ECU developer must configure it manually:&#160;<br/>For the functional OBD request message (CAN&#160;ID 0x7DF), a precopy function with the&#160;<br/>name&#160;<b>DescOBDReqInd</b>&#160;must be configured (in CANgen&#160;on the “Receive Messages” tab).&#160;<br/>
<b>9.4.3&#160;&#160;CANgen version&#160;≥&#160;4.15.00&#160;<br/></b>Since CANgen version 4.15.00, the DBC author can set the attribute ‘DiagState’&#160;for the&#160;<br/>functional OBD request message (CAN ID&#160;0x7DF) to ‘Yes’.&#160;In this case, CANgen will&#160;<br/>automatically configure&#160;the precopy function.&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
77&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=78></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-78_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>9.4.4&#160;&#160;GENy&#160;configuration&#160;<br/></b>The DBC author can set the attribute ‘DiagState’&#160;for the functional OBD request message&#160;<br/>(CAN ID 0x7DF) to ‘Yes’.&#160;Then, CANdesc configures the precopy&#160;function automatically.&#160;<br/>
<b>9.5&#160;</b><br/>
<b>CANdesc configuration (without a Powertrain CANdela template)&#160;</b><br/>
If the ECU developer is not using a Powertrain template&#160;(no OBD services are available in&#160;<br/>CANdelaStudio) but the ECU must still support OBD services, a workaround is necessary&#160;<br/>to activate the OBD reception path in&#160;CANdesc.&#160;This workaround requires the ECU&#160;<br/>developer to make changes&#160;to the file “CANdelaGenAPI.ini”,&#160;which is located in the&#160;<br/>CANgen executable folder.&#160;<br/>To&#160;override the look up result, modify:&#160;<br/>[GeneratorController]&#160;<br/>OverrideAnyObdServiceDetection&#160;=&#160;[0 - don't (default), 1 - activate OBD support]&#160;<br/>
The OBD services themselves&#160;will be handled by&#160;the application using the ‘user-service’&#160;<br/>feature, which shall be enabled by the same INI file:&#160;<br/>[Misc]&#160;<br/>UseGenericUserServiceHandler&#160;= [0 - don't (default), 1 - activated]&#160;<br/>Optionally, the following entry can be used for post-handler support:&#160;<br/>UseGenericUserServicePostHandler&#160;=&#160;[0 - don't (default), 1 - activated]&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
78&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=79></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-79_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>10 &#160;Debug assertion codes&#160;</b><br/>
The GM/Opel specific&#160;implementation has optional debug code for certain situations where&#160;<br/>the ECU could “hang” or incorrect behavior could occur.&#160;Depending on the debug level&#160;<br/>chosen in the generation tool, the&#160;following cases may be checked:&#160;<br/>
<b>Assertion name&#160;</b><br/>
<b>ID(HEX)&#160;&#160;Description&#160;</b><br/>
kDescAssertInvalidA9Mode&#160;<br/>
91&#160;<br/>
The module has set the $A9 sub-<br/>service iterator incorrectly,&#160;which&#160;<br/>will cause wrong buffer assignment&#160;<br/>when there is parallel processing&#160;<br/>of sub-service $82 with one of the&#160;<br/>$80 and $81 sub-functions.&#160;<br/>
kDescAssertUudtBufferAlreadyUnlocked A0&#160;&#160;CANdesc&#160;received confirmation&#160;<br/>
that a UUDT&#160;response was&#160;<br/>successfully transmitted on the&#160;<br/>bus,&#160;but the internal state machine&#160;<br/>indicates that no transmission was&#160;<br/>in progress.&#160;<br/>
kDescAssertWrongUudtTransmitterHandle&#160;<br/>
A1&#160;<br/>
CANdesc&#160;received confirmation&#160;<br/>that a UUDT&#160;response was&#160;<br/>successfully transmitted on the&#160;<br/>bus, but the transmit handle does&#160;<br/>not match the one that CANdesc&#160;<br/>actually tried to send.&#160;<br/>
kDescAssertUudtBufferStillLocked&#160;<br/>
A2&#160;<br/>
CANdesc&#160;attempted a second&#160;<br/>UUDT&#160;transmission before the&#160;<br/>previous&#160;one was actually&#160;<br/>transmitted on the bus.&#160;<br/>
kDescAssertIllegalPostProgModeId&#160;<br/>
A3&#160;<br/>
CANdesc began the internal post&#160;<br/>processing for a programming&#160;<br/>mode request, but the requested&#160;<br/>programming mode sub-function&#160;<br/>was invalid. &#160;<br/>
Table 10-1&#160;&#160;&#160;Debug assertion&#160;codes&#160;<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
79&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name=80></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/GM_000A_GMLAN3.1MchRH850_Impl/doc/TechnicalReference_CANdesc_KWP_GM-80_1.png"/><br/>
Technical Reference CANdesc KWP&#160;GM&#160;<br/>
&#160;<br/>
<b>11&#160;&#160;Contact&#160;</b><br/>
Please visit our website&#160;for more information:&#160;<br/><b>&gt;&#160;&#160;</b>News&#160;<br/>
<b>&gt;&#160;&#160;</b>Products&#160;<br/>
<b>&gt;&#160;&#160;</b>Demo software&#160;<br/>
<b>&gt;&#160;&#160;</b>Support&#160;<br/>
<b>&gt;&#160;&#160;</b>Training data&#160;<br/>
<b>&gt;&#160;&#160;</b>Addresses&#160;<br/>
<a href="http://www.vector.com/<br/>
©2011, Vector Informatik GmbH&#160;<br/>
&#160;<br/>
80&#160;/ 80<br/>
&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#2">1 History</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#7">2 Related documents</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#8">3 Overview</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#9">4 CANdesc support by diagnostic service</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#13">5 Important application requirements</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#13">5.1 Initialization</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#14">5.2 DeviceControl ($AE) service requirement</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#14">5.3 Update from earlier versions</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#15">6 GM/Opel specific functionality&#160;</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#15">6.1 ECU Address configuration</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#15">6.1.1 Gateway ECUs</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#15">6.1.2 Virtual network management</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#15">6.1.3 Diagnostic activity notification</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#17">6.2 Request validation</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#18">6.3 Timeout events</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#18">6.3.1 Tester present timeout</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#18">6.4 Using the extended negative response</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#19">6.4.1 Sending an extended negative response during service processing</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#20">6.4.2 Sending an unsolicited extended negative response</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#20">6.5 Sending an unsolicited single frame response</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#21">6.6 GM/Opel CANdesc state machine access</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#22">6.6.1 Normal communication state</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#23">6.6.2 Programming mode state</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#24">6.6.3 High speed programming mode state</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#24">6.7 The PacketHandler (another type of service processor)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#25">6.7.1 PacketHandler API</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#29">7 GM/Opel service implementations</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#29">7.1 Service InitiateDiagnosticOperation ($10)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#29">7.1.1 Service DisableAllDTCs ($10 $02)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#30">7.1.2 Service EnableDTCsDuringDeviceControl ($10 $03)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#30">7.2 Service ReadFailureRecordData ($12)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#31">7.2.1 Service ReadFailureRecordIdentifiers ($12 $01)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#31">7.2.2 Service ReadFailureRecordParameters ($12 $02)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#31">7.3 Service ReturnToNormalMode ($20)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#32">7.4 Service ReadDataByParameterIdentifier ($22)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#32">7.4.1 Reading a dynamically defined PID (Parameter Identifier)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#32">7.5 Service SecurityAccess ($27)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#33">7.6 Service DisableNormalCommunication ($28)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#35">7.7 Service DynamicallyDefineMessage ($2C)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#36">7.8 Operations on dynamically definable DPIDs</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#36">7.8.1 Defining a dynamically definable DPID</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#36">7.8.2 Reading a dynamically definable DPID</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#41">7.9 Service DefinePIDByAddress ($2D)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#42">7.10 Operations on dynamically definable PIDs</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#42">7.10.1 Defining a dynamically definable PID</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#44">7.10.2 Reading a dynamically definable PID</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#50">7.11 Service ProgrammingMode ($A5)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#50">7.11.1 Allowing programming mode ($A5 $01/$02)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#51">7.11.2 Entering programming mode ($A5 $03)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#51">7.11.2.1 FBL start on EnterProgrammingMode ($A5 $03)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#52">7.11.2.2 FBL start on RequestDownload ($34)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#52">7.11.2.3 Concluding programming mode</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#53">7.11.3 Considerations when upgrading</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#53">7.12 Service ReadDiagnosticInformation ($A9)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#54">7.12.1 ReadStatusOfDTCByNumber ($A9 $80)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#57">7.12.2 ReadStatusOfDTCByStatusMask ($A9 $81)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#62">7.12.3 SendOnChangeDTCCount ($A9 $82)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#66">7.13 Service ReadDataByPacketIdentifier ($AA)</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.13.1 Handling undefined use cases</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.13.1.1 Service $AA handling for undefined dynamically definable DPIDs</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.13.1.2 Service $AA handling for undefined referenced dynamically defined PIDs</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.13.1.3 Service $AA handling for unaccessible referenced PIDs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#67">7.14 Service DeviceControl ($AE)</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#69">7.15 Service TesterPresent ($3E)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#70">8 CANdelaStudio default attribute settings</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#71">8.1 Diagnostic class attributes</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#72">8.2 Diagnostic instance attributes</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#73">8.3 Service attributes</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#75">8.4 State group for the Programming Sequence</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#76">9 OBD support</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#76">9.1 CAN identifiers</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#76">9.2 Restrictions</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.3 CANdelaStudio default attribute settings for OBD services</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.3.1 Diagnostic classes</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.4 CANgen configuration</a>
<ul>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.4.1 DBC attribute settings for the OBD request message&#160;</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.4.2 CANgen version &lt; 4.15.00</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#77">9.4.3 CANgen version ≥ 4.15.00</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#78">9.4.4 GENy configuration</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#78">9.5 CANdesc configuration (without a Powertrain CANdela template)</a></li>
</ul>
</li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#79">10 &#160;Debug assertion codes</a></li>
<li><a href="TechnicalReference_CANdesc_KWP_GMs.html#80">11 Contact</a></li>
</ul>
<hr/>
</body>
</html>
