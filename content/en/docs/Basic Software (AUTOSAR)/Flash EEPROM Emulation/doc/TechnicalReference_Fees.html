---
title: TechnicalReference_Fees
linkTitle: TechnicalReference_Fees
weight: 10
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-1_1.png"/><br/>
&#160;<br/>
&#160;&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/><b>MICROSAR FEE&#160;<br/></b>Technical Reference&#160;<br/>&#160;<br/>&#160;&#160;<br/>Version&#160;8.02.02&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
Authors&#160;<br/>
Christian Kaiser&#160;<br/>
Status&#160;<br/>
Released&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-2_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Document&#160;Information&#160;</b><br/>
<b>History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Christian Kaiser&#160;<br/>
2012-06-26&#160;<br/>
8.00.00&#160;<br/>
-&#160;<br/>
Removed&#160;revision&#160;history&#160;entries,&#160;due&#160;to&#160;<br/>major&#160;changes in&#160;component.&#160;<br/>
-&#160;&#160;Removed&#160;all&#160;references&#160;to Fee30Inst2&#160;<br/>-&#160;<br/>
Added&#160;Ch.&#160;2.4.2&#160;“Partitions”,&#160;<br/>
-&#160;<br/>
Added&#160;Ch.&#160;4.3.2&#160;“Fee_InitEx”,&#160;updated&#160;Ch.&#160;<br/>4.3.1&#160;<br/>
-&#160;<br/>
Reworked&#160;Ch.&#160;2.3,&#160;Ch.&#160;2.6,&#160;Ch.&#160;2.10,&#160;Ch.&#160;<br/>3.1.1,&#160;4.4.1,&#160;Ch.&#160;5&#160;&#160;<br/>
-&#160;<br/>
Changes&#160;throughout&#160;the&#160;document:&#160;<br/>introduction&#160;of&#160;partitions&#160;<br/>
-&#160;<br/>
Added&#160;Ch.&#160;6.3.4&#160;<br/>
-&#160;&#160;Added&#160;Ch.&#160;2.4.3.1&#160;<br/>
Christian Kaiser&#160;<br/>
2012-09-20&#160;<br/>
8.00.01&#160;<br/>
-&#160;<br/>
Minor&#160;editorial&#160;changes&#160;in Ch.&#160;5&#160;<br/>
-&#160;<br/>
Added&#160;Ch.&#160;5.2.1&#160;<br/>
Christian&#160;Kaiser&#160;<br/>
2013-03-05&#160;<br/>
8.00.02&#160;<br/>
-&#160;<br/>
Ch.&#160;1:&#160;&#160;AUTOSAR&#160;version(s)&#160;<br/>
-&#160;<br/>
Ch.&#160;6.3.1:&#160;maximum&#160;number&#160;of&#160;Partitions&#160;<br/>
Christian Kaiser&#160;<br/>
2014-03-11&#160;<br/>
8.00.03&#160;<br/>
-&#160;<br/>
Editorial&#160;changes&#160;(rework&#160;of&#160;review&#160;<br/>findings)&#160;<br/>
-&#160;<br/>
Ch.&#160;5.1.5.5:&#160;corrected&#160;description of&#160;<br/>“Suspend Long”&#160;<br/>
-&#160;<br/>
Ch.&#160;3.5:&#160;Critical&#160;Section&#160;description&#160;<br/>
-&#160;<br/>
Ch.&#160;1.1&#160;–&#160;updated&#160;figure,&#160;added notes.&#160;<br/>
Claudia&#160;Mausz&#160;<br/>
2015-02-13&#160;<br/>
8.01.00&#160;<br/>
-&#160;<br/>
Add&#160;new&#160;chapter:&#160;<br/><a href="TechnicalReference_Fees.html#34">&#160;2.12&#160;Fee_MainFunction&#160;Triggering&#160;</a><br/>
Christian Kaiser&#160;<br/>
2016-01-13&#160;<br/>
8.02.00&#160;<br/>
-&#160;<br/>
Ch.&#160;5.1.5.3:&#160;Corrected&#160;requirements&#160;on&#160;<br/>“Internal&#160;Buffer&#160;Size”&#160;configuration&#160;<br/>
-&#160;<br/>
Ch.&#160;2.6.1.1:&#160;Updated&#160;“parameter&#160;checks”&#160;<br/>table&#160;<br/>
-&#160;<br/>
Ch.:&#160;3.1.1:&#160;Updated&#160;deliverables table&#160;&#160;<br/>
-&#160;<br/>
Ch.:&#160;4.3.2,&#160;4.3.3,&#160;4.3.11:&#160;Updated&#160;<br/>descriptions.&#160;<br/>
-&#160;<br/>
Ch.&#160;5.1.5.1:&#160;Updated&#160;list&#160;of&#160;“Error&#160;detection&#160;<br/>switches”&#160;<br/>
Christian Kaiser&#160;<br/>
2016-07-27&#160;<br/>
8.02.01&#160;<br/>
-&#160;<br/>
Ch.&#160;6.3.16:&#160;Behavior&#160;of&#160;<br/>Fee_ForceSectorSwitch&#160;<br/>
Christian Kaiser&#160;<br/>
2016-08-31&#160;<br/>
8.02.02&#160;<br/>
-&#160;<br/>
Ch.&#160;4.3.6:&#160;internal&#160;behavior&#160;of&#160;Fee_Cancel&#160;<br/>
<b>Reference&#160;Documents&#160;</b><br/>
<b>No.&#160;</b><br/>
<b>Title&#160;</b><br/>
<b>Version&#160;</b><br/>
[1]&#160;&#160;AUTOSAR_SWS_Flash_EEPROM_Emulation.pdf&#160;<br/>
--&#160;<br/>
[2]&#160;&#160;AUTOSAR_SWS_DET.pdf&#160;<br/>
V2.2.1&#160;<br/>
[3]&#160;&#160;AUTOSAR_BasicSoftwareModules.pdf&#160;<br/>
V1.3.0&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
2&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=3></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-3_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-3_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Please&#160;note&#160;<br/></b>We&#160;have configured&#160;the&#160;programs&#160;in&#160;accordance&#160;with your&#160;specifications&#160;in the&#160;<br/>
<b>&#160;&#160;</b>questionnaire.&#160;Whereas&#160;the&#160;programs&#160;do&#160;support&#160;other&#160;configurations&#160;than&#160;the&#160;one&#160;<br/>
specified&#160;in your&#160;questionnaire,&#160;Vector´s&#160;release&#160;of&#160;the&#160;programs&#160;delivered to&#160;your&#160;<br/>company&#160;is&#160;expressly&#160;restricted&#160;to&#160;the&#160;configuration&#160;you&#160;have specified&#160;in&#160;the&#160;<br/>questionnaire.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
3&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-4_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Contents&#160;</b><br/>
<a href="TechnicalReference_Fees.html#10"><b>1</b>&#160;</a><br/>
<a href="TechnicalReference_Fees.html#10"><b>Introduction.................................................................................................................&#160;10</b>&#160;<br/></a><a href="TechnicalReference_Fees.html#11">1.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#11">Architecture&#160;Overview&#160;......................................................................................&#160;11&#160;</a><br/>
<a href="TechnicalReference_Fees.html#13"><b>2</b>&#160;</a><br/>
<a href="TechnicalReference_Fees.html#13"><b>Functional&#160;Description&#160;...............................................................................................&#160;13</b>&#160;<br/>2.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#13">Features&#160;..........................................................................................................&#160;13&#160;</a><br/>
<a href="TechnicalReference_Fees.html#14">2.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#14">Initialization&#160;......................................................................................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_Fees.html#15">2.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#15">States&#160;..............................................................................................................&#160;15&#160;<br/>2.3.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#15">Module States&#160;..................................................................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_Fees.html#17">2.3.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#17">Job&#160;States/Results&#160;...........................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_Fees.html#18">2.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#18">Flash&#160;organization&#160;............................................................................................&#160;18&#160;<br/></a><a href="TechnicalReference_Fees.html#19">2.4.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#19">Block&#160;Handling&#160;.................................................................................&#160;19&#160;<br/>2.4.1.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#19">Block&#160;Chunks&#160;.................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_Fees.html#19">2.4.1.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#19">Block&#160;Search..................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_Fees.html#19">2.4.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#19">Partitions&#160;..........................................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_Fees.html#20">2.4.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#20">Logical&#160;Sectors&#160;................................................................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_Fees.html#21">2.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#21">Processing&#160;.......................................................................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_Fees.html#21">2.5.1.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#21">Initial&#160;processing&#160;............................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_Fees.html#22">2.5.1.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#22">Processing&#160;of&#160;Read&#160;Job&#160;.................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_Fees.html#22">2.5.1.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#22">Processing&#160;of&#160;Write&#160;Job&#160;.................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_Fees.html#22">2.5.1.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#22">Processing&#160;of&#160;InvalidateBlock&#160;Job&#160;..................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_Fees.html#22">2.5.1.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#22">Processing&#160;of&#160;EraseImmediateBlock Job&#160;.......................&#160;22&#160;</a><br/>
<a href="TechnicalReference_Fees.html#22">2.5.1.6&#160;</a><br/>
<a href="TechnicalReference_Fees.html#22">Processing&#160;of&#160;GetEraseCycle Job&#160;..................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_Fees.html#23">2.5.1.7&#160;</a><br/>
<a href="TechnicalReference_Fees.html#23">Processing&#160;of&#160;GetWriteCycle Job&#160;...................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_Fees.html#23">2.6&#160;</a><br/>
<a href="TechnicalReference_Fees.html#23">Error&#160;Handling&#160;..................................................................................................&#160;23&#160;<br/>2.6.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#23">Development&#160;Error&#160;Reporting&#160;...........................................................&#160;23&#160;<br/></a><a href="TechnicalReference_Fees.html#25">2.6.1.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#25">Parameter&#160;Checking&#160;......................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_Fees.html#26">2.6.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#26">Production Code&#160;Error&#160;Reporting&#160;.....................................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_Fees.html#26">2.6.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#26">Error&#160;notification&#160;...............................................................................&#160;26&#160;</a><br/>
<a href="TechnicalReference_Fees.html#27">2.7&#160;</a><br/>
<a href="TechnicalReference_Fees.html#27">Sector&#160;Switch&#160;...................................................................................................&#160;27&#160;<br/>2.7.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#27">Background&#160;Sector&#160;Switch (BSS)&#160;.....................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_Fees.html#27">2.7.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#27">Foreground&#160;Sector&#160;Switch (FSS)......................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_Fees.html#28">2.7.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#28">Sector&#160;Overflow&#160;...............................................................................&#160;28&#160;</a><br/>
<a href="TechnicalReference_Fees.html#28">2.7.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#28">Sector&#160;switch reserves and thresholds&#160;.............................................&#160;28&#160;</a><br/>
<a href="TechnicalReference_Fees.html#29">2.7.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#29">Background&#160;Sector&#160;Switch Reserve/Threshold&#160;................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_Fees.html#29">2.7.6&#160;</a><br/>
<a href="TechnicalReference_Fees.html#29">Foreground&#160;Sector&#160;Switch/Threshold&#160;...............................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_Fees.html#30">2.8&#160;</a><br/>
<a href="TechnicalReference_Fees.html#30">Data&#160;Conversion&#160;..............................................................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_Fees.html#31">2.9&#160;</a><br/>
<a href="TechnicalReference_Fees.html#31">Flash&#160;Page&#160;Size impacts&#160;..................................................................................&#160;31&#160;</a><br/>
<a href="TechnicalReference_Fees.html#31">2.10&#160;</a><br/>
<a href="TechnicalReference_Fees.html#31">Services&#160;for&#160;handling&#160;under-voltage situations&#160;.................................................&#160;31&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
4&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=5></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-5_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<a href="TechnicalReference_Fees.html#32">2.11&#160;</a><br/>
<a href="TechnicalReference_Fees.html#32">Critical&#160;Data&#160;Blocks&#160;..........................................................................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_Fees.html#34">2.12&#160;</a><br/>
<a href="TechnicalReference_Fees.html#34">Fee_MainFunction&#160;Triggering&#160;..........................................................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_Fees.html#35"><b>3</b>&#160;</a><br/>
<a href="TechnicalReference_Fees.html#35"><b>Integration&#160;...................................................................................................................&#160;35</b>&#160;<br/>3.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#35">Scope of&#160;Delivery&#160;.............................................................................................&#160;35&#160;<br/>3.1.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#35">Static Files&#160;.......................................................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_Fees.html#36">3.1.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#36">Dynamic&#160;Files&#160;..................................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_Fees.html#36">3.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#36">Compiler&#160;Abstraction&#160;and Memory&#160;Mapping&#160;.....................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_Fees.html#38">3.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#38">Dependencies on&#160;SW&#160;Modules&#160;........................................................................&#160;38&#160;<br/>3.3.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#38">OSEK/AUTOSAR&#160;OS&#160;.......................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_Fees.html#38">3.3.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#38">Module SchM&#160;...................................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_Fees.html#38">3.3.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#38">Module Det&#160;......................................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_Fees.html#38">3.3.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#38">Module Fls&#160;.......................................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_Fees.html#39">3.3.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#39">Callback&#160;Functions&#160;...........................................................................&#160;39&#160;<br/>3.3.5.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#39">Lower&#160;layer&#160;interaction&#160;...................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_Fees.html#39">3.3.5.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#39">Upper&#160;layer&#160;interaction&#160;...................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_Fees.html#40">3.3.5.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#40">User&#160;Error&#160;Callback........................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_Fees.html#41">3.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#41">Dependencies on&#160;HW&#160;modules&#160;........................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_Fees.html#41">3.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#41">Critical&#160;Sections&#160;...............................................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_Fees.html#42"><b>4</b>&#160;</a><br/>
<a href="TechnicalReference_Fees.html#42"><b>API&#160;Description&#160;...........................................................................................................&#160;42</b>&#160;<br/>4.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#42">Interfaces&#160;Overview&#160;.........................................................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_Fees.html#42">4.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#42">Type&#160;Definitions&#160;...............................................................................................&#160;42&#160;<br/>4.2.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#42">Fee_SectorSwitchStatusType&#160;..........................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_Fees.html#42">4.2.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#42">Fee_SectorErrorType&#160;.......................................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_Fees.html#44">4.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#44">Services provided by&#160;FEE&#160;................................................................................&#160;44&#160;<br/>4.3.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#44">Fee_Init&#160;............................................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_Fees.html#45">4.3.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#45">Fee_InitEx&#160;........................................................................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_Fees.html#45">4.3.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#45">Fee_SetMode&#160;..................................................................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_Fees.html#47">4.3.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#47">Fee_Read&#160;........................................................................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_Fees.html#48">4.3.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#48">Fee_Write&#160;........................................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_Fees.html#49">4.3.6&#160;</a><br/>
<a href="TechnicalReference_Fees.html#49">Fee_Cancel&#160;.....................................................................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_Fees.html#50">4.3.7&#160;</a><br/>
<a href="TechnicalReference_Fees.html#50">Fee_GetStatus&#160;.................................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_Fees.html#50">4.3.8&#160;</a><br/>
<a href="TechnicalReference_Fees.html#50">Fee_GetJobResult&#160;...........................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_Fees.html#51">4.3.9&#160;</a><br/>
<a href="TechnicalReference_Fees.html#51">Fee_InvalidateBlock&#160;.........................................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_Fees.html#52">4.3.10&#160;</a><br/>
<a href="TechnicalReference_Fees.html#52">Fee_GetVersionInfo&#160;.........................................................................&#160;52&#160;</a><br/>
<a href="TechnicalReference_Fees.html#52">4.3.11&#160;</a><br/>
<a href="TechnicalReference_Fees.html#52">Fee_EraseImmediateBlock&#160;..............................................................&#160;52&#160;</a><br/>
<a href="TechnicalReference_Fees.html#53">4.3.12&#160;</a><br/>
<a href="TechnicalReference_Fees.html#53">Fee_MainFunction&#160;...........................................................................&#160;53&#160;</a><br/>
<a href="TechnicalReference_Fees.html#54">4.3.13&#160;</a><br/>
<a href="TechnicalReference_Fees.html#54">Fee_GetEraseCycle&#160;.........................................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_Fees.html#55">4.3.14&#160;</a><br/>
<a href="TechnicalReference_Fees.html#55">Fee_GetWriteCycle&#160;..........................................................................&#160;55&#160;</a><br/>
<a href="TechnicalReference_Fees.html#56">4.3.15&#160;</a><br/>
<a href="TechnicalReference_Fees.html#56">Fee_GetSectorSwitchStatus&#160;............................................................&#160;56&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
5&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=6></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-6_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<a href="TechnicalReference_Fees.html#58">4.3.17&#160;</a><br/>
<a href="TechnicalReference_Fees.html#58">Fee_ForceSectorSwitch&#160;...................................................................&#160;58&#160;</a><br/>
<a href="TechnicalReference_Fees.html#59">4.3.18&#160;</a><br/>
<a href="TechnicalReference_Fees.html#59">Fee_ConvertBlockConfig&#160;.................................................................&#160;59&#160;</a><br/>
<a href="TechnicalReference_Fees.html#61">4.3.19&#160;</a><br/>
<a href="TechnicalReference_Fees.html#61">Fee_SuspendWrites&#160;.........................................................................&#160;61&#160;</a><br/>
<a href="TechnicalReference_Fees.html#61">4.3.20&#160;</a><br/>
<a href="TechnicalReference_Fees.html#61">Fee_ResumeWrites&#160;.........................................................................&#160;61&#160;</a><br/>
<a href="TechnicalReference_Fees.html#62">4.3.21&#160;</a><br/>
<a href="TechnicalReference_Fees.html#62">Fee_DisableFss&#160;...............................................................................&#160;62&#160;</a><br/>
<a href="TechnicalReference_Fees.html#63">4.3.22&#160;</a><br/>
<a href="TechnicalReference_Fees.html#63">Fee_EnableFss&#160;................................................................................&#160;63&#160;</a><br/>
<a href="TechnicalReference_Fees.html#63">4.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#63">Services used by&#160;FEE&#160;......................................................................................&#160;63&#160;<br/></a><a href="TechnicalReference_Fees.html#64">4.4.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#64">Data&#160;Conversion Callback&#160;................................................................&#160;64&#160;</a><br/>
<a href="TechnicalReference_Fees.html#65">4.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#65">Callback&#160;Functions&#160;...........................................................................................&#160;65&#160;<br/>4.5.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#65">Fee_JobEndNotification&#160;...................................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_Fees.html#65">4.5.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#65">Fee_JobErrorNotification&#160;.................................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_Fees.html#66">4.6&#160;</a><br/>
<a href="TechnicalReference_Fees.html#66">Configurable Interfaces&#160;....................................................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_Fees.html#67"><b>5</b>&#160;</a><br/>
<a href="TechnicalReference_Fees.html#67"><b>Configuration&#160;..............................................................................................................&#160;67</b>&#160;<br/>5.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#67">Configuration with DaVinci&#160;Configurator&#160;...........................................................&#160;67&#160;<br/>5.1.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#67">Start&#160;configuration&#160;of&#160;the&#160;FEE&#160;..........................................................&#160;67&#160;</a><br/>
<a href="TechnicalReference_Fees.html#67">5.1.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#67">Useful&#160;Chunk-Sizes (instance counts)&#160;..............................................&#160;67&#160;</a><br/>
<a href="TechnicalReference_Fees.html#69">5.1.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#69">Update of&#160;block&#160;configuration&#160;...........................................................&#160;69&#160;</a><br/>
<a href="TechnicalReference_Fees.html#69">5.1.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#69">FEE&#160;Configuration&#160;tab&#160;......................................................................&#160;69&#160;</a><br/>
<a href="TechnicalReference_Fees.html#73">5.1.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#73">General&#160;Settings&#160;tab&#160;........................................................................&#160;73&#160;<br/>5.1.5.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#73">Error&#160;Detection&#160;–&#160;Development&#160;Mode&#160;............................&#160;73&#160;</a><br/>
<a href="TechnicalReference_Fees.html#73">5.1.5.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#73">Area&#160;“Error&#160;Callback”&#160;.....................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_Fees.html#74">5.1.5.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#74">Area&#160;Buffer.....................................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_Fees.html#74">5.1.5.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#74">Area&#160;“Upper&#160;Layer”&#160;........................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_Fees.html#74">5.1.5.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#74">Area&#160;“Critical&#160;Section&#160;Handling”&#160;.....................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_Fees.html#75">5.1.6&#160;</a><br/>
<a href="TechnicalReference_Fees.html#75">Partitions&#160;..........................................................................................&#160;75&#160;<br/></a><a href="TechnicalReference_Fees.html#77">5.1.6.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#77">Area&#160;“Management”&#160;.......................................................&#160;77&#160;</a><br/>
<a href="TechnicalReference_Fees.html#77">5.1.6.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#77">Area&#160;“Lower&#160;Layer”&#160;........................................................&#160;77&#160;</a><br/>
<a href="TechnicalReference_Fees.html#78">5.1.7&#160;</a><br/>
<a href="TechnicalReference_Fees.html#78">Module&#160;API&#160;tab&#160;.................................................................................&#160;78&#160;<br/>5.1.7.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#78">API&#160;Configuration&#160;...........................................................&#160;78&#160;</a><br/>
<a href="TechnicalReference_Fees.html#79">5.1.7.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#79">Provided&#160;API&#160;..................................................................&#160;79&#160;</a><br/>
<a href="TechnicalReference_Fees.html#79">5.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#79">Configuration Parameters&#160;only&#160;visible in&#160;GCE&#160;..................................................&#160;79&#160;<br/>5.2.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#79">Fls&#160;API&#160;deviating&#160;from&#160;AUTOSAR&#160;naming&#160;convention&#160;......................&#160;79&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81"><b>6</b>&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81"><b>AUTOSAR&#160;Standard&#160;Compliance...............................................................................&#160;81</b>&#160;<br/>6.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">Deviations&#160;........................................................................................................&#160;81&#160;<br/>6.1.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">Maximum&#160;Blocking&#160;Time&#160;..................................................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">6.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">Additions/&#160;Extensions&#160;.......................................................................................&#160;81&#160;<br/>6.2.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">Parameter&#160;Checking&#160;........................................................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">6.2.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">Fee_InitEx&#160;........................................................................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">6.2.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">GetEraseCycle&#160;.................................................................................&#160;81&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
6&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-7_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<a href="TechnicalReference_Fees.html#81">6.2.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">GetWriteCycle&#160;..................................................................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">6.2.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">GetSectorSwitchStatus&#160;....................................................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">6.2.6&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">ForceSectorSwitch&#160;...........................................................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">6.2.7&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">Fee_ConvertBlockConfig&#160;.................................................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">6.2.8&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">Fee_SuspendWrites&#160;/&#160;Fee_ResumeWrites&#160;.......................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">6.2.9&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">Fee_EnableFss&#160;/&#160;Fee_DisableFss&#160;...................................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">6.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">Limitations........................................................................................................&#160;81&#160;<br/>6.3.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#81">Partitions&#160;..........................................................................................&#160;81&#160;</a><br/>
<a href="TechnicalReference_Fees.html#82">6.3.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#82">Flash&#160;Usage&#160;.....................................................................................&#160;82&#160;</a><br/>
<a href="TechnicalReference_Fees.html#82">6.3.3&#160;</a><br/>
<a href="TechnicalReference_Fees.html#82">Performance&#160;....................................................................................&#160;82&#160;</a><br/>
<a href="TechnicalReference_Fees.html#82">6.3.4&#160;</a><br/>
<a href="TechnicalReference_Fees.html#82">Aborts/Resets&#160;..................................................................................&#160;82&#160;</a><br/>
<a href="TechnicalReference_Fees.html#83">6.3.5&#160;</a><br/>
<a href="TechnicalReference_Fees.html#83">Write Cycle and Erase&#160;Cycle Counters&#160;............................................&#160;83&#160;</a><br/>
<a href="TechnicalReference_Fees.html#84"><b>7</b>&#160;</a><br/>
<a href="TechnicalReference_Fees.html#84"><b>Glossary&#160;and&#160;Abbreviations&#160;......................................................................................&#160;84</b>&#160;<br/>7.1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#84">Glossary&#160;..........................................................................................................&#160;84&#160;</a><br/>
<a href="TechnicalReference_Fees.html#84">7.2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#84">Abbreviations&#160;...................................................................................................&#160;84&#160;</a><br/>
<a href="TechnicalReference_Fees.html#86"><b>8</b>&#160;</a><br/>
<a href="TechnicalReference_Fees.html#86"><b>Contact&#160;........................................................................................................................&#160;86</b>&#160;</a><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
7&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=8></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-8_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Illustrations&#160;</b><br/>
<a href="TechnicalReference_Fees.html#11">1-1&#160;</a><br/>
<a href="TechnicalReference_Fees.html#11">AUTOSAR&#160;architecture&#160;.............................................................................&#160;11&#160;</a><br/>
<a href="TechnicalReference_Fees.html#12">Figure&#160;1-2&#160;</a><br/>
<a href="TechnicalReference_Fees.html#12">FEE&#160;in a&#160;typical&#160;(AUTOSAR)&#160;SW&#160;architecture&#160;..........................................&#160;12&#160;</a><br/>
<a href="TechnicalReference_Fees.html#16">Figure&#160;2-1 FEE&#160;Module States&#160;.............................................................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_Fees.html#18">Figure&#160;2-2 From&#160;User&#160;Blocks&#160;to Flash&#160;Sectors&#160;.....................................................................&#160;18&#160;</a><br/>
<b>&#160;</b><br/>
<b>Tables&#160;<br/></b><a href="TechnicalReference_Fees.html#13">Table&#160;2-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#13">Supported&#160;SWS&#160;features&#160;..........................................................................&#160;13&#160;</a><br/>
<a href="TechnicalReference_Fees.html#13">Table&#160;2-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#13">Not&#160;supported&#160;SWS&#160;features&#160;....................................................................&#160;13&#160;</a><br/>
<a href="TechnicalReference_Fees.html#15">Table&#160;2-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#15">Module states&#160;...........................................................................................&#160;15&#160;</a><br/>
<a href="TechnicalReference_Fees.html#17">Table&#160;2-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#17">Job&#160;results&#160;................................................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_Fees.html#24">Table&#160;2-5&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#24">Mapping&#160;of&#160;service IDs&#160;to services&#160;...........................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_Fees.html#24">Table&#160;2-6&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#24">Errors&#160;reported&#160;to DET&#160;.............................................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_Fees.html#26">Table&#160;2-7&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#26">Development&#160;Error&#160;detection:&#160;Assignment&#160;of&#160;checks&#160;to&#160;services&#160;..............&#160;26&#160;</a><br/>
<a href="TechnicalReference_Fees.html#27">Table&#160;2-8&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#27">Det_ReportError&#160;.......................................................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_Fees.html#35">Table&#160;3-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#35">Static&#160;files&#160;.................................................................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_Fees.html#36">Table&#160;3-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#36">Generated&#160;files&#160;.........................................................................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_Fees.html#36">Table&#160;3-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#36">Compiler&#160;abstraction&#160;and&#160;memory&#160;mapping&#160;..............................................&#160;36&#160;</a><br/>
<a href="TechnicalReference_Fees.html#41">Table&#160;3-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#41">Error&#160;Codes and&#160;FEE’s&#160;default&#160;behavior&#160;...................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_Fees.html#42">Table&#160;4-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#42">Fee_SectorSwitchStatusType&#160;...................................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_Fees.html#43">Table&#160;4-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#43">Fee_SectorError&#160;Type&#160;..............................................................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_Fees.html#44">Table&#160;4-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#44">Fee_Init&#160;....................................................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_Fees.html#45">Table&#160;4-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#45">Fee_InitEx&#160;................................................................................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_Fees.html#46">Table&#160;4-5&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#46">Fee_SetMode&#160;...........................................................................................&#160;46&#160;</a><br/>
<a href="TechnicalReference_Fees.html#47">Table&#160;4-6&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#47">Fee_Read&#160;.................................................................................................&#160;47&#160;</a><br/>
<a href="TechnicalReference_Fees.html#48">Table&#160;4-7&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#48">Fee_Write&#160;.................................................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_Fees.html#49">Table&#160;4-8&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#49">Fee_Cancel&#160;..............................................................................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_Fees.html#50">Table&#160;4-9&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#50">Fee_GetStatus&#160;.........................................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_Fees.html#51">Table&#160;4-10&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#51">Fee_GetJobResult&#160;....................................................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_Fees.html#51">Table&#160;4-11&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#51">Fee_InvalidateBlock&#160;.................................................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_Fees.html#52">Table&#160;4-12&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#52">Fee_GetVersionInfo&#160;..................................................................................&#160;52&#160;</a><br/>
<a href="TechnicalReference_Fees.html#53">Table&#160;4-13&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#53">Fee_EraseImmediateBlock&#160;.......................................................................&#160;53&#160;</a><br/>
<a href="TechnicalReference_Fees.html#54">Table&#160;4-14&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#54">Fee_MainFunction&#160;....................................................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_Fees.html#55">Table&#160;4-15&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#55">Fee_GetEraseCycle&#160;.................................................................................&#160;55&#160;</a><br/>
<a href="TechnicalReference_Fees.html#56">Table&#160;4-16&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#56">Fee_GetWriteCycle&#160;..................................................................................&#160;56&#160;</a><br/>
<a href="TechnicalReference_Fees.html#57">Table&#160;4-17&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#57">Fee_GetSectorSwitchStatus&#160;.....................................................................&#160;57&#160;</a><br/>
<a href="TechnicalReference_Fees.html#59">Table&#160;4-18&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#59">Fee_ForceSectorSwitch&#160;...........................................................................&#160;59&#160;</a><br/>
<a href="TechnicalReference_Fees.html#61">Table&#160;4-19&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#61">Fee_ConvertBlockConfig&#160;..........................................................................&#160;61&#160;</a><br/>
<a href="TechnicalReference_Fees.html#61">Table&#160;4-20&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#61">Fee_SuspendWrites&#160;.................................................................................&#160;61&#160;</a><br/>
<a href="TechnicalReference_Fees.html#62">Table&#160;4-21&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#62">Fee_ResumeWrites&#160;..................................................................................&#160;62&#160;</a><br/>
<a href="TechnicalReference_Fees.html#62">Table&#160;4-22&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#62">Fee_DisableFss&#160;........................................................................................&#160;62&#160;</a><br/>
<a href="TechnicalReference_Fees.html#63">Table&#160;4-23&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#63">Fee_EnableFss&#160;........................................................................................&#160;63&#160;</a><br/>
<a href="TechnicalReference_Fees.html#64">Table&#160;4-24&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#64">Services used by&#160;the&#160;FEE.........................................................................&#160;64&#160;</a><br/>
<a href="TechnicalReference_Fees.html#65">Table&#160;4-25&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#65">User&#160;defined&#160;conversion&#160;callback&#160;.............................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_Fees.html#65">Table&#160;4-26&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#65">Fee_JobEndNotification&#160;............................................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_Fees.html#66">Table&#160;4-27&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#66">Fee_JobErrorNotification&#160;..........................................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_Fees.html#66">Table&#160;4-28&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#66">Configurable interfaces&#160;.............................................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_Fees.html#72">Table&#160;5-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#72">Fee configuration&#160;......................................................................................&#160;72&#160;</a><br/>
<a href="TechnicalReference_Fees.html#73">Table&#160;5-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#73">Error&#160;Detection&#160;–&#160;Development&#160;Mode&#160;.......................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_Fees.html#74">Table&#160;5-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#74">Error&#160;Callback&#160;...........................................................................................&#160;74&#160;</a><br/>
<a href="TechnicalReference_Fees.html#74">Table&#160;5-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#74">Upper&#160;Layer&#160;..............................................................................................&#160;74&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
8&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=9></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-9_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<a href="TechnicalReference_Fees.html#75">Table&#160;5-5&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#75">Critical&#160;Section Services&#160;...........................................................................&#160;75&#160;</a><br/>
<a href="TechnicalReference_Fees.html#76">Table&#160;5-6&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#76">Lower&#160;Layer&#160;..............................................................................................&#160;76&#160;</a><br/>
<a href="TechnicalReference_Fees.html#77">Table&#160;5-7&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#77">sector&#160;switch reserve&#160;................................................................................&#160;77&#160;</a><br/>
<a href="TechnicalReference_Fees.html#77">Table&#160;5-8&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#77">Lower&#160;Layer&#160;..............................................................................................&#160;77&#160;</a><br/>
<a href="TechnicalReference_Fees.html#78">Table&#160;5-9&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#78">API&#160;Configuration&#160;.....................................................................................&#160;78&#160;</a><br/>
<a href="TechnicalReference_Fees.html#79">Table&#160;5-10&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#79">Provided&#160;API&#160;.............................................................................................&#160;79&#160;</a><br/>
<a href="TechnicalReference_Fees.html#79">Table&#160;5-11&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#79">Parameters&#160;only&#160;visible in GCE&#160;view.&#160;.......................................................&#160;79&#160;</a><br/>
<a href="TechnicalReference_Fees.html#84">Table&#160;7-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#84">Glossary&#160;...................................................................................................&#160;84&#160;</a><br/>
<a href="TechnicalReference_Fees.html#85">Table&#160;7-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Fees.html#85">Abbreviations&#160;............................................................................................&#160;85&#160;</a><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
9&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-10_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>1&#160;&#160;Introduction&#160;</b><br/>
This&#160;&#160;document&#160;&#160;describes&#160;&#160;the&#160;&#160;functionality,&#160;API&#160;&#160;and&#160;&#160;configuration&#160;&#160;of&#160;&#160;the&#160;AUTOSAR&#160;&#160;BSW&#160;<br/>module&#160;FEE&#160;as&#160;specified&#160;in<a href="TechnicalReference_Fees.html#2">&#160;[1].&#160;</a>&#160;<br/>
&#160;<br/>
<b>Supported&#160;AUTOSAR&#160;R<a href="TechnicalReference_Fees.html#10">elease*:</a></b><b>&#160;</b><br/>
3&#160;and 4&#160;<br/>
<b>Supported&#160;Configuration&#160;Variants:&#160;</b><br/>
link-time&#160;with&#160;AUTOSAR&#160;3&#160;<br/>pre-compile with&#160;AUTOSAR&#160;4&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Vendor&#160;ID:&#160;</b><br/>
FEE_VENDOR_ID&#160;<br/>
30&#160;decimal&#160;<br/>(=&#160;Vector-Informatik,&#160;<br/>according&#160;to&#160;HIS)&#160;<br/>
<b>Module&#160;ID:&#160;</b><br/>
FEE_MODULE_ID &#160;&#160;<br/>
21&#160;decimal&#160;<br/>(according&#160;to ref.<a href="TechnicalReference_Fees.html#2">&#160;[3])</a>&#160;<br/>
*&#160;For&#160;the&#160;precise&#160;AUTOSAR Release&#160;please see&#160;the&#160;release specific&#160;documentation.&#160;&#160;<br/>&#160;<br/>
The&#160;&#160;FEE&#160;enables&#160;&#160;you&#160;to&#160;access&#160;a&#160;dedicated&#160;flash&#160;area&#160;for&#160;storing&#160;data&#160;persistently.&#160;&#160;It&#160;&#160;is&#160;<br/>intended&#160;to&#160;be&#160;used&#160;exclusively&#160;either&#160;by&#160;the&#160;NVRAM&#160;Manager&#160;or&#160;on&#160;SW&#160;instance&#160;within&#160;a&#160;<br/>Flash-Boot-Loader&#160;in&#160;the&#160;Boot-Loader mode.&#160;<br/>Further&#160;on,&#160;the&#160;module&#160;depends&#160;on&#160;some&#160;other&#160;modules,&#160;like&#160;DET&#160;for&#160;error&#160;handling,&#160;the&#160;<br/>underlying&#160;Flash&#160;driver&#160;for hardware access and&#160;the&#160;MEMIF&#160;for consistent&#160;types.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
10&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=11></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-11_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-11_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>1.1&#160;</b><br/>
<b>Architecture&#160;Overview&#160;</b><br/>
The&#160;following&#160;figure shows&#160;where the&#160;FEE&#160;is located&#160;in&#160;the&#160;AUTOSAR architecture.&#160;<br/>
&#160;<br/>
1-1&#160;&#160;AUTOSAR&#160;architecture&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
11&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-12_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-12_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-12_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
&#160;<br/>
Th<b>&#160;cl</b>e<br/>
<b>a&#160;</b>&#160;<br/>
<b>s&#160;</b>f<br/>
<b>s&#160;</b>o<br/>
<b>&#160;S&#160;</b>ll<br/>
<b>a&#160;</b>o<br/>
<b>n&#160;</b>w<br/>
<b>db&#160;</b>ing<br/>
<b>ox</b><br/>
&#160;figure shows the&#160;FEE&#160;and&#160;its relationship&#160;to&#160;other&#160;modules.&#160;<br/>
<b>Nv&#160;M</b><br/>
«use»<br/>
<b>EcuM</b><br/>
<b>MemIf</b><br/>
«optional»<br/>
«initialize»<br/>
«use»<br/>
«include»<br/>
<b>Det</b><br/>
<b>Fee</b><br/>
<b>SchM</b><br/>
«optional»<br/>
«use»<br/>
«triggers»<br/>
«use»<br/>
«optional»<br/>
<b>Fls</b><br/>
&#160;<br/>
Figure&#160;1-2&#160;&#160;FEE&#160;in&#160;a&#160;typical&#160;(AUTOSAR)&#160;SW&#160;architecture&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b><a href="TechnicalReference_Fees.html#12">Figure&#160;1-2&#160;</a>shows&#160;the&#160;normal&#160;case.&#160;In&#160;general&#160;FEE&#160;does not&#160;depend&#160;on&#160;who&#160;actually&#160;<br/>
&#160;&#160;uses&#160;it,&#160;and&#160;who&#160;provides&#160;required&#160;services.&#160;E.g.&#160;it&#160;does not&#160;matter&#160;who&#160;provides&#160;<br/>
mechanisms&#160;to synchronize access&#160;to&#160;critical&#160;sections&#160;(chapter<a href="TechnicalReference_Fees.html#41">&#160;3.5)</a>,&#160;or&#160;who&#160;actually&#160;<br/>calls&#160;Fee_MainFunction.&#160;It&#160;also doesn’t&#160;matter&#160;whether&#160;callbacks&#160;(Fls&#160;to FEE,&#160;FEE&#160;<br/>to NvM)&#160;are&#160;directly&#160;called as&#160;depicted&#160;in&#160;the&#160;figure,&#160;or&#160;whether&#160;they&#160;are&#160;“intercepted”&#160;<br/>by&#160;someone.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>FEE&#160;assumes&#160;exclusive&#160;usage&#160;of&#160;Fls.&#160;Allowing&#160;other&#160;components&#160;to use&#160;Fls’s&#160;services&#160;<br/>
<b>&#160;&#160;</b>results&#160;in synchronization issues,&#160;which are hard&#160;to solve.&#160;Hence&#160;this&#160;shall&#160;be&#160;avoided.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
12&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-13_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-13_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>2&#160;&#160;Functional&#160;Description&#160;</b><br/>
<b>2.1&#160;</b><br/>
<b>Features&#160;</b><br/>
The&#160;features listed&#160;in&#160;this chapter cover the&#160;complete&#160;functionality&#160;specified&#160;in<a href="TechnicalReference_Fees.html#2">&#160;[1].</a>&#160;<br/>The&#160;&#160;&#34;supported&#34;&#160;&#160;and&#160;&#160;&#34;not&#160;&#160;supported&#34;&#160;&#160;features&#160;&#160;are&#160;&#160;presented&#160;&#160;in&#160;&#160;the&#160;&#160;following&#160;&#160;two&#160;&#160;tables.&#160;<br/>For further information&#160;of&#160;not&#160;supported&#160;features also&#160;see&#160;chapte<a href="TechnicalReference_Fees.html#81">r&#160;6.</a>&#160;<br/>
&#160;<br/>
The&#160;following&#160;features&#160;described&#160;in<a href="TechnicalReference_Fees.html#2">&#160;[1]&#160;</a>are&#160;supported:&#160;<br/>
<b>Feature&#160;<br/></b>The&#160;module operates on&#160;blocks&#160;provided by&#160;the&#160;NVRAM&#160;Manager.&#160;Read accesses&#160;to blocks&#160;are&#160;<br/>handled&#160;byte-wise.&#160;<br/>Hardware&#160;restrictions&#160;like erase&#160;cycles or&#160;sector&#160;sizes are abstracted&#160;and&#160;not&#160;visible for&#160;the&#160;<br/>upper&#160;layer.&#160;<br/>Incomplete writes&#160;(e.g.&#160;due&#160;to&#160;reset)&#160;are&#160;detected.&#160;<br/>The&#160;virtual&#160;sectors&#160;use&#160;a&#160;wrap-around&#160;concept&#160;with&#160;backup&#160;of&#160;the&#160;most&#160;recent&#160;data blocks.&#160;<br/>Possibility&#160;to&#160;retrieve the&#160;number&#160;of&#160;erase&#160;cycles&#160;of&#160;a&#160;logical&#160;sector&#160;(done&#160;via the&#160;API&#160;service&#160;<br/>Fee_GetEraseCycle()).&#160;This&#160;feature&#160;is&#160;an&#160;add-on&#160;to&#160;the&#160;AUTOSAR&#160;standard.&#160;<br/>Possibility&#160;to&#160;retrieve the&#160;number&#160;of&#160;write cycles of&#160;a block&#160;(done&#160;via the&#160;API&#160;service&#160;<br/>Fee_GetWriteCycle()).This&#160;feature is&#160;an&#160;add-on&#160;to&#160;the&#160;AUTOSAR&#160;standard.&#160;<br/>Possibility&#160;to&#160;force&#160;sector&#160;switches&#160;(done&#160;via the&#160;API&#160;service&#160;<br/>Fee_ForceSectorSwitch()).This&#160;feature is&#160;an add-on&#160;to&#160;the&#160;AUTOSAR&#160;standard.&#160;<br/>API&#160;to&#160;perform&#160;data&#160;conversion after&#160;configuration&#160;update&#160;i.e.&#160;blocks&#160;whose payload has&#160;<br/>changed&#160;may&#160;be&#160;converted&#160;according to&#160;new&#160;configuration&#160;without&#160;data-loss.&#160;This&#160;feature is&#160;an&#160;<br/>add-on&#160;to&#160;the&#160;AUTOSAR&#160;standard.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>This&#160;feature is&#160;optional,&#160;i.e.&#160;it&#160;has&#160;to&#160;be&#160;ordered&#160;explicitly.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Fee supports&#160;Flash&#160;Address Spaces&#160;(provided by&#160;Fls)&#160;of&#160;up&#160;to&#160;2GBytes,&#160;i.e.&#160;Sectors&#160;to&#160;be&#160;used&#160;<br/>by&#160;FEE&#160;may&#160;resist&#160;in range&#160;0x00000000&#160;to&#160;0x7FFFFFFF&#160;<br/>
Fee_MainFunction&#160;Triggering:&#160;Possibility&#160;to call&#160;the&#160;Fee_MainFunction&#160;in a&#160;cyclic&#160;task&#160;or&#160;in&#160;<br/>a background&#160;task.&#160;<br/>
Table&#160;2-1&#160;&#160;&#160;Supported&#160;SWS&#160;features&#160;<br/>
The&#160;following&#160;features&#160;described&#160;in<a href="TechnicalReference_Fees.html#2">&#160;[1]&#160;</a>are&#160;not&#160;supported:&#160;<br/>
<b>Feature&#160;<br/></b>The&#160;MAXIMUM_BLOCK_TIME&#160;is&#160;not&#160;supported&#160;by&#160;the&#160;FEE,&#160;because no&#160;time reference&#160;is&#160;provided&#160;<br/>to&#160;the&#160;FEE.&#160;<br/>
Table&#160;2-2&#160;&#160;&#160;Not&#160;supported&#160;SWS&#160;features&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
13&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=14></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-14_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-14_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-14_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>2.2&#160;</b><br/>
<b>Initialization&#160;</b><br/>
The&#160;&#160;FEE&#160;&#160;is&#160;&#160;initialized&#160;&#160;and&#160;&#160;operational&#160;&#160;after&#160;&#160;Fee_Init()&#160;&#160;or&#160;&#160;Fee_InitEx()&#160;&#160;has&#160;&#160;been&#160;<br/>called.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;FEE&#160;is&#160;driven&#160;asynchronously,&#160;i.e.&#160;jobs&#160;are&#160;requested&#160;via dedicated&#160;API,&#160;and&#160;they&#160;<br/>
<b>&#160;&#160;</b>are&#160;processed&#160;by&#160;calling&#160;Fee_MainFunction().&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
Initialization&#160;&#160;just&#160;&#160;prepares&#160;&#160;FEE&#160;&#160;to&#160;&#160;accept&#160;&#160;and&#160;&#160;process&#160;&#160;requests.&#160;&#160;Initialization&#160;&#160;of&#160;&#160;sectors&#160;<br/>(checking&#160;&#160;their&#160;&#160;headers&#160;&#160;and&#160;&#160;determining&#160;&#160;new/old&#160;&#160;one)&#160;&#160;is&#160;&#160;deferred&#160;&#160;until&#160;&#160;first&#160;&#160;request&#160;&#160;is&#160;<br/>being&#160;started&#160;on&#160;a&#160;partition.&#160;<br/>
&#160;<br/>
Additionally&#160;after initialization,&#160;any&#160;sector switch&#160;processing&#160;is disabled:&#160;<br/>
<b>&gt;&#160;&#160;</b>Sector Switch&#160;Processing&#160;in&#160;Background&#160;(see<a href="TechnicalReference_Fees.html#27">&#160;2.7.1)&#160;</a>can&#160;be&#160;enabled&#160;by&#160;<br/>
Fee_SetMode(MEMIF_MODE_SLOW).&#160;<br/>
<b>&gt;&#160;&#160;</b>Depending&#160;on&#160;“FSS&#160;Control&#160;API” (see&#160;Ch.<a href="TechnicalReference_Fees.html#78">&#160;5.1.7.1)&#160;</a>they&#160;can&#160;only&#160;be&#160;enabled&#160;by:&#160;<br/>
<b>&gt;&#160;&#160;</b>Fee_EnableFss(),&#160;if&#160;“FSS&#160;Control&#160;&#160;API”&#160;was enabled.&#160;In&#160;that&#160;case&#160;write&#160;requests&#160;<br/>
beyond&#160;Foreground&#160;Sector Switch&#160;Threshold&#160;are disabled;&#160;refer to&#160;chapte<a href="TechnicalReference_Fees.html#31">r&#160;2.10.</a>&#160;<br/>
<b>&gt;&#160;&#160;</b>Fee_Write()&#160;/&#160;Fee_InvalidateBlock()&#160;/&#160;Fee_EraseImmediateBlock(),&#160;<br/>
otherwise.&#160;<br/>
These&#160;implicit&#160;defaults&#160;help&#160;to&#160;ensure&#160;that&#160;FEE&#160;does&#160;not&#160;perform&#160;any&#160;write,&#160;or&#160;even&#160;erase&#160;<br/>operations&#160;during&#160;ECU&#160;start-up,&#160;unless explicitly&#160;requested&#160;by&#160;user.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>It&#160;is&#160;not&#160;recommended&#160;to&#160;use&#160;any&#160;of&#160;the&#160;mentioned services during ECU’s&#160;start-up&#160;<br/>
<b>&#160;&#160;</b>phase.&#160;Special&#160;care needs to&#160;be&#160;taken&#160;about&#160;write requests:&#160;Proper&#160;initialization&#160;(order)&#160;<br/>
of&#160;application software&#160;is&#160;important&#160;to&#160;prevent&#160;from&#160;too&#160;early&#160;write accesses to&#160;NV&#160;<br/>memory.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
14&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-15_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-15_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-15_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>2.3&#160;</b><br/>
<b>States&#160;</b><br/>
<b>2.3.1&#160;</b><br/>
<b>Module&#160;States&#160;</b><br/>
<b>Point&#160;in Time&#160;</b><br/>
<b>Module&#160;State&#160;</b><br/>
After&#160;Reset,&#160;before&#160;Fee_Init&#160;was called&#160;<br/>
MEMIF_UNINIT&#160;<br/>
When&#160;Fee_Init()&#160;returns&#160;<br/>
MEMIF_&#160;BUSY_INTERNAL&#160;<br/>
When&#160;accepting&#160;a&#160;job&#160;request.&#160;<br/>
MEMIF_BUSY&#160;<br/>
If&#160;rejecting a&#160;job&#160;request.&#160;<br/>
No change.&#160;<br/>
Upon completing a&#160;job&#160;(including&#160;returning&#160;from&#160;Fee_SetMode())&#160;<br/>
MEMIF_BUSY_INTERNAL&#160;<br/>
Pending&#160;internal&#160;operations&#160;(while no&#160;user&#160;job&#160;is&#160;pending)&#160;<br/>
MEMIF_BUSY_INTERNAL&#160;<br/>
Not&#160;even&#160;an&#160;internal&#160;job&#160;is&#160;pending&#160;<br/>
MEMIF_IDLE&#160;<br/>
Table&#160;2-3&#160;&#160;&#160;Module&#160;states&#160;<br/>
&#160;<br/>
<b>&#160;<br/>Note&#160;<br/></b>State&#160;MEMIF_UNINIT&#160;can only&#160;be&#160;delivered&#160;after&#160;reset,&#160;if&#160;start-up&#160;code was executed,&#160;<br/>
&#160;&#160;and section&#160;FEE_START_SEC_VAR_INIT_UNSPECIFIED&#160;was mapped&#160;to&#160;an&#160;<br/>
appropriate&#160;section,&#160;being initialized&#160;by&#160;startup&#160;code.&#160;See&#160;also:&#160;chapter<a href="TechnicalReference_Fees.html#36">&#160;3.2&#160;</a><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Normally&#160;(unless Fee_Cancel&#160;was called)&#160;FEE_IDLE&#160;state&#160;can&#160;only&#160;be&#160;entered&#160;via&#160;<br/>
&#160;&#160;FEE_BUSY_INTERNAL.&#160;<br/>
Whenever&#160;FEE&#160;leaves MEMIF_BUSY_STATE&#160;due to&#160;job&#160;completion it&#160;asynchronously&#160;<br/>checks&#160;all&#160;partitions&#160;for&#160;their&#160;fill&#160;levels,&#160;and the&#160;necessity&#160;of&#160;sector&#160;switch.&#160;Therefore,&#160;<br/>even&#160;if&#160;no&#160;sector&#160;switch is necessary&#160;or&#160;allowed,&#160;it&#160;takes&#160;few&#160;Fee_MainFunction&#160;<br/>cycles to&#160;finally&#160;become&#160;(and&#160;report)&#160;IDLE&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
15&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-16_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>stm&#160;GlobalFsm</b><br/>
PowerOff<br/>
Power-On&#160;Reset<br/>
<b>MEMIF_UNINIT</b><br/>
PowerOff<br/>
power-off<br/>
Reset<br/>
Fee_Init<br/>
<b>initialized</b><br/>
<b>MEMIF_BUSY_INTERNAL</b><br/>
Fee_Cancel<br/>
<b>MEMIF_IDLE</b><br/>
Fee_ForceSectorSwitch,<br/>Fee_SetMode<br/>
jobCompleted<br/>/jobResult&#160;=&#160;[MEMIF_JOB_OK,<br/>
Fee_Cancel<br/>
MEMIF_JOB_FAILED,<br/>
/jobResult&#160;=&#160;MEMIF_JOB_CANCELLED<br/>
MEMIF_BLOCK_INVALID,<br/>MEMIF_BLOCK_INCONSISTENT]<br/>
Fee_Read,&#160;Fee_Write,&#160;Fee_Invalidate,<br/>
Fee_EraseImmediateBlock,<br/>
Fee_EraseImmediateBlock,<br/>
Fee_Invalidate,&#160;Fee_Read,&#160;Fee_Write,<br/>
Fee_ConvertBlockConfig<br/>
Fee_ConvertBlockConfig<br/>
/jobResult&#160;=&#160;MEMIF_JOB_PENDING<br/>
/jobResult&#160;=&#160;MEMIF_JOB_PENDING<br/>
<b>MEMIF_BUSY</b><br/>
Fee_ForceSectorSwitch<br/>
&#160;<br/>
Figure&#160;2-1&#160;FEE&#160;Module&#160;States&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
16&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=17></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-17_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>2.3.2&#160;</b><br/>
<b>Job States/Results&#160;</b><br/>
&#160;<br/>
<b>Point&#160;in Time&#160;</b><br/>
<b>Job State&#160;</b><br/>
After&#160;successfully&#160;finished job&#160;<br/>
MEMIF_JOB_OK&#160;<br/>
After&#160;a&#160;job&#160;has&#160;been&#160;accepted&#160;<br/>
MEMIF_JOB_PENDING&#160;<br/>
After&#160;Fee_Cancel()&#160;<br/>
MEMIF_JOB_CANCELLED&#160;<br/>
After&#160;a&#160;read&#160;job&#160;has&#160;been&#160;finished and&#160;an&#160;invalidated&#160;block&#160;<br/>
MEMIF_BLOCK_INVALID&#160;<br/>
was found,&#160;or&#160;the&#160;requested&#160;block&#160;was never&#160;successfully&#160;<br/>written&#160;before.&#160;<br/>After&#160;a block&#160;is&#160;read which has&#160;not&#160;been&#160;written&#160;successfully&#160;<br/>
MEMIF_BLOCK_INCONSISTENT&#160;<br/>
before.&#160;&#160;<br/>After&#160;a&#160;job&#160;has&#160;been&#160;finished and&#160;retrieving&#160;data&#160;(independent&#160;&#160;MEMIF_JOB_FAILED&#160;<br/>from&#160;management&#160;information of&#160;payload data)&#160;from&#160;the&#160;Flash&#160;<br/>failed&#160;<br/>
Table&#160;2-4&#160;&#160;&#160;Job&#160;results&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
17&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=18></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-18_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>2.4&#160;</b><br/>
<b>Flash&#160;organization&#160;</b><br/>
<a href="TechnicalReference_Fees.html#18">Figure&#160;2-2&#160;</a>gives&#160;an&#160;overview&#160;of&#160;how&#160;FEE&#160;organizes&#160;flash&#160;memory,&#160;and&#160;how&#160;FEE’s&#160;three&#160;<br/>main&#160;concepts&#160;–&#160;(User)&#160;Blocks,&#160;Partitions&#160;and&#160;Logical Sectors&#160;–&#160;are&#160;related.&#160;<br/>
<b>pkg&#160;Ov&#160;erall&#160;Flash&#160;management&#160;concepts</b><br/>
<b>Nv&#160;M</b><br/>
<b>NVM::User&#160;Blocks</b><br/>
{1..*}<br/>
0..1<br/>
<b>FEE</b><br/>
0..1<br/>
<b>FEE::UserBlocks</b><br/>
{1..*}<br/>
0..1<br/>
1<br/>
<b>FEE::Partition</b><br/>
{1..*}<br/>
2<br/>
<b>FEE::Logical&#160;Sector</b><br/>
0..1<br/>
<b>(Data)Flash</b><br/>
1..*<br/>
<b>(Data)Flash::Physical&#160;Sector</b><br/>
{2..*}<br/>
&#160;<br/>
Figure&#160;2-2&#160;From&#160;User&#160;Blocks&#160;to&#160;Flash&#160;Sectors&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
18&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-19_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-19_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>2.4.1&#160;</b><br/>
<b>Block&#160;Handling&#160;</b><br/>
<b>2.4.1.1&#160;</b><br/>
<b>Block&#160;Chunks&#160;</b><br/>
Block&#160;chunks&#160;are&#160;the&#160;smallest&#160;entities&#160;the&#160;FEE&#160;can&#160;allocate&#160;dynamically&#160;in&#160;Flash.&#160;A&#160;chunk&#160;<br/>allocation&#160;reserves&#160;space&#160;for&#160;a&#160;configurable&#160;number&#160;(refer&#160;to&#160;chapte<a href="TechnicalReference_Fees.html#69">r&#160;5.1.4)&#160;</a>of&#160;versions&#160;of&#160;<br/>the&#160;associated&#160;block.&#160;FEE&#160;continues&#160;writing&#160;new&#160;versions&#160;(aka&#160;instances)&#160;of&#160;this&#160;block&#160;into&#160;<br/>its&#160;most&#160;recent&#160;chunk,&#160;until&#160;it’s&#160;full.&#160;Writing&#160;the&#160;next&#160;&#160;instance&#160;requires&#160;allocation&#160;of&#160;a&#160;new&#160;<br/>chunk.&#160;&#160;Each&#160;&#160;block’s&#160;&#160;chunks&#160;&#160;build&#160;&#160;up&#160;&#160;a&#160;&#160;linked&#160;&#160;list&#160;&#160;in&#160;&#160;flash:&#160;&#160;each&#160;&#160;chunk&#160;&#160;points&#160;&#160;to&#160;&#160;its&#160;<br/>successor.&#160;<br/>
<b>2.4.1.2&#160;</b><br/>
<b>Block&#160;Search&#160;</b><br/>
A&#160;&#160;requested&#160;&#160;block&#160;&#160;is&#160;&#160;searched&#160;&#160;by&#160;&#160;following&#160;&#160;the&#160;&#160;links&#160;&#160;provided&#160;&#160;by&#160;&#160;the&#160;&#160;block&#160;&#160;chunks.&#160;&#160;The&#160;<br/>start&#160;&#160;point&#160;&#160;is&#160;&#160;the&#160;&#160;default&#160;&#160;area&#160;&#160;of&#160;&#160;the&#160;&#160;block.&#160;&#160;If&#160;&#160;the&#160;&#160;chunk&#160;&#160;link&#160;&#160;is&#160;&#160;erased&#160;&#160;the&#160;&#160;search&#160;&#160;is&#160;<br/>continued&#160;within&#160;the&#160;current&#160;chunk using&#160;a&#160;binary&#160;search&#160;algorithm.&#160;<br/>The&#160;search&#160;concept&#160;provides&#160;fast&#160;access&#160;to&#160;every&#160;block&#160;as&#160;only&#160;the&#160;needed&#160;block&#160;chunks&#160;<br/>are accessed.&#160;<br/>
<b>2.4.2&#160;</b><br/>
<b>Partitions&#160;</b><br/>
FEE&#160;employs&#160;a&#160;concept&#160;of&#160;partitions.&#160;A&#160;partition&#160;can&#160;be&#160;thought&#160;of&#160;an&#160;emulation&#160;space&#160;that&#160;<br/>is managed&#160;separately&#160;from&#160;other ones:&#160;<br/>
<b>&gt;&#160;&#160;</b>Errors in&#160;one&#160;partition&#160;do&#160;not&#160;affect&#160;data&#160;in&#160;other ones&#160;<br/>
<b>&gt;&#160;&#160;</b>Error states (e.g.&#160;Read-Only&#160;Mode) are&#160;local to&#160;a&#160;single&#160;partition.&#160;<br/>
<b>&gt;&#160;&#160;</b>Job&#160;processing&#160;in&#160;one&#160;partition&#160;does (almost)&#160;not&#160;depend&#160;on&#160;sector switch&#160;processing&#160;<br/>
(chapte<a href="TechnicalReference_Fees.html#27">r&#160;2.7)&#160;</a>in&#160;other partitions.&#160;<br/>
However,&#160;&#160;compared&#160;&#160;to&#160;&#160;two&#160;&#160;FEEs&#160;&#160;operating&#160;&#160;on&#160;&#160;two&#160;&#160;different&#160;&#160;flash&#160;&#160;devices,&#160;&#160;partitions&#160;&#160;still&#160;<br/>require&#160;synchronization:&#160;<br/>
<b>&gt;&#160;&#160;</b>FEE&#160;is still restricted&#160;to&#160;use&#160;one&#160;single&#160;flash&#160;driver.&#160;<br/>
<b>&gt;&#160;&#160;</b>According&#160;to&#160;AUTOSAR, FEE&#160;is still limited&#160;to&#160;one&#160;pending&#160;user request.&#160;<br/>
<b>&gt;&#160;&#160;</b>Only&#160;one&#160;partition&#160;can&#160;perform&#160;a&#160;sector switch&#160;at&#160;a&#160;time&#160;<br/>
<b>&gt;&#160;&#160;</b>Sector switch&#160;processing&#160;can&#160;only&#160;be&#160;interrupted&#160;when&#160;processing&#160;a&#160;block&#160;completed.&#160;<br/>
Each&#160;partition&#160;consists&#160;of&#160;two&#160;logical&#160;sectors,&#160;which&#160;in&#160;turn&#160;are&#160;mapped&#160;to&#160;physical&#160;flash&#160;<br/>sectors.&#160;<br/>During&#160;configuration,&#160;each&#160;logical block&#160;must&#160;be&#160;assigned&#160;to&#160;a&#160;partition.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>FEE&#160;configurations&#160;for&#160;FBL&#160;and&#160;Application&#160;do&#160;not&#160;need&#160;to&#160;share&#160;all&#160;partitions.&#160;E.g.&#160;a&#160;<br/>
&#160;&#160;partition&#160;containing&#160;only&#160;application data&#160;may&#160;remain unknown to&#160;the&#160;FBL.&#160;However,&#160;<br/>
shared&#160;partitions&#160;must&#160;refer&#160;to&#160;identical&#160;Fls&#160;configurations&#160;(FlsConfigSet&#160;container),&#160;and&#160;<br/>they&#160;must&#160;match&#160;in address and&#160;size,&#160;as well&#160;as in&#160;alignment&#160;settings.&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
19&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-20_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-20_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-20_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-20_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-20_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Example&#160;<br/></b>Most&#160;typical&#160;as well&#160;as most&#160;recommended&#160;use&#160;case&#160;for&#160;partitions&#160;is&#160;the&#160;physical&#160;<br/>
&#160;&#160;separation&#160;of&#160;frequently&#160;and infrequently&#160;written&#160;data.&#160;Such&#160;a&#160;separation&#160;reduces&#160;<br/>
sector&#160;switch efforts,&#160;because a&#160;whole partition&#160;would be&#160;infrequently&#160;updated.&#160;<br/>Therefore,&#160;separation&#160;also increases&#160;availability&#160;data.&#160;However,&#160;it&#160;may&#160;increase&#160;<br/>number&#160;of&#160;flash’s&#160;erase&#160;cycles over&#160;life-time,&#160;because&#160;frequently&#160;written&#160;data will&#160;<br/>usually&#160;(it&#160;depends&#160;on&#160;actual&#160;amounts)&#160;be&#160;spread&#160;over&#160;less&#160;flash&#160;memory.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>2.4.3&#160;</b><br/>
<b>Logical&#160;Sectors&#160;</b><br/>
The&#160;&#160;FEE&#160;&#160;divides&#160;&#160;the&#160;&#160;physical&#160;&#160;flash&#160;&#160;assigned&#160;&#160;to&#160;&#160;a&#160;&#160;partition&#160;&#160;in&#160;&#160;two&#160;&#160;parts,&#160;&#160;called&#160;&#160;logical&#160;<br/>sectors.&#160;&#160;Each&#160;&#160;logical&#160;&#160;sector&#160;&#160;must&#160;&#160;be&#160;&#160;mapped&#160;&#160;to&#160;&#160;one&#160;&#160;or&#160;&#160;more&#160;&#160;continuous&#160;&#160;physical&#160;&#160;Flash&#160;<br/>sectors.&#160;Logical&#160;sectors&#160;do&#160;not&#160;need&#160;to&#160;be&#160;aligned&#160;on&#160;physical&#160;sector&#160;boundaries,&#160;i.e.&#160;they&#160;<br/>may&#160;&#160;start&#160;&#160;and/or&#160;&#160;end&#160;&#160;within&#160;&#160;physical&#160;&#160;sectors.&#160;&#160;However,&#160;&#160;start&#160;&#160;and&#160;&#160;end&#160;&#160;addresses&#160;&#160;must&#160;<br/>adhere to&#160;the&#160;configured&#160;address&#160;alignment.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The&#160;mapping&#160;of&#160;logical&#160;to physical&#160;sectors&#160;is&#160;mutual&#160;exclusive,&#160;i.e.&#160;physical&#160;sectors&#160;<br/>
&#160;&#160;may&#160;not&#160;be&#160;shared&#160;between logical&#160;sectors.&#160;<br/>
It&#160;results&#160;in a&#160;minimum&#160;number&#160;of&#160;physical&#160;sectors&#160;that&#160;must&#160;be&#160;available to define&#160;<br/>(additional)&#160;partitions:&#160;Per&#160;partition,&#160;two physical&#160;sectors&#160;must&#160;be&#160;provided by&#160;HW&#160;(and&#160;<br/>Fls).&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Unused&#160;flash&#160;space within a&#160;physical&#160;sector&#160;must&#160;not&#160;be&#160;used&#160;(neither&#160;read nor&#160;write)&#160;<br/>
<b>&#160;&#160;</b>by&#160;other&#160;software.&#160;It&#160;should be&#160;assumed&#160;to be&#160;erased,&#160;because FEE&#160;does&#160;never&#160;write&#160;<br/>
it,&#160;but&#160;it&#160;will&#160;be&#160;erased,&#160;too,&#160;with each sector&#160;erase&#160;triggered&#160;by&#160;FEE.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Besides&#160;the&#160;lower&#160;logical&#160;sector&#160;must&#160;be&#160;located&#160;at&#160;a&#160;smaller&#160;address&#160;than&#160;the&#160;upper&#160;one,&#160;<br/>both&#160;sectors&#160;may&#160;be&#160;located&#160;anywhere&#160;within&#160;the&#160;flash&#160;space&#160;provided&#160;by&#160;the&#160;underlying&#160;<br/>driver&#160;&#160;(considering&#160;&#160;restrictions&#160;&#160;imposed&#160;&#160;by&#160;&#160;hardware&#160;&#160;or&#160;&#160;the&#160;&#160;driver,&#160;&#160;of&#160;&#160;course),&#160;&#160;i.e.&#160;&#160;there&#160;<br/>may&#160;be&#160;a&#160;gap&#160;between&#160;them.&#160;<br/>
&#160;<br/>
Furthermore,&#160;the&#160;two&#160;logical&#160;sectors&#160;must&#160;be&#160;erasable&#160;independently&#160;from&#160;each&#160;other,&#160;i.e.&#160;<br/>they&#160;must&#160;be&#160;mapped&#160;to&#160;distinctive&#160;physical sectors.&#160;&#160;<br/>The&#160;size&#160;of&#160;the&#160;smaller&#160;logical&#160;sector&#160;defines&#160;the&#160;maximal&#160;number&#160;of&#160;blocks&#160;&#160;that&#160;&#160;can&#160;be&#160;<br/>handled&#160;by&#160;the&#160;FEE.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>Within&#160;AUTOSAR&#160;specification logical&#160;sectors&#160;are&#160;called&#160;virtual&#160;sectors.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
20&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-21_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-21_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-21_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-21_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-21_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>2.5&#160;</b><br/>
<b>Processing&#160;</b><br/>
All&#160;&#160;jobs&#160;&#160;(Read,&#160;&#160;Write,&#160;&#160;InvalidateBlock,&#160;&#160;EraseImmediateBlock,&#160;&#160;GetWriteCycle,&#160;<br/>GetEraseCycle,&#160;ForceSectorSwitch)&#160;will&#160;be&#160;executed&#160;asynchronously&#160;with&#160;the&#160;help&#160;of&#160;a&#160;job&#160;<br/>state&#160;machine.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;FEE&#160;must&#160;be&#160;initialized&#160;before&#160;the&#160;services are called.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Only&#160;one job&#160;can&#160;be&#160;accepted&#160;at&#160;a&#160;time.&#160;Hence,&#160;it&#160;is&#160;not&#160;allowed&#160;to request&#160;an&#160;<br/>
<b>&#160;&#160;</b>asynchronous&#160;job&#160;to&#160;the&#160;FEE&#160;as long&#160;as&#160;the&#160;currently&#160;pending&#160;job&#160;has&#160;not&#160;been&#160;<br/>
completed.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
While&#160;<br/>
internal&#160;<br/>
operations&#160;<br/>
are&#160;<br/>
performed&#160;<br/>
(current&#160;<br/>
status&#160;<br/>
is&#160;<br/>
equal&#160;<br/>
to&#160;<br/>
MEMIF_BUSY_INTERNAL)&#160;a&#160;job&#160;can&#160;be&#160;accepted,&#160;but&#160;actual&#160;processing&#160;may&#160;be&#160;deferred&#160;<br/>due&#160;to&#160;sector switch&#160;handling&#160;(see&#160;chapte<a href="TechnicalReference_Fees.html#27">r&#160;2.7&#160;</a>for more details).&#160;&#160;<br/>
<b>2.5.1.1&#160;</b><br/>
<b>Initial&#160;processing&#160;</b><br/>
In&#160;order&#160;to&#160;become&#160;able&#160;to&#160;process&#160;a&#160;request,&#160;FEE&#160;has&#160;to&#160;determine&#160;both&#160;logical&#160;sectors’&#160;<br/>states,&#160;i.e.&#160;whether&#160;they&#160;are&#160;usable&#160;at&#160;all,&#160;and&#160;which&#160;one&#160;contains&#160;most&#160;recent&#160;data.&#160;Once&#160;<br/>FEE&#160;determined&#160;these&#160;states,&#160;it&#160;maintains&#160;them&#160;in&#160;RAM.&#160;<br/>Since&#160;a&#160;request&#160;is&#160;always&#160;associated&#160;with&#160;a&#160;partition,&#160;FEE&#160;performs&#160;this&#160;initialization&#160;step&#160;<br/>at&#160;beginning&#160;of&#160;normal&#160;job&#160;processing.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>FEE&#160;attempts&#160;to&#160;read both sector&#160;headers,&#160;i.e.&#160;the&#160;first&#160;8&#160;bytes in&#160;each logical&#160;sector.&#160;<br/>
&#160;&#160;This&#160;processing takes&#160;at&#160;least&#160;3&#160;cycles (from&#160;initial&#160;job&#160;request&#160;to start&#160;of&#160;actual&#160;job&#160;<br/>
processing),&#160;assuming&#160;FEE&#160;does not&#160;have to&#160;wait&#160;for&#160;Fls,&#160;i.e.&#160;Fls_Read processing&#160;<br/>completes&#160;between two&#160;Fee_MainFunction&#160;calls.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>If&#160;one of&#160;both Fee&#160;sector&#160;headers&#160;is&#160;erased&#160;or&#160;corrupted,&#160;and&#160;the&#160;other&#160;one&#160;is&#160;ok,&#160;FEE&#160;<br/>
&#160;&#160;tries&#160;to use&#160;the&#160;valid sector;&#160;erasing&#160;the&#160;other&#160;one&#160;will&#160;be&#160;done&#160;either&#160;when necessary,&#160;<br/>
or&#160;when no&#160;user&#160;jobs&#160;are&#160;pending&#160;(see&#160;also&#160;chapt<a href="TechnicalReference_Fees.html#27">er&#160;2.7)</a>&#160;<br/>If&#160;both&#160;sector&#160;headers&#160;are erased,&#160;FEE&#160;behaves as&#160;if&#160;flash&#160;is&#160;nearly&#160;full&#160;(see&#160;also&#160;<br/><a href="TechnicalReference_Fees.html#27">2.7.2)</a>:&#160;It&#160;will&#160;erase&#160;one logical&#160;sector&#160;and write its&#160;header,&#160;as part&#160;of&#160;first&#160;write class&#160;<br/>job’s&#160;processing.&#160;<br/>If&#160;both&#160;sector&#160;headers&#160;are corrupted&#160;or&#160;one&#160;header&#160;is&#160;corrupted&#160;and&#160;the&#160;other&#160;is&#160;<br/>erased,&#160;FEE&#160;calls&#160;the&#160;user&#160;error&#160;callback&#160;function,&#160;if&#160;configured.&#160;Refer&#160;to chapter&#160;<br/><a href="TechnicalReference_Fees.html#40">3.3.5.3&#160;</a><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
21&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-22_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-22_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-22_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>2.5.1.2&#160;</b><br/>
<b>Processing of Read&#160;Job&#160;</b><br/>
The&#160;&#160;FEE&#160;&#160;provides&#160;&#160;the&#160;&#160;service&#160;&#160;Fee_Read()&#160;&#160;for&#160;&#160;reading&#160;&#160;a&#160;&#160;block.&#160;&#160;This&#160;&#160;service&#160;&#160;reads&#160;&#160;the&#160;<br/>data&#160;of&#160;the&#160;block&#160;which&#160;has&#160;been&#160;most&#160;recently&#160;written.&#160;&#160;<br/>
This&#160;asynchronous&#160;job&#160;is&#160;initiated&#160;with&#160;the&#160;API&#160;function&#160;Fee_Read()&#160;and&#160;is&#160;processed&#160;by&#160;<br/>subsequent&#160;calls&#160;of&#160;Fee_MainFunction()&#160;(see&#160;also&#160;chapte<a href="TechnicalReference_Fees.html#15">r&#160;2.3).</a>&#160;<br/>
<b>2.5.1.3&#160;</b><br/>
<b>Processing of Write&#160;Job&#160;</b><br/>
To&#160;write&#160;the&#160;current&#160;block&#160;content&#160;to&#160;flash&#160;memory&#160;the&#160;API&#160;function&#160;Fee_Write()&#160;is&#160;used.&#160;<br/>FEE&#160;&#160;searches&#160;the&#160;next&#160;free&#160;position&#160;in&#160;the&#160;&#160;most&#160;recent&#160;block&#160;&#160;chunk&#160;&#160;to&#160;&#160;write&#160;&#160;block’s&#160;&#160;new&#160;<br/>instance&#160;to.&#160;<br/>
This asynchronous job&#160;is initiated&#160;with&#160;the&#160;API&#160;function&#160;Fee_Write()&#160;and&#160;is processed&#160;by&#160;<br/>subsequent&#160;calls&#160;of&#160;Fee_MainFunction()&#160;(see&#160;also&#160;chapte<a href="TechnicalReference_Fees.html#15">r&#160;2.3)</a>.&#160;<br/>
<b>2.5.1.4&#160;</b><br/>
<b>Processing of InvalidateBlock&#160;Job&#160;</b><br/>
To&#160;<br/>
invalidate&#160;<br/>
the&#160;<br/>
block&#160;<br/>
content&#160;<br/>
in&#160;<br/>
flash&#160;<br/>
memory&#160;<br/>
the&#160;<br/>
API&#160;<br/>
function&#160;<br/>
Fee_InvalidateBlock()&#160;&#160;is&#160;&#160;used.&#160;&#160;The&#160;&#160;FEE&#160;&#160;component&#160;&#160;marks&#160;&#160;the&#160;&#160;block&#160;&#160;as&#160;&#160;invalid;&#160;<br/>upon&#160;success,&#160;subsequent&#160;read&#160;attempts&#160;report&#160;MEMIF_BLOCK_INVALID.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>Block&#160;Invalidation&#160;is&#160;very&#160;similar&#160;to Block&#160;Write,&#160;as&#160;it&#160;also&#160;creates&#160;a new&#160;instance,&#160;i.e.&#160;it&#160;<br/>
&#160;&#160;consumes&#160;flash&#160;memory.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
This&#160;asynchronous&#160;job&#160;is&#160;initiated&#160;with&#160;the&#160;API&#160;function&#160;Fee_InvalidateBlock()&#160;and&#160;is&#160;<br/>processed&#160;by&#160;subsequent&#160;calls of&#160;Fee_MainFunction()&#160;(see&#160;also&#160;chapte<a href="TechnicalReference_Fees.html#15">r&#160;2.3)</a>.&#160;<br/>
<b>2.5.1.5&#160;</b><br/>
<b>Processing of EraseImmediateBlock&#160;Job&#160;</b><br/>
Immediate&#160;data&#160;is&#160;data&#160;of&#160;a&#160;block&#160;&#160;which&#160;&#160;should&#160;be&#160;written&#160;with&#160;a&#160;higher&#160;priority&#160;than&#160;the&#160;<br/>other&#160;blocks.&#160;<br/>
To&#160;mark&#160;an&#160;immediate&#160;block&#160;as&#160;erased&#160;the&#160;API&#160;function&#160;Fee_EraseImmediateBlock()&#160;<br/>is&#160;&#160;used.&#160;&#160;As&#160;&#160;the&#160;&#160;FEE&#160;&#160;component&#160;&#160;can’t&#160;&#160;erase&#160;&#160;the&#160;&#160;corresponding&#160;&#160;block&#160;&#160;it&#160;&#160;writes&#160;&#160;invalid&#160;<br/>information&#160;for the&#160;block to&#160;the&#160;flash&#160;memory.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>FEE&#160;processes&#160;EraseImmediateBlock&#160;jobs&#160;identically&#160;to InvalidateBlock&#160;jobs.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
This&#160;asynchronous&#160;job&#160;is&#160;initiated&#160;with&#160;the&#160;API&#160;function&#160;&#160;Fee_EraseImmediateBlock()&#160;<br/>and&#160;is&#160;processed&#160;by&#160;subsequent&#160;calls of&#160;Fee_MainFunction()&#160;(see&#160;also&#160;chapte<a href="TechnicalReference_Fees.html#15">r&#160;2.3)</a>.&#160;<br/>
<b>2.5.1.6&#160;</b><br/>
<b>Processing of GetEraseCycle&#160;Job&#160;</b><br/>
The&#160;&#160;erase&#160;&#160;cycle&#160;&#160;counter&#160;&#160;is&#160;&#160;increased&#160;&#160;during&#160;&#160;every&#160;&#160;erase&#160;&#160;of&#160;&#160;a&#160;&#160;certain&#160;&#160;logical&#160;&#160;sector&#160;&#160;and&#160;<br/>consequently&#160;counts&#160;the&#160;erase&#160;cycles&#160;of&#160;the&#160;flash.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
22&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-23_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
To&#160;&#160;get&#160;&#160;the&#160;&#160;erase&#160;&#160;cycle&#160;&#160;counter&#160;&#160;of&#160;&#160;a&#160;&#160;specified&#160;&#160;logical&#160;&#160;sector,&#160;&#160;the&#160;&#160;API&#160;&#160;function&#160;<br/>Fee_GetEraseCycle()&#160;&#160;is&#160;&#160;used.&#160;&#160;The&#160;&#160;availability&#160;&#160;of&#160;&#160;this&#160;&#160;service&#160;&#160;is&#160;&#160;configurable&#160;&#160;at&#160;&#160;pre-<br/>compile&#160;time&#160;which&#160;can&#160;be&#160;done&#160;via&#160;the&#160;configuration&#160;tool.&#160;<br/>
This&#160;&#160;asynchronous&#160;&#160;job&#160;&#160;is&#160;&#160;initiated&#160;&#160;with&#160;&#160;the&#160;API&#160;&#160;function&#160;&#160;Fee_GetEraseCycle()&#160;&#160;and&#160;&#160;is&#160;<br/>processed&#160;by&#160;subsequent&#160;calls of&#160;Fee_MainFunction()&#160;(see&#160;also&#160;chapte<a href="TechnicalReference_Fees.html#15">r&#160;2.3)</a>.&#160;<br/>
<b>2.5.1.7&#160;</b><br/>
<b>Processing of GetWriteCycle&#160;Job&#160;</b><br/>
The&#160;write&#160;cycle&#160;counter counts&#160;the&#160;write&#160;cycles&#160;of&#160;each&#160;block.&#160;<br/>To&#160;&#160;get&#160;&#160;the&#160;&#160;write&#160;&#160;cycle&#160;&#160;counter&#160;&#160;of&#160;&#160;a&#160;&#160;specified&#160;&#160;block,&#160;&#160;the&#160;&#160;API&#160;&#160;function&#160;<br/>Fee_GetWriteCycle()&#160;&#160;is&#160;&#160;used.&#160;&#160;The&#160;&#160;availability&#160;&#160;of&#160;&#160;this&#160;&#160;service&#160;&#160;is&#160;&#160;configurable&#160;&#160;at&#160;&#160;pre-<br/>compile&#160;time&#160;which&#160;can&#160;be&#160;done&#160;via&#160;the&#160;configuration&#160;tool.&#160;<br/>
This&#160;&#160;asynchronous&#160;&#160;job&#160;&#160;is&#160;&#160;initiated&#160;&#160;with&#160;&#160;the&#160;API&#160;&#160;function&#160;&#160;Fee_GetWriteCycle()&#160;&#160;and&#160;&#160;is&#160;<br/>processed&#160;by&#160;subsequent&#160;calls of&#160;Fee_MainFunction()(see&#160;also&#160;chapte<a href="TechnicalReference_Fees.html#15">r&#160;2.3)</a>.&#160;<br/>
<b>2.6&#160;</b><br/>
<b>Error&#160;Handling&#160;</b><br/>
The&#160;module&#160;offers detection&#160;of&#160;errors.&#160;<br/>Errors are&#160;classified&#160;in&#160;development&#160;and&#160;production&#160;errors.&#160;<br/>Development&#160;&#160;errors&#160;should&#160;&#160;be&#160;detected&#160;and&#160;fixed&#160;during&#160;development/integration&#160;phase.&#160;<br/>Those&#160;errors are&#160;caused&#160;by&#160;faulty&#160;configuration&#160;or incorrect&#160;usage&#160;of&#160;the&#160;module’s&#160;API.&#160;<br/>Production&#160;errors are&#160;hardware errors and&#160;software exceptions that&#160;cannot&#160;be&#160;avoided&#160;and&#160;<br/>are&#160;&#160;also&#160;&#160;expected&#160;&#160;to&#160;&#160;occur&#160;&#160;in&#160;&#160;production&#160;&#160;code.&#160;&#160;FEE&#160;&#160;has&#160;&#160;no&#160;&#160;case&#160;&#160;to&#160;&#160;report&#160;&#160;a&#160;&#160;production&#160;<br/>error.&#160;<br/>
<b>2.6.1&#160;</b><br/>
<b>Development&#160;Error&#160;Reporting&#160;</b><br/>
Development&#160;&#160;errors&#160;&#160;are&#160;&#160;reported&#160;&#160;to&#160;&#160;DET&#160;&#160;using&#160;&#160;the&#160;&#160;service&#160;&#160;Det_ReportError()&#160;&#160;as&#160;<br/>specified&#160;&#160;in<a href="TechnicalReference_Fees.html#2">&#160;&#160;[2],</a>&#160;&#160;if&#160;&#160;development&#160;&#160;error&#160;&#160;detection&#160;&#160;and&#160;&#160;reporting,&#160;&#160;are&#160;&#160;enabled&#160;&#160;(see&#160;&#160;chapter&#160;<br/><a href="TechnicalReference_Fees.html#73">5.1.5.1)</a>.&#160;<br/>If&#160;another&#160;module&#160;than&#160;DET&#160;is&#160;used&#160;for&#160;development&#160;error&#160;reporting,&#160;the&#160;function&#160;prototype&#160;<br/>for&#160;&#160;reporting&#160;&#160;the&#160;&#160;error&#160;&#160;can&#160;&#160;be&#160;&#160;configured&#160;&#160;by&#160;&#160;the&#160;&#160;integrator,&#160;&#160;but&#160;&#160;must&#160;&#160;have&#160;&#160;the&#160;&#160;same&#160;<br/>signature as&#160;the&#160;service&#160;Det_ReportError()&#160;(see&#160;chapte<a href="TechnicalReference_Fees.html#26">r&#160;2.6.3)</a>.&#160;<br/>
The&#160;reported&#160;FEE&#160;ID can&#160;be&#160;found&#160;in&#160;chapte<a href="TechnicalReference_Fees.html#10">r&#160;1.</a>&#160;<br/>The&#160;&#160;reported&#160;&#160;service&#160;&#160;IDs&#160;&#160;identify&#160;&#160;the&#160;&#160;services&#160;&#160;which&#160;&#160;are&#160;&#160;described&#160;&#160;in&#160;&#160;<a href="TechnicalReference_Fees.html#44">4.3.&#160;&#160;</a>The&#160;&#160;following&#160;<br/>table&#160;presents&#160;the&#160;service&#160;IDs and&#160;the&#160;related&#160;services:&#160;<br/>
<b>Service&#160;ID&#160;</b><br/>
<b>Service&#160;</b><br/>
0x00u&#160;<br/>
Fee_Init()&#160;/ Fee_InitEx()&#160;<br/>
0x01u&#160;<br/>
Fee_SetMode()&#160;<br/>
0x02u&#160;<br/>
Fee_Read()&#160;<br/>
0x03u&#160;<br/>
Fee_Write()&#160;<br/>
0x04u&#160;<br/>
Fee_Cancel()&#160;<br/>
0x05u&#160;<br/>
Fee_GetStatus()&#160;<br/>
0x06u&#160;<br/>
Fee_GetJobResult()&#160;<br/>
0x07u&#160;<br/>
Fee_InvalidateBlock()&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
23&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=24></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-24_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-24_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Service&#160;ID&#160;</b><br/>
<b>Service&#160;</b><br/>
0x08u&#160;<br/>
Fee_GetVersionInfo()&#160;<br/>
0x09u&#160;<br/>
Fee_EraseImmediateBlock()&#160;<br/>
0x10u&#160;<br/>
Fee_JobEndNotification()&#160;<br/>
0x11u&#160;<br/>
Fee_JobErrorNotification()&#160;<br/>
0x12u&#160;<br/>
Fee_MainFunction()&#160;<br/>
0x20u&#160;<br/>
Fee_GetEraseCycle()&#160;<br/>
0x21u&#160;<br/>
Fee_GetWriteCycle()&#160;<br/>
0x22u&#160;<br/>
Fee_GetSectorSwitchStatus()&#160;<br/>
0x23u&#160;<br/>
Fee_ForceSectorSwitch()&#160;<br/>
0x24u&#160;<br/>
Fee_ConvertBlockConfig()&#160;<br/>
Table&#160;2-5&#160;&#160;&#160;Mapping&#160;of&#160;service&#160;IDs&#160;to&#160;services&#160;<br/>
The&#160;errors reported&#160;to&#160;DET&#160;are&#160;described&#160;in&#160;the&#160;following&#160;table:&#160;<br/>
<b>Error&#160;Code&#160;</b><br/>
<b>Description&#160;</b><br/>
0x02&#160;<br/>
FEE_E_INVALID_BLOCK_NO&#160;<br/>
This&#160;error code is&#160;reported&#160;if&#160;an&#160;API service&#160;is&#160;called&#160;with&#160;<br/>invalid&#160;block&#160;number.&#160;<br/>
0x10&#160;<br/>
FEE_E_PARAM_DATABUFFERPTR&#160;&#160;It is&#160;reported&#160;if&#160;a&#160;pointer parameter&#160;of&#160;an&#160;API service&#160;is&#160;<br/>
called&#160;with&#160;the&#160;NULL_PTR&#160;value.&#160;<br/>
0x11&#160;<br/>
FEE_E_PARAM_SECTOR_NUMBER&#160;&#160;It is&#160;reported&#160;if&#160;the&#160;Fee_GetEraseCycle()&#160;API service is&#160;<br/>
called&#160;with&#160;an&#160;invalid&#160;logical&#160;sector number.&#160;<br/>
0x12&#160;<br/>
FEE_E_PARAM_LENGTH_OFFSET&#160;&#160;It is&#160;reported&#160;if&#160;the&#160;Fee_Read()&#160;API service&#160;is&#160;called&#160;with&#160;<br/>
invalid&#160;BlockOffset&#160;and&#160;Length&#160;values.&#160;<br/>
0x13&#160;<br/>
FEE_E_BUSY&#160;<br/>
It is&#160;reported&#160;if&#160;one&#160;of&#160;the asynchronous&#160;API&#160;services&#160;has&#160;<br/>been&#160;called&#160;in&#160;parallel.&#160;<br/>
0x14&#160;<br/>
FEE_E_NO_INIT&#160;<br/>
It is&#160;reported&#160;if&#160;one&#160;of&#160;the&#160;API services&#160;has&#160;been called&#160;<br/>without&#160;an&#160;initialized&#160;FEE.&#160;<br/>
Table&#160;2-6&#160;&#160;&#160;Errors&#160;reported&#160;to&#160;DET&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>All&#160;error&#160;codes&#160;starting&#160;from&#160;0x10&#160;are&#160;defined&#160;in addition&#160;t<a href="TechnicalReference_Fees.html#2">o&#160;[1].</a>&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
24&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=25></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-25_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>2.6.1.1&#160;</b><br/>
<b>Parameter&#160;Checking&#160;</b><br/>
AUTOSAR&#160;requires&#160;that&#160;API&#160;functions&#160;check&#160;the&#160;validity&#160;of&#160;their&#160;parameters.&#160;The&#160;checks&#160;<br/>listed&#160;&#160;<a href="TechnicalReference_Fees.html#26">in&#160;Table&#160;2-7&#160;&#160;</a>are&#160;&#160;internal&#160;parameter&#160;checks&#160;of&#160;the&#160;API&#160;functions.&#160;These&#160;checks&#160;are&#160;<br/>intended&#160;&#160;for&#160;&#160;development&#160;&#160;error&#160;&#160;detection&#160;&#160;and&#160;&#160;can&#160;&#160;be&#160;&#160;en-/disabled&#160;&#160;separately;&#160;&#160;it&#160;&#160;is&#160;<br/>described&#160;<br/>
in&#160;<br/>
chapter&#160;<br/>
<a href="TechnicalReference_Fees.html#73">5.1.5.&#160;</a>&#160;<br/>
&#160;<br/>
Capability&#160;of&#160;controlling&#160;execution&#160;of&#160;single&#160;checks&#160;is&#160;an&#160;addition&#160;to&#160;AUTOSAR&#160;which&#160;just&#160;<br/>requires&#160;&#160;to&#160;&#160;en-/disable&#160;&#160;the&#160;&#160;complete&#160;&#160;parameter&#160;&#160;checking&#160;&#160;via&#160;&#160;the&#160;&#160;parameter&#160;<br/>FEE_DEV_ERROR_DETECT.&#160;<br/>
The&#160;following&#160;table&#160;shows&#160;which&#160;parameter checks are&#160;performed&#160;on&#160;which&#160;services:&#160;<br/>
<b>Check&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/><b>Service&#160;</b><br/>
FEE_E_INVALID_BLOCK_NO<br/>
FEE_E_PARAM_DATABUFFERPTR<br/>
FEE_E_PARAM_SECTOR_NUMBER<br/>
FEE_E_PARAM_LENGTH_OFFSET<br/>
FEE_E_BUSY<br/>
FEE_E_NO_INIT<br/>
Fee_Init()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_InitEx()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_SetMode()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_Read()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_Write()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_Cancel()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_GetStatus()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_GetJobResult()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_InvalidateBlock()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_GetVersionInfo()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_EraseImmediateBlock()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_JobEndNotification()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_JobErrorNotification()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_MainFunction()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
1&#160;&#160;<br/>
Fee_GetEraseCycle()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_GetWriteCycle()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_GetSectorSwitchStatus()&#160;&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_ForceSectorSwitch()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>1&#160;Check&#160;only;&#160;no&#160;error reporting&#160;to&#160;DET&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
25&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=26></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-26_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Check&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/><b>Service&#160;</b><br/>
FEE_E_INVALID_BLOCK_NO<br/>
FEE_E_PARAM_DATABUFFERPTR<br/>
FEE_E_PARAM_SECTOR_NUMBER<br/>
FEE_E_PARAM_LENGTH_OFFSET<br/>
FEE_E_BUSY<br/>
FEE_E_NO_INIT<br/>
Fee_ConvertBlockConfig()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_SuspendWrites()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_ResumeWrites()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_EnableFss()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Fee_DisableFss()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Table&#160;2-7&#160;&#160;&#160;Development&#160;Error&#160;detection:&#160;Assignment&#160;of&#160;checks&#160;to&#160;services&#160;<br/>
<b>2.6.2&#160;</b><br/>
<b>Production Code&#160;Error Reporting&#160;</b><br/>
FEE&#160;does not&#160;report&#160;any&#160;production&#160;related&#160;error to&#160;an&#160;error/event&#160;manager like&#160;DEM.&#160;<br/>
&#160;<br/>
<b>2.6.3&#160;</b><br/>
<b>Error&#160;notification&#160;</b><br/>
All&#160;detected&#160;errors&#160;in&#160;development&#160;mode&#160;are&#160;by&#160;default&#160;reported&#160;to&#160;the&#160;Development&#160;Error&#160;<br/>Tracer (DET), but&#160;can&#160;be&#160;configured&#160;regarding&#160;called&#160;function&#160;and&#160;include&#160;file.&#160;<br/>The&#160;error declaration&#160;must&#160;have&#160;following&#160;syntax:&#160;<br/>
<b>Prototype&#160;</b><br/>
Prototype syntax&#160;described&#160;in chapter&#160;8.2.2 Det_ReportError of<a href="TechnicalReference_Fees.html#2">&#160;[2].</a>&#160;<br/>
<b>Parameter&#160;</b><br/>
ModuleId&#160;<br/>
Specifies&#160;the&#160;identifier of&#160;the module causing&#160;the&#160;error.&#160;The&#160;module Id&#160;of&#160;FEE&#160;<br/>can&#160;be&#160;found&#160;in chapter<a href="TechnicalReference_Fees.html#10">&#160;1.</a>&#160;<br/>
InstanceId&#160;<br/>
The&#160;identifier of&#160;the&#160;index&#160;based&#160;instance&#160;of&#160;a&#160;module,&#160;starting&#160;from&#160;0.&#160;Thus&#160;<br/>the&#160;FEE&#160;is&#160;a&#160;single&#160;instance module&#160;it&#160;will&#160;pass&#160;0&#160;as&#160;InstanceId.&#160;<br/>
ApiId&#160;<br/>
The&#160;identifier of&#160;the&#160;API function,&#160;which&#160;caused&#160;the&#160;error.&#160;<br/>
ErrorCode&#160;<br/>
The&#160;number&#160;of&#160;the specific&#160;error.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
User function&#160;for the&#160;Fee_Errorhook,&#160;which&#160;specifies&#160;development errors.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
26&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-27_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-27_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-27_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>called&#160;in application context&#160;<br/>
Table&#160;2-8&#160;&#160;&#160;Det_ReportError&#160;<br/>
<b>2.7&#160;</b><br/>
<b>Sector Switch&#160;</b><br/>
The&#160;&#160;sector&#160;&#160;switch&#160;&#160;is&#160;&#160;responsible&#160;&#160;to&#160;&#160;gather&#160;&#160;most&#160;&#160;recent&#160;&#160;instances&#160;&#160;data&#160;&#160;of&#160;&#160;all&#160;<br/>blocks/datasets&#160;from&#160;one&#160;logical&#160;sector&#160;(=&#160;source&#160;sector)&#160;and&#160;write&#160;them&#160;to&#160;the&#160;other&#160;one&#160;<br/>(=&#160;target&#160;sector).&#160;After&#160;this&#160;procedure&#160;has&#160;been&#160;finished,&#160;the&#160;source&#160;sector&#160;can&#160;be&#160;erased&#160;<br/>to&#160;prepare it&#160;for storing&#160;data&#160;again.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>Under&#160;certain conditions,&#160;no&#160;copy&#160;is&#160;necessary&#160;at&#160;all.&#160;However,&#160;finally&#160;FEE&#160;has&#160;to&#160;erase&#160;<br/>
&#160;&#160;a sector&#160;to&#160;reclaim&#160;free&#160;flash&#160;space.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
There are&#160;different&#160;reasons to&#160;perform&#160;a&#160;sector switch&#160;<br/>
&#160;&#160;Threshold&#160;exceeded&#160;(see&#160;below)&#160;<br/>&#160;&#160;User Request&#160;(Fee_ForceSectorSwitch)&#160;<br/>&#160;&#160;Critical Block&#160;Handling&#160;(refer to&#160;ch<a href="TechnicalReference_Fees.html#32">.&#160;2.11)</a>&#160;<br/>
<b>2.7.1&#160;</b><br/>
<b>Background Sector Switch&#160;(BSS)&#160;</b><br/>
Sector&#160;&#160;Switches&#160;&#160;will&#160;&#160;be&#160;&#160;processed&#160;&#160;in&#160;&#160;background,&#160;&#160;unless&#160;&#160;FEE&#160;&#160;was&#160;&#160;set&#160;&#160;to&#160;&#160;“Fast&#160;&#160;Mode”&#160;<br/>(refer to&#160;ch<a href="TechnicalReference_Fees.html#45">.&#160;4.3.3).&#160;</a>This&#160;means that&#160;processing&#160;occurs only&#160;if&#160;no&#160;user job&#160;is pending.&#160;<br/>Sector&#160;&#160;Switch&#160;&#160;processing&#160;&#160;is&#160;&#160;interruptible&#160;&#160;by&#160;&#160;user&#160;&#160;jobs&#160;&#160;after&#160;&#160;a&#160;&#160;block&#160;&#160;has&#160;&#160;been&#160;&#160;processed&#160;<br/>(copied,&#160;or decision&#160;to&#160;skip&#160;copying&#160;was taken).&#160;<br/>
<b>2.7.2&#160;</b><br/>
<b>Foreground Sector Switch&#160;(FSS)&#160;</b><br/>
A&#160;&#160;Sector&#160;&#160;Switch&#160;&#160;being&#160;&#160;processed&#160;&#160;in&#160;&#160;Foreground&#160;&#160;defers&#160;&#160;a&#160;&#160;write&#160;&#160;job.&#160;&#160;That&#160;&#160;means&#160;&#160;a&#160;&#160;job&#160;<br/>cannot&#160;be&#160;processed&#160;before&#160;a&#160;sector switch&#160;has been&#160;completed.&#160;<br/>Such&#160;a&#160;sector switch&#160;is not&#160;interruptible&#160;by&#160;any&#160;other&#160;job.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>The&#160;actual&#160;reason&#160;is&#160;the&#160;pending&#160;job&#160;that&#160;was deferred.&#160;At&#160;most&#160;one&#160;job&#160;may&#160;be&#160;<br/>
&#160;&#160;pending&#160;at&#160;any&#160;time.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
FSS&#160;processing&#160;is&#160;always&#160;initiated&#160;to&#160;a&#160;pending&#160;write&#160;job&#160;for&#160;a&#160;particular&#160;block.&#160;This&#160;block&#160;<br/>is associated&#160;with&#160;a&#160;specific&#160;partition;&#160;thus&#160;a&#160;FSS&#160;will be&#160;performed&#160;on&#160;that&#160;partition&#160;only.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
27&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-28_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-28_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-28_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>2.7.3&#160;</b><br/>
<b>Sector Overflow&#160;</b><br/>
A&#160;sector&#160;overflow&#160;occurs,&#160;if&#160;FEE&#160;failed&#160;to&#160;complete&#160;data&#160;copy,&#160;because&#160;both&#160;logical&#160;sectors&#160;<br/>ran&#160;out&#160;&#160;of&#160;&#160;space.&#160;Since&#160;in&#160;&#160;that&#160;case&#160;both&#160;sectors&#160;contain&#160;most&#160;&#160;recent&#160;data&#160;instances&#160;(of&#160;<br/>different&#160;blocks),&#160;FEE&#160;is unable&#160;to&#160;continue&#160;with&#160;erase&#160;operation&#160;without&#160;losing&#160;most&#160;recent&#160;<br/>data.&#160;<br/>Such&#160;an&#160;event&#160;is caused&#160;by&#160;several consecutive&#160;aborted&#160;write&#160;attempts.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Such&#160;aborts&#160;should be&#160;avoided&#160;wherever&#160;possible,&#160;i.e.&#160;they&#160;shall&#160;be&#160;considerable being&#160;<br/>
<b>&#160;&#160;</b>exceptional&#160;(thus&#160;rare)&#160;events.&#160;Especially&#160;a SW&#160;reset&#160;shall&#160;be&#160;performed&#160;only&#160;if&#160;FEE&#160;is&#160;<br/>
IDLE.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
A&#160;&#160;sector&#160;&#160;overflow&#160;&#160;is&#160;&#160;local&#160;&#160;to&#160;one&#160;&#160;particular&#160;&#160;partition,&#160;&#160;i.e.&#160;&#160;other&#160;&#160;partitions&#160;&#160;are&#160;&#160;not&#160;&#160;affected.&#160;<br/>Probability&#160;of&#160;an&#160;overflow&#160;depends on&#160;different&#160;parameters:&#160;<br/>
<b>&gt;&#160;&#160;</b>Probability&#160;of&#160;resets,&#160;of&#160;course&#160;<br/>
<b>&gt;&#160;&#160;</b>Partition’s write&#160;load,&#160;which&#160;can&#160;be&#160;defined&#160;as&#160;number&#160;of&#160;bytes over time.&#160;<br/>
<b>&gt;&#160;&#160;</b>(Foreground) Sector Switch&#160;in&#160;relation&#160;to&#160;blocks’&#160;sizes.&#160;<br/>
To&#160;minimize&#160;effects&#160;caused&#160;by&#160;under-voltage&#160;situations FEE&#160;provides additional services;&#160;<br/>see&#160;chapte<a href="TechnicalReference_Fees.html#31">r&#160;2.10.</a>&#160;<br/>
Accepting&#160;loss&#160;of&#160;most&#160;recent&#160;data&#160;instances,&#160;FEE&#160;may&#160;be&#160;instructed&#160;to&#160;perform&#160;a&#160;sector&#160;<br/>erase&#160;in&#160;order to&#160;restore write&#160;ability;&#160;see&#160;chapte<a href="TechnicalReference_Fees.html#40">r&#160;3.3.5.3.</a>&#160;Additionally&#160;the&#160;risk of&#160;losing&#160;<br/>data&#160;can&#160;be&#160;restricted&#160;to&#160;certain&#160;“uncritical”&#160;blocks at&#160;configuration&#160;time.&#160;For details refer to&#160;<br/>chapte<a href="TechnicalReference_Fees.html#32">r&#160;2.11.</a>&#160;<br/>
&#160;<br/>
<b>2.7.4&#160;</b><br/>
<b>Sector switch&#160;reserves&#160;and thresholds&#160;</b><br/>
The&#160;&#160;FEE&#160;&#160;determines&#160;&#160;the&#160;&#160;necessity&#160;&#160;of&#160;&#160;a&#160;&#160;sector&#160;&#160;switch&#160;&#160;based&#160;&#160;upon&#160;&#160;exceeding&#160;&#160;a&#160;&#160;related&#160;<br/>threshold&#160;value.&#160;This&#160;value&#160;is&#160;always&#160;an&#160;offset&#160;relative&#160;to&#160;the&#160;start&#160;address&#160;of&#160;the&#160;currently&#160;<br/>“newer”&#160;sector.&#160;&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Basic Knowledge&#160;<br/></b>A&#160;threshold is considered to&#160;have been&#160;exceeded,&#160;if&#160;one&#160;sector&#160;(the&#160;older&#160;one)&#160;<b>is</b>&#160;full&#160;<br/>
&#160;&#160;and the&#160;other&#160;one&#160;(newer&#160;sector)&#160;is&#160;filled&#160;up&#160;to&#160;(or&#160;exceeding)&#160;this&#160;certain level.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
28&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-29_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-29_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Note&#160;<br/></b>To&#160;assure&#160;that&#160;a sector&#160;switch in&#160;FBL&#160;mode&#160;can&#160;copy&#160;FBL’s&#160;data and an&#160;unknown&#160;<br/>
&#160;&#160;amount&#160;of&#160;application data,&#160;sector&#160;switch has&#160;to start&#160;as&#160;early&#160;as possible.&#160;Therefore in&#160;<br/>
FBL&#160;mode&#160;a&#160;sector&#160;switch starts&#160;once&#160;the&#160;newer&#160;logical&#160;sector&#160;is&#160;used.&#160;This&#160;might&#160;<br/>degrade efficiency&#160;of&#160;flash usage,&#160;but&#160;since&#160;it&#160;would happen&#160;in FBL&#160;mode&#160;only,&#160;effects&#160;<br/>are&#160;negligible.&#160;<br/>
&#160;<br/>
In&#160;configuration&#160;“reserve&#160;values”,&#160;rather&#160;than&#160;the&#160;thresholds,&#160;need&#160;to&#160;be&#160;specified&#160;by&#160;user.&#160;<br/>During&#160;generation&#160;the&#160;thresholds&#160;to&#160;be&#160;used&#160;by&#160;FEE&#160;are&#160;calculated&#160;based&#160;on&#160;these&#160;values&#160;<br/>and&#160;&#160;block&#160;&#160;configuration.&#160;&#160;“Reserve”&#160;&#160;is&#160;&#160;meant&#160;&#160;as&#160;&#160;follows:&#160;&#160;How&#160;&#160;much&#160;&#160;space&#160;&#160;the&#160;&#160;FEE&#160;&#160;shall&#160;<br/>reserve&#160;&#160;additionally&#160;&#160;to&#160;&#160;the&#160;&#160;space&#160;&#160;complete&#160;&#160;block&#160;&#160;configuration&#160;&#160;would&#160;&#160;consume&#160;&#160;in&#160;&#160;flash&#160;<br/>(that&#160;is&#160;the&#160;amount&#160;of&#160;flash&#160;space&#160;that&#160;would&#160;be&#160;consumed,&#160;when&#160;every&#160;block&#160;was&#160;written&#160;<br/>exactly&#160;once).&#160;<br/>Thus&#160;a&#160;reserve&#160;value&#160;of&#160;0&#160;means:&#160;For&#160;every&#160;configured&#160;block,&#160;one&#160;chunk&#160;is&#160;reserved;&#160;FEE&#160;<br/>shall&#160;start sector switch&#160;once&#160;less&#160;than&#160;one&#160;chunk&#160;per block&#160;fits into&#160;flash.&#160;&#160;<br/>A&#160;reserve&#160;greater&#160;than&#160;0&#160;adds&#160;additional&#160;space&#160;resulting&#160;in&#160;more&#160;possible&#160;aborts&#160;until&#160;the&#160;<br/>flash&#160;runs&#160;full&#160;(sector&#160;overflow).&#160;<br/>The&#160;&#160;worst&#160;&#160;case&#160;&#160;number&#160;&#160;of&#160;&#160;additional&#160;&#160;resets&#160;&#160;the&#160;&#160;FEE&#160;&#160;can&#160;&#160;deal&#160;&#160;with&#160;&#160;is&#160;&#160;the&#160;&#160;FSS&#160;&#160;reserve&#160;<br/>divided&#160;by&#160;the&#160;size&#160;of&#160;the&#160;largest&#160;chunk.&#160;<br/>There&#160;is&#160;no&#160;standard&#160;recommendation&#160;how&#160;to&#160;configure&#160;this&#160;threshold,&#160;because&#160;this&#160;value&#160;<br/>depends&#160;on&#160;&#160;the&#160;&#160;individual&#160;&#160;environment&#160;&#160;of&#160;&#160;the&#160;&#160;ECU&#160;&#160;and&#160;&#160;the&#160;&#160;configuration&#160;&#160;of&#160;&#160;the&#160;memory&#160;<br/>stack,&#160;like:&#160;<br/>
&#160;&#160;total&#160;available&#160;flash&#160;memory&#160;<br/>&#160;&#160;number&#160;of&#160;blocks/datasets&#160;<br/>&#160;&#160;size&#160;of&#160;the&#160;blocks/datasets&#160;<br/>&#160;&#160;page&#160;size&#160;of&#160;the&#160;flash&#160;hardware&#160;<br/>&#160;&#160;general&#160;handling&#160;of&#160;blocks,&#160;i.e.&#160;when&#160;blocks/datasets&#160;are&#160;written&#160;down&#160;to&#160;&#160;the&#160;non-<br/>
volatile&#160;memory&#160;<br/>
<b>2.7.5&#160;</b><br/>
<b>Background Sector Switch&#160;Reserve/Threshold&#160;</b><br/>
A&#160;&#160;sector&#160;&#160;switch&#160;&#160;in&#160;&#160;background&#160;&#160;mode&#160;&#160;(BSS)&#160;&#160;is&#160;&#160;the&#160;&#160;type&#160;&#160;of&#160;&#160;sector&#160;&#160;switch&#160;&#160;that&#160;&#160;should&#160;<br/>normally&#160;occur.&#160;In&#160;flash,&#160;both&#160;sectors&#160;are&#160;currently&#160;in&#160;use,&#160;but&#160;there&#160;is&#160;quite&#160;much&#160;space&#160;<br/>available.&#160;<br/>Exceeding&#160;BSS&#160;threshold&#160;causes FEE&#160;to&#160;start&#160;BSS&#160;processing,&#160;as described&#160;above.&#160;<br/>
<b>2.7.6&#160;</b><br/>
<b>Foreground Sector Switch/Threshold&#160;</b><br/>
If&#160;&#160;flash/partition&#160;&#160;fill&#160;&#160;level&#160;&#160;exceeds&#160;&#160;FSS&#160;&#160;threshold,&#160;&#160;it&#160;&#160;is&#160;&#160;quite&#160;&#160;full.&#160;&#160;It&#160;&#160;can&#160;&#160;be&#160;&#160;seen&#160;&#160;as&#160;&#160;“last&#160;<br/>chance&#160;processing”.&#160;Therefore,&#160;a&#160;write&#160;job&#160;directed&#160;to&#160;that&#160;partition&#160;will&#160;be&#160;deferred&#160;in&#160;order&#160;<br/>to&#160;complete&#160;FSS&#160;first.&#160;<br/>FSS&#160;&#160;threshold&#160;&#160;also&#160;&#160;indicates&#160;&#160;most&#160;&#160;critical&#160;&#160;fill-level:&#160;&#160;once&#160;&#160;it&#160;&#160;is&#160;&#160;exceeded,&#160;&#160;a&#160;&#160;call&#160;&#160;to&#160;<br/>Fee_DisableFss()&#160;&#160;becomes&#160;&#160;effective,&#160;&#160;i.e.&#160;&#160;in&#160;&#160;that&#160;&#160;case&#160;&#160;FEE&#160;&#160;terminates&#160;&#160;write&#160;&#160;requests&#160;<br/>delivering&#160;error&#160;result.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
29&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-30_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-30_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-30_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
Since&#160;BSS&#160;&#160;is&#160;&#160;defined&#160;to&#160;&#160;start&#160;&#160;earlier&#160;&#160;than&#160;&#160;FSS,&#160;&#160;its&#160;&#160;threshold&#160;&#160;is&#160;&#160;smaller.&#160;This&#160;&#160;also&#160;means&#160;<br/>that&#160;an&#160;FSS&#160;implies BSS,&#160;i.e.&#160;processing&#160;is done&#160;in&#160;Background,&#160;as&#160;described&#160;above.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>FEE&#160;keeps&#160;track&#160;of&#160;logical&#160;sector’s&#160;state.&#160;Once&#160;copying&#160;most&#160;recent&#160;data&#160;completed,&#160;it&#160;<br/>
&#160;&#160;internally&#160;marks&#160;the&#160;“older”&#160;sector&#160;as&#160;outdated.&#160;This&#160;results&#160;in&#160;reducing&#160;criticality:&#160;Flash&#160;<br/>
is&#160;still&#160;almost&#160;full,&#160;but&#160;we just&#160;need&#160;to&#160;erase&#160;a sector.&#160;An FSS&#160;becomes&#160;rather&#160;a&#160;BSS;&#160;<br/>after&#160;completing&#160;the&#160;copy&#160;process,&#160;a pending write job&#160;gets&#160;the&#160;chance&#160;to&#160;be&#160;processed&#160;<br/>before&#160;sector&#160;format&#160;is&#160;being&#160;started.&#160;If&#160;Flash&#160;is&#160;too&#160;full,&#160;the&#160;job&#160;will&#160;be&#160;deferred&#160;again;&#160;it&#160;<br/>has&#160;to&#160;wait&#160;for&#160;completion of&#160;sector&#160;format.&#160;<br/>
&#160;<br/>
<b>2.8&#160;</b><br/>
<b>Data&#160;Conversion&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>This&#160;feature is&#160;optional,&#160;i.e.&#160;it&#160;has&#160;to&#160;be&#160;ordered&#160;explicitly.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Standard&#160;&#160;FEE&#160;&#160;implementation&#160;&#160;allows&#160;&#160;to&#160;&#160;update&#160;&#160;the&#160;&#160;block&#160;&#160;configuration,&#160;&#160;and&#160;&#160;to&#160;&#160;modify&#160;<br/>block&#160;&#160;lengths&#160;&#160;with&#160;&#160;one&#160;&#160;restriction:&#160;&#160;Existing&#160;&#160;data&#160;&#160;of&#160;&#160;blocks,&#160;&#160;whose&#160;&#160;payload&#160;&#160;(length)&#160;&#160;was&#160;<br/>changed,&#160;&#160;will&#160;&#160;be&#160;&#160;lost.&#160;&#160;Trying&#160;&#160;to&#160;&#160;read&#160;&#160;such&#160;&#160;a&#160;&#160;block&#160;&#160;will&#160;&#160;lead&#160;&#160;to&#160;&#160;job&#160;&#160;result&#160;<br/>MEMIF_BLOCK_INVALID,&#160;&#160;until&#160;&#160;the&#160;&#160;block&#160;&#160;has&#160;&#160;been&#160;&#160;re-written&#160;&#160;according&#160;&#160;to&#160;&#160;new&#160;<br/>configuration.&#160;<br/>Data&#160;Conversion&#160;provides&#160;a&#160;“framework”&#160;enabling&#160;the&#160;SW&#160;to&#160;keep&#160;even&#160;those&#160;blocks:&#160;The&#160;<br/>FEE&#160;scans&#160;Dataflash&#160;content.&#160;For&#160;each&#160;block&#160;(in&#160;detail:&#160;each&#160;block’s&#160;most&#160;recent&#160;instance)&#160;<br/>it&#160;finds,&#160;a&#160;callback&#160;function&#160;will be&#160;invoked.&#160;This function&#160;gets&#160;following&#160;arguments:&#160;<br/>
<b>&gt;&#160;&#160;</b>Unique&#160;block&#160;identifier&#160;(each&#160;dataset&#160;is treated&#160;separately)&#160;<br/>
<b>&gt;&#160;&#160;</b>(pointer to)&#160;most&#160;recent&#160;data&#160;<br/>
<b>&gt;&#160;&#160;</b>old&#160;length&#160;(as&#160;found&#160;in&#160;flash)&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>new&#160;length&#160;(according&#160;to&#160;current&#160;configuration), if&#160;block&#160;is still&#160;configured.&#160;<br/>
Within&#160;the&#160;callback&#160;the&#160;user&#160;may&#160;decide&#160;what&#160;the&#160;FEE&#160;shall&#160;do&#160;with&#160;this block:&#160;<br/>
<b>&gt;&#160;&#160;</b>skip&#160;it (it&#160;will be&#160;lost&#160;after&#160;finalization&#160;of&#160;Conversion)&#160;<br/>
<b>&gt;&#160;&#160;</b>write&#160;it&#160;according&#160;to&#160;old&#160;length&#160;<br/>
<b>&gt;&#160;&#160;</b>write&#160;it&#160;according&#160;to&#160;new&#160;length&#160;<br/>
The&#160;data&#160;passed&#160;to&#160;the&#160;callback&#160;may&#160;be&#160;modified;&#160;the&#160;FEE&#160;will&#160;write&#160;them,&#160;if&#160;desired.&#160;This&#160;<br/>is&#160;&#160;the&#160;&#160;actual&#160;&#160;conversion.&#160;&#160;Since&#160;&#160;the&#160;&#160;FEE&#160;&#160;is&#160;&#160;not&#160;&#160;able&#160;&#160;to&#160;&#160;detect&#160;&#160;internal&#160;&#160;configuration&#160;<br/>changes,&#160;the&#160;callback&#160;will&#160;also&#160;be&#160;invoked&#160;for&#160;blocks&#160;whose&#160;length&#160;did&#160;not&#160;change.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
30&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-31_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-31_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-31_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>The&#160;callback&#160;might&#160;need&#160;to implement&#160;some code&#160;to&#160;make&#160;correct&#160;decisions,&#160;e.g.&#160;if&#160;<br/>
&#160;&#160;different&#160;blocks&#160;need&#160;to be treated&#160;differently,&#160;additionally&#160;depending&#160;on&#160;old&#160;<br/>
configuration&#160;(from&#160;which version the&#160;update&#160;to&#160;current&#160;version has&#160;been&#160;performed)&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
If&#160;&#160;a&#160;&#160;block&#160;&#160;does&#160;&#160;not&#160;&#160;contain&#160;&#160;any&#160;&#160;data,&#160;&#160;i.e.&#160;&#160;it&#160;was&#160;&#160;never&#160;&#160;(successfully)&#160;&#160;written,&#160;&#160;it&#160;&#160;had&#160;&#160;been&#160;<br/>invalidated,&#160;or&#160;it&#160;became&#160;corrupted&#160;by&#160;other&#160;means,&#160;the&#160;callback&#160;will&#160;not&#160;be&#160;invoked;&#160;there&#160;<br/>is no&#160;data&#160;to&#160;be&#160;converted.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Conversion must&#160;be&#160;triggered&#160;immediately&#160;after&#160;start-up,&#160;using&#160;<br/>
<b>&#160;&#160;</b><a href="TechnicalReference_Fees.html#59">Fee_ConvertBlockConfig&#160;</a>(refer&#160;t<a href="TechnicalReference_Fees.html#59">o&#160;4.3.18)</a>,&#160;before&#160;upper&#160;layers&#160;get&#160;running,&#160;and&#160;<br/>
before&#160;a sector&#160;switch (with complete&#160;configuration)&#160;has&#160;been&#160;performed.&#160;Therefore it&#160;<br/>must&#160;happen&#160;before&#160;the&#160;first&#160;write&#160;request&#160;(including&#160;invalidate and&#160;erase)&#160;was issued&#160;<br/>to&#160;the&#160;FEE,&#160;and&#160;before an explicit&#160;Fee_ForceSectorSwitch&#160;has&#160;been&#160;requested.&#160;<br/>Otherwise the&#160;sector&#160;switch would remove all&#160;outdated&#160;(removed&#160;or&#160;payload&#160;changed)&#160;<br/>data blocks&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>2.9&#160;</b><br/>
<b>Flash Page&#160;Size&#160;impacts&#160;</b><br/>
The&#160;&#160;smallest&#160;&#160;writeable&#160;&#160;entity,&#160;&#160;called&#160;&#160;page&#160;&#160;size,&#160;&#160;differs&#160;&#160;for&#160;&#160;example&#160;&#160;from&#160;&#160;2&#160;&#160;byte&#160;&#160;on&#160;&#160;the&#160;<br/>S12XDP512&#160;up&#160;to&#160;128&#160;byte&#160;on&#160;the&#160;TC1796.&#160;&#160;The&#160;size&#160;of&#160;&#160;every&#160;kind&#160;of&#160;data&#160;&#160;to&#160;&#160;be&#160;&#160;written&#160;<br/>must&#160;be&#160;rounded&#160;up&#160;to&#160;a&#160;multiple&#160;flash&#160;device’s&#160;page&#160;size.&#160;Therefore&#160;padding&#160;is&#160;added,&#160;if&#160;<br/>the&#160;data&#160;doesn’t&#160;fit&#160;a&#160;multiple&#160;of&#160;the&#160;page&#160;size.&#160;<br/>For&#160;example,&#160;if&#160;you&#160;want&#160;to&#160;write&#160;13&#160;byte&#160;(incl.&#160;management&#160;information)&#160;into&#160;the&#160;flash&#160;of&#160;a&#160;<br/>TC1796,&#160;the&#160;padding&#160;which&#160;is&#160;needed&#160;is&#160;115&#160;byte&#160;to&#160;reach&#160;a&#160;multiple&#160;of&#160;the&#160;page&#160;size&#160;128&#160;<br/>byte.&#160;&#160;But&#160;&#160;if&#160;&#160;you&#160;&#160;want&#160;&#160;to&#160;&#160;write&#160;&#160;13&#160;&#160;byte&#160;&#160;(incl.&#160;&#160;management&#160;&#160;information)&#160;&#160;into&#160;&#160;the&#160;&#160;flash&#160;&#160;of&#160;&#160;a&#160;<br/>S12XDP512,&#160;the&#160;padding&#160;which&#160;is&#160;needed&#160;is&#160;only&#160;1&#160;byte&#160;to&#160;reach&#160;a&#160;multiple&#160;of&#160;the&#160;page&#160;<br/>size&#160;2&#160;byte.&#160;<br/>This&#160;&#160;example&#160;&#160;shows,&#160;&#160;that&#160;&#160;the&#160;&#160;flash&#160;&#160;could&#160;&#160;be&#160;&#160;used&#160;&#160;much&#160;&#160;more&#160;&#160;efficient,&#160;&#160;if&#160;&#160;data&#160;&#160;which&#160;<br/>should&#160;be&#160;written&#160;matches&#160;the&#160;page&#160;size&#160;or&#160;is&#160;only&#160;a&#160;little&#160;smaller.&#160;That&#160;is&#160;to&#160;say,&#160;that&#160;it&#160;is&#160;<br/>possible&#160;to&#160;write&#160;more&#160;instances&#160;of&#160;&#160;a&#160;block/dataset&#160;of&#160;the&#160;same&#160;type&#160;into&#160;a&#160;smaller&#160;flash&#160;<br/>with&#160;small&#160;page&#160;size&#160;than&#160;into&#160;a&#160;larger flash&#160;where plenty&#160;of&#160;padding&#160;has to&#160;be&#160;added.&#160;<br/>
<b>2.10&#160;&#160;Services&#160;for handling&#160;under-voltage&#160;situations&#160;</b><br/>
The&#160;&#160;FEE&#160;&#160;provides&#160;&#160;two&#160;&#160;sets&#160;&#160;of&#160;&#160;functions&#160;&#160;enabling&#160;&#160;you&#160;&#160;to&#160;&#160;handle&#160;&#160;under-voltage&#160;&#160;situations&#160;<br/>properly.&#160;<br/>Both&#160;sets&#160;focus&#160;on&#160;different&#160;use&#160;cases:&#160;<br/>
Fee_SuspendWrites()&#160;&#160;is&#160;&#160;intended&#160;&#160;to&#160;&#160;react&#160;&#160;on&#160;&#160;actual&#160;&#160;under-voltage&#160;&#160;situation&#160;&#160;detected&#160;<br/>via&#160;dedicated&#160;monitoring&#160;circuitry.&#160;Usually&#160;there&#160;is&#160;some&#160;amount&#160;of&#160;time&#160;(few&#160;milliseconds)&#160;<br/>to&#160;&#160;react&#160;&#160;on&#160;&#160;such&#160;&#160;conditions&#160;&#160;until&#160;&#160;a&#160;&#160;low&#160;&#160;voltage&#160;&#160;reset&#160;&#160;occurs.&#160;&#160;Its&#160;&#160;counterpart,&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
31&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-32_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-32_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-32_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-32_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-32_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
Fee_ResumeWrites(),&#160;&#160;was&#160;&#160;introduced&#160;&#160;in&#160;&#160;order&#160;&#160;to&#160;&#160;prevent&#160;&#160;from&#160;&#160;stalling,&#160;&#160;if&#160;&#160;voltage&#160;<br/>reaches&#160;normal range,&#160;without&#160;any&#160;reset.&#160;<br/>
The&#160;&#160;other&#160;&#160;set,&#160;&#160;namely&#160;&#160;Fee_EnableFss()&#160;&#160;and&#160;&#160;Fee_DisableFss(),&#160;&#160;respectively,&#160;&#160;is&#160;<br/>intended&#160;&#160;to&#160;&#160;signal&#160;&#160;the&#160;&#160;increased&#160;&#160;or&#160;&#160;decreased&#160;&#160;risk&#160;&#160;of&#160;&#160;resets&#160;&#160;to&#160;&#160;the&#160;&#160;FEE.&#160;&#160;For&#160;&#160;instance,&#160;<br/>usually&#160;engine&#160;start&#160;(cranking)&#160;might&#160;be&#160;a&#160;situation&#160;of&#160;higher&#160;risk,&#160;while&#160;&#160;a&#160;running&#160;engine&#160;<br/>might&#160;be&#160;a&#160;much&#160;safer&#160;situation.&#160;Since&#160;this&#160;function&#160;set&#160;deals&#160;with&#160;risks,&#160;they&#160;will&#160;only&#160;have&#160;<br/>a&#160;noticeable&#160;effect&#160;if&#160;the&#160;flash&#160;becomes&#160;too&#160;full,&#160;i.e.&#160;if&#160;Foreground&#160;Sector&#160;Switch&#160;Threshold&#160;<br/>exceeded.&#160;&#160;As&#160;&#160;long&#160;&#160;as&#160;&#160;flash&#160;&#160;is&#160;&#160;not&#160;&#160;at&#160;&#160;a&#160;&#160;critical&#160;&#160;fill&#160;&#160;level&#160;&#160;(denoted&#160;&#160;by&#160;&#160;Foreground&#160;&#160;Sector&#160;<br/>Switch&#160;Threshold),&#160;the&#160;write&#160;operations&#160;and&#160;(background)&#160;sector&#160;switch&#160;are&#160;permitted.&#160;On&#160;<br/>the&#160;&#160;other&#160;&#160;hand,&#160;&#160;execution&#160;&#160;of&#160;&#160;FSS&#160;&#160;may&#160;&#160;be&#160;&#160;disabled.&#160;&#160;In&#160;&#160;this&#160;&#160;case,&#160;&#160;write&#160;&#160;requests&#160;&#160;are&#160;<br/>forbidden,&#160;once&#160;FSS&#160;became&#160;necessary;&#160;they&#160;will fail&#160;with&#160;error&#160;result.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>If&#160;this&#160;set&#160;of&#160;functions&#160;is&#160;enabled&#160;in configuration,&#160;FEE&#160;does&#160;not&#160;automatically&#160;enable&#160;<br/>
<b>&#160;&#160;</b>FSS,&#160;i.e.&#160;execution&#160;of&#160;Foreground&#160;Sector&#160;Switches&#160;is&#160;disabled&#160;per&#160;default&#160;(after&#160;<br/>
Fee_Init()).&#160;In order&#160;to enable execution&#160;of&#160;FSS,&#160;you&#160;will&#160;have to call&#160;<br/>Fee_EnableFss()&#160;once ECU&#160;start-up&#160;completed,&#160;and&#160;operating&#160;conditions are&#160;stable&#160;<br/>(esp.&#160;normal&#160;voltage).&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Basic Knowledge&#160;<br/></b>Execution&#160;of&#160;Sector&#160;switch (“garbage&#160;collection”)&#160;is&#160;essential&#160;to&#160;keep&#160;FEE&#160;writable.&#160;In&#160;<br/>
&#160;&#160;case&#160;of&#160;exceeded Foreground&#160;Sector&#160;Switch&#160;Thresholds the&#160;flash&#160;is&#160;at&#160;a&#160;critical&#160;fill&#160;<br/>
level,&#160;i.e.&#160;cleaning&#160;up&#160;has&#160;become urgently&#160;necessary.&#160;Writing new&#160;data in&#160;this&#160;situation&#160;<br/>might&#160;consume&#160;additional&#160;flash&#160;space;&#160;it&#160;would become&#160;insufficient&#160;to&#160;complete&#160;the&#160;<br/>sector&#160;switch afterwards.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>It&#160;should be&#160;ensured&#160;Fee_EnableFss()will&#160;&#160;be&#160;called&#160;after&#160;start-up,&#160;at&#160;least&#160;under&#160;<br/>
<b>&#160;&#160;</b>normal&#160;conditions.&#160;Otherwise FSS’s&#160;intention&#160;of&#160;“last-chance&#160;processing”&#160;would be&#160;<br/>
foiled;&#160;exceeding&#160;FSS&#160;threshold would cause entering read&#160;only&#160;mode.&#160;This&#160;in turn&#160;<br/>should be&#160;exceptional&#160;behavior.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>As&#160;stated&#160;in&#160;chapter<a href="TechnicalReference_Fees.html#29">&#160;2.7.6,</a>&#160;criticality&#160;reduces&#160;once block&#160;copy&#160;has&#160;been&#160;completed.&#160;<br/>
&#160;&#160;Thus,&#160;if&#160;Fee_DisableFss()&#160;was recently&#160;called,&#160;FEE&#160;remains&#160;writable,&#160;once block&#160;<br/>
copy&#160;completed,&#160;and&#160;only&#160;sector&#160;erase&#160;is&#160;outstanding.&#160;<br/>
&#160;<br/>
<b>2.11&#160;&#160;Critical&#160;Data&#160;Blocks&#160;</b><br/>
In&#160;order&#160;to&#160;keep&#160;FEE&#160;writable&#160;in&#160;case&#160;of&#160;sector&#160;overflows&#160;(chapte<a href="TechnicalReference_Fees.html#28">r&#160;2.7.3)</a>,&#160;it&#160;has&#160;to&#160;erase&#160;<br/>one&#160;&#160;logical&#160;&#160;sector.&#160;&#160;Though&#160;&#160;this&#160;&#160;event&#160;&#160;is&#160;&#160;an&#160;&#160;exception,&#160;&#160;occurring&#160;&#160;really&#160;&#160;rarely,&#160;&#160;the&#160;&#160;erase&#160;<br/>causes loss of&#160;recent&#160;data&#160;instances.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
32&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=33></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-33_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-33_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-33_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-33_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-33_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
While&#160;&#160;such&#160;&#160;a&#160;&#160;loss&#160;&#160;would&#160;&#160;be&#160;&#160;uncritical&#160;&#160;to&#160;&#160;some&#160;&#160;data&#160;&#160;blocks,&#160;&#160;losing&#160;&#160;some&#160;&#160;other&#160;&#160;blocks’&#160;<br/>recent&#160;&#160;instances&#160;&#160;might&#160;&#160;cause&#160;&#160;the&#160;&#160;whole&#160;&#160;ECU&#160;&#160;to&#160;&#160;cease&#160;&#160;working.&#160;&#160;Such&#160;&#160;data&#160;&#160;blocks&#160;&#160;are&#160;<br/>essential&#160;&#160;to&#160;&#160;ECUs&#160;&#160;operability;&#160;&#160;losing&#160;&#160;them&#160;&#160;is&#160;&#160;critical&#160;&#160;(as&#160;&#160;would&#160;&#160;result&#160;&#160;in&#160;&#160;“defective&#160;&#160;ECU”&#160;<br/>requiring&#160;service).&#160;FEE&#160;configuration&#160;provides&#160;the&#160;possibility&#160;to&#160;mark&#160;these&#160;blocks.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Basic Knowledge&#160;<br/></b>Typically&#160;data block’s&#160;“criticality”&#160;rises with&#160;decreasing&#160;write&#160;frequency.&#160;The&#160;more&#160;<br/>
&#160;&#160;infrequently&#160;a block&#160;will&#160;be&#160;written&#160;the&#160;less&#160;number&#160;of&#160;older&#160;instances&#160;exist,&#160;and&#160;the&#160;<br/>
larger&#160;their&#160;semantic&#160;difference would be,&#160;disqualifying&#160;them&#160;for&#160;usage&#160;as&#160;fallback&#160;data.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
As&#160;a&#160;result&#160;FEE&#160;ensures&#160;that&#160;any&#160;write&#160;access&#160;keeps&#160;all&#160;“critical”&#160;Data&#160;Blocks’&#160;most&#160;recent&#160;<br/>instances&#160;within&#160;one&#160;logical&#160;sector.&#160;Thus&#160;there&#160;is&#160;always&#160;one&#160;logical&#160;sector&#160;that&#160;might&#160;be&#160;<br/>erased&#160;(in&#160;case&#160;of&#160;error)&#160;without&#160;losing&#160;such&#160;“critical”&#160;data.&#160;<br/>Keeping&#160;critical&#160;data&#160;together&#160;requires&#160;conditional&#160;execution&#160;of&#160;sector&#160;switch.&#160;If&#160;necessary,&#160;<br/>i.e.&#160;&#160;if&#160;&#160;a&#160;&#160;critical&#160;&#160;block&#160;&#160;cannot&#160;&#160;be&#160;&#160;written&#160;&#160;into&#160;&#160;the&#160;&#160;same&#160;&#160;logical&#160;&#160;sector&#160;&#160;containing&#160;&#160;all&#160;&#160;other&#160;<br/>critical blocks,&#160;FEE&#160;performs&#160;a&#160;Foreground&#160;Sector Switch.&#160;<br/>Since&#160;&#160;each&#160;&#160;block&#160;&#160;configured&#160;&#160;to&#160;&#160;be&#160;&#160;critical&#160;&#160;may&#160;&#160;cause&#160;&#160;an&#160;&#160;additional&#160;&#160;sector&#160;&#160;switch&#160;&#160;before&#160;<br/>writing&#160;a&#160;new&#160;instance,&#160;flash&#160;usage&#160;over life-time&#160;increases&#160;due&#160;to&#160;additional block&#160;copies.&#160;&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Due&#160;to independency&#160;of&#160;partitions,&#160;the&#160;differentiation between critical&#160;and&#160;“not&#160;as&#160;<br/>
&#160;&#160;critical”&#160;data blocks&#160;is&#160;also local&#160;to&#160;a partition.&#160;On&#160;one hand&#160;FEE&#160;only&#160;has&#160;to care&#160;about&#160;<br/>
all&#160;critical&#160;blocks&#160;in a&#160;particular&#160;partition.&#160;On&#160;the&#160;other&#160;hand,&#160;resolving&#160;a&#160;sector&#160;overflow&#160;<br/>(by&#160;formatting&#160;a&#160;sector)&#160;may&#160;cause loss&#160;of&#160;recent&#160;uncritical&#160;data in&#160;only&#160;that&#160;partition.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Basic Knowledge&#160;<br/></b>By&#160;marking&#160;all&#160;Blocks&#160;assigned&#160;to one partition&#160;as&#160;“critical”,&#160;that&#160;partition&#160;can&#160;be&#160;<br/>
&#160;&#160;configured&#160;to&#160;operate with so&#160;called&#160;“single&#160;sector&#160;usage”,&#160;that&#160;is,&#160;FEE&#160;ensures&#160;that&#160;all&#160;<br/>
data blocks’&#160;recent&#160;instances&#160;are&#160;located&#160;within a&#160;single&#160;logical&#160;sector.&#160;Before&#160;switching&#160;<br/>to&#160;the&#160;other&#160;one,&#160;all&#160;recent&#160;instances&#160;will&#160;be&#160;copied.&#160;This&#160;results&#160;in most&#160;robust&#160;<br/>operations&#160;(concerning&#160;aborts).&#160;However,&#160;there&#160;are penalties in&#160;performance,&#160;<br/>especially&#160;because no&#160;BSS&#160;can&#160;actually&#160;be&#160;performed,&#160;as&#160;well&#160;as in&#160;flash&#160;usage,&#160;<br/>because always&#160;all&#160;recent&#160;data instances&#160;will&#160;be&#160;copied.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>Even&#160;though&#160;the&#160;FEE&#160;in&#160;FBL&#160;does&#160;not&#160;know&#160;anything&#160;about&#160;Application’s,&#160;critical&#160;blocks&#160;<br/>
&#160;&#160;can&#160;be&#160;handled&#160;safely,&#160;unless added&#160;to FBL&#160;configuration and&#160;set&#160;to&#160;“uncritical”&#160;(thus&#160;<br/>
configured&#160;inconsistently).&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
33&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-34_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-34_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-34_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-34_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-34_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>If&#160;Data&#160;Flash&#160;is&#160;being&#160;shared&#160;between&#160;Application and FBL,&#160;it&#160;is&#160;highly&#160;recommended&#160;<br/>
<b>&#160;&#160;</b>to configure all&#160;FBL&#160;blocks&#160;being&#160;“critical”.&#160;Typically&#160;there are&#160;some blocks,&#160;containing&#160;<br/>
information&#160;about&#160;Application’s&#160;validity&#160;and information whether&#160;to&#160;start&#160;Application or&#160;<br/>FBL.&#160;These blocks&#160;are critical&#160;to an&#160;ECU!&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>It&#160;is&#160;not&#160;recommended&#160;to&#160;mark&#160;blocks&#160;as&#160;“critical”&#160;and “immediate”.&#160;Requirements&#160;on&#160;<br/>
&#160;&#160;both&#160;types&#160;contradict:&#160;while “immediate”&#160;data&#160;are&#160;required&#160;to&#160;be&#160;written&#160;fast,&#160;“critical”&#160;<br/>
data are&#160;required&#160;to be&#160;written&#160;very&#160;safely,&#160;implying additional&#160;operations,&#160;which slow&#160;<br/>down&#160;write performance.&#160;<br/>
<b>2.12&#160;&#160;Fee_MainFunction Triggering&#160;</b><br/>
&#160;<br/>
In&#160;&#160;AUTOSAR&#160;&#160;release&#160;&#160;4.x&#160;&#160;an&#160;&#160;additional&#160;&#160;option&#160;&#160;is&#160;&#160;introduced,&#160;&#160;to&#160;&#160;be&#160;&#160;able&#160;&#160;to&#160;&#160;call&#160;&#160;the&#160;<br/>Fee_MainFunction&#160;in&#160;a&#160;cyclic task or&#160;in&#160;a&#160;background&#160;task.&#160;<br/>
The&#160;&#160;cyclic&#160;&#160;task&#160;&#160;(default&#160;&#160;configuration)&#160;&#160;is&#160;&#160;used&#160;&#160;when&#160;&#160;the&#160;&#160;main&#160;&#160;function&#160;&#160;shall&#160;&#160;be&#160;&#160;triggered&#160;<br/>periodically.&#160;Typically&#160;the&#160;cycle&#160;time&#160;needs&#160;to&#160;be&#160;defined,&#160;for example&#160;10ms.&#160;<br/>
If&#160;the&#160;Fee_MainFunction&#160;shall&#160;be&#160;accessed&#160;quicker,&#160;the&#160;function&#160;shall&#160;be&#160;called&#160;in&#160;a&#160;<br/>background&#160;task.&#160;The&#160;background&#160;task runs&#160;when&#160;the&#160;system&#160;has nothing&#160;to&#160;do&#160;further.&#160;<br/>The&#160;Fee_MainFunction&#160;is called&#160;as&#160;often&#160;as the&#160;available&#160;CPU load&#160;allow.&#160;&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>If&#160;the&#160;system&#160;is&#160;overloaded,&#160;it&#160;may&#160;happen&#160;that&#160;the&#160;background&#160;task&#160;is&#160;no&#160;longer&#160;called.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Note&#160;<br/></b>The&#160;Fee_MainFunction&#160;should not&#160;be&#160;triggered&#160;faster&#160;than&#160;Fls_MainFunction,&#160;<br/>
&#160;&#160;because&#160;the&#160;FEE&#160;must&#160;wait&#160;for&#160;the&#160;FLS.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
34&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=35></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-35_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>3&#160;&#160;Integration&#160;</b><br/>
This&#160;chapter&#160;gives&#160;necessary&#160;information&#160;for&#160;the&#160;integration&#160;of&#160;&#160;the&#160;MICROSAR&#160;&#160;FEE&#160;&#160;into&#160;<br/>an&#160;application&#160;environment&#160;of&#160;an&#160;ECU.&#160;<br/>
<b>3.1&#160;</b><br/>
<b>Scope&#160;of&#160;Delivery&#160;</b><br/>
The&#160;delivery&#160;of&#160;the&#160;&#160;FEE&#160;contains&#160;the&#160;files&#160;which&#160;are&#160;described&#160;in&#160;the&#160;chapters<a href="TechnicalReference_Fees.html#35">&#160;3.1.1&#160;</a>and&#160;<br/><a href="TechnicalReference_Fees.html#36">3.1.2.</a>&#160;<br/>
<b>3.1.1&#160;</b><br/>
<b>Static&#160;Files&#160;</b><br/>
<b>File&#160;Name&#160;</b><br/>
<b>Description&#160;</b><br/>
Fee.h&#160;<br/>
Defines&#160;the&#160;public&#160;interface of&#160;MICROSAR&#160;FEE&#160;module.&#160;<br/>
Fee_InitEx.h&#160;<br/>
Declares&#160;Fee_InitEx&#160;service.&#160;Shall&#160;be&#160;included&#160;by&#160;user&#160;if,&#160;and&#160;only&#160;if,&#160;<br/>extended initialization via&#160;Fee_InitEx()&#160;(see&#160;chapter<a href="TechnicalReference_Fees.html#45">&#160;4.3.2)</a>&#160;is&#160;used.&#160;<br/>
Fee_Types.h&#160;<br/>
Defines&#160;public&#160;types&#160;of&#160;FEE.&#160;<br/>
Fee.c&#160;<br/>
Implements&#160;MICROSAR&#160;FEE&#160;module’s&#160;API.&#160;<br/>
Fee_Processing.c&#160;<br/>
Implements&#160;module’s&#160;processing,&#160;including&#160;the&#160;state&#160;machine&#160;<br/>
Fee_IntBase.h&#160;<br/>
Defines&#160;basic&#160;internal&#160;type&#160;definitions&#160;<br/>
Fee_JopParams.h&#160;<br/>
Fee_Int.h&#160;<br/>
Defines&#160;the&#160;internal&#160;interface&#160;for&#160;all&#160;module internal&#160;source&#160;files,&#160;as&#160;<br/>well&#160;as the&#160;container&#160;for&#160;all&#160;RAM&#160;variables&#160;which&#160;are&#160;used&#160;by&#160;the&#160;FEE.&#160;<br/>
Fee_Partition.h&#160;<br/>
Provide&#160;internal&#160;services to&#160;manage&#160;partitions&#160;<br/>
Fee_PartitionDefs.h&#160;<br/>Fee_Partition.c&#160;<br/>
Fee_Sector.h&#160;<br/>
Internal&#160;services abstracting&#160;access&#160;to logical&#160;sectors&#160;<br/>
Fee_SectorDefs.h&#160;<br/>Fee_Sector.c&#160;<br/>
Fee_ChunkInfo.h&#160;<br/>
Internal&#160;services providing access&#160;to&#160;Chunks&#160;and&#160;instances contained&#160;<br/>
Fee_ChunkInfoDefs.h&#160;&#160;within.&#160;<br/>Fee_ChunkInfo.c&#160;<br/>
Fee_Cbk.h&#160;<br/>
Defines&#160;the&#160;callback&#160;interface&#160;for&#160;the&#160;lower&#160;layer.&#160;<br/>
Fee_bswmd.arxml&#160;<br/>
Contains the&#160;formal&#160;notation&#160;of&#160;all&#160;information,&#160;which belongs&#160;to&#160;the&#160;<br/>FEE.&#160;<br/>
Identifier.xml&#160;<br/>
Defines&#160;all&#160;configuration&#160;parameters.2&#160;<br/>
Fee.xml&#160;<br/>
Defines&#160;the&#160;GUI&#160;which represents&#160;this&#160;module<a href="TechnicalReference_Fees.html#35">.2&#160;</a><br/>
If_AsrIfFee.jar&#160;<br/>
Generator&#160;plug-in&#160;for&#160;DaVinci&#160;Configurator&#160;5&#160;<br/>
Table&#160;3-1&#160;&#160;&#160;Static&#160;files&#160;<br/>
Only&#160;Fee.h&#160;shall&#160;be&#160;included&#160;directly&#160;by&#160;other&#160;components.&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>2&#160;AUTOSAR&#160;3.x&#160;deliveries&#160;only&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
35&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-36_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>3.1.2&#160;</b><br/>
<b>Dynamic&#160;Files&#160;</b><br/>
The&#160;dynamic&#160;files are&#160;generated&#160;by&#160;the&#160;configuration&#160;tool&#160;DaVinci Configurator.&#160;<br/>
<b>File&#160;Name&#160;</b><br/>
<b>Description&#160;</b><br/>
Fee_Cfg.h&#160;<br/>
Contains the&#160;static&#160;configuration part&#160;of&#160;this&#160;module.&#160;<br/>
Fee_Lcfg.c&#160;<br/>
Contains the&#160;link-time part&#160;of&#160;configuration.&#160;<br/>
Fee_PrivateCfg.h&#160;&#160;Contains the&#160;static&#160;configuration part,&#160;which is only&#160;included&#160;of&#160;this&#160;<br/>
module.&#160;<br/>
Table&#160;3-2&#160;&#160;&#160;Generated&#160;files&#160;<br/>
<b>3.2&#160;</b><br/>
<b>Compiler&#160;Abstraction and Memory&#160;Mapping&#160;&#160;</b><br/>
The&#160;&#160;objects&#160;&#160;(e.g.&#160;&#160;variables,&#160;&#160;functions,&#160;&#160;constants)&#160;&#160;are&#160;&#160;declared&#160;&#160;by&#160;&#160;compiler&#160;&#160;independent&#160;<br/>definitions&#160;&#160;–&#160;&#160;the&#160;&#160;compiler&#160;&#160;abstraction&#160;&#160;definitions.&#160;&#160;Each&#160;&#160;compiler&#160;&#160;abstraction&#160;&#160;definition&#160;&#160;is&#160;<br/>assigned&#160;to&#160;a&#160;memory&#160;section.&#160;<br/>The&#160;&#160;following&#160;&#160;table&#160;&#160;contains&#160;&#160;the&#160;&#160;memory&#160;&#160;section&#160;&#160;names&#160;&#160;and&#160;&#160;the&#160;&#160;compiler&#160;&#160;abstraction&#160;<br/>definitions defined&#160;for the&#160;FEE&#160;and&#160;illustrate&#160;their&#160;assignment&#160;among&#160;each&#160;other.&#160;<br/>
<b>Compiler&#160;Abstraction&#160;</b><br/>
<b>Definitions&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Memory&#160;Mapping</b><br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Sections&#160;</b><br/>
&#160;<br/>
&#160;<br/>
FEE_API_CODE<br/>
FEE_APPL_CODE<br/>
FEE_APPL_CONFIG<br/>
FEE_APPL_DATA<br/>
FEE_CONST<br/>
FEE_PRIVATE_CODE<br/>
FEE_PRIVATE_CONST<br/>
FEE_PRIVATE_DATA<br/>
FEE_VAR<br/>
FEE_VAR_NOINIT<br/>
FEE_START_SEC_CODE&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
FEE_START_SEC_CONST_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
FEE_START_SEC_APPL_CONFIG_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
FEE_START_SEC_VAR_NOINIT_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
FEE_START_SEC_VAR_INIT_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Table&#160;3-3&#160;&#160;&#160;Compiler&#160;abstraction&#160;and&#160;memory&#160;mapping&#160;<br/>
&#160;&#160;FEE_START_SEC_CODE / FEE_STOP_SEC_CODE&#160;<br/>
–&#160;&#160;Placement&#160;of&#160;all&#160;API&#160;functions&#160;<br/>
–&#160;&#160;FEE_API_CODE&#160;<br/>
Calling&#160;convention&#160;for&#160;all&#160;API&#160;functions&#160;<br/>Note&#160;that&#160;these&#160;functions are called&#160;from&#160;different&#160;modules,&#160;suitable&#160;<br/>convention&#160;depends on&#160;global section&#160;mapping.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
36&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-37_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-37_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-37_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
–&#160;&#160;FEE_PRIVATE_CODE&#160;<br/>
Calling&#160;convention&#160;all&#160;internal&#160;functions&#160;<br/>It&#160;is recommended&#160;to&#160;locate&#160;all&#160;FEE&#160;code&#160;sections into&#160;one&#160;single&#160;output&#160;<br/>section&#160;and&#160;to&#160;make&#160;the&#160;internal&#160;function&#160;calls&#160;as&#160;“near”&#160;as possible.&#160;<br/>
&#160;&#160;FEE_START_SEC_APPL_CONFIG_UNSPECIFIED /&#160;<br/>
FEE_STOP_SEC_APPL_CONFIG_UNSPECIFIED&#160;<br/>
–&#160;&#160;FEE_APPL_CONFIG&#160;<br/>
Configurable&#160;constants&#160;allocated&#160;in&#160;Fee_Lcfg.c&#160;<br/>
&#160;&#160;FEE_START_SEC_CONST_UNSPECIFIED /&#160;<br/>
FEE_STOP_SEC_CONST_UNSPECIFIED&#160;<br/>
–&#160;&#160;FEE_PRIVATE_CONST&#160;<br/>
Internal constants,&#160;to&#160;be&#160;accessed&#160;only&#160;from&#160;within&#160;FEE.&#160;<br/>
–&#160;&#160;FEE_CONST&#160;<br/>
All&#160;module&#160;constants,&#160;to&#160;be&#160;accessed&#160;from&#160;outside&#160;the&#160;FEE&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>At&#160;least&#160;on&#160;16bit&#160;platforms&#160;it&#160;is&#160;recommended&#160;to locate&#160;code&#160;and&#160;constants&#160;into&#160;same&#160;<br/>
&#160;&#160;memory&#160;area,&#160;in order&#160;to&#160;get&#160;most&#160;efficient&#160;access&#160;(“near”).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;&#160;FEE_START_SEC_VAR_NOINIT_UNSPECIFIED /&#160;<br/>
FEE_STOP_SEC_VAR_NOINIT_UNSPECIFIED&#160;<br/>
–&#160;&#160;FEE_VAR_NOINIT&#160;<br/>
Module&#160;variables&#160;which&#160;do&#160;not&#160;need&#160;to&#160;be&#160;initialized&#160;(not&#160;even&#160;zeroed&#160;out)&#160;<br/>There&#160;are&#160;not&#160;intended&#160;to&#160;be&#160;accessed&#160;outside&#160;FEE.&#160;<br/>
&#160;<br/>
&#160;&#160;FEE_START_SEC_VAR_INIT_UNSPECIFIED /&#160;<br/>
FEE_STOP_SEC_VAR_INIT_UNSPECIFIED&#160;<br/>
–&#160;&#160;FEE_VAR&#160;<br/>
Internal global variables of&#160;the&#160;module&#160;which&#160;must&#160;be&#160;initialized&#160;by&#160;start-up&#160;<br/>code&#160;and&#160;which&#160;are not&#160;fixed&#160;to&#160;one&#160;type&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Currently&#160;Fee_ModuleStatus_t&#160;is&#160;the&#160;only&#160;variable that&#160;needs&#160;to&#160;be&#160;initialized,&#160;in&#160;<br/>
&#160;&#160;order&#160;to&#160;get&#160;the&#160;“(Un)Init&#160;Development&#160;Check”&#160;working.&#160;<br/>
If&#160;this&#160;check&#160;was disabled&#160;at&#160;pre-compile time,&#160;FEE&#160;does not&#160;have any&#160;initialized&#160;<br/>variables.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
37&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-38_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-38_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-38_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-38_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Caution&#160;<br/></b>The&#160;distance&#160;of&#160;FEE_APPL_DATA&#160;must&#160;be&#160;the&#160;same or&#160;bigger&#160;than&#160;the&#160;distance of&#160;<br/>
<b>&#160;&#160;</b>FEE_VAR_NOINIT.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;FEE_APPL_DATA&#160;is used&#160;to&#160;reference&#160;to&#160;buffers&#160;provided&#160;by&#160;client&#160;software.&#160;&#160;<br/>
<b>3.3&#160;</b><br/>
<b>Dependencies&#160;on SW&#160;Modules&#160;</b><br/>
<b>3.3.1&#160;</b><br/>
<b>OSEK/AUTOSAR OS&#160;</b><br/>
This&#160;operating&#160;system&#160;is&#160;used&#160;for&#160;task&#160;scheduling,&#160;interrupt&#160;handling,&#160;global&#160;suspend&#160;and&#160;<br/>restore&#160;&#160;of&#160;&#160;interrupts&#160;&#160;and&#160;&#160;creating&#160;&#160;of&#160;&#160;the&#160;&#160;Interrupt&#160;&#160;Vector&#160;&#160;Table.&#160;&#160;Resources&#160;&#160;like&#160;&#160;shared&#160;<br/>variables&#160;can&#160;be&#160;protected&#160;by&#160;the&#160;usage&#160;of&#160;OS&#160;services.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>FEE&#160;does not&#160;directly&#160;depend&#160;on&#160;OS.&#160;Rather,&#160;dependency&#160;is&#160;actually&#160;created&#160;by&#160;<br/>
&#160;&#160;integrator&#160;when configuring&#160;OS&#160;services and&#160;assigning&#160;Fee_MainFunction&#160;to&#160;an&#160;OS&#160;<br/>
task&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>3.3.2&#160;</b><br/>
<b>Module&#160;SchM&#160;</b><br/>
In&#160;&#160;an&#160;&#160;AUTOSAR&#160;&#160;environment,&#160;&#160;protection&#160;&#160;of&#160;&#160;“critical&#160;&#160;sections”&#160;&#160;is&#160;&#160;encapsulated&#160;&#160;by&#160;&#160;the&#160;<br/>Scheduling&#160;Manager,&#160;SchM.&#160;<br/>Integrator&#160;&#160;has&#160;&#160;to&#160;&#160;ensure,&#160;&#160;SchM&#160;&#160;maps&#160;&#160;critical&#160;&#160;section&#160;&#160;functions&#160;&#160;to&#160;&#160;appropriate&#160;&#160;services.&#160;<br/>Therefore&#160;SchM&#160;just&#160;encapsulates&#160;dependency&#160;to&#160;OS.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Dependency&#160;on&#160;SchM&#160;can&#160;be&#160;globally&#160;disabled&#160;in DaVinci&#160;Configurator.&#160;Then&#160;the&#160;<br/>
&#160;&#160;(probable)&#160;more direct&#160;dependency&#160;to&#160;OS&#160;would be&#160;used.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>3.3.3&#160;</b><br/>
<b>Module&#160;Det&#160;</b><br/>
This&#160;module&#160;&#160;is&#160;&#160;the&#160;&#160;Development&#160;&#160;Error&#160;Tracer.&#160;&#160;It&#160;&#160;is&#160;&#160;optional&#160;&#160;and&#160;&#160;records&#160;&#160;all&#160;&#160;development&#160;<br/>errors for diagnostic&#160;purposes.&#160;&#160;<br/>
Its usage&#160;can&#160;be&#160;enabled&#160;and&#160;disabled&#160;by&#160;the&#160;switch&#160;FEE_DEV_ERROR_DETECT.&#160;<br/>
If&#160;&#160;another&#160;&#160;module&#160;&#160;is&#160;&#160;used&#160;&#160;for&#160;&#160;development&#160;&#160;error&#160;&#160;reporting,&#160;&#160;the&#160;&#160;function&#160;&#160;prototype&#160;&#160;for&#160;<br/>reporting&#160;the&#160;error&#160;can&#160;be&#160;configured&#160;by&#160;the&#160;integrator,&#160;but&#160;must&#160;have&#160;the&#160;same&#160;signature&#160;<br/>as the&#160;service&#160;Det_ReportError()&#160;(see&#160;chapte<a href="TechnicalReference_Fees.html#26">r&#160;2.6.3).</a>&#160;<br/>
<b>3.3.4&#160;</b><br/>
<b>Module&#160;Fls&#160;</b><br/>
The&#160;Fls&#160;driver&#160;provides&#160;the&#160;access&#160;to&#160;the&#160;underlying&#160;hardware.&#160;The&#160;specific&#160;properties&#160;of&#160;<br/>the&#160;flash&#160;hardware influence&#160;the&#160;configuration&#160;of&#160;the&#160;FEE&#160;component.&#160;<br/>Its services&#160;are called&#160;to&#160;request&#160;a&#160;special job&#160;to&#160;the&#160;driver.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
38&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=39></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-39_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-39_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-39_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>3.3.5&#160;</b><br/>
<b>Callback&#160;Functions&#160;</b><br/>
<b>3.3.5.1&#160;</b><br/>
<b>Lower&#160;layer interaction&#160;</b><br/>
The&#160;&#160;FEE&#160;&#160;offers&#160;&#160;the&#160;&#160;usage&#160;&#160;of&#160;&#160;callback&#160;&#160;notification&#160;&#160;functions&#160;&#160;for&#160;&#160;the&#160;&#160;underlying&#160;&#160;driver&#160;&#160;to&#160;<br/>inform&#160;<br/>
the&#160;<br/>
FEE&#160;<br/>
that&#160;<br/>
a&#160;<br/>
job&#160;<br/>
has&#160;<br/>
finished&#160;<br/>
successfully&#160;<br/>
or&#160;<br/>
not.&#160;<br/>
The&#160;<br/>
Fee_JobEndNotification()&#160;&#160;is&#160;&#160;called&#160;&#160;when&#160;&#160;a&#160;&#160;job&#160;&#160;is&#160;&#160;completed&#160;&#160;with&#160;&#160;a&#160;&#160;positive&#160;&#160;result&#160;<br/>and&#160;the&#160;&#160;Fee_JobErrorNotification()&#160;&#160;is&#160;&#160;called&#160;&#160;when&#160;a&#160;&#160;job&#160;&#160;is&#160;&#160;cancelled,&#160;&#160;aborted&#160;&#160;or&#160;<br/>failed.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The&#160;interaction&#160;between&#160;FEE&#160;and the&#160;underlying&#160;driver&#160;does not&#160;need&#160;to&#160;be performed&#160;<br/>
&#160;&#160;via a&#160;notification&#160;mechanism.&#160;Also polling&#160;mode&#160;can&#160;be&#160;chosen if&#160;desired.&#160;<br/>
However,&#160;using&#160;notifications,&#160;decreases&#160;CPU&#160;usage,&#160;because&#160;Fee_MainFunction&#160;will&#160;<br/>be&#160;left&#160;earlier&#160;as long as&#160;FEE&#160;waits&#160;for&#160;an&#160;Fls&#160;request&#160;to complete.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>3.3.5.2&#160;</b><br/>
<b>Upper layer interaction&#160;</b><br/>
The&#160;&#160;NVM&#160;&#160;offers&#160;the&#160;usage&#160;of&#160;callback&#160;notification&#160;functions&#160;for&#160;the&#160;&#160;FEE,&#160;&#160;to&#160;get&#160;&#160;informed&#160;<br/>that&#160;a&#160;job&#160;has&#160;finished&#160;successfully&#160;or&#160;not.&#160;The&#160;&#160;Nvm_JobEndNotification()&#160;is&#160;called&#160;<br/>when&#160;a&#160;job&#160;is&#160;completed&#160;with&#160;a&#160;positive&#160;result&#160;and&#160;the&#160;Nvm_JobErrorNotification()&#160;<br/>is&#160;called&#160;when&#160;a&#160;job&#160;is&#160;cancelled,&#160;aborted&#160;or&#160;failed.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The&#160;interaction&#160;between NVM&#160;and&#160;FEE&#160;does not&#160;need&#160;to&#160;be&#160;performed&#160;via a&#160;<br/>
&#160;&#160;notification&#160;mechanism.&#160;Also polling&#160;mode&#160;can&#160;be chosen&#160;if&#160;desired.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
39&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-40_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-40_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
&#160;<br/>
<b>3.3.5.3&#160;</b><br/>
<b>User Error&#160;Callback&#160;</b><br/>
<b>Prototype&#160;<br/></b>uint8&#160;<b>Appl_CriticalErrorCallback&#160;</b>(uint8 partitionId,&#160;Fee_SectorError&#160;<br/>errCode)&#160;<br/><b>Parameter&#160;<br/></b>partitionId&#160;<br/>
ID&#160;of&#160;partition&#160;the&#160;error&#160;occurred.&#160;<br/>Note&#160;that&#160;FEE&#160;publishes&#160;symbolic&#160;names&#160;<br/>(macros)&#160;as&#160;chosen&#160;in configuration.&#160;<br/>
errCode&#160;<br/>
See&#160;chapter<a href="TechnicalReference_Fees.html#42">&#160;4.2.2&#160;</a><br/>
<b>Return&#160;code&#160;<br/></b>FEE_ERRCBK_REJECT_WRITE&#160;<br/>
FEE’s&#160;partition&#160;shall&#160;enter&#160;“read&#160;only&#160;mode”&#160;<br/>currently&#160;pending&#160;and&#160;all&#160;subsequent&#160;write&#160;<br/>requests&#160;will&#160;be&#160;completed&#160;with result&#160;<br/>MEMIF_JOB_FAILED&#160;<br/>
FEE_ERRCBK_REJECT_ALL&#160;<br/>
FEE’&#160;partition&#160;shall&#160;enter&#160;“reject&#160;all&#160;mode”&#160;all&#160;<br/>subsequent&#160;requests,&#160;including&#160;currently&#160;pending&#160;<br/>one,&#160;will&#160;be&#160;completed&#160;with&#160;result&#160;<br/>MEMIF_JOB_FAILED&#160;<br/>
FEE_ERRCBK_RESOLVE_AUTOMATICALLY&#160;Try&#160;to&#160;resolve error&#160;automatically.&#160;This&#160;might&#160;<br/>
result&#160;in&#160;loss of&#160;most&#160;recent&#160;data instances.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;may&#160;be&#160;implemented&#160;by&#160;environment&#160;software,&#160;if&#160;special&#160;handling&#160;for&#160;serious errors&#160;<br/>is&#160;necessary.&#160;For&#160;instance,&#160;FEE’s&#160;default&#160;behavior&#160;might&#160;not&#160;be&#160;feasible,&#160;or&#160;additional&#160;handling,&#160;<br/>such&#160;as&#160;reporting&#160;an&#160;event&#160;to&#160;the&#160;DEM&#160;is&#160;required.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>FEE’s&#160;default&#160;behavior&#160;is&#160;to&#160;keep itself&#160;running&#160;and writable.&#160;This&#160;means,&#160;per&#160;default&#160;<br/>
&#160;&#160;the&#160;FEE&#160;tries&#160;to&#160;resolve the&#160;problem&#160;automatically,&#160;unless&#160;the&#160;error&#160;code is&#160;<br/>
FEE_SECTOR_FORMAT_FAILED,&#160;where it&#160;would enter&#160;read-only&#160;mode.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
Additionally,&#160;if&#160;development&#160;mode is&#160;configured,&#160;checks&#160;are done&#160;and in&#160;case&#160;of&#160;failure&#160;they&#160;are&#160;<br/>reported&#160;to&#160;the&#160;DET&#160;by&#160;default&#160;with the&#160;according&#160;service ID&#160;and&#160;the&#160;reason of&#160;occurrence&#160;(refer&#160;<br/>to chapter<a href="TechnicalReference_Fees.html#23">&#160;2.6.1).</a>&#160;<br/><b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
&#160;&#160;This&#160;service is&#160;synchronous.&#160;<br/>&#160;&#160;This&#160;service is&#160;non&#160;re-entrant.&#160;<br/>&#160;&#160;This&#160;service is&#160;always&#160;available.&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
&#160;&#160;This&#160;routine&#160;might be called&#160;on&#160;interrupt&#160;level,&#160;depending&#160;on the calling&#160;function.&#160;<br/>
&#160;<br/>
Each&#160;&#160;error&#160;&#160;results&#160;&#160;in&#160;&#160;a&#160;&#160;specific&#160;&#160;default&#160;&#160;behavior,&#160;&#160;which&#160;&#160;becomes&#160;&#160;effective&#160;&#160;if&#160;&#160;User&#160;&#160;Error&#160;<br/>Callback&#160;was&#160;disabled&#160;in&#160;configuration.&#160;This&#160;default&#160;behavior&#160;can&#160;also&#160;be&#160;requested&#160;from&#160;<br/>User Error Callback by&#160;using&#160;FEE_ERRCBK_RESOLVE_AUTOMATICALLY.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
40&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=41></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-41_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-41_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Error&#160;Code&#160;</b><br/>
<b>Default&#160;behavior&#160;</b><br/>
FEE_SECTORS_CORRUPTED&#160;<br/>
Try&#160;to&#160;erase/re-init&#160;logical&#160;sectors.&#160;<br/>
FEE_SECTOR_OVERFLOW&#160;<br/>
Erase the newer&#160;logical&#160;sector.&#160;<br/>
FEE_SECTOR_FORMAT_FAILED&#160;<br/>
Enter&#160;read&#160;only&#160;mode.&#160;<br/>Return&#160;value &#160;FEE_ERRCBK_RESOLVE_AUTOMATICALLY&#160;may&#160;<br/>be&#160;used by&#160;user-implemented&#160;error callback. It&#160;results&#160;in&#160;<br/>retrying&#160;logical&#160;sector format.&#160;Since&#160;it might fail&#160;with&#160;same error,&#160;<br/>retries&#160;should&#160;be&#160;limited&#160;within&#160;error callback&#160;.&#160;<br/>
FEE_SECTOR_CRITICAL_FILL_LEVEL&#160;&#160;Just continue,&#160;i.e. perform&#160;foreground&#160;sector switch,&#160;if&#160;it is&#160;<br/>
enabled.&#160;<br/>
Table&#160;3-4&#160;&#160;&#160;Error&#160;Codes&#160;and&#160;FEE’s&#160;default&#160;behavior&#160;<br/>
&#160;<br/>
<b>3.4&#160;</b><br/>
<b>Dependencies&#160;on HW&#160;modules&#160;</b><br/>
The&#160;FEE&#160;is&#160;principally&#160;hardware&#160;independent.&#160;Nevertheless,&#160;the&#160;Fls&#160;driver&#160;has&#160;to&#160;provide&#160;<br/>some&#160;&#160;parameters&#160;&#160;(defined&#160;&#160;in&#160;&#160;the&#160;&#160;BSWMD&#160;&#160;file)&#160;&#160;the&#160;&#160;FEE&#160;&#160;relies&#160;&#160;on,&#160;&#160;e.g.&#160;&#160;the&#160;&#160;page&#160;&#160;size&#160;&#160;or&#160;<br/>sector sizes.&#160;<br/>
<b>3.5&#160;</b><br/>
<b>Critical&#160;Sections&#160;</b><br/>
In&#160;&#160;general&#160;&#160;Fee_MainFunction&#160;&#160;and&#160;&#160;FEE’s&#160;&#160;job&#160;API&#160;&#160;may&#160;&#160;concurrently&#160;&#160;access&#160;&#160;variables;&#160;<br/>they&#160;<br/>
need&#160;<br/>
to&#160;<br/>
be&#160;<br/>
synchronized.&#160;<br/>
FEE&#160;<br/>
defines&#160;<br/>
one&#160;<br/>
critical&#160;<br/>
section,&#160;<br/>
FEE_EXCLUSIVE_AREA_0.&#160;&#160;Sections&#160;&#160;of&#160;&#160;code&#160;&#160;to&#160;&#160;be&#160;&#160;synchronized&#160;&#160;are&#160;&#160;very&#160;&#160;short;&#160;&#160;they&#160;<br/>contain&#160;&#160;only&#160;&#160;few&#160;&#160;instructions,&#160;&#160;and&#160;&#160;their&#160;&#160;run&#160;&#160;times&#160;&#160;do&#160;&#160;not&#160;&#160;depend&#160;&#160;on&#160;&#160;configuration.&#160;<br/>Therefore,&#160;a&#160;simple&#160;global interrupt&#160;lock&#160;may&#160;be&#160;used,&#160;though&#160;not&#160;necessary.&#160;<br/>
If&#160;Fee_MainFunction&#160;(the&#160;OS&#160;task(s)&#160;it&#160;is&#160;running&#160;in)&#160;cannot&#160;be&#160;preempted&#160;by&#160;callers&#160;of&#160;<br/>FEE&#160;API&#160;(especially&#160;NvM_MainFunction)&#160;and&#160;vice&#160;versa,&#160;no&#160;synchronization&#160;mechanism&#160;<br/>is necessary,&#160;at&#160;all.&#160;<br/>
&#160;<br/>
<b>&#160;<br/>Changes&#160;<br/></b>A&#160;second&#160;type&#160;of&#160;critical&#160;section,&#160;FEE_EXCLUSIVE_AREA_1,&#160;became&#160;obsolete.&#160;It&#160;<br/>
&#160;&#160;should not&#160;be used.&#160;Rather,&#160;it&#160;should just&#160;map&#160;to&#160;“nothing”.&#160;As&#160;specified&#160;by&#160;AUTOSAR&#160;<br/>
MainFunctions&#160;are&#160;not&#160;re-entrant.&#160;<br/>If&#160;Fee_MainFunction&#160;may&#160;be&#160;called&#160;from&#160;different&#160;(task)&#160;contexts,&#160;which may&#160;pre-<br/>empt&#160;each other,&#160;a synchronization mechanism&#160;(e.g.&#160;an&#160;OS&#160;Resource)&#160;should be&#160;<br/>locked&#160;and&#160;released&#160;outside.&#160;<br/>Usually&#160;other&#160;Main&#160;Function calls,&#160;in particular&#160;NvM_MainFunction&#160;and/or&#160;<br/>Fls_MainFunction&#160;would&#160;require&#160;synchronization&#160;as&#160;well.&#160;Thus,&#160;an&#160;externally&#160;<br/>defined mechanism&#160;could be&#160;better&#160;adapted&#160;to&#160;specific&#160;needs.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
41&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-42_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-42_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>4&#160;&#160;API&#160;Description&#160;</b><br/>
<b>4.1&#160;</b><br/>
<b>Interfaces&#160;Overview&#160;</b><br/>
For an&#160;interfaces overview&#160;please&#160;see<a href="TechnicalReference_Fees.html#12">&#160;Figure&#160;1-2.</a>&#160;<br/>
<b>4.2&#160;</b><br/>
<b>Type&#160;Definitions&#160;</b><br/>
<b>4.2.1&#160;</b><br/>
<b>Fee_SectorSwitchStatusType&#160;</b><br/>
<b>Description&#160;</b><br/>
This&#160;type&#160;specifies&#160;the possible&#160;status&#160;values&#160;of&#160;the&#160;sector switch.&#160;<br/>
<b>Range&#160;</b><br/>
FEE_SECTOR_SWITCH_IDLE&#160;<br/>
The&#160;sector switch&#160;is&#160;currently&#160;not running.&#160;<br/>
FEE_SECTOR_SWITCH_BLOCK_COPY&#160;The&#160;sector switch&#160;is&#160;currently&#160;busy&#160;with copying&#160;blocks/datasets&#160;in&#160;a&#160;<br/>
partition&#160;from&#160;the logical&#160;source sector to the&#160;logical&#160;target sector.&#160;<br/>
FEE_SECTOR_SWITCH_ERASE&#160;<br/>
The&#160;sector switch&#160;is&#160;currently&#160;busy&#160;formatting&#160;the&#160;previous&#160;source&#160;<br/>sector&#160;in a&#160;partition.&#160;<br/>
FEE_SECTOR_SWITCH_UNINIT&#160;<br/>
The&#160;FEE&#160;is&#160;not&#160;initialized.&#160;This&#160;result&#160;may&#160;only&#160;be&#160;delivered if&#160;<br/>“Development Error Detection”&#160;was&#160;enabled.&#160;<br/>
Table&#160;4-1&#160;&#160;&#160;Fee_SectorSwitchStatusType&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>This&#160;is&#160;an&#160;addition&#160;to&#160;AUTOSAR.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.2.2&#160;</b><br/>
<b>Fee_SectorErrorType&#160;</b><br/>
<b>Description&#160;</b><br/>
This&#160;type&#160;specifies&#160;the possible&#160;errors&#160;which&#160;shall&#160;describe&#160;erroneous&#160;situations&#160;the&#160;FEE&#160;can&#160;reach.&#160;<br/>
<b>Range&#160;</b><br/>
FEE_SECTORS_CORRUPTED&#160;<br/>
The&#160;sector headers&#160;respectively&#160;the sector ID&#160;of&#160;both&#160;logical&#160;<br/>sectors&#160;could&#160;not&#160;be&#160;read.&#160;Hence,&#160;the&#160;most recent sector could&#160;<br/>not be determined.&#160;<br/>
FEE_SECTOR_OVERFLOW&#160;<br/>
Both&#160;logical&#160;sectors&#160;are completely&#160;filled&#160;and&#160;it&#160;is&#160;not&#160;possible to&#160;<br/>write&#160;any&#160;data.&#160;Nevertheless, it is&#160;still&#160;possible&#160;to&#160;read&#160;data&#160;from&#160;<br/>the&#160;Flash memory.&#160;<br/>
FEE_SECTOR_FORMAT_FAILED&#160;<br/>
One&#160;logical&#160;sector could&#160;not be&#160;allocated correctly, e.g.&#160;sector&#160;<br/>header is&#160;not&#160;valid.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
42&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-43_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-43_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-43_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
FEE_SECTOR_CRITICAL_FILL_LEVEL&#160;Foreground&#160;Sector&#160;Switch Threshold exceeded,&#160;and both&#160;logical&#160;<br/>
sectors&#160;are currently&#160;in use.&#160;This&#160;means&#160;that&#160;the&#160;flash&#160;is&#160;nearly&#160;<br/>full. If&#160;FSS&#160;was&#160;disabled, this&#160;error code&#160;also&#160;denotes&#160;a&#160;<br/>temporary&#160;read&#160;only&#160;condition, since FEE&#160;won’t&#160;write to flash&#160;<br/>unless&#160;Fee_EnableFss&#160;was&#160;called.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>This&#160;code actually&#160;does&#160;not&#160;denote an&#160;error.&#160;<br/>
&#160;&#160;Rather&#160;it&#160;denotes a&#160;“risky”&#160;situation;&#160;an&#160;error&#160;<br/>
(sector&#160;overflow)&#160;might&#160;follow.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Table&#160;4-2&#160;&#160;&#160;Fee_SectorError&#160;&#160;Type&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>This&#160;is&#160;an&#160;addition&#160;to&#160;AUTOSAR.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
43&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=44></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-44_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-44_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-44_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>4.3&#160;</b><br/>
<b>Services&#160;provided by&#160;FEE&#160;</b><br/>
The&#160;FEE&#160;API&#160;consists&#160;of&#160;services,&#160;which&#160;are realized&#160;by&#160;function&#160;calls.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>Most&#160;of&#160;the&#160;following&#160;API&#160;functions&#160;report&#160;development&#160;errors&#160;as&#160;listed&#160;in chapter<a href="TechnicalReference_Fees.html#23">&#160;2.6.1.&#160;</a><br/>
&#160;&#160;If&#160;an&#160;error&#160;is&#160;detected&#160;the&#160;concerning&#160;API&#160;function&#160;will&#160;be&#160;left&#160;without&#160;any&#160;further&#160;<br/>
actions.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.3.1&#160;</b><br/>
<b>Fee_Init&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_Init</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service initializes&#160;the&#160;FEE&#160;module and&#160;all&#160;needed internal&#160;variables.&#160;<br/>The&#160;FEE&#160;module&#160;doesn't&#160;support&#160;any&#160;runtime configuration.&#160;Hence,&#160;a pointer to&#160;the&#160;configuration&#160;structure&#160;<br/>is&#160;not&#160;needed&#160;by&#160;this&#160;service.&#160;<br/>The&#160;FEE&#160;does&#160;not&#160;initialize&#160;the&#160;underlying Flash driver,&#160;but this&#160;shall&#160;be&#160;done by&#160;the&#160;ECUM&#160;module.&#160;(This&#160;is&#160;<br/>no&#160;AUTOSAR deviation.)&#160;<br/>This&#160;function&#160;is&#160;specified&#160;i<a href="TechnicalReference_Fees.html#2">n&#160;[1], a</a>nd&#160;it should be&#160;used&#160;unless, a&#160;different configuration&#160;shall&#160;be&#160;used&#160;by&#160;<br/>FEE.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>This&#160;service calls&#160;Fee_InitEx&#160;(see&#160;clau<a href="TechnicalReference_Fees.html#45">se&#160;4.3.2)</a>,&#160;passing&#160;pointer&#160;to&#160;generated&#160;<br/>
&#160;&#160;Fee_Config structure.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service shall&#160;not&#160;be&#160;called&#160;during&#160;a pending job.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-3&#160;&#160;&#160;Fee_Init&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
44&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=45></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-45_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-45_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>4.3.2&#160;</b><br/>
<b>Fee_InitEx&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_InitEx</b>(Fee_ConfigRefType&#160;ConfigPtr)&#160;<br/>
<b>Parameter&#160;</b><br/>
ConfigPtr&#160;<br/>
Pointer&#160;to FEE’s&#160;Block&#160;configuration,&#160;which&#160;is&#160;always&#160;named&#160;Fee_Config; it&#160;<br/>is&#160;defined in Fee_Lcfg.c, and its&#160;incomplete&#160;declaration&#160;is&#160;available&#160;via Fee.h.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;</b><br/>
&#160;&#160;This&#160;parameter&#160;enables&#160;sharing&#160;FEE&#160;code&#160;between a&#160;Flash&#160;<br/>
Bootloader&#160;and&#160;application,&#160;while both use&#160;different&#160;Block&#160;<br/>configurations.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;is&#160;an&#160;alternative/extended&#160;service&#160;to&#160;initialize&#160;the&#160;FEE&#160;module and all&#160;needed internal&#160;variables.&#160;<br/>The&#160;FEE&#160;does&#160;not&#160;initialize&#160;the&#160;underlying Flash driver,&#160;but this&#160;shall&#160;be&#160;done by&#160;the ECUM module. (this&#160;is&#160;<br/>no&#160;AUTOSAR deviation)&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service shall&#160;not&#160;be&#160;called&#160;during&#160;a pending job.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-4&#160;&#160;&#160;Fee_InitEx&#160;<br/>
<b>4.3.3&#160;</b><br/>
<b>Fee_SetMode&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_SetMode</b>(MemIf_ModeType Mode)&#160;<br/>
<b>Parameter&#160;</b><br/>
Mode&#160;<br/>
MEMIF_MODE_SLOW:&#160;Enable processing of&#160;Background Sector Switches&#160;<br/>
MEMIF_MODE_FAST:&#160;Disable processing&#160;of&#160;Background&#160;Sector Switches&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
45&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=46></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-46_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-46_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-46_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-46_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-46_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>Deviating&#160;from<a href="TechnicalReference_Fees.html#2">&#160;[1],</a>&#160;this&#160;function does&#160;not&#160;call&#160;underlying&#160;Flash&#160;driver’s&#160;related&#160;<br/>
&#160;&#160;function,&#160;Fls_SetMode().&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>This&#160;service is&#160;a&#160;synchronous&#160;call&#160;and&#160;does&#160;not&#160;need&#160;to be&#160;processed&#160;by&#160;the&#160;<br/>
&#160;&#160;Fee_MainFunction().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Any&#160;value&#160;different&#160;from&#160;MEMIF_MODE_SLOW&#160;is&#160;treated&#160;as&#160;MEMIF_MODE_FAST.&#160;<br/>
&#160;&#160;In particular,&#160;there&#160;is&#160;no&#160;parameter&#160;check.&#160;<br/>
This&#160;is&#160;important,&#160;especially&#160;if&#160;MemIf_ModeType&#160;(defined by&#160;MemIf&#160;implementation)&#160;<br/>happens&#160;to&#160;be&#160;not&#160;plain numeric&#160;type&#160;but&#160;not&#160;an&#160;enum&#160;type.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Calling&#160;Fee_SetMode()&#160;has&#160;significant&#160;impact&#160;on&#160;FEE’s&#160;behavior.&#160;After&#160;startup&#160;of&#160;<br/>
<b>&#160;&#160;</b>the&#160;ECU&#160;(ReadAll-process&#160;by&#160;the&#160;NVM&#160;has&#160;finished),&#160;the&#160;FEE&#160;is&#160;set&#160;to&#160;<br/>
MEMIF_MODE_SLOW,&#160;which is initiated&#160;by&#160;the&#160;NVM,&#160;if&#160;configured&#160;accordingly.&#160;This&#160;is&#160;<br/>an&#160;indicator&#160;to&#160;the&#160;FEE,&#160;which enables processing&#160;relative time&#160;consuming&#160;sector&#160;<br/>switch&#160;in background,&#160;i.e.&#160;while no&#160;user&#160;jobs&#160;are&#160;pending.&#160;Refer&#160;to chapter<a href="TechnicalReference_Fees.html#27">&#160;2.7&#160;</a>for&#160;<br/>details&#160;on&#160;sector&#160;switches.&#160;<br/>On&#160;the&#160;other&#160;hand,&#160;during&#160;shut-down,&#160;performing&#160;sector&#160;switches&#160;in background&#160;may&#160;<br/>be&#160;inhibited&#160;by&#160;setting&#160;FEE&#160;to&#160;MEMIF_MODE_FAST.&#160;&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-5&#160;&#160;&#160;Fee_SetMode&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
46&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=47></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-47_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-47_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>4.3.4&#160;</b><br/>
<b>Fee_Read&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>Fee_Read&#160;<br/></b>(&#160;<br/>&#160;&#160;uint16&#160;BlockNumber,&#160;<br/>&#160;&#160;uint16&#160;BlockOffset,&#160;<br/>&#160;&#160;uint8&#160;*DataBufferPtr,&#160;<br/>&#160;&#160;uint16&#160;Length&#160;<br/>)&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockNumber&#160;<br/>
Handle&#160;of&#160;a&#160;block&#160;(depending&#160;on block&#160;configuration)&#160;<br/>
BlockOffset&#160;<br/>
Read&#160;address&#160;offset&#160;inside&#160;the&#160;block&#160;<br/>
DataBufferPtr&#160;<br/>
Pointer&#160;to data&#160;buffer&#160;<br/>
Length&#160;<br/>
Number&#160;of&#160;bytes&#160;to&#160;read&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Read&#160;job has&#160;been accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Read&#160;job has&#160;not&#160;been accepted.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;starts&#160;the&#160;read processing for the&#160;specified&#160;block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>The&#160;job&#160;processing&#160;is&#160;asynchronous.&#160;The&#160;result&#160;of&#160;the&#160;finished&#160;job&#160;can&#160;be&#160;polled&#160;by&#160;<br/>
&#160;&#160;calling&#160;Fee_GetJobResult().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
When&#160;the current&#160;block&#160;is&#160;found, the parameters&#160;BlockOffset&#160;and&#160;Length&#160;are used&#160;to&#160;call&#160;the&#160;Read function&#160;<br/>of&#160;the&#160;underlying&#160;Fls&#160;driver&#160;to&#160;read&#160;out&#160;the&#160;content&#160;of&#160;the flash memory&#160;to&#160;the&#160;provided DataBufferPtr.&#160;<br/>As&#160;the&#160;processing&#160;is&#160;asynchronous&#160;the return&#160;value&#160;of&#160;the Fls&#160;Read&#160;function can&#160;only&#160;be&#160;returned&#160;indirectly&#160;<br/>via the job&#160;result.&#160;<br/>Additionally,&#160;if&#160;development mode&#160;is&#160;configured,&#160;parameter&#160;checks&#160;are done&#160;and in case of&#160;failure&#160;they&#160;are&#160;<br/>reported&#160;to&#160;the&#160;DET&#160;by&#160;default&#160;with the according&#160;service ID&#160;and&#160;the&#160;reason&#160;of&#160;occurrence (refer to&#160;chapter&#160;<br/><a href="TechnicalReference_Fees.html#23">2.6.1).</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;asynchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-6&#160;&#160;&#160;Fee_Read&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
47&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=48></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-48_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-48_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>4.3.5&#160;</b><br/>
<b>Fee_Write&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>Fee_Write&#160;&#160;<br/></b>(&#160;<br/>&#160;&#160;uint16&#160;BlockNumber,&#160;<br/>&#160;&#160;uint8&#160;*DataBufferPtr&#160;<br/>)&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockNumber&#160;<br/>
Handle&#160;of&#160;the&#160;block&#160;(depending on&#160;block&#160;configuration)&#160;<br/>
DataBufferPtr&#160;<br/>
Pointer&#160;to data&#160;buffer&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Write&#160;job&#160;has&#160;been&#160;accepted&#160;<br/>
E_NOT_OK&#160;<br/>
Write&#160;job&#160;has&#160;not been&#160;accepted.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;starts&#160;the&#160;write processing for the&#160;specified&#160;block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>The&#160;job&#160;processing&#160;is&#160;asynchronous.&#160;The&#160;result&#160;of&#160;the&#160;finished&#160;job&#160;can&#160;be&#160;polled&#160;by&#160;<br/>
&#160;&#160;calling&#160;Fee_GetJobResult().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
When&#160;the next free&#160;area for&#160;the&#160;block&#160;was&#160;found,&#160;the&#160;content&#160;of&#160;the&#160;provided&#160;DataBufferPtr is&#160;written&#160;to&#160;the&#160;<br/>flash memory.&#160;<br/>Additionally,&#160;management information&#160;is&#160;stored&#160;to identify&#160;the block.&#160;<br/>The&#160;real&#160;count&#160;of&#160;bytes&#160;which must be written&#160;depends&#160;on&#160;the&#160;hardware&#160;specific&#160;page&#160;alignment and the&#160;<br/>size&#160;of&#160;the management information.&#160;<br/>As&#160;the&#160;processing&#160;is&#160;asynchronous&#160;the return&#160;value&#160;of&#160;the Fls&#160;write&#160;function&#160;can&#160;only&#160;be&#160;returned&#160;indirectly&#160;<br/>via&#160;the job&#160;result.&#160;<br/>Additionally,&#160;if&#160;development mode is&#160;configured,&#160;parameter&#160;checks&#160;are done&#160;and in case of&#160;failure&#160;they&#160;are&#160;<br/>reported&#160;to&#160;the&#160;DET&#160;by&#160;default&#160;with the according&#160;service ID&#160;and&#160;the&#160;reason&#160;of&#160;occurrence (refer to&#160;chapter&#160;<br/><a href="TechnicalReference_Fees.html#23">2.6.1).</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-7&#160;&#160;&#160;Fee_Write&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
48&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-49_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-49_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-49_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>4.3.6&#160;</b><br/>
<b>Fee_Cancel&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_Cancel</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service cancels&#160;a&#160;currently&#160;pending job.&#160;&#160;<br/>The&#160;state&#160;of&#160;the&#160;FEE&#160;&#160;will&#160;be set&#160;to&#160;MEMIF_IDLE.&#160;<br/>If&#160;the&#160;FEE&#160;is&#160;currently&#160;IDLE, calling this&#160;service is&#160;without any&#160;effect.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>Additional&#160;actions,&#160;especially&#160;unwinding&#160;internal&#160;state&#160;machine&#160;stack&#160;and cancelling&#160;a&#160;<br/>
&#160;&#160;pending&#160;Fls&#160;job,&#160;will&#160;be&#160;done&#160;asynchronously,&#160;within next&#160;Fee_MainFunction call&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Changes&#160;<br/></b>Previous&#160;versions delayed internal&#160;clean-up&#160;until&#160;next&#160;write request&#160;arrived&#160;in order&#160;to&#160;<br/>
&#160;&#160;reduce&#160;probability&#160;of&#160;destructive cancellation.&#160;This&#160;behavior&#160;was removed&#160;–&#160;<br/>
Fee_Cancel&#160;immediately&#160;cancels&#160;any&#160;processing.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>Additionally,&#160;if&#160;development mode is&#160;configured,&#160;checks&#160;are done and&#160;in case&#160;of&#160;failure they&#160;are reported to&#160;<br/>the&#160;DET&#160;by&#160;default&#160;with&#160;the&#160;according&#160;service&#160;ID and&#160;the reason&#160;of&#160;occurrence (refer to chapter<a href="TechnicalReference_Fees.html#23">&#160;2.6.1).</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-8&#160;&#160;&#160;Fee_Cancel&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
49&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-50_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>4.3.7&#160;</b><br/>
<b>Fee_GetStatus&#160;</b><br/>
<b>Prototype&#160;<br/></b>MemIf_StatusType&#160;<b>Fee_GetStatus</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
MEMIF_UNINIT&#160;<br/>
The&#160;FEE&#160;is&#160;currently&#160;not&#160;initialized&#160;-&gt;&#160;Fee_Init()&#160;must be called to&#160;use&#160;<br/>the&#160;functionality&#160;of&#160;the&#160;FEE.&#160;<br/>
MEMIF_IDLE&#160;<br/>
The&#160;FEE&#160;is&#160;currently&#160;idle&#160;-&gt;&#160;no&#160;asynchronous&#160;job&#160;available&#160;<br/>
MEMIF_BUSY&#160;<br/>
The&#160;FEE&#160;is&#160;currently&#160;busy-&gt;&#160;a&#160;asynchronous&#160;job&#160;is&#160;currently&#160;processed&#160;by&#160;<br/>the&#160;FEE&#160;<br/>
MEMIF_BUSY_INTERNAL&#160;<br/>
The&#160;FEE&#160;has&#160;to&#160;process&#160;internal&#160;operations&#160;to&#160;ensure further&#160;write and/or&#160;<br/>invalidate&#160;jobs.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service returns&#160;the&#160;FEE’s&#160;current module state&#160;synchronously.&#160;Refer to chapt<a href="TechnicalReference_Fees.html#15">er&#160;2.3.1&#160;</a>for more details.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-9&#160;&#160;&#160;Fee_GetStatus&#160;<br/>
<b>4.3.8&#160;</b><br/>
<b>Fee_GetJobResult&#160;</b><br/>
<b>Prototype&#160;<br/></b>MemIf_JobResultType&#160;<b>Fee_GetJobResult</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
MEMIF_JOB_OK&#160;<br/>
The&#160;last job&#160;has&#160;been&#160;finished&#160;successfully.&#160;<br/>
MEMIF_JOB_PENDING&#160;<br/>
The&#160;last job&#160;is&#160;waiting for execution&#160;or currently&#160;being&#160;executed.&#160;<br/>
MEMIF_JOB_CANCELLED&#160;<br/>
The&#160;last job&#160;has&#160;been&#160;cancelled&#160;by&#160;the&#160;Fee_Cancel()&#160;service.&#160;<br/>
MEMIF_JOB_FAILED&#160;<br/>
The&#160;Flash driver reported an error or&#160;the&#160;FEE&#160;could&#160;not achieve the&#160;<br/>requested job&#160;due&#160;to&#160;hardware errors&#160;(e.g. memory&#160;cell&#160;defects).&#160;<br/>
MEMIF_BLOCK_INCONSISTENT&#160;<br/>
The&#160;data&#160;of&#160;requested&#160;block&#160;could&#160;not&#160;be&#160;read,&#160;because the&#160;data&#160;are&#160;<br/>corrupt.&#160;<br/>
MEMIF_BLOCK_INVALID&#160;<br/>
The&#160;requested&#160;block&#160;has&#160;been&#160;invalidated previously&#160;by&#160;the&#160;service&#160;<br/>Fee_InvalidateBlock()&#160;or reading&#160;from&#160;an&#160;erased block&#160;is&#160;<br/>achieved (independent from&#160;called&#160;Fee_EraseImmediateBlock()&#160;<br/>or a never&#160;written block).&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
50&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=51></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-51_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-51_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service&#160;returns&#160;the&#160;result&#160;of&#160;the last job&#160;executed.&#160;Refer to chapt<a href="TechnicalReference_Fees.html#23">er&#160;2.6.1&#160;</a>for more details.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service&#160;is&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-10&#160;&#160;&#160;Fee_GetJobResult&#160;<br/>
<b>4.3.9&#160;</b><br/>
<b>Fee_InvalidateBlock&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>Fee_InvalidateBlock</b>(uint16&#160;BlockNumber)&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockNumber&#160;<br/>
Number&#160;of&#160;the&#160;block&#160;(depending&#160;on block&#160;configuration).&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Invalidate job&#160;has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Invalidate job&#160;has&#160;not&#160;been&#160;accepted.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service invokes&#160;the invalidation&#160;procedure for the&#160;selected&#160;block. If&#160;the service succeeds&#160;the most&#160;<br/>recent data&#160;block&#160;is&#160;marked&#160;as&#160;INVALID.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>The&#160;job&#160;processing&#160;is&#160;asynchronous.&#160;The&#160;result&#160;of&#160;the&#160;finished&#160;job&#160;can&#160;be&#160;polled&#160;by&#160;<br/>
&#160;&#160;calling&#160;Fee_GetJobResult().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
When&#160;the last/current&#160;block&#160;was&#160;found&#160;the&#160;next free&#160;area&#160;will&#160;be&#160;written&#160;with&#160;special&#160;invalidate&#160;information.&#160;&#160;<br/>As&#160;this&#160;information&#160;is&#160;saved&#160;in flash memory&#160;it&#160;is&#160;resistant against resets.&#160;<br/>
&#160;<br/>Additionally,&#160;if&#160;development mode is&#160;configured,&#160;parameter&#160;checks&#160;are done&#160;and in case of&#160;failure&#160;they&#160;are&#160;<br/>reported&#160;to&#160;the&#160;DET&#160;by&#160;default&#160;with the according&#160;service ID&#160;and&#160;the&#160;reason&#160;of&#160;occurrence (refer to&#160;chapter&#160;<br/><a href="TechnicalReference_Fees.html#23">2.6.1).</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;asynchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-11&#160;&#160;&#160;Fee_InvalidateBlock&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
51&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=52></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-52_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>4.3.10&#160;&#160;Fee_GetVersionInfo&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_GetVersionInfo</b>(Std_VersionInfoType *VersionInfoPtr)&#160;<br/>
<b>Parameter&#160;</b><br/>
VersionInfoPtr&#160;<br/>
Pointer&#160;to&#160;where to store the version&#160;information&#160;of&#160;this&#160;module.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service returns&#160;the&#160;version&#160;information&#160;of&#160;this&#160;module.&#160;The&#160;version&#160;information includes:&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>Module ID&#160;<br/>
<b>&gt;&#160;&#160;</b>Vendor&#160;ID&#160;<br/>
<b>&gt;&#160;&#160;</b>Instance&#160;ID&#160;<br/>
<b>&gt;&#160;&#160;</b>Vendor&#160;specific&#160;version numbers.&#160;<br/>Additionally,&#160;if&#160;development mode is&#160;configured,&#160;parameter&#160;checks&#160;are done&#160;and in case of&#160;failure&#160;they&#160;are&#160;<br/>reported&#160;to&#160;the&#160;DET&#160;by&#160;default&#160;with the according&#160;service ID&#160;and&#160;the&#160;reason&#160;of&#160;occurrence (refer to&#160;chapter&#160;<br/><a href="TechnicalReference_Fees.html#24">0)</a>.&#160;The&#160;function&#160;does&#160;not&#160;perform&#160;any&#160;action&#160;in case&#160;of&#160;a&#160;failure.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;available,&#160;depending&#160;on&#160;pre-compile configuration&#160;checkbox&#160;'Enable&#160;<br/>
Fee_GetVersionInfo&#160;API'&#160;which is configured&#160;within the&#160;configuration&#160;tool.&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-12&#160;&#160;&#160;Fee_GetVersionInfo&#160;<br/>
<b>4.3.11&#160;&#160;Fee_EraseImmediateBlock&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>Fee_EraseImmediateBlock</b>(uint16&#160;BlockNumber)&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockNumber&#160;<br/>
Number&#160;of&#160;the&#160;block&#160;(depending&#160;on block&#160;configuration).&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Erase job&#160;has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Erase&#160;job&#160;has&#160;not been&#160;accepted.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
52&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=53></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-53_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-53_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-53_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;doesn’t&#160;erase&#160;flash memory.&#160;<br/>The&#160;addressed&#160;block&#160;is&#160;marked&#160;as&#160;invalid,&#160;thus&#160;a&#160;subsequent&#160;read&#160;request on the&#160;invalidated block&#160;<br/>completes&#160;with&#160;MEMIF_BLOCK_INVALID.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>The&#160;job&#160;processing&#160;is&#160;asynchronous.&#160;The&#160;result&#160;of&#160;the&#160;finished&#160;job&#160;can&#160;be&#160;polled&#160;by&#160;<br/>
&#160;&#160;calling&#160;Fee_GetJobResult().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Fee does not&#160;care&#160;about&#160;immediate&#160;blocks;&#160;there is&#160;no&#160;special&#160;handling.&#160;<br/>
&#160;&#160;Thus&#160;this&#160;service does&#160;exactly&#160;the&#160;same&#160;<a href="TechnicalReference_Fees.html#51">as&#160;Fee_InvalidateBlock&#160;</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;asynchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;always&#160;available.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service shall&#160;only&#160;be&#160;called&#160;by&#160;e.g.&#160;diagnostic&#160;or&#160;similar&#160;system&#160;service to&#160;pre-erase&#160;the&#160;<br/>
area&#160;for&#160;immediate&#160;data if&#160;necessary.&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-13&#160;&#160;&#160;Fee_EraseImmediateBlock&#160;<br/>
<b>4.3.12&#160;&#160;Fee_MainFunction&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_MainFunction</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service triggers&#160;the processing&#160;of&#160;the internal&#160;state machine&#160;and handles&#160;the&#160;asynchronous&#160;job&#160;and&#160;<br/>management operations.&#160;<br/>The&#160;complete&#160;handling&#160;of&#160;the job&#160;and&#160;the&#160;detection of&#160;invalidated&#160;or inconsistent&#160;blocks&#160;will&#160;be&#160;done in the&#160;<br/>internal&#160;job state machine.&#160;<br/>Additionally,&#160;if&#160;development mode is&#160;configured,&#160;checks&#160;are done and&#160;in case&#160;of&#160;failure they&#160;are&#160;reported to&#160;<br/>the&#160;DET&#160;by&#160;default&#160;with&#160;the&#160;according&#160;service&#160;ID and&#160;the reason&#160;of&#160;occurrence (refer to&#160;chapter<a href="TechnicalReference_Fees.html#23">&#160;2.6.1).</a>&#160;&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
53&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=54></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-54_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-14&#160;&#160;&#160;Fee_MainFunction&#160;<br/>
<b>4.3.13&#160;&#160;Fee_GetEraseCycle&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>Fee_GetEraseCycle</b>(&#160;<br/>&#160;&#160;uint8&#160;SectorNumber,&#160;<br/>&#160;&#160;uint32&#160;*DataPtr&#160;<br/>)&#160;<br/>
<b>Parameter&#160;</b><br/>
SectorNumber&#160;<br/>
Identifies&#160;partition&#160;and&#160;logical&#160;sector&#160;whose&#160;erase cycle counter shall&#160;be&#160;<br/>retrieved:&#160;<br/>The&#160;least significant bit chooses&#160;the sector (0&#160;or 1, meaning&#160;lower sector or&#160;<br/>upper&#160;sector, respectively);&#160;higher&#160;bits&#160;identify&#160;the partition.&#160;Partitions’&#160;<br/>symbolic&#160;names&#160;may&#160;be&#160;used, but&#160;values&#160;must be adapted (doubled).&#160;&#160;<br/>
DataPtr&#160;<br/>
Pointer&#160;to data&#160;buffer.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Job&#160;has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Job&#160;has&#160;not&#160;been&#160;accepted.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
54&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=55></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-55_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-55_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-55_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-55_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service retrieves&#160;the&#160;erase cycle counter of&#160;the specified&#160;logical&#160;sector in&#160;the&#160;provided buffer.&#160;The&#160;user&#160;<br/>can&#160;determine&#160;how&#160;often&#160;the specific&#160;sector has&#160;been&#160;erased.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>This&#160;API&#160;service is not&#160;used&#160;by&#160;the&#160;NVM.&#160;It&#160;is&#160;just&#160;a&#160;feature&#160;to&#160;retrieve the&#160;number&#160;of&#160;<br/>
&#160;&#160;erase&#160;cycle of&#160;a&#160;specific&#160;logical&#160;sector.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>The&#160;job&#160;processing&#160;is&#160;asynchronous.&#160;The&#160;result&#160;of&#160;the&#160;finished&#160;job&#160;can&#160;be&#160;polled&#160;by&#160;<br/>
&#160;&#160;calling&#160;Fee_GetJobResult().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Additionally,&#160;if&#160;development mode is&#160;configured,&#160;parameter&#160;checks&#160;are done&#160;and in case of&#160;failure&#160;they&#160;are&#160;<br/>reported&#160;to&#160;the&#160;DET&#160;by&#160;default&#160;with the according&#160;service ID&#160;and&#160;the&#160;reason&#160;of&#160;occurrence (refer to&#160;chapter&#160;<br/><a href="TechnicalReference_Fees.html#23">2.6.1).</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>This&#160;is&#160;an&#160;addition&#160;to&#160;AUTOSAR.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;asynchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;available,&#160;depending&#160;on&#160;pre-compile configuration&#160;checkbox&#160;'Enable&#160;<br/>
Fee_GetEraseCycle&#160;API'&#160;which is configured&#160;within the&#160;configuration&#160;tool.&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-15&#160;&#160;&#160;Fee_GetEraseCycle&#160;<br/>
<b>4.3.14&#160;&#160;Fee_GetWriteCycle&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>Fee_GetWriteCycle&#160;&#160;<br/></b>(&#160;<br/>&#160;&#160;uint16 BlockNumber,&#160;<br/>&#160;&#160;uint32&#160;*DataPtr&#160;<br/>)&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockNumber&#160;<br/>
Number&#160;of&#160;the&#160;block, provided&#160;by&#160;the&#160;FEE.&#160;<br/>
DataPtr&#160;<br/>
Pointer&#160;to&#160;data&#160;buffer.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Job&#160;has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Job&#160;has&#160;not&#160;been&#160;accepted.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
55&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=56></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-56_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-56_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-56_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-56_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service retrieves&#160;the&#160;write&#160;cycle counter&#160;of&#160;a&#160;specified&#160;block&#160;and saves&#160;in the&#160;provided buffer.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>This&#160;API&#160;service is not&#160;used&#160;by&#160;the&#160;NVM.&#160;It&#160;is&#160;just&#160;a&#160;feature&#160;to&#160;retrieve the&#160;number&#160;of&#160;<br/>
&#160;&#160;write cycles of&#160;a&#160;specific&#160;block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Info</b>&#160;<br/>The&#160;job&#160;processing&#160;is&#160;asynchronous.&#160;The&#160;result&#160;of&#160;the&#160;finished job can&#160;be&#160;polled by&#160;calling&#160;<br/>
&#160;&#160;Fee_GetJobResult().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Additionally,&#160;if&#160;development mode is&#160;configured,&#160;parameter&#160;checks&#160;are done&#160;and in case of&#160;failure&#160;they&#160;are&#160;<br/>reported&#160;to&#160;the&#160;DET&#160;by&#160;default&#160;with the according&#160;service ID&#160;and&#160;the&#160;reason&#160;of&#160;occurrence (refer to&#160;chapter&#160;<br/><a href="TechnicalReference_Fees.html#23">2.6.1).</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>This&#160;is&#160;an&#160;addition&#160;to&#160;AUTOSAR.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is available,&#160;depending&#160;on&#160;pre-compile configuration&#160;checkbox&#160;'Enable&#160;<br/>
Fee_GetWriteCycle&#160;API'&#160;which is configured&#160;within the&#160;configuration&#160;tool.&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-16&#160;&#160;&#160;Fee_GetWriteCycle&#160;<br/>
<b>4.3.15&#160;&#160;Fee_GetSectorSwitchStatus&#160;</b><br/>
<b>Prototype&#160;<br/></b>Fee_SectorSwitchStatusType&#160;<b>Fee_GetSectorSwitchStatus</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Fee_SectorSwitchStatusType&#160;see&#160;chapt<a href="TechnicalReference_Fees.html#42">er&#160;4.2.1&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
56&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=57></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-57_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-57_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-57_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;returns&#160;the&#160;current status&#160;of&#160;the&#160;sector switch.&#160;See&#160;chapt<a href="TechnicalReference_Fees.html#42">er&#160;4.2.1&#160;</a>for&#160;the specific&#160;return&#160;values.&#160;<br/>For more information&#160;about&#160;the&#160;sector switch&#160;see&#160;chap<a href="TechnicalReference_Fees.html#27">ter&#160;2.7.</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>This&#160;service determines&#160;FEE’s&#160;<b>current</b>&#160;sector&#160;switch processing&#160;state.&#160;<br/>
&#160;&#160;Necessity&#160;of&#160;a&#160;sector&#160;switch does&#160;not&#160;imply&#160;this&#160;service to&#160;return a&#160;value&#160;different&#160;<br/>
FEE_SECTOR_SWITCH_IDLE.&#160;For&#160;example,&#160;FEE&#160;will&#160;also report&#160;<br/>FEE_SECTOR_SWITCH_IDLE&#160;when copying&#160;a block completed,&#160;until&#160;it&#160;starts&#160;the&#160;next&#160;<br/>one.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>This&#160;is&#160;an&#160;addition&#160;to&#160;AUTOSAR.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-17&#160;&#160;&#160;Fee_GetSectorSwitchStatus&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
57&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=58></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-58_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-58_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-58_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-58_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-58_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>4.3.17&#160;&#160;Fee_ForceSectorSwitch&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>Fee_ForceSectorSwitch</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Job&#160;has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Job&#160;has&#160;not&#160;been&#160;accepted.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service forces&#160;a&#160;sector&#160;switch to&#160;be&#160;performed&#160;on&#160;all&#160;configured partitions&#160;in&#160;“Foreground&#160;Mode”,&#160;i.e.&#160;<br/>the&#160;FEE&#160;will&#160;defer next incoming&#160;job&#160;until&#160;switch has&#160;been&#160;completed.&#160;<br/>Purpose&#160;of&#160;this&#160;API is&#160;to compact&#160;partitions’&#160;flash usages&#160;to&#160;one&#160;logical&#160;sector&#160;each.&#160;<br/>FEE&#160;performs&#160;a&#160;sector switch (tries&#160;to&#160;copy&#160;data) even&#160;if&#160;it just completed&#160;one, i.e.&#160;it just cleaned up flash.&#160;<br/>
&#160;<br/>Subsequent&#160;&#160;calls&#160;to this&#160;service&#160;while&#160;FEE&#160;already&#160;is&#160;processing&#160;such&#160;a request&#160;are&#160;without&#160;any&#160;noticable&#160;<br/>effects; internally&#160;FEE&#160;restarts&#160;processing.&#160;<br/>Normally, issuing&#160;one single request is&#160;sufficient. However, in some cases&#160;it might be&#160;desirable&#160;to&#160;have&#160;<br/>both&#160;sectors&#160;of&#160;every&#160;partition&#160;cleaned up.&#160;This&#160;requires&#160;forcing&#160;two&#160;sector switches:&#160;<br/>Fee_ForceSectorSwitch();&#160;<br/>&lt;wait until IDLE&gt;&#160;<br/>Fee_ForceSectorSwitch();&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>It&#160;<b>is&#160;not&#160;mandatory</b>&#160;to explicitly&#160;wait&#160;for&#160;FEE&#160;becoming IDLE,&#160;after&#160;issuing one single&#160;<br/>
&#160;&#160;or&#160;for&#160;last&#160;Fee_ForceSectorSwitch&#160;request.&#160;<br/>
However,&#160;it&#160;<b>is&#160;mandatory</b>&#160;to&#160;wait&#160;between different&#160;requests,&#160;if&#160;several&#160;Sector&#160;<br/>Switches&#160;are&#160;required.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>In order&#160;to&#160;avoid disturbing&#160;FEE’s&#160;client&#160;layer&#160;(e.g.&#160;NVM),&#160;this&#160;service does&#160;not&#160;set&#160;<br/>
&#160;&#160;FEE’s&#160;status&#160;to&#160;MEMIF_BUSY.&#160;Instead&#160;it&#160;makes&#160;sure&#160;FEE&#160;is&#160;<br/>
MEMIF_BUSY_INTERNAL&#160;(unless&#160;it’s&#160;already&#160;MEMIF_BUSY).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Fee&#160;must&#160;be&#160;initialized&#160;before&#160;calling&#160;Fee_ForceSectorSwitch().&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>This&#160;API&#160;service is not&#160;used&#160;by&#160;the&#160;NVM.&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
58&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=59></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-59_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-59_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-59_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The&#160;processing&#160;state&#160;can be&#160;queried&#160;using&#160;Fee_GetStatus.&#160;It&#160;switches&#160;to&#160;<br/>
&#160;&#160;MEMIF_IDLE&#160;once all&#160;partitions&#160;have been&#160;processed.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>Additionally,&#160;if&#160;development mode is&#160;configured,&#160;parameter&#160;checks&#160;are done&#160;and in case of&#160;failure&#160;they&#160;are&#160;<br/>reported&#160;to&#160;the&#160;DET&#160;by&#160;default&#160;with the according&#160;service ID&#160;and&#160;the&#160;reason&#160;of&#160;occurrence (refer to chapter&#160;<br/><a href="TechnicalReference_Fees.html#23">2.6.1).</a>&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>This&#160;service is an&#160;addition&#160;to&#160;AUTOSAR.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is available,&#160;depending&#160;on&#160;pre-compile configuration&#160;checkbox&#160;'Enable&#160;<br/>
Fee_ForceSectorSwitch&#160;API'&#160;which is configured&#160;within the&#160;configuration&#160;tool.&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-18&#160;&#160;&#160;Fee_ForceSectorSwitch&#160;<br/>
<b>4.3.18&#160;&#160;Fee_ConvertBlockConfig&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;<b>Fee_ConvertBlockConfig&#160;&#160;<br/></b>(&#160;<br/>&#160;&#160;const Fee_ConversionOptionsType* options&#160;<br/>)&#160;<br/>
<b>Parameter&#160;</b><br/>
Options&#160;<br/>
Pointer&#160;to structure&#160;of&#160;type&#160;Fee_ConversionOptionsType, containing&#160;the&#160;<br/>pointer&#160;to&#160;the&#160;user&#160;buffer and&#160;to&#160;the&#160;callback&#160;to&#160;be&#160;invoked&#160;for each block:&#160;<br/>
&#160;<br/>&#160;<br/>userBuffer&#160;<br/>
Pointer&#160;to user buffer to hold block&#160;data.&#160;Note that&#160;the&#160;<br/>area pointed&#160;to&#160;must be large enough&#160;to hold&#160;largest&#160;<br/>possible block’s&#160;(across&#160;all&#160;configurations)&#160;data.&#160;<br/>
notificationPtr&#160;<br/>
Pointer&#160;to callback&#160;function.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Job&#160;has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Job&#160;has&#160;not&#160;been&#160;accepted.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
59&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=60></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-60_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-60_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-60_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-60_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-60_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-60_6.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service requests&#160;conversion&#160;of&#160;block&#160;configuration,&#160;as&#160;described&#160;i<a href="TechnicalReference_Fees.html#29">n&#160;2.7.5.</a>&#160;<br/>FEE&#160;uses&#160;the&#160;buffer passed&#160;in&#160;options-&gt;userBuffer&#160;to&#160;read&#160;block&#160;data&#160;from&#160;data&#160;flash and to&#160;pass&#160;<br/>them&#160;to&#160;the user callback&#160;options-&gt;notificationPtr&#160;for each block&#160;it finds&#160;in data&#160;flash&#160;(having&#160;a&#160;<br/>VALID instance).&#160;&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Fee must&#160;have been&#160;initialized&#160;and it&#160;must&#160;be&#160;idle before calling&#160;<br/>
<b>&#160;&#160;Fee_ConvertBlockConfig</b>().&#160;&#160;<br/>
Additionally,&#160;the&#160;upper&#160;SW&#160;layers&#160;(NvM)&#160;shall&#160;be&#160;stalled,&#160;i.e.&#160;it&#160;must&#160;be&#160;prevented&#160;<br/>from&#160;issuing&#160;requests&#160;to&#160;the&#160;FEE.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Basic Knowledge&#160;<br/></b>Block&#160;conversion affects&#160;all&#160;partitions,&#160;i.e.&#160;FEE&#160;will&#160;iterate over&#160;all&#160;partitions.&#160;Don’t&#160;<br/>
&#160;&#160;expect&#160;any&#160;specific&#160;order;&#160;decisions&#160;should be&#160;based&#160;on&#160;parameters&#160;passed&#160;to&#160;“Data&#160;<br/>
Conversion Callback”&#160;(chapter<a href="TechnicalReference_Fees.html#59">&#160;4.3.18).</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>This&#160;API&#160;service is not&#160;used&#160;by&#160;the&#160;NVM.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>Job&#160;completion&#160;may&#160;be&#160;polled&#160;by&#160;calling&#160;Fee_GetStatus();&#160;Job&#160;result&#160;may&#160;be&#160;<br/>
&#160;&#160;determined using&#160;Fee_GetJobResult().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Additionally,&#160;if&#160;development mode is&#160;configured,&#160;parameter&#160;checks&#160;are done&#160;and in case of&#160;failure&#160;they&#160;are&#160;<br/>reported&#160;to&#160;the&#160;DET&#160;by&#160;default&#160;with the according&#160;service ID&#160;and&#160;the&#160;reason&#160;of&#160;occurrence (refer to chapter&#160;<br/><a href="TechnicalReference_Fees.html#23">2.6.1).</a>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>This&#160;service&#160;is&#160;an&#160;addition&#160;to&#160;AUTOSAR.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is available,&#160;depending&#160;on&#160;pre-compile configuration&#160;checkbox&#160;'Enable&#160;<br/>
Fee_ConvertDataBlocks&#160;API'&#160;which is configured&#160;within the&#160;configuration&#160;tool.&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
60&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=61></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-61_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-61_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-19&#160;&#160;&#160;Fee_ConvertBlockConfig&#160;<br/>
<b>4.3.19&#160;&#160;Fee_SuspendWrites&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_SuspendWrites</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service&#160;instructs&#160;Fee to block&#160;all&#160;write class&#160;jobs&#160;(writing,&#160;invalidating&#160;and&#160;erasing&#160;a&#160;block).&#160;<br/>Pending&#160;jobs&#160;will&#160;be blocked, i.e.&#160;they&#160;won’t&#160;be&#160;finished.&#160;Next Fee_MainFunction&#160;calls&#160;cause FEE&#160;to&#160;enter a&#160;<br/>safe state (by&#160;means&#160;of&#160;Flash content). Once such state&#160;was&#160;reached, FEE&#160;does&#160;not&#160;issue&#160;new&#160;write&#160;<br/>requests&#160;to&#160;Fls.&#160;<br/>Multiple subsequent calls&#160;to this&#160;service&#160;don’t&#160;have&#160;additional&#160;effects, i.e.&#160;to&#160;re-enable&#160;write accesses&#160;only&#160;<br/>one call&#160;to&#160;Fee_ResumeWrites&#160;is&#160;necessary.&#160;<br/>
<b>&#160;</b><br/>
<i><b>&#160;<br/>Info&#160;<br/></b>As&#160;long as&#160;write&#160;class jobs are&#160;suspended&#160;no&#160;sector&#160;switch&#160;will&#160;be&#160;executed!&#160;</i><br/>
&#160;<br/>
<b>&#160;</b><br/>
<i><b>&#160;</b></i><br/>
For more information, refer to chap<a href="TechnicalReference_Fees.html#31">ter&#160;2.10.</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>May&#160;be&#160;called&#160;at&#160;interrupt&#160;level.&#160;<br/>
Table&#160;4-20&#160;&#160;&#160;Fee_SuspendWrites&#160;<br/>
<b>4.3.20&#160;&#160;Fee_ResumeWrites&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_ResumeWrites</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
61&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=62></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-62_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-62_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;service&#160;instructs&#160;Fee&#160;to allow all&#160;write&#160;class&#160;jobs&#160;(writing,&#160;invalidating&#160;and&#160;erasing&#160;a&#160;block), including&#160;<br/>sector switch processing,&#160;again&#160;which have been suspended using&#160;Fee_SuspendWrites().&#160;&#160;<br/>Multiple calls&#160;to this&#160;service&#160;enable&#160;write processing once,&#160;i.e. to&#160;disable&#160;it&#160;again&#160;there is&#160;still&#160;one call&#160;to&#160;<br/>Fee_SuspendWrites&#160;necessary.&#160;<br/>For more information, refer to chap<a href="TechnicalReference_Fees.html#31">ter&#160;2.10.</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>May&#160;be&#160;called&#160;at&#160;interrupt&#160;level.&#160;<br/>
Table&#160;4-21&#160;&#160;&#160;Fee_ResumeWrites&#160;<br/>
<b>4.3.21&#160;&#160;Fee_DisableFss&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_DisableFss</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Void&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;disables&#160;execution of&#160;foreground sector switch&#160;when&#160;threshold&#160;is&#160;reached.&#160;A&#160;typical&#160;situation&#160;<br/>using&#160;this&#160;function&#160;is&#160;start of&#160;engine.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>When&#160;foreground&#160;sector&#160;switch threshold is&#160;reached&#160;and a&#160;write class&#160;job&#160;(writing,&#160;<br/>
&#160;&#160;erasing&#160;or&#160;invalidating&#160;a&#160;block)&#160;shall&#160;be&#160;processed,&#160;this&#160;job&#160;ends&#160;with result&#160;<br/>
MEMIF_JOB_FAILED.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
For more information, refer to chap<a href="TechnicalReference_Fees.html#31">ter&#160;2.10.</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>Availability&#160;depends&#160;on&#160;setting&#160;of&#160;“Enable&#160;API&#160;to&#160;allow/prohibit&#160;FSS”&#160;(see&#160;c<a href="TechnicalReference_Fees.html#78">h.&#160;5.1.7.1)</a>&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-22&#160;&#160;&#160;Fee_DisableFss&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
62&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=63></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-63_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>4.3.22&#160;&#160;Fee_EnableFss&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_EnableFss</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;enables&#160;execution of&#160;foreground sector switch&#160;when&#160;threshold&#160;is&#160;reached.&#160;<br/>For more information, refer to chap<a href="TechnicalReference_Fees.html#31">ter&#160;2.10.</a>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>Availability&#160;depends&#160;on&#160;setting&#160;of&#160;“Enable&#160;API&#160;to&#160;allow/prohibit&#160;FSS”&#160;(see&#160;c<a href="TechnicalReference_Fees.html#78">h.&#160;5.1.7.1)</a>&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;4-23&#160;&#160;&#160;Fee_EnableFss&#160;<br/>
<b>4.4&#160;</b><br/>
<b>Services&#160;used&#160;by&#160;FEE&#160;</b><br/>
In&#160;the&#160;following&#160;table&#160;services&#160;provided&#160;by&#160;other&#160;components,&#160;which&#160;are&#160;used&#160;by&#160;the&#160;FEE&#160;<br/>are&#160;&#160;listed.&#160;&#160;For&#160;details&#160;about&#160;&#160;prototype&#160;and&#160;functionality&#160;refer&#160;to&#160;the&#160;documentation&#160;of&#160;&#160;the&#160;<br/>providing&#160;component.&#160;<br/>
<b>Component&#160;</b><br/>
<b>API&#160;</b><br/>
DET&#160;<br/>
Det_ReportError&#160;(optionally)&#160;<br/>
FLS&#160;<br/>
Fls_Read&#160;<br/>Fls_Write&#160;<br/>Fls_Erase&#160;<br/>Fls_GetStatus&#160;(if&#160;polling&#160;mode&#160;deactivated)&#160;<br/>Fls_GetJobResult&#160;(if&#160;polling&#160;mode&#160;deactivated)&#160;<br/>Fls_SetMode&#160;<br/>Fls_Cancel&#160;<br/>
NVM&#160;<br/>
NvM_JobEndNotification&#160;(optionally)&#160;<br/>NvM_JobErrorNotification (optionally)&#160;<br/>
OS&#160;<br/>
Interrupt&#160;locking/unlocking&#160;functions&#160;(optionally)&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
63&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=64></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-64_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
Table&#160;4-24&#160;&#160;&#160;Services&#160;used&#160;by&#160;the&#160;FEE&#160;<br/>
<b>4.4.1&#160;</b><br/>
<b>Data&#160;Conversion Callback&#160;</b><br/>
This&#160;&#160;user-implemented&#160;&#160;callback&#160;&#160;is&#160;&#160;related&#160;&#160;to&#160;&#160;the&#160;&#160;Feature&#160;&#160;“Data&#160;&#160;Conversion”&#160;&#160;(refer&#160;&#160;to&#160;<br/><a href="TechnicalReference_Fees.html#29">2.7.5);&#160;</a>a&#160;pointer&#160;to&#160;such&#160;a&#160;function&#160;shall&#160;be&#160;passed&#160;to&#160;Fee_ConvertBlockConfig&#160;(see&#160;<br/><a href="TechnicalReference_Fees.html#59">4.3.18).</a>&#160;<br/>
<b>Prototype&#160;</b><br/>
Single Channel&#160;<br/>uint8&#160;<i>&lt;Function_Name&gt;&#160;<br/></i>(&#160;<br/>&#160;&#160;uint8*&#160;userBuffer,&#160;<br/>&#160;&#160;uint32&#160;blockId, &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;<br/>&#160;&#160;uint16&#160;oldLength, &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;<br/>&#160;&#160;uint16&#160;newLength&#160;<br/>)&#160;<br/>
<b>Parameter&#160;</b><br/>
userBuffer<br/>
Pointer&#160;to user data&#160;buffer, containing&#160;block’s&#160;most recent data&#160;read&#160;from&#160;<br/>
&#160;<br/>
flash.&#160;Content may&#160;be modified.&#160;Points&#160;to&#160;the&#160;userBuffer&#160;originally&#160;passed&#160;to&#160;<br/>Fee_ConvertBlockConfig&#160;<br/>
blockId<br/>
Unique&#160;28bit&#160;block&#160;identifier, consisting&#160;of&#160;4bit&#160;Partition&#160;Index&#160;(bits&#160;27:24)&#160;16bit&#160;<br/>
&#160;<br/>
“Block&#160;Tag”&#160;(bits&#160;23..16) and 8bit data&#160;index&#160;(bits&#160;7..0)3&#160;<br/>
oldLength<br/>
Old data&#160;length,&#160;as&#160;found&#160;in&#160;flash;&#160;the&#160;user buffer will&#160;contain&#160;exactly&#160;<br/>
&#160;<br/>
oldLength&#160;data&#160;bytes&#160;<br/>
newLength<br/>
New&#160;data&#160;length&#160;as&#160;given&#160;in current configuration,&#160;the&#160;FEE&#160;has&#160;been&#160;initialized&#160;<br/>
&#160;<br/>
with.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
FEE_CONVERSION_WRITE&#160;Instruct the FEE&#160;to&#160;keep&#160;data&#160;(user buffer’s&#160;content)&#160;according&#160;to&#160;old&#160;length.&#160;&#160;<br/>_OLD_LENGTH&#160;<br/>
Data&#160;to be&#160;written&#160;will&#160;not&#160;be readable using&#160;the&#160;Fee_Read&#160;(if&#160;the both&#160;lengths&#160;<br/>actually&#160;differ), but&#160;they&#160;will&#160;be&#160;kept in&#160;flash,&#160;after&#160;<br/>Fee_ConvertBlockConfig&#160;processing&#160;completes.&#160;<br/>
It is&#160;useful&#160;if&#160;several&#160;subsequent runs&#160;of&#160;Fee_ConvertBlockConfig&#160;are&#160;<br/>necessary&#160;to&#160;perform&#160;update&#160;with multiple stages.&#160;<br/>
FEE_CONVERSION_WRITE&#160;Instruct the FEE&#160;to&#160;write&#160;data&#160;(user buffer’s&#160;content)&#160;according&#160;to&#160;new&#160;length.&#160;&#160;<br/>_NEW_LENGTH&#160;<br/>
FEE_CONVERSION_SKIP&#160;&#160;Instruct the FEE&#160;to&#160;skip this&#160;block. It&#160;will&#160;write&#160;nothing.&#160;Block&#160;data&#160;will&#160;actually&#160;<br/>
get&#160;lost&#160;when&#160;Fee_ConvertBlockConfig&#160;processing completes.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
<b>&#160;</b><br/>
This&#160;callback&#160;has&#160;to&#160;be implemented&#160;by&#160;user. It&#160;should&#160;synchronously&#160;perform&#160;any&#160;action that&#160;is&#160;necessary&#160;<br/>to&#160;convert block&#160;data&#160;from&#160;old format&#160;to&#160;new&#160;format&#160;(e.g. lengths).&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;&#160;</b><br/>
<b>&gt;&#160;&#160;</b>Since&#160;the&#160;FEE&#160;is&#160;busy&#160;with Fee_ConvertBlockConfig processing,&#160;it&#160;is&#160;not&#160;allowed&#160;to issue any&#160;<br/>
other&#160;request&#160;to it.&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>3&#160;Bit&#160;0&#160;is&#160;defined to&#160;be&#160;the&#160;least significant bit, regardless&#160;of&#160;used&#160;platform.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
64&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=65></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-65_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-65_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
Call&#160;context&#160;<br/>
<b>&gt;&#160;&#160;</b>Called&#160;from&#160;context&#160;of&#160;Fee_MainFunction&#160;<br/>
Table&#160;4-25&#160;&#160;&#160;User&#160;defined&#160;conversion&#160;callback&#160;<br/>
<b>4.5&#160;</b><br/>
<b>Callback&#160;Functions&#160;</b><br/>
This&#160;chapter&#160;describes&#160;the&#160;callback functions that&#160;are&#160;implemented&#160;by&#160;the&#160;FEE&#160;and&#160;can&#160;be&#160;<br/>invoked&#160;&#160;by&#160;&#160;other&#160;&#160;modules.&#160;&#160;The&#160;&#160;prototypes&#160;&#160;of&#160;&#160;the&#160;&#160;callback&#160;&#160;functions&#160;&#160;are&#160;&#160;provided&#160;&#160;in&#160;&#160;the&#160;<br/>header&#160;file&#160;Fee_Cbk.h&#160;by&#160;the&#160;FEE.&#160;<br/>
<b>4.5.1&#160;</b><br/>
<b>Fee_JobEndNotification&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_JobEndNotification</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;routine&#160;shall&#160;be called&#160;by&#160;the&#160;underlying flash&#160;driver to report the successful&#160;end&#160;of&#160;an&#160;asynchronous&#160;<br/>operation.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>This&#160;function&#160;is&#160;configurable at&#160;pre-compile time using&#160;the&#160;parameter&#160;<br/>
&#160;&#160;FEE_POLLING_MODE.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;routine&#160;might&#160;be&#160;called&#160;on&#160;interrupt&#160;level,&#160;depending&#160;on&#160;the&#160;calling&#160;function.&#160;<br/>
Table&#160;4-26&#160;&#160;&#160;Fee_JobEndNotification&#160;<br/>
<b>4.5.2&#160;</b><br/>
<b>Fee_JobErrorNotification&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;<b>Fee_JobErrorNotification</b>(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
65&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=66></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-66_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-66_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;routine&#160;shall&#160;be called&#160;by&#160;the&#160;underlying flash driver to report the failure of&#160;an&#160;asynchronous&#160;operation.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>This&#160;function&#160;is&#160;configurable at&#160;pre-compile time using&#160;the&#160;parameter&#160;<br/>
&#160;&#160;FEE_POLLING_MODE.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;routine&#160;might&#160;be&#160;called&#160;on&#160;interrupt&#160;level,&#160;depending&#160;on&#160;the&#160;calling&#160;function.&#160;<br/>
Table&#160;4-27&#160;&#160;&#160;Fee_JobErrorNotification&#160;<br/>
<b>4.6&#160;</b><br/>
<b>Configurable&#160;Interfaces&#160;</b><br/>
<b>API&#160;</b><br/>
<b>Description&#160;</b><br/>
Function&#160;Fee_GetVersionInfo()&#160;<br/>
This&#160;function&#160;can&#160;be&#160;enabled/disabled&#160;by&#160;the&#160;configuration&#160;<br/>switch ‘Enable Fee_GetVersionInfo&#160;API’.&#160;Refer to chapter&#160;<br/><a href="TechnicalReference_Fees.html#78">5.1.7.</a>&#160;<br/>
Function&#160;Fee_GetEraseCycle()&#160;<br/>
This&#160;function&#160;can&#160;be&#160;enabled/disabled&#160;by&#160;the&#160;configuration&#160;<br/>switch ‘Enable Fee_GetEraseCycle&#160;API’. Refer to chapter&#160;<br/><a href="TechnicalReference_Fees.html#78">5.1.7.</a>&#160;<br/>
Function&#160;Fee_GetWriteCycle()&#160;<br/>
This&#160;function can&#160;be&#160;enabled/disabled&#160;by&#160;the&#160;configuration&#160;<br/>switch ‘Enable Fee_GetWriteCycle&#160;API’.&#160;Refer to chapter&#160;<br/><a href="TechnicalReference_Fees.html#78">5.1.7.</a>&#160;<br/>
Function&#160;Fee_ForceSectorSwitch()&#160;<br/>
This&#160;function&#160;can&#160;be&#160;enabled/disabled&#160;by&#160;the&#160;configuration&#160;<br/>switch ‘Enable Fee_ForceSectorSwitch&#160;API’.&#160;Refer to&#160;<br/>chapter<a href="TechnicalReference_Fees.html#78">&#160;5.1.7.</a>&#160;<br/>
Functions&#160;&#160;<br/>
The&#160;functions&#160;can&#160;be enabled/disabled&#160;by&#160;the&#160;configuration&#160;<br/>
Fee_JobEndNotification()&#160;<br/>
switch ‘Poll&#160;Flash&#160;driver’.&#160;Refer to chapt<a href="TechnicalReference_Fees.html#77">er&#160;5.1.6.2.</a>&#160;<br/>
Fee_JobErrorNotification()&#160;<br/>
Functions&#160;<br/>
The&#160;functions&#160;can&#160;be enabled/disabled&#160;by&#160;the&#160;configuration&#160;<br/>
Fee_EnableFss()&#160;<br/>
switch ‘Enable&#160;API to&#160;allow/prohibit FSS’.&#160;Refer to chapter&#160;<br/>
Fee_DisableFss()<br/>
<a href="TechnicalReference_Fees.html#78">5.1.7.</a>&#160;<br/>
&#160;<br/>
Function&#160;Fee_ConvertBlockConfig()&#160;&#160;The&#160;functions&#160;can&#160;be enabled/disabled&#160;by&#160;the&#160;configuration&#160;<br/>
switch ‘Enable Data&#160;Conversion&#160;API’.&#160;Refer to chapter<a href="TechnicalReference_Fees.html#78">&#160;5.1.7.</a>&#160;<br/>
Table&#160;4-28&#160;&#160;&#160;Configurable&#160;interfaces&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
66&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=67></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-67_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-67_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>5&#160;&#160;Configuration&#160;</b><br/>
FEE&#160;can&#160;be&#160;configured&#160;using&#160;following&#160;tools:&#160;<br/>
<b>&gt;&#160;&#160;</b>DaVinci Configurator&#160;5,&#160;domain&#160;“Memory” (AUTOSAR&#160;4&#160;packages&#160;only).&#160;<br/>
Parameters&#160;are explained&#160;within&#160;the&#160;tool;&#160;parameters described&#160;in&#160;this&#160;chapter&#160;might&#160;<br/>not&#160;&#160;&#160;directly&#160;correspond&#160;to&#160;parameters visible&#160;in&#160;Configurator 5’s GUI.&#160;<br/>
<b>&gt;&#160;&#160;</b>DaVinci Configurator&#160;4&#160;(AUTOSAR 3&#160;packages only;&#160;for a&#160;detailed&#160;description&#160;see&#160;this&#160;<br/>
chapter)&#160;<br/>
<b>&gt;&#160;&#160;</b>Using&#160;a&#160;generic configuration&#160;editor (GCE)&#160;<br/>
<b>5.1&#160;</b><br/>
<b>Configuration&#160;with&#160;DaVinci&#160;Configurator&#160;</b><br/>
<b>5.1.1&#160;</b><br/>
<b>Start configuration of&#160;the&#160;FEE&#160;</b><br/>
The&#160;component&#160;name&#160;of&#160;the&#160;Flash-EEPROM-Emulation&#160;in&#160;DaVinci&#160;Configurator&#160;is&#160;“FEE”.&#160;<br/>In&#160;the&#160;“Architecture&#160;view”&#160;(initial&#160;page)&#160;of&#160;the&#160;DaVinci&#160;Configurator,&#160;the&#160;FEE&#160;can&#160;be&#160;opened&#160;<br/>by&#160;&#160;its&#160;&#160;context&#160;&#160;menu&#160;&#160;to&#160;&#160;start&#160;&#160;its&#160;&#160;configuration.&#160;&#160;Optionally,&#160;&#160;the&#160;&#160;FEE&#160;&#160;can&#160;&#160;be&#160;&#160;opened&#160;&#160;for&#160;<br/>configuration&#160;with&#160;the&#160;component&#160;list&#160;under&#160;the&#160;“Memory”&#160;tab&#160;located&#160;at&#160;the&#160;left&#160;side&#160;of&#160;the&#160;<br/>DaVinci Configurator.&#160;<br/>
<b>5.1.2&#160;</b><br/>
<b>Useful&#160;Chunk-Sizes&#160;(instance&#160;counts)&#160;</b><br/>
Carefully&#160;&#160;chosen&#160;&#160;chunk-sizes&#160;&#160;may&#160;&#160;significantly&#160;&#160;improve&#160;&#160;FEE’s&#160;&#160;performance&#160;&#160;as&#160;&#160;well&#160;&#160;as&#160;<br/>robustness.&#160;&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Chunk sizes’&#160;effects&#160;are&#160;basically&#160;local&#160;to a&#160;single&#160;partition,&#160;i.e.&#160;a partition’s&#160;<br/>
&#160;&#160;performance&#160;and&#160;robustness&#160;is&#160;affected.&#160;Another&#160;partition&#160;might&#160;be&#160;affected&#160;indirectly&#160;<br/>
by&#160;sector&#160;switch&#160;processing&#160;(which is not&#160;immediately&#160;interruptible).&#160;<br/>Therefore,&#160;when changing a&#160;block’s&#160;settings,&#160;other&#160;blocks&#160;in same partition&#160;must&#160;be&#160;<br/>considered.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>Though&#160;it&#160;is&#160;not&#160;necessary&#160;(usually&#160;it&#160;is not&#160;even&#160;possible) to&#160;estimate&#160;optimum chunk-<br/>sizes,&#160;they&#160;should&#160;be&#160;configured&#160;to&#160;reasonable&#160;values.&#160;Therefore&#160;their&#160;effects&#160;are&#160;<br/>summarized&#160;first:&#160;<br/>Basically&#160;a&#160;block’s instance&#160;count&#160;depends&#160;on&#160;the&#160;estimated&#160;number of&#160;write&#160;cycles,&#160;<br/>relative&#160;to&#160;other blocks’&#160;write&#160;cycles,&#160;as well&#160;as on&#160;its&#160;size,&#160;in&#160;relation&#160;to&#160;logical sector size.&#160;<br/>A&#160;“(too) small” / “(too) large” chunk is&#160;meant&#160;to&#160;be&#160;related&#160;with&#160;“write&#160;cycle”&#160;and/or “block’s&#160;<br/>size”.&#160;<br/>&#160;<br/>Small&#160;chunks:&#160;<br/><b>&gt;&#160;&#160;</b>In&#160;general small&#160;chunks are suited&#160;for large&#160;and/or infrequently&#160;written&#160;blocks.&#160;<br/>
Allocating&#160;a&#160;small&#160;chunk results in&#160;less&#160;flash-space&#160;being&#160;reserved&#160;for related&#160;block&#160;<br/>(instances).&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
67&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=68></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-68_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>Smaller chunks&#160;result in&#160;less space&#160;wasted&#160;by&#160;aborts (resets), and&#160;more retries&#160;being&#160;<br/>
possible&#160;in&#160;a&#160;sector in&#160;case&#160;of&#160;resets.&#160;<br/>
<b>&gt;&#160;&#160;</b>They&#160;result in&#160;more&#160;overhead&#160;in&#160;flash.&#160;This&#160;becomes significant&#160;with&#160;small&#160;blocks&#160;(little&#160;<br/>
payload), large&#160;page&#160;size,&#160;and&#160;number&#160;of&#160;write&#160;cycles.&#160;<br/>
<b>&gt;&#160;&#160;</b>Decreased&#160;efficiency&#160;of&#160;flash&#160;usage,&#160;i.e.&#160;more&#160;erase&#160;cycles&#160;over life-time&#160;<br/>
<b>&gt;&#160;&#160;</b>Result in&#160;increased&#160;average&#160;search&#160;efforts.&#160;Since&#160;FEE&#160;does not&#160;hold&#160;position&#160;<br/>
information&#160;in&#160;RAM (neither&#160;Look-up&#160;tables,&#160;nor any&#160;caching&#160;mechanisms),&#160;searching&#160;<br/>must&#160;be&#160;done&#160;for each&#160;asynchronous&#160;block&#160;operation.&#160;Since&#160;one&#160;block’s chunks&#160;<br/>(within&#160;one&#160;logical sector)&#160;build&#160;up&#160;a&#160;linked&#160;list;&#160;this list&#160;becomes longer.&#160;Each&#160;list&#160;node&#160;<br/>(chunk)&#160;requires one&#160;additional&#160;flash&#160;request,&#160;requiring&#160;additional Fee_MainFunction&#160;<br/>and&#160;Fls_MainFunction&#160;cycles.&#160;<br/>
&#160;<br/>
Large&#160;chunks:&#160;<br/>
<b>&gt;&#160;&#160;</b>Frequently&#160;written,&#160;small&#160;blocks&#160;usually&#160;benefit&#160;from&#160;larger chunks.&#160;<br/>
<b>&gt;&#160;&#160;</b>Overhead&#160;in&#160;flash&#160;is reduced&#160;<br/>
<b>&gt;&#160;&#160;</b>Decreased&#160;average&#160;search&#160;efforts,&#160;for two&#160;reasons:&#160;<br/>
<b>&gt;&#160;&#160;</b>Skipping&#160;an&#160;obsolete&#160;chunk&#160;means skipping&#160;more&#160;obsolete&#160;instances;&#160;the&#160;linked&#160;list&#160;<br/>
becomes shorter.&#160;<br/>
<b>&gt;&#160;&#160;</b>Searching&#160;within&#160;a&#160;chunk is implemented&#160;to&#160;have&#160;logarithmic effort.&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>Allocating&#160;a&#160;large&#160;chunk results in&#160;more&#160;flash&#160;space&#160;(for more instances)&#160;being&#160;<br/>
reserved.&#160;If&#160;chunk is&#160;too&#160;large,&#160;it would&#160;never be&#160;used,&#160;because&#160;writing&#160;other&#160;blocks&#160;<br/>already&#160;caused&#160;a&#160;sector switch.&#160;<br/>
<b>&gt;&#160;&#160;</b>Increased&#160;flash&#160;usage&#160;also&#160;may&#160;increase&#160;vulnerability&#160;to&#160;aborts, because&#160;space&#160;for&#160;<br/>
other&#160;blocks&#160;shrinks.&#160;Usually&#160;each&#160;block&#160;requires at&#160;least&#160;one&#160;chunk&#160;per logical sector&#160;<br/>(to&#160;hold&#160;at&#160;least&#160;data&#160;copied&#160;during&#160;sector switch).&#160;<br/>
&#160;<br/>The&#160;larger a&#160;block’s payload&#160;is,&#160;the&#160;smaller&#160;the&#160;instance&#160;count&#160;should&#160;be.&#160;It&#160;becomes less&#160;<br/>and&#160;less possible&#160;that&#160;such&#160;a&#160;chunk could&#160;be&#160;too&#160;small,&#160;because&#160;there is&#160;an&#160;absolute&#160;<br/>upper limit,&#160;how&#160;often&#160;a&#160;chunk&#160;fits into&#160;logical&#160;sector.&#160;<br/>&#160;<br/>It&#160;is highly&#160;not&#160;recommended&#160;to&#160;try&#160;“optimizing” a&#160;block&#160;configuration&#160;in&#160;order&#160;to&#160;get&#160;only&#160;<br/>one&#160;chunk&#160;per&#160;block,&#160;resulting&#160;in&#160;nearly&#160;completely&#160;filled&#160;logical sector.&#160;Rather the&#160;chunk&#160;<br/>sizes should&#160;be&#160;set&#160;in&#160;a&#160;way&#160;that&#160;some&#160;reserve&#160;remains&#160;to&#160;be&#160;used&#160;dynamically.&#160;It&#160;is&#160;<br/>advisable&#160;to&#160;use&#160;approximately&#160;50%&#160;of&#160;smaller logical sector.&#160;However it is more&#160;important&#160;<br/>to&#160;keep&#160;enough&#160;space&#160;to&#160;write&#160;even&#160;the&#160;largest&#160;blocks&#160;several times&#160;(regardless of&#160;actual&#160;<br/>write&#160;cycles&#160;&#160;due&#160;to&#160;aborts).&#160;On&#160;the&#160;other hand&#160;reserves might&#160;also&#160;be&#160;lower,&#160;if&#160;a&#160;<br/>partition&#160;will be&#160;written&#160;(very)&#160;infrequently,&#160;and&#160;if&#160;written&#160;to,&#160;the&#160;situation&#160;is known&#160;to&#160;be&#160;<br/>stable&#160;(very&#160;low&#160;risk of&#160;aborted&#160;writes).&#160;<br/>&#160;<br/>Based&#160;&#160;on&#160;&#160;estimated&#160;&#160;number&#160;&#160;of&#160;&#160;write&#160;&#160;cycles,&#160;&#160;it&#160;&#160;is&#160;&#160;sufficient&#160;&#160;to&#160;&#160;care&#160;&#160;about&#160;&#160;chunk&#160;&#160;sizes&#160;&#160;of&#160;<br/>most&#160;&#160;frequently&#160;&#160;written&#160;&#160;blocks&#160;&#160;only&#160;&#160;(additionally&#160;&#160;considering&#160;&#160;their&#160;&#160;sizes).&#160;&#160;In&#160;&#160;typical&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
68&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=69></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-69_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-69_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
configurations&#160;&#160;the&#160;&#160;write&#160;&#160;cycles&#160;&#160;differ&#160;&#160;by&#160;&#160;magnitudes&#160;&#160;(1&#160;&#160;…&#160;&#160;1’000’000)&#160;&#160;–&#160;&#160;only&#160;&#160;the&#160;&#160;largest&#160;<br/>ones&#160;&#160;(e.g.&#160;&#160;more&#160;&#160;than&#160;&#160;100’000&#160;&#160;cycles,&#160;&#160;then&#160;&#160;more&#160;&#160;than&#160;&#160;10’000&#160;&#160;cycles)&#160;&#160;need&#160;&#160;to&#160;&#160;be&#160;<br/>considered.&#160;Blocks&#160;being&#160;written&#160;less&#160;than&#160;one&#160;hundredth&#160;of&#160;most&#160;frequently&#160;written&#160;one,&#160;<br/>may&#160;usually&#160;be&#160;considered&#160;to&#160;be&#160;constant;&#160;their&#160;instance&#160;count&#160;should&#160;be&#160;1.&#160;If&#160;one&#160;or&#160;more&#160;<br/>large&#160;&#160;blocks&#160;&#160;are&#160;&#160;frequently&#160;&#160;written,&#160;&#160;check&#160;&#160;their&#160;&#160;maximum&#160;&#160;possible&#160;&#160;number&#160;&#160;writes&#160;&#160;per&#160;<br/>sector.&#160;This&#160;can&#160;be&#160;used&#160;as&#160;threshold&#160;to&#160;consider blocks&#160;being&#160;constant.&#160;<br/>
&#160;<br/>
<b>5.1.3&#160;</b><br/>
<b>Update of block&#160;configuration&#160;</b><br/>
It&#160;&#160;is&#160;&#160;possible&#160;&#160;to&#160;&#160;update&#160;&#160;the&#160;&#160;block&#160;&#160;configuration&#160;&#160;(size,&#160;&#160;datasets,...)&#160;&#160;of&#160;&#160;each&#160;&#160;block.&#160;&#160;Every&#160;<br/>block&#160;&#160;which&#160;&#160;should&#160;&#160;be&#160;&#160;readable&#160;&#160;after&#160;&#160;the&#160;&#160;block&#160;&#160;configuration&#160;&#160;update&#160;&#160;must&#160;&#160;get&#160;&#160;the&#160;&#160;same&#160;<br/>BlockID&#160;&#160;as&#160;&#160;before&#160;&#160;(preconditioned&#160;&#160;that&#160;&#160;the&#160;&#160;size&#160;&#160;of&#160;&#160;this&#160;&#160;block&#160;&#160;has&#160;&#160;not&#160;&#160;changed).&#160;&#160;The&#160;<br/>BlockID could&#160;be&#160;set&#160;manually&#160;if&#160;the&#160;“BlockID&#160;fixed” is checked.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>It&#160;is&#160;not&#160;possible&#160;to&#160;“move”&#160;a&#160;block&#160;from&#160;one&#160;partition&#160;to another&#160;with an&#160;update,&#160;while&#160;<br/>
&#160;&#160;keeping&#160;its&#160;data.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
After&#160;flashing&#160;the&#160;new&#160;block&#160;configuration&#160;it&#160;is&#160;possible,&#160;but&#160;not&#160;actually&#160;necessary,&#160;to&#160;use&#160;<br/>Fee_ForceSectorSwitch()&#160;in&#160;order&#160;to&#160;clean&#160;up&#160;flash&#160;contents,&#160;causing&#160;flash&#160;layout&#160;to&#160;<br/>be&#160;&#160;prepared.&#160;&#160;In&#160;&#160;order&#160;&#160;to&#160;&#160;perform&#160;&#160;a&#160;&#160;complete&#160;&#160;update&#160;&#160;of&#160;&#160;flash&#160;&#160;layout&#160;&#160;–&#160;&#160;i.e.&#160;&#160;to&#160;&#160;clean&#160;&#160;up&#160;&#160;/&#160;<br/>update&#160;&#160;all&#160;&#160;logical&#160;&#160;sectors,&#160;&#160;across&#160;&#160;all&#160;&#160;partitions&#160;&#160;–,&#160;&#160;a&#160;&#160;second&#160;&#160;subsequent&#160;&#160;run&#160;&#160;of&#160;<br/>Fee_ForceSectorSwitch()may&#160;be&#160;used&#160;.&#160;<br/>
Writing&#160;<br/>
updated&#160;<br/>
blocks&#160;<br/>
will&#160;<br/>
be&#160;<br/>
possible&#160;<br/>
independent&#160;<br/>
of&#160;<br/>
usage&#160;<br/>
of&#160;<br/>
Fee_ForceSectorSwitch().&#160;<br/>
<b>5.1.4&#160;</b><br/>
<b>FEE&#160;Configuration&#160;tab&#160;</b><br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;<br/>is&#160;written&#160;in&#160;bold&#160;<br/>
Block&#160;Configuration&#160;<br/>
FBL&#160;<br/>
--&#160;<br/>
ON&#160;<br/>
This&#160;checkbox&#160;must be checked, if&#160;the current block&#160;configuration&#160;<br/>
Configuration&#160;<br/>
<b>OFF</b><br/>
is&#160;the flash&#160;boot&#160;loader configuration.&#160;Otherwise&#160;it must not&#160;be&#160;<br/>
<b>&#160;</b><br/>
checked.&#160;<br/>
Insert Block&#160;<br/>
--&#160;<br/>
<b>--&#160;</b><br/>
This&#160;button&#160;inserts&#160;a&#160;FEE&#160;block&#160;into&#160;the table.&#160;This&#160;is&#160;only&#160;<br/>necessary&#160;if&#160;additional&#160;blocks&#160;are needed.&#160;All&#160;NVM&#160;blocks&#160;are&#160;<br/>inserted&#160;automatically.&#160;<br/>
Delete&#160;Block&#160;&#160;--&#160;<br/>
<b>--&#160;</b><br/>
This&#160;button&#160;deletes&#160;the selected&#160;block&#160;from&#160;the table.&#160;Only&#160;blocks&#160;<br/>which&#160;where&#160;inserted&#160;with&#160;the&#160;&#34;Insert&#160;Block&#34;&#160;button&#160;should&#160;be&#160;<br/>deleted&#160;with this&#160;button.&#160;NVM&#160;blocks&#160;should be&#160;deleted&#160;in the&#160;<br/>NVM&#160;configuration.&#160;They&#160;are deleted&#160;automatically&#160;in&#160;the&#160;FEE&#160;<br/>block&#160;table.&#160;<br/>
Move Up&#160;<br/>
--&#160;<br/>
<b>--&#160;</b><br/>
This&#160;button moves&#160;a&#160;selected&#160;block&#160;one row&#160;above.&#160;The&#160;order&#160;of&#160;<br/>the&#160;block&#160;in the table&#160;influences&#160;the&#160;physical&#160;default position&#160;<br/>within the&#160;Flash.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
69&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=70></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-70_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-70_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-70_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-70_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;<br/>is&#160;written&#160;in&#160;bold&#160;<br/>
Move Down&#160;<br/>
--&#160;<br/>
<b>--&#160;</b><br/>
This&#160;button moves&#160;a&#160;selected&#160;block&#160;in the&#160;table&#160;one row&#160;below.&#160;<br/>The&#160;order of&#160;the block&#160;in the table&#160;influences&#160;the physical&#160;default&#160;<br/>position&#160;within&#160;the&#160;Flash.&#160;<br/>
Calculate&#160;<br/>
--&#160;<br/>
<b>--&#160;</b><br/>
This&#160;button calculates&#160;the&#160;FEE&#160;block&#160;numbers, as&#160;well&#160;as&#160;<br/>BlockIDs, unless&#160;set&#160;to&#160;“fixed”.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>This&#160;button must be pressed&#160;before generation&#160;<br/>
<b>&#160;&#160;</b>process&#160;is&#160;started.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
BlockID&#160;<br/>
uint16&#160;<br/>
<b>no&#160;default&#160;</b><br/>
The&#160;BlockID will&#160;be set&#160;automatically&#160;by&#160;clicking&#160;the “Calculate”-<br/>
0...65535<br/>
button.&#160;The&#160;BlockID could also be&#160;set&#160;manually&#160;(see BlockID&#160;<br/>
&#160;<br/>
fixed).&#160;<br/>The&#160;BlockID&#160;must be unique&#160;within a&#160;partition,&#160;i.e.&#160;amongst&#160;&#160;all&#160;<br/>blocks&#160;assigned&#160;to same partition.&#160;<br/>In&#160;order&#160;to&#160;save flash space it&#160;is&#160;recommended to start&#160;<br/>numbering&#160;with&#160;0 for each&#160;partition.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Caution&#160;<br/></b>If&#160;the&#160;block&#160;configuration&#160;shall&#160;be&#160;updated,&#160;each&#160;<br/>
<b>&#160;&#160;</b>block which should be&#160;readable after&#160;the&#160;block&#160;<br/>
configuration&#160;update&#160;must&#160;get&#160;the&#160;same&#160;<br/>BlockID&#160;as before.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
NVM&#160;<br/>
--&#160;<br/>
<b>--&#160;</b><br/>
This&#160;field shows&#160;the&#160;name of&#160;the corresponding&#160;NVM&#160;block&#160;<br/>
Blockname&#160;<br/>
entered&#160;within the&#160;NVM&#160;and is&#160;forwarded&#160;to&#160;the&#160;FEE.&#160;<br/>For user added&#160;blocks&#160;(within&#160;the&#160;FEE)&#160;this&#160;field&#160;is&#160;empty.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>The&#160;NVM&#160;Blockname can&#160;not be&#160;modified&#160;at&#160;all. It&#160;<br/>
&#160;&#160;provides&#160;the&#160;information&#160;to&#160;the&#160;user to associate&#160;the&#160;<br/>
FEE&#160;block&#160;configuration&#160;to the&#160;corresponding&#160;NVM&#160;<br/>block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
70&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=71></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-71_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-71_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-71_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-71_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-71_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;<br/>is&#160;written&#160;in&#160;bold&#160;<br/>
Fee&#160;<br/>
C-<br/>
Valid C&#160;<br/>
This&#160;field shows&#160;the&#160;name of&#160;the configured&#160;FEE&#160;block.&#160;<br/>
Blockname&#160;<br/>
identifier&#160;&#160;identifier,&#160;<br/>
In&#160;the&#160;AUTOSAR ECUC file, it becomes&#160;the name of&#160;the Block&#160;<br/>
default:&#160;<br/>
Configuration container.&#160;<br/>
<b>Fee_User&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Block&lt;n&gt;&#160;</b><br/>
<b>Info</b>&#160;<br/>As&#160;required&#160;by&#160;AUTOSAR,&#160;the&#160;linkage&#160;between&#160;<br/>
&#160;&#160;block name&#160;and its&#160;numeric&#160;handle&#160;(“Block&#160;<br/>
Num”)&#160;will&#160;be&#160;generated.&#160;Depending&#160;on&#160;global&#160;<br/>tool&#160;settings,&#160;the&#160;prefix&#160;“Fee_”&#160;will&#160;be&#160;added,&#160;or&#160;<br/>omitted.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Block&#160;Num&#160;<br/>
uint16&#160;<br/>
2…65534, no&#160;<br/>
The&#160;even&#160;number&#160;of&#160;the&#160;FEE&#160;block.&#160;<br/>
default&#160;<br/>
These not&#160;modifiable values&#160;will&#160;be&#160;calculated by&#160;pressing&#160;the&#160;<br/>button &#34;Calculate&#34;.&#160;The&#160;dataset&#160;selection bits&#160;are&#160;used&#160;to&#160;<br/>calculate&#160;the&#160;block&#160;number.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;BlockNum&#160;should&#160;not&#160;be&#160;used directly. Instead&#160;<br/>
<b>&#160;&#160;</b>use the&#160;symbolic&#160;block&#160;names, defined&#160;in Fee_Cfg.h&#160;<br/>
(see&#160;chapter<a href="TechnicalReference_Fees.html#36">&#160;3.1.2).</a>&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Datasets&#160;<br/>
--&#160;<br/>
<b>1&#160;</b><br/>
This&#160;field&#160;determines&#160;the number&#160;of&#160;datasets&#160;configured&#160;for a&#160;<br/>
1…255<br/>
dedicated&#160;block.<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>The&#160;number&#160;of&#160;datasets&#160;can&#160;not&#160;be&#160;modified&#160;if&#160;the&#160;<br/>
&#160;&#160;block&#160;is&#160;configured&#160;within&#160;and&#160;forwarded&#160;from&#160;the&#160;<br/>
NVM.&#160;If&#160;the block&#160;is&#160;created&#160;within&#160;the&#160;FEE, the&#160;<br/>datasets&#160;can be&#160;adjusted for corresponding&#160;block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Size&#160;<br/>
uint16&#160;<br/>
<b>1&#160;</b><br/>
The&#160;natural&#160;size (in bytes)&#160;of&#160;the block&#160;(payload).&#160;<br/>
1…65535&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>The&#160;size can&#160;not&#160;be&#160;modified&#160;if&#160;the&#160;block&#160;is&#160;<br/>
&#160;&#160;configured&#160;within&#160;and forwarded from&#160;the&#160;NVM,&#160;<br/>
because these&#160;blocks&#160;provide&#160;their&#160;size&#160;on&#160;their&#160;own.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
71&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=72></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-72_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-72_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-72_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-72_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-72_5.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;<br/>is&#160;written&#160;in&#160;bold&#160;<br/>
Chunk&#160;block&#160;&#160;--&#160;<br/>
<b>1</b>,&#160;3,&#160;7,&#160;<br/>
This&#160;field&#160;determines&#160;the number&#160;of&#160;blocks&#160;which&#160;can&#160;be&#160;stored&#160;<br/>
count&#160;<br/>
15,&#160;31, 63,<br/>
within&#160;one&#160;block&#160;chunk. For&#160;blocks&#160;which are&#160;written often&#160;the&#160;<br/>
&#160;<br/>
127,&#160;255, 511,&#160;&#160;number&#160;should&#160;be&#160;larger and vice&#160;versa.&#160;<br/>1023, 2047,&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
4095, 8191,&#160;<br/>
<b>Caution&#160;</b><br/>
16383,&#160;32767&#160;<br/>
This&#160;value must always&#160;be&#160;adjusted&#160;within&#160;the&#160;FEE&#160;<br/>
<b>&#160;&#160;</b>and&#160;is&#160;never forwarded from&#160;the upper layer,&#160;<br/>
because this&#160;value&#160;is&#160;responsible to&#160;abstract&#160;<br/>hardware&#160;constraints&#160;to&#160;the&#160;upper layer.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
Partition&#160;<br/>
Ref.&#160;<br/>
--&#160;<br/>
Reference to&#160;a defined&#160;partition&#160;container.&#160;<br/>
Write&#160;Cycles&#160;&#160;--&#160;<br/>
1…&#160;<br/>
The&#160;estimated/desired number&#160;of&#160;write&#160;cycles&#160;which&#160;are required&#160;<br/>
<b>10000</b><br/>
for the&#160;block.&#160;According&#160;to&#160;this&#160;value, the&#160;number&#160;of&#160;blocks&#160;within&#160;<br/>
<b>&#160;</b><br/>
a chunk&#160;shall&#160;be&#160;influenced, but&#160;which&#160;is&#160;not&#160;done&#160;automatically&#160;<br/>
...10000000&#160;<br/>
and&#160;is&#160;left to&#160;the&#160;user.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>Currently, the&#160;adjustment of&#160;this&#160;value&#160;has&#160;no effect.&#160;<br/>
&#160;&#160;Instead&#160;the&#160;number&#160;of&#160;blocks&#160;within a&#160;chunk&#160;(Chunk&#160;<br/>
block&#160;count) influences&#160;the&#160;distribution&#160;of&#160;the&#160;<br/>data/blocks&#160;on&#160;the Flash&#160;memory.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
High&#160;Prio&#160;<br/>
--&#160;<br/>
ON&#160;<br/>
This&#160;field denotes&#160;that&#160;the&#160;block&#160;contains&#160;high priority&#160;data.&#160;If&#160;it is&#160;<br/>
<b>OFF</b><br/>
'ON' the&#160;block/dataset&#160;can&#160;be&#160;erased and&#160;contains&#160;high priority&#160;<br/>
<b>&#160;</b><br/>
data.&#160;If&#160;it is&#160;'OFF' the block/dataset&#160;cannot&#160;be erased and&#160;<br/>contains&#160;&#34;normal&#34;&#160;data.&#160;<br/>For example,&#160;high&#160;priority&#160;data&#160;can&#160;be&#160;supposed as&#160;crash data.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>The&#160;marker&#160;for high&#160;priority&#160;data&#160;can&#160;not&#160;be modified&#160;<br/>
&#160;&#160;if&#160;the block&#160;is&#160;configured&#160;within&#160;and&#160;forwarded&#160;from&#160;<br/>
the&#160;NVM.&#160;If&#160;the block&#160;is&#160;created&#160;within&#160;the&#160;FEE, the&#160;<br/>datasets&#160;can be&#160;adjusted for corresponding&#160;block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>A&#160;block&#160;can&#160;only&#160;be&#160;erased&#160;by&#160;the&#160;API function&#160;<br/>
<b>&#160;&#160;</b>Fee_EraseImmediateBlock()&#160;if&#160;the&#160;<br/>
appropriate block&#160;is&#160;set&#160;to&#160;contain&#160;high priority&#160;data.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Critical&#160;Data&#160;&#160;--&#160;<br/>
ON&#160;<br/>
Marks&#160;a&#160;block&#160;to&#160;be&#160;critical,&#160;i.e.&#160;essential, for ECU&#160;operation.&#160;<br/>
<b>OFF&#160;</b><br/>
Refer to chapt<a href="TechnicalReference_Fees.html#32">er&#160;2.11.</a>&#160;<br/>
BlockID fixed&#160;&#160;--&#160;<br/>
ON&#160;<br/>
This&#160;checkbox&#160;must be checked, to&#160;be able&#160;to&#160;set&#160;the&#160;BlockID&#160;<br/>
<b>OFF</b><br/>
manually.<br/>
<b>&#160;</b><br/>
&#160;<br/>
Table&#160;5-1&#160;&#160;&#160;Fee&#160;configuration&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
72&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=73></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-73_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>5.1.5&#160;</b><br/>
<b>General&#160;Settings&#160;tab&#160;</b><br/>
<b>5.1.5.1&#160;</b><br/>
<b>Error&#160;Detection&#160;–&#160;Development&#160;Mode&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
Enable&#160;<br/>
--&#160;<br/>
ON&#160;<br/>
Preprocessor switch&#160;to&#160;enable/disable&#160;development&#160;<br/>
Development Error&#160;<br/>
<b>OFF</b><br/>
error detection&#160;and reporting.<br/>
<b>&#160;</b><br/>
&#160;<br/>
Detection&#160;<br/>
It is&#160;the main switch&#160;over following items:&#160;<br/>
<b>&gt;&#160;&#160;</b>Errorhook&#160;<br/>
<b>&gt;&#160;&#160;</b>Include File&#160;<br/>In&#160;production mode,&#160;this&#160;switch should&#160;be&#160;disabled&#160;to&#160;<br/>save ROM/RAM and&#160;to speed&#160;up the module.&#160;<br/>
Development Error&#160;&#160;--&#160;<br/>
<b>ON&#160;</b><br/>
Preprocessor switch for&#160;enabling/disabling the&#160;<br/>
Reporting&#160;<br/>
OFF<br/>
Development Error Reporting.&#160;<br/>
&#160;<br/>
Errorhook&#160;<br/>
C-function&#160;&#160;Valid C-function&#160;&#160;Specifies&#160;the&#160;function&#160;that&#160;shall&#160;be called&#160;if&#160;a&#160;<br/>identifier&#160;<br/>
identifier,&#160;<br/>
development error has&#160;occurred.&#160;<br/>
default:&#160;<br/>
(see&#160;chapter<a href="TechnicalReference_Fees.html#26">&#160;2.6.3&#160;</a>for function&#160;signature)&#160;<br/>
<b>Det_ Report&#160;<br/>Error&#160;&#160;</b><br/>
Include File&#160;<br/>
header file&#160;&#160;Valid&#160;header&#160;<br/>
Specifies&#160;the&#160;file that shall&#160;be&#160;included&#160;if&#160;development&#160;<br/>
file,&#160;default:&#160;<br/>
error reporting&#160;shall&#160;be&#160;used.&#160;The&#160;API used by&#160;the&#160;FEE&#160;<br/>
<b>Det.h</b><br/>
must be specified&#160;within this&#160;file.<br/>
<b>&#160;</b><br/>
&#160;<br/>
Table&#160;5-2&#160;&#160;&#160;Error&#160;Detection&#160;–&#160;Development&#160;Mode&#160;<br/>
<b>5.1.5.2&#160;</b><br/>
<b>Area&#160;“Error&#160;Callback”&#160;</b><br/>
<b>Attribute&#160;&#160;Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;written&#160;<br/>in&#160;bold&#160;<br/>
Use Error&#160;<br/>
--&#160;<br/>
ON,&#160;<br/>
Defines&#160;whether&#160;the&#160;Error&#160;Callback&#160;notification&#160;mechanism&#160;<br/>
Callback&#160;<br/>
shall&#160;be&#160;used&#160;to inform&#160;the&#160;application&#160;about&#160;a serious&#160;<br/>
&#160;<br/>
<b>OFF&#160;</b><br/>
condition the Fee&#160;had&#160;detected.&#160;<br/>
&#160;<br/>
&#160;<br/>
Callback&#160;<br/>
C-function&#160;&#160;Valid C-function&#160;<br/>
Defines&#160;the function of&#160;the&#160;application&#160;that&#160;will&#160;be&#160;called if&#160;<br/>
Function&#160;<br/>
identifier&#160;<br/>
identifier, default:&#160;<br/>
a critical&#160;condition&#160;has&#160;been entered&#160;by&#160;the&#160;Fee.&#160;It is&#160;<br/>
<b>Appl_CriticalError</b><br/>
expected,&#160;that the&#160;application&#160;is&#160;responsible&#160;to&#160;react on&#160;<br/>
<b>&#160;</b><br/>
<b>Callback&#160;</b><br/>
this&#160;situation&#160;according to&#160;the&#160;parameter&#160;value&#160;which&#160;has&#160;<br/>
<b>&#160;</b><br/>
been&#160;passed.&#160;<br/>Refer to chapt<a href="TechnicalReference_Fees.html#40">er&#160;3.3.5.3&#160;</a><br/>
Include File&#160;&#160;header file&#160;&#160;Valid&#160;header&#160;file,&#160;<br/>
Defines&#160;the header file containing&#160;the&#160;Error Callback&#160;<br/>
default:&#160;<br/>
function.&#160;<br/>
<b>Appl_Include.h&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
73&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=74></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-74_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-74_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
Table&#160;5-3&#160;&#160;&#160;Error&#160;Callback&#160;<br/>
<b>5.1.5.3&#160;</b><br/>
<b>Area&#160;Buffer&#160;</b><br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
Internal&#160;<br/>
uint16&#160;<br/>
<b>64,&#160;</b>128,&#160;256,&#160;<br/>
Size&#160;of&#160;internal&#160;buffer to be&#160;used&#160;for instance allocation&#160;during&#160;<br/>
Buffer Size&#160;<br/>
512,&#160;1024<br/>
write&#160;job&#160;processing and for instance copy&#160;during sector&#160;switch.<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Must&#160;be&#160;an&#160;integral&#160;power&#160;of&#160;two.<br/>
&#160;<br/>
&#160;<br/>
Must be&#160;equal&#160;to&#160;or larger&#160;than&#160;“Write&#160;Alignment”&#160;setting.<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>The&#160;number&#160;of&#160;Fls_Read&#160;–&#160;Fls_Write&#160;request&#160;<br/>
&#160;&#160;pairs&#160;necessary&#160;to&#160;copy&#160;a whole block&#160;<br/>
depends&#160;on&#160;its&#160;size and&#160;Internal&#160;Buffer&#160;size.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
<b>5.1.5.4&#160;</b><br/>
<b>Area&#160;“Upper&#160;Layer”&#160;</b><br/>
Following&#160;&#160;controls&#160;&#160;are&#160;&#160;visible&#160;&#160;only,&#160;&#160;if&#160;&#160;an&#160;&#160;NvM&#160;&#160;is&#160;&#160;enabled&#160;&#160;(part&#160;&#160;of&#160;&#160;configuration)&#160;&#160;and&#160;&#160;its&#160;<br/>parameter&#160;&#34;Use&#160;Polling&#160;Mode&#34;&#160;(NvmPollingMode)&#160;is&#160;unchecked&#160;(set&#160;to&#160;False).&#160;A&#160;hint&#160;about&#160;<br/>NVM’s current&#160;polling&#160;mode&#160;setting&#160;(including&#160;availability&#160;at&#160;all) will&#160;be&#160;additionally&#160;shown.&#160;<br/>FEE&#160;should&#160;be&#160;used&#160;in&#160;polling&#160;mode,&#160;if&#160;NVM is disabled.&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;written&#160;<br/>in&#160;bold&#160;<br/>
Job&#160;End&#160;<br/>
C-function&#160;<br/>
Valid C-function&#160;<br/>
The&#160;name of&#160;the job&#160;end&#160;callback&#160;function&#160;shall&#160;be&#160;<br/>
Notification&#160;<br/>
identifier&#160;<br/>
identifier, default:&#160;<br/>
inserted&#160;to&#160;this&#160;field.&#160;<br/>
<b>NvM_JobEnd&#160;</b><br/>
It is&#160;called to report to the upper layer&#160;that&#160;the job&#160;<br/>
<b>Notification&#160;</b><br/>
processing&#160;was&#160;finished successfully.&#160;<br/>Usually&#160;this&#160;function&#160;is&#160;provided by&#160;the NVM.&#160;&#160;<br/>
&#160;<br/>
Job&#160;Error&#160;<br/>
C-function&#160;<br/>
Valid C-function&#160;<br/>
The&#160;name of&#160;the job&#160;error callback&#160;function&#160;shall&#160;be&#160;<br/>
Notification&#160;<br/>
identifier&#160;<br/>
identifier, default:&#160;<br/>
inserted&#160;to&#160;this&#160;field.&#160;<br/>
<b>NvM_JobError&#160;</b><br/>
It is&#160;called to report to the upper layer&#160;that&#160;the job&#160;<br/>
<b>Notification&#160;</b><br/>
processing&#160;was&#160;finished&#160;with failure.&#160;Usually&#160;this&#160;<br/>function&#160;is&#160;provided&#160;by&#160;the&#160;NVM.&#160;<br/>
Include File for&#160;&#160;header file&#160;<br/>
Valid&#160;header&#160;file,&#160;<br/>
In&#160;this&#160;field&#160;it can be inserted the&#160;name of&#160;the include&#160;<br/>
Callbacks&#160;<br/>
default:&#160;<br/>
file that&#160;holds&#160;the&#160;callback&#160;declarations&#160;of&#160;the&#160;upper&#160;<br/>
<b>NvM_Cbk.h</b><br/>
layer.<br/>
<b>&#160;</b><br/>
&#160;<br/>
Table&#160;5-4&#160;&#160;&#160;Upper&#160;Layer&#160;<br/>
<b>5.1.5.5&#160;</b><br/>
<b>Area&#160;“Critical&#160;Section Handling”&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
74&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=75></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-75_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-75_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-75_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Changes&#160;<br/></b>Fee 8.xx.xx&#160;only&#160;supports&#160;Critical&#160;Section&#160;services&#160;provided by&#160;an&#160;AUTOSAR&#160;Basic&#160;<br/>
&#160;&#160;Software&#160;Scheduler&#160;(SchM).&#160;It&#160;ignores&#160;manual&#160;settings&#160;made,&#160;if&#160;“Use BSW&#160;Scheduler&#160;<br/>
(SchM)”&#160;was disabled&#160;in “Board Setting&#160;/&#160;OS&#160;Sevices”&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
Short-Lasting&#160;<br/>
--&#160;<br/>
<b>Use&#160;Suspend&#160;</b><br/>
Defines&#160;the&#160;function set&#160;that will&#160;be&#160;called&#160;when&#160;short-<br/>
Actions&#160;<br/>
<b>Functions&#160;</b><br/>
lasting&#160;critical&#160;sections&#160;are&#160;entered or&#160;left.&#160;Refer to&#160;<br/>
UseOS&#160;Functions<br/>
chapter<a href="TechnicalReference_Fees.html#41">&#160;3.5.</a><br/>
&#160;<br/>
&#160;<br/>
UseEnable&#160;<br/>
<b>&#160;</b><br/>
Functions&#160;<br/>
Long-Lasting&#160;<br/>
--&#160;<br/>
<b>Use&#160;Suspend&#160;</b><br/>
Defines&#160;the function set&#160;that will&#160;be&#160;called&#160;when&#160;long-<br/>
Actions&#160;<br/>
<b>Functions&#160;</b><br/>
lasting&#160;critical&#160;sections&#160;are&#160;entered or&#160;left. Long-lasting&#160;<br/>
UseOS&#160;Functions<br/>
actions&#160;are&#160;Fee_MainFunction&#160;as&#160;a&#160;whole.&#160;Refer to&#160;<br/>
&#160;<br/>
chapter<a href="TechnicalReference_Fees.html#41">&#160;3.5.</a>&#160;<br/>
UseEnable&#160;<br/>Functions&#160;<br/>
&#160;<br/>
Table&#160;5-5&#160;&#160;&#160;Critical&#160;Section&#160;Services&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Both&#160;dropdown lists&#160;are&#160;invisible,&#160;if&#160;the&#160;BSW&#160;Scheduler&#160;is&#160;enabled&#160;within&#160;the&#160;OS&#160;configuration&#160;<br/>
&#160;&#160;tab&#160;of&#160;the ECU&#160;configuration.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>5.1.6&#160;</b><br/>
<b>Partitions&#160;</b><br/>
The&#160;left&#160;panel&#160;of&#160;partitions&#160;shows&#160;a&#160;tree-like&#160;overview&#160;of&#160;currently&#160;configured&#160;partitions.&#160;In&#160;<br/>this panel partitions&#160;can&#160;be&#160;added,&#160;deleted&#160;and&#160;renamed,&#160;as well.&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;&#160;</b>The&#160;default&#160;value&#160;is&#160;<br/>
written&#160;in&#160;bold&#160;<br/>
Partition&#160;<br/>
Ref.&#160;<br/>
--&#160;<br/>
Choose&#160;a flash configuration.&#160;<br/>
Device&#160;<br/>
All&#160;partitions&#160;in one&#160;single flash device&#160;must refer to the same&#160;<br/>Flash Configuration (of&#160;type&#160;<br/>/AUTOSAR/Fls/FlsConfigSet)&#160;<br/>Currently, FEE&#160;is&#160;restricted&#160;to&#160;use&#160;one Flash&#160;Driver only,&#160;i.e.&#160;all&#160;<br/>partitions&#160;must point&#160;the same configuration.&#160;<br/>
Lower&#160;Sector&#160;&#160;--&#160;<br/>
<b>--&#160;</b><br/>
In&#160;this&#160;combo&#160;box&#160;the&#160;start&#160;address&#160;of&#160;the&#160;lower&#160;logical&#160;sector&#160;<br/>
Start&#160;Address&#160;<br/>
shall&#160;be&#160;selected.&#160;The&#160;values&#160;of&#160;the list are&#160;just typical&#160;values.&#160;<br/>A&#160;custom&#160;value&#160;may&#160;be entered;&#160;it must adhere to the&#160;“Fls&#160;<br/>address&#160;alignment”&#160;(see&#160;below).&#160;&#160;<br/>
Lower&#160;Sector&#160;&#160;--&#160;<br/>
<b>1024&#160;</b><br/>
Choose&#160;lower&#160;logical&#160;sector’s&#160;size&#160;in&#160;bytes.&#160;The&#160;combo&#160;box&#160;<br/>
Size&#160;<br/>
suggests&#160;some typical&#160;values; a&#160;custom&#160;size may&#160;be&#160;entered.&#160;<br/>The&#160;size must also&#160;adhere&#160;to&#160;“Fls&#160;address&#160;alignment”&#160;(see&#160;<br/>below).&#160;&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
75&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=76></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-76_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;&#160;</b>The&#160;default&#160;value&#160;is&#160;<br/>
written&#160;in&#160;bold&#160;<br/>
Upper&#160;Sector&#160;&#160;--&#160;<br/>
<b>--&#160;</b><br/>
In&#160;this&#160;combo&#160;box&#160;the&#160;start&#160;address&#160;of&#160;the&#160;upper&#160;logical&#160;sector&#160;<br/>
Start&#160;Address&#160;<br/>
shall&#160;be&#160;selected.&#160;The&#160;values&#160;of&#160;the list are suggestions,&#160;<br/>derived&#160;from&#160;the chosen&#160;Fls&#160;driver (which&#160;depends&#160;on&#160;the&#160;<br/>used&#160;controller).&#160;A&#160;custom&#160;value&#160;may&#160;be entered; it&#160;must&#160;<br/>adhere to the&#160;“Fls&#160;address&#160;alignment”&#160;(see&#160;below).&#160;&#160;<br/>The&#160;upper&#160;sector’s&#160;start&#160;address&#160;must be located&#160;in&#160;a&#160;distinct&#160;<br/>physical&#160;sector,&#160;with&#160;higher&#160;address, than&#160;the&#160;last address&#160;of&#160;<br/>the&#160;lower sector.&#160;<br/>
Upper&#160;Sector&#160;&#160;--&#160;<br/>
<b>1024&#160;</b><br/>
Choose&#160;upper&#160;logical&#160;sector’s&#160;size&#160;in bytes.&#160;The&#160;combo&#160;box&#160;<br/>
Size&#160;<br/>
suggests&#160;some typical&#160;values; a&#160;custom&#160;size may&#160;be&#160;entered.&#160;<br/>The&#160;size must also adhere&#160;to&#160;“Fls&#160;address&#160;alignment”&#160;(see&#160;<br/>below).&#160;<br/>
Fls&#160;address&#160;<br/>
--&#160;<br/>
<b>8,&#160;&#160;</b><br/>
In&#160;this&#160;drop&#160;down list the&#160;virtual&#160;page&#160;size&#160;in&#160;bytes&#160;will&#160;be&#160;set.&#160;<br/>
alignment&#160;<br/>
64, 128,&#160;256, 512,&#160;<br/>
This&#160;must be a&#160;power&#160;of&#160;two and be&#160;equal&#160;to&#160;or larger&#160;than&#160;the&#160;<br/>
1024<br/>
“Flash page&#160;size&#160;for write&#160;jobs”.&#160;This&#160;value&#160;will&#160;be&#160;used&#160;to&#160;<br/>
&#160;<br/>
check&#160;logical&#160;sectors’&#160;alignment, to align&#160;of&#160;block&#160;instances&#160;as&#160;<br/>well&#160;as&#160;Fee management information.&#160;<br/>
Fls&#160;Page&#160;<br/>
--&#160;<br/>
<b>8,&#160;&#160;</b><br/>
In&#160;this&#160;drop&#160;down list the Fls&#160;page&#160;size for write&#160;jobs&#160;in&#160;bytes&#160;<br/>
Size for&#160;write&#160;<br/>
64, 128,&#160;256, 512,&#160;<br/>
will&#160;be set.&#160;This&#160;must be an&#160;integral&#160;multiple of&#160;the&#160;hardware&#160;<br/>
jobs&#160;<br/>
1024<br/>
specific&#160;flash page size.&#160;This&#160;value&#160;will&#160;be used for the&#160;write&#160;<br/>
&#160;<br/>
alignment, instead&#160;of&#160;the Fls&#160;page&#160;size of&#160;the&#160;hardware.&#160;<br/>
Table&#160;5-6&#160;&#160;&#160;Lower&#160;Layer&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
76&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=77></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-77_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-77_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-77_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-77_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>5.1.6.1&#160;</b><br/>
<b>Area&#160;“Management”&#160;</b><br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
Background&#160;<br/>
uint32&#160;<br/>
--&#160;<br/>
If&#160;there is&#160;less&#160;free&#160;space by&#160;writing data&#160;continuously&#160;to&#160;the&#160;<br/>
Reserve&#160;<br/>
Fee,&#160;the sector switch in background&#160;mode&#160;will&#160;be&#160;started.<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;</b><br/>
&#160;<br/>
See&#160;chapt<a href="TechnicalReference_Fees.html#27">er&#160;2.7&#160;</a>for&#160;more details.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Foreground&#160;<br/>
uint32&#160;<br/>
--&#160;<br/>
If&#160;there is&#160;less&#160;free&#160;space&#160;by&#160;writing data&#160;continuously&#160;to&#160;the&#160;<br/>
Reserve&#160;<br/>
Fee, the sector switch in foreground&#160;mode&#160;will&#160;be&#160;started.<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;</b><br/>
&#160;<br/>
See&#160;chapt<a href="TechnicalReference_Fees.html#27">er&#160;2.7&#160;</a>for&#160;more details.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Table&#160;5-7&#160;&#160;&#160;sector&#160;switch&#160;reserve&#160;<br/>
<b>5.1.6.2&#160;</b><br/>
<b>Area&#160;“Lower&#160;Layer”&#160;</b><br/>
This&#160;panel is independent&#160;from&#160;partitions;&#160;its&#160;setting&#160;has&#160;global&#160;meaning.&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;&#160;</b>The&#160;default&#160;value&#160;is&#160;<br/>
written&#160;in&#160;bold&#160;<br/>
Poll&#160;Flash&#160;<br/>
--&#160;<br/>
<b>ON&#160;</b><br/>
Enables/disables&#160;polling&#160;of&#160;the underlying Flash driver.&#160;&#160;<br/>
Driver&#160;<br/>
OFF&#160;<br/>
If&#160;polling&#160;is&#160;disabled, make sure, that&#160;the&#160;callbacks&#160;<br/>Fee_JobEndNotification()&#160;and&#160;<br/>Fee_JobErrorNotification(),&#160;respectively,&#160;have been&#160;<br/>configured&#160;in&#160;the&#160;Flash&#160;driver.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>If&#160;polling&#160;is&#160;enabled the callback&#160;functions&#160;are&#160;not&#160;<br/>
&#160;&#160;available,&#160;because&#160;there&#160;is&#160;no&#160;needed&#160;to.&#160;An&#160;<br/>
additional&#160;hint&#160;will&#160;be&#160;visible in&#160;that case.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Table&#160;5-8&#160;&#160;&#160;Lower&#160;Layer&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=78></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-78_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-78_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-78_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-78_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>5.1.7&#160;</b><br/>
<b>Module&#160;API&#160;tab&#160;</b><br/>
<b>5.1.7.1&#160;</b><br/>
<b>API&#160;Configuration&#160;</b><br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;&#160;</b>The&#160;default&#160;<br/>
value&#160;is&#160;<br/>written&#160;in&#160;<br/>bold&#160;<br/>
Enable&#160;<br/>
--&#160;<br/>
<b>ON&#160;</b><br/>
Preprocessor switch&#160;to&#160;enable/disable&#160;the&#160;existence of&#160;the&#160;<br/>
Fee_GetVersionInfo&#160;API&#160;<br/>
OFF<br/>
API service&#160;<br/>
&#160;<br/>
Fee_GetVersionInfo().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>If&#160;this&#160;checkbox&#160;is&#160;switched&#160;off, the&#160;<br/>
&#160;&#160;corresponding&#160;parameter&#160;check&#160;(&#34;Check&#160;<br/>
Parameter&#160;VersionInfo&#34;)&#160;within&#160;the&#160;&#34;General&#160;<br/>Settings&#34;&#160;tab is&#160;deselected&#160;and&#160;disabled.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Enable&#160;<br/>
--&#160;<br/>
ON&#160;<br/>
Preprocessor switch&#160;to&#160;enable/disable&#160;the&#160;existence of&#160;the&#160;<br/>
Fee_GetEraseCycle&#160;API&#160;<br/>
<b>OFF</b><br/>
API service&#160;<br/>
<b>&#160;</b><br/>
Fee_GetEraseCycle().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info</b>&#160;<br/>If&#160;this&#160;checkbox&#160;is&#160;switched&#160;off, the&#160;<br/>
&#160;&#160;corresponding&#160;parameter&#160;check&#160;(&#34;Check&#160;<br/>
Parameter&#160;Sector&#160;Number&#34;)&#160;within the&#160;&#34;General&#160;<br/>Settings&#34;&#160;tab is&#160;deselected&#160;and&#160;disabled.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Enable&#160;<br/>
--&#160;<br/>
ON&#160;<br/>
Preprocessor switch&#160;to&#160;enable/disable&#160;the&#160;existence of&#160;the&#160;<br/>
Fee_GetWriteCycle&#160;API&#160;<br/>
<b>OFF</b><br/>
API service&#160;<br/>
<b>&#160;</b><br/>
Fee_GetWriteCycle().&#160;<br/>
Enable&#160;<br/>
--&#160;<br/>
ON&#160;<br/>
Preprocessor switch&#160;to&#160;enable/disable&#160;the&#160;existence of&#160;the&#160;<br/>
Fee_ForceSectorSwitch&#160;<br/>
<b>OFF</b><br/>
API service&#160;<br/>
<b>&#160;</b><br/>
Fee_ForceSectorSwitch().&#160;<br/>
API&#160;<br/>
Enable Data Conversion&#160;&#160;--&#160;<br/>
ON&#160;<br/>
Preprocessor switch&#160;to&#160;enable/disable&#160;the&#160;existence of&#160;<br/>
API&#160;<br/>
<b>OFF&#160;</b><br/>
Fee_ConvertDataBlocks.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Info&#160;<br/></b>If&#160;this&#160;feature&#160;was&#160;disabled&#160;at&#160;delivery&#160;time,&#160;<br/>
&#160;&#160;this&#160;switch&#160;is&#160;still&#160;available,&#160;but&#160;it is&#160;disabled.&#160;&#160;<br/>
It cannot&#160;be used&#160;to&#160;enable&#160;the feature “Data&#160;<br/>Conversion”.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Enable&#160;API&#160;to&#160;<br/>
--&#160;<br/>
ON&#160;<br/>
Preprocessor switch&#160;to&#160;enable/disable&#160;function set&#160;<br/>
allow/prohibit&#160;FSS&#160;<br/>
<b>OFF&#160;</b><br/>
Fee_EnableFss()/Fee_DisableFss()&#160;<br/>Refer to chapt<a href="TechnicalReference_Fees.html#31">er&#160;2.10.</a>&#160;<br/>
Table&#160;5-9&#160;&#160;&#160;API&#160;Configuration&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
78&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=79></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-79_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-79_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>5.1.7.2&#160;</b><br/>
<b>Provided&#160;API&#160;</b><br/>
<b>Attribute&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Name&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;value&#160;is&#160;<br/>written&#160;in&#160;bold&#160;<br/>
Provided&#160;API&#160;&#160;--&#160;<br/>
--&#160;<br/>
This&#160;group&#160;shows&#160;the&#160;API services&#160;which&#160;are currently&#160;<br/>provided by&#160;the&#160;FEE&#160;depending on&#160;its&#160;configuration.&#160;<br/>
Table&#160;5-10&#160;&#160;&#160;Provided&#160;API&#160;<br/>
<b>5.2&#160;</b><br/>
<b>Configuration Parameters&#160;only&#160;visible&#160;in&#160;GCE&#160;</b><br/>
There&#160;&#160;are&#160;&#160;parameters&#160;&#160;that&#160;&#160;cannot&#160;&#160;be&#160;&#160;configured&#160;&#160;using&#160;&#160;the&#160;&#160;comfort&#160;&#160;view&#160;&#160;of&#160;&#160;DaVinci&#160;<br/>Configurator.&#160;&#160;These&#160;&#160;parameters&#160;&#160;should&#160;&#160;only&#160;&#160;be&#160;&#160;modified,&#160;&#160;if&#160;&#160;really&#160;&#160;necessary,&#160;&#160;and&#160;&#160;if&#160;&#160;the&#160;<br/>user&#160;knows&#160;about&#160;their&#160;effects.&#160;These&#160;parameters’&#160;default&#160;values&#160;are&#160;usable&#160;in&#160;very&#160;most&#160;<br/>cases.&#160;<br/>To&#160;&#160;meet&#160;&#160;platform&#160;&#160;specific&#160;&#160;requirements&#160;&#160;and/or&#160;&#160;restrictions,&#160;&#160;they&#160;&#160;may&#160;&#160;also&#160;&#160;be&#160;&#160;pre-<br/>configured&#160;during&#160;integration/delivery,&#160;i.e.&#160;they&#160;might&#160;not&#160;be&#160;changeable&#160;at&#160;all.&#160;<br/>
<b>Attribute Name&#160;</b><br/>
<b>Value&#160;&#160;Values&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Type&#160;</b><br/>
The&#160;default&#160;<br/>value&#160;is&#160;<br/>written&#160;in&#160;<br/>bold&#160;<br/>
FeeMaxLinkTableSize&#160;<br/>
Integer&#160;&#160;0 …&#160;<b>4095</b>&#160;&#160;Defines&#160;the maximum&#160;size&#160;of&#160;the Link&#160;Table.&#160;The&#160;link&#160;table&#160;<br/>
(Maximum&#160;Number&#160;of&#160;<br/>
itself&#160;improves&#160;performance of&#160;FEE,&#160;but&#160;it reduces&#160;space&#160;<br/>
LinkTable Entries)<br/>
available for user data.&#160;Thus&#160;it might be&#160;desirable to&#160;limit its&#160;<br/>
&#160;<br/>
size.&#160;Especially&#160;on devices&#160;with&#160;very&#160;limited&#160;flash space&#160;<br/>and/or considerably&#160;large pages&#160;(e.g.&#160;TriCore&#160;TC179x)&#160;the&#160;<br/>performance penalty&#160;resulting&#160;from&#160;reducing&#160;the&#160;link&#160;table&#160;<br/>size&#160;(or&#160;disabling&#160;it completely,&#160;i.e.&#160;by&#160;setting size to 0),&#160;<br/>would be feasible.&#160;<br/>
Table&#160;5-11&#160;&#160;&#160;Parameters&#160;only&#160;visible&#160;in&#160;GCE&#160;view.&#160;<br/>
<b>5.2.1&#160;</b><br/>
<b>Fls&#160;API&#160;deviating from&#160;AUTOSAR naming convention&#160;</b><br/>
FEE&#160;is able&#160;to&#160;use&#160;any&#160;AUTOSAR&#160;compliant&#160;Fls&#160;“out&#160;of&#160;the&#160;box”,&#160;i.e.&#160;associating&#160;a&#160;partition&#160;<br/>with&#160;a&#160;driver,&#160;its&#160;API&#160;is&#160;defined&#160;and&#160;FEE&#160;can&#160;be&#160;generated.&#160;This&#160;is&#160;the&#160;case&#160;for&#160;all&#160;internal&#160;<br/>device&#160;drivers&#160;whose&#160;API&#160;shall&#160;exactly&#160;match&#160;the&#160;naming&#160;given&#160;in&#160;Flash&#160;Driver&#160;SWS.&#160;It&#160;is&#160;<br/>also&#160;true&#160;for&#160;an&#160;external&#160;device&#160;driver,&#160;which&#160;shall&#160;include&#160;Vendor&#160;ID&#160;and&#160;a&#160;so-called&#160;“API&#160;<br/>infix”; both&#160;shall&#160;be&#160;published&#160;in&#160;its&#160;module&#160;description&#160;file.&#160;<br/>However,&#160;&#160;sometimes&#160;&#160;an&#160;&#160;Fls&#160;&#160;doesn’t&#160;&#160;fully&#160;&#160;comply,&#160;&#160;or&#160;&#160;there&#160;&#160;might&#160;&#160;be&#160;&#160;technical&#160;&#160;reasons&#160;&#160;to&#160;<br/>deviate&#160;from&#160;AUTOSAR.&#160;<br/>
<b>Example&#160;<br/></b>Due&#160;to address&#160;space&#160;limitiation&#160;mentioned&#160;in chapter<a href="TechnicalReference_Fees.html#13">&#160;2.1,&#160;</a>it&#160;is&#160;necessary&#160;to&#160;use&#160;some&#160;<br/>
&#160;&#160;“proxy&#160;Fls”,&#160;if&#160;FEE&#160;(a partition)&#160;shall&#160;address&#160;an&#160;Fls’s&#160;sectors&#160;beyond 2GB&#160;limit&#160;(≥&#160;<br/>
0x80000000).&#160;Using&#160;this&#160;Feature&#160;of&#160;FEE,&#160;its&#160;function&#160;names&#160;do&#160;not&#160;need&#160;to&#160;comply&#160;with&#160;<br/>AUTOSAR.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
In&#160;such&#160;a&#160;case&#160;FEE&#160;would&#160;not&#160;compile&#160;(or&#160;not&#160;link)&#160;because&#160;used&#160;function&#160;names&#160;do&#160;not&#160;<br/>match&#160;Fls’s provided&#160;ones.&#160;This can&#160;be&#160;solved&#160;as&#160;follows:&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
79&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=80></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-80_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-80_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
1.&#160;&#160;Add&#160;container&#160;FeeFlsApi&#160;to&#160;container&#160;FeeGeneral.&#160;&#160;<br/>
2.&#160;&#160;New&#160;Container may&#160;be&#160;renamed&#160;<br/>
3.&#160;&#160;Enter&#160;name&#160;of&#160;Fls’s include&#160;file&#160;<br/>
4.&#160;&#160;Change&#160;function&#160;names according&#160;to&#160;your needs.&#160;Parameter names&#160;are self-<br/>
explaining;&#160;they&#160;map&#160;from&#160;SWS&#160;function&#160;names (e.g.&#160;Fls_Read) to&#160;actually&#160;<br/>implemented&#160;names&#160;(e.g.&#160;MyVeryOwn_ReadFunction).&#160;<br/>
5.&#160;&#160;Associate&#160;this container with&#160;an&#160;existing&#160;Fls configuration&#160;(FeeFlsDeviceIndex&#160;is a&#160;<br/>
reference&#160;to&#160;a&#160;container of&#160;type&#160;Fls/FlsGeneral).&#160;&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>Container&#160;FeeFlsApi&#160;has&#160;a&#160;multiplicity&#160;of&#160;0..*,&#160;i.e.&#160;you&#160;may&#160;create&#160;an&#160;arbitrary&#160;number&#160;<br/>
&#160;&#160;of&#160;Flses.&#160;Generator&#160;matches&#160;references&#160;to Fls&#160;drivers&#160;with partitions’&#160;references to&#160;Fls&#160;<br/>
(runtime)&#160;configurations&#160;to&#160;generate necessary&#160;information&#160;of&#160;drivers&#160;which are&#160;actually&#160;<br/>used.&#160;Of&#160;course,&#160;each&#160;Fls&#160;driver&#160;instance&#160;must&#160;be&#160;referenced&#160;at&#160;most&#160;once.&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
80&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=81></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-81_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>6&#160;&#160;AUTOSAR&#160;Standard&#160;Compliance&#160;</b><br/>
<b>6.1&#160;</b><br/>
<b>Deviations&#160;</b><br/>
<b>6.1.1&#160;</b><br/>
<b>Maximum Blocking Time&#160;</b><br/>
The&#160;parameter&#160;FEE_MAXIMUM_BLOCK_TIME&#160;is not&#160;supported&#160;by&#160;the&#160;current&#160;version&#160;of&#160;the&#160;<br/>FEE,&#160;because&#160;a&#160;time&#160;reference&#160;is&#160;missing&#160;to&#160;support this requirement.&#160;<br/>
<b>6.2&#160;</b><br/>
<b>Additions/&#160;Extensions&#160;</b><br/>
<b>6.2.1&#160;</b><br/>
<b>Parameter&#160;Checking&#160;</b><br/>
The&#160;&#160;internal&#160;&#160;parameter&#160;&#160;checks&#160;&#160;of&#160;&#160;the&#160;API&#160;&#160;functions&#160;&#160;can&#160;&#160;be&#160;&#160;en-/disabled&#160;&#160;separately.&#160;&#160;The&#160;<br/>AUTOSAR&#160;standard&#160;&#160;requires&#160;en-/disabling&#160;of&#160;the&#160;complete&#160;parameter&#160;checking&#160;only.&#160;For&#160;<br/>details see&#160;chapter<a href="TechnicalReference_Fees.html#23">&#160;2.6.1.</a>&#160;<br/>
<b>6.2.2&#160;</b><br/>
<b>Fee_InitEx&#160;</b><br/>
See&#160;chapte<a href="TechnicalReference_Fees.html#45">r&#160;4.3.2&#160;</a>for&#160;further information.&#160;<br/>
<b>6.2.3&#160;</b><br/>
<b>GetEraseCycle&#160;</b><br/>
See&#160;chapte<a href="TechnicalReference_Fees.html#22">r&#160;2.5.1.6&#160;</a>and<a href="TechnicalReference_Fees.html#54">&#160;4.3.13&#160;</a>for&#160;further information.&#160;<br/>
<b>6.2.4&#160;</b><br/>
<b>GetWriteCycle&#160;</b><br/>
See&#160;chapte<a href="TechnicalReference_Fees.html#23">r&#160;2.5.1.7&#160;</a>and<a href="TechnicalReference_Fees.html#55">&#160;4.3.14&#160;</a>for&#160;further information.&#160;<br/>
<b>6.2.5&#160;</b><br/>
<b>GetSectorSwitchStatus&#160;</b><br/>
See&#160;chapte<a href="TechnicalReference_Fees.html#56">r&#160;4.3.15&#160;</a>for&#160;further information.&#160;<br/>
<b>6.2.6&#160;</b><br/>
<b>ForceSectorSwitch&#160;</b><br/>
See&#160;chapte<a href="TechnicalReference_Fees.html#57">r&#160;4.3.16&#160;</a>for&#160;further information.&#160;<br/>
<b>6.2.7&#160;</b><br/>
<b>Fee_ConvertBlockConfig&#160;</b><br/>
This&#160;Service,&#160;and&#160;all&#160;related&#160;types,&#160;settings,&#160;etc.&#160;add&#160;the&#160;capability&#160;of&#160;performing&#160;data&#160;<br/>conversion&#160;after a&#160;configuration&#160;update.&#160;Note&#160;that&#160;this extension&#160;is optional; it&#160;must&#160;be&#160;<br/>ordered&#160;explicitly.&#160;<br/>For more&#160;information&#160;refer to&#160;chapte<a href="TechnicalReference_Fees.html#30">r&#160;2.8.</a>&#160;<br/>
<b>6.2.8&#160;</b><br/>
<b>Fee_SuspendWrites&#160;/&#160;Fee_ResumeWrites&#160;</b><br/>
See&#160;chapte<a href="TechnicalReference_Fees.html#31">rs&#160;2.10,&#160;</a><a href="TechnicalReference_Fees.html#61">4.3.19&#160;</a>and<a href="TechnicalReference_Fees.html#61">&#160;4.3.20&#160;</a>for&#160;further information.&#160;<br/>
<b>6.2.9&#160;</b><br/>
<b>Fee_EnableFss&#160;/&#160;Fee_DisableFss&#160;</b><br/>
See&#160;chapte<a href="TechnicalReference_Fees.html#31">rs&#160;2.10,&#160;</a><a href="TechnicalReference_Fees.html#62">4.3.21&#160;</a>and<a href="TechnicalReference_Fees.html#63">&#160;4.3.22&#160;</a>for&#160;further information.&#160;<br/>
<b>6.3&#160;</b><br/>
<b>Limitations&#160;</b><br/>
AUTOSAR does not&#160;specify&#160;how&#160;a&#160;FEE&#160;implementation&#160;shall&#160;organize&#160;flash&#160;memory.&#160;<br/>Additionally&#160;there are&#160;no&#160;requirements&#160;on&#160;performance&#160;or robustness.&#160;Following&#160;<br/>restrictions result&#160;from&#160;postulating&#160;and&#160;implementing&#160;such&#160;requirements.&#160;<br/>
<b>6.3.1&#160;</b><br/>
<b>Partitions&#160;</b><br/>
Current&#160;implementation&#160;limits the&#160;maximum&#160;number of&#160;partitions to&#160;4.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
81&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=82></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-82_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-82_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>6.3.2&#160;</b><br/>
<b>Flash Usage&#160;</b><br/>
Fee&#160;cannot&#160;provide&#160;whole&#160;configured&#160;flash&#160;memory&#160;for user data&#160;storage.&#160;<br/>Net&#160;payload&#160;to&#160;be&#160;stored&#160;in&#160;flash&#160;memory&#160;is&#160;roundabout&#160;25%&#160;of&#160;assigned&#160;flash&#160;memory,&#160;or&#160;<br/>more&#160;precisely,&#160;50%&#160;of&#160;the&#160;smaller logical sector’s size.&#160;<br/>In&#160;addition&#160;to&#160;memory&#160;overhead&#160;caused&#160;by&#160;internal&#160;management&#160;information&#160;to&#160;be&#160;stored&#160;<br/>along&#160;with&#160;user&#160;data,&#160;and&#160;to&#160;overhead&#160;caused&#160;by&#160;flash&#160;space&#160;to&#160;be&#160;reserved&#160;for&#160;dynamic&#160;<br/>allocation&#160;&#160;(in&#160;&#160;order&#160;&#160;to&#160;&#160;process&#160;&#160;write&#160;&#160;requests),&#160;&#160;the&#160;&#160;FEE&#160;&#160;must&#160;&#160;adhere&#160;&#160;to&#160;&#160;HW’s&#160;&#160;alignment&#160;<br/>requirements.&#160;&#160;Usually&#160;this&#160;alignment&#160;is&#160;determined&#160;by&#160;flash’s&#160;smallest&#160;&#160;writable&#160;&#160;entity,&#160;&#160;i.e.&#160;<br/>the&#160;flash&#160;page&#160;size.&#160;However,&#160;on&#160;some&#160;platforms,&#160;alignment&#160;must&#160;be&#160;even&#160;more&#160;stringent,&#160;<br/>because&#160;read&#160;and&#160;write&#160;accesses&#160;must&#160;be&#160;secured,&#160;so&#160;that&#160;&#160;they&#160;don’t&#160;endanger&#160;already&#160;<br/>stored&#160;information.&#160;<br/>This&#160;means:&#160;it&#160;might&#160;be&#160;possible&#160;to&#160;add&#160;stuffing&#160;bytes&#160;carrying&#160;no&#160;information.&#160;Depending&#160;<br/>on&#160;&#160;flash&#160;&#160;device&#160;&#160;and&#160;&#160;related&#160;&#160;alignment&#160;&#160;requirements,&#160;&#160;this&#160;&#160;overhead&#160;&#160;might&#160;&#160;become&#160;<br/>significant,&#160;additionally reducing&#160;the&#160;total&#160;amount&#160;of&#160;user data&#160;that&#160;may&#160;be&#160;stored&#160;in&#160;flash.&#160;<br/>
<b>6.3.3&#160;</b><br/>
<b>Performance&#160;</b><br/>
Due&#160;&#160;to&#160;&#160;dynamic&#160;&#160;flash&#160;&#160;allocation,&#160;&#160;dependent&#160;&#160;on&#160;&#160;configuration&#160;&#160;and&#160;&#160;actual&#160;&#160;write&#160;&#160;accesses,&#160;<br/>the&#160;performance,&#160;by&#160;means&#160;of&#160;request&#160;processing&#160;time&#160;(i.e.&#160;number&#160;of&#160;Fee_MainFunction&#160;<br/>call&#160;&#160;cycles),&#160;&#160;fluctuates.&#160;&#160;Starting&#160;&#160;with&#160;&#160;an&#160;&#160;empty&#160;&#160;flash,&#160;&#160;job&#160;&#160;processing&#160;&#160;time&#160;&#160;increases&#160;&#160;over&#160;<br/>time&#160;&#160;up&#160;&#160;to&#160;&#160;a&#160;&#160;maximum&#160;&#160;search&#160;&#160;effort&#160;&#160;(one&#160;&#160;logical&#160;&#160;sector&#160;&#160;is&#160;&#160;completely&#160;&#160;filled).&#160;&#160;When&#160;&#160;the&#160;<br/>other sector is initially&#160;used,&#160;search&#160;efforts reduce&#160;again.&#160;<br/>Additionally&#160;&#160;worst&#160;&#160;case&#160;&#160;blocking&#160;&#160;times&#160;&#160;are&#160;&#160;mostly&#160;&#160;affected&#160;&#160;by&#160;&#160;clean-up&#160;&#160;operation&#160;&#160;(copy&#160;<br/>recent&#160;&#160;data&#160;&#160;instances)&#160;&#160;and&#160;&#160;sector&#160;&#160;erase.&#160;&#160;Latter&#160;&#160;one&#160;&#160;is&#160;&#160;determined&#160;by&#160;&#160;HW;&#160;&#160;usually&#160;&#160;erase&#160;<br/>timings&#160;&#160;are&#160;&#160;at&#160;&#160;scales&#160;&#160;of&#160;&#160;hundreds&#160;&#160;of&#160;&#160;milliseconds&#160;&#160;per&#160;&#160;16kBytes.&#160;&#160;Their&#160;&#160;frequency&#160;&#160;highly&#160;<br/>depends&#160;on&#160;flash&#160;usage&#160;(data&#160;amount&#160;as well&#160;as write&#160;frequency).&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>The&#160;worst&#160;case&#160;–&#160;a complete&#160;sector&#160;switch that&#160;includes copying&#160;all&#160;data&#160;and erase&#160;the&#160;<br/>
&#160;&#160;logical&#160;sector&#160;–&#160;is&#160;a very&#160;exceptional&#160;case,&#160;as&#160;it&#160;would mean&#160;that&#160;nothing&#160;was&#160;<br/>
successfully&#160;copied&#160;so&#160;far,&#160;but&#160;flash&#160;is&#160;full,&#160;i.e.&#160;erase is necessary&#160;in order&#160;to remain&#160;<br/>writeable.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
<b>6.3.4&#160;</b><br/>
<b>Aborts/Resets&#160;</b><br/>
Aborts/resets&#160;&#160;during&#160;&#160;write&#160;&#160;operations&#160;&#160;result&#160;&#160;in&#160;&#160;artifacts&#160;&#160;in&#160;&#160;flash&#160;&#160;memory,&#160;&#160;increasing&#160;&#160;flash&#160;<br/>usage.&#160;&#160;Frequent&#160;&#160;resets&#160;&#160;may&#160;&#160;prevent&#160;&#160;FEE&#160;&#160;from&#160;&#160;completing&#160;&#160;a&#160;&#160;clean-up&#160;&#160;operation&#160;&#160;(Sector&#160;<br/>Switch), but&#160;cause&#160;much&#160;wasted&#160;space&#160;due&#160;to&#160;the&#160;artifacts.&#160;<br/>Finally&#160;&#160;the&#160;&#160;partition&#160;&#160;may&#160;&#160;overflow.&#160;&#160;There&#160;&#160;is&#160;&#160;no&#160;&#160;space&#160;&#160;left&#160;&#160;to&#160;&#160;copy&#160;&#160;data&#160;&#160;from&#160;&#160;one&#160;&#160;logical&#160;<br/>sector&#160;&#160;to&#160;&#160;the&#160;&#160;other&#160;&#160;one,&#160;&#160;which&#160;&#160;is&#160;&#160;the&#160;&#160;precondition&#160;&#160;to&#160;&#160;perform&#160;&#160;a&#160;&#160;sector&#160;&#160;erase&#160;&#160;without&#160;&#160;any&#160;<br/>recent&#160;&#160;data&#160;&#160;instance.&#160;&#160;This&#160;&#160;overflow&#160;&#160;may&#160;&#160;be&#160;&#160;reported&#160;&#160;by&#160;&#160;FEE,&#160;&#160;and&#160;&#160;an&#160;&#160;erase&#160;&#160;may&#160;&#160;be&#160;<br/>executed,&#160;&#160;accepting&#160;&#160;the&#160;&#160;risk&#160;&#160;of&#160;&#160;data&#160;&#160;loss.&#160;&#160;For&#160;&#160;more&#160;&#160;information,&#160;&#160;refer&#160;&#160;to&#160;&#160;chapte<a href="TechnicalReference_Fees.html#40">r&#160;&#160;3.3.5.3.&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
82&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=83></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-83_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-83_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
Additionally&#160;&#160;the&#160;&#160;FEE&#160;&#160;allows&#160;&#160;marking&#160;&#160;data&#160;&#160;blocks&#160;&#160;as&#160;&#160;essential&#160;&#160;for&#160;&#160;ECU’s&#160;&#160;operation;&#160;&#160;they&#160;<br/>must&#160;never be&#160;lost&#160;(chapte<a href="TechnicalReference_Fees.html#32">r&#160;2.11).</a>&#160;<br/>Finally,&#160;&#160;FEE&#160;&#160;provides&#160;&#160;services&#160;&#160;for&#160;&#160;handling&#160;&#160;under-voltage&#160;&#160;situations&#160;&#160;in&#160;&#160;safer&#160;&#160;ways;&#160;&#160;see&#160;<br/>chapte<a href="TechnicalReference_Fees.html#31">r&#160;2.10.</a>&#160;<br/>
<b>6.3.5&#160;</b><br/>
<b>Write&#160;Cycle&#160;and Erase&#160;Cycle&#160;Counters&#160;</b><br/>
Blocks’&#160;Write&#160;Cycle&#160;and&#160;Sectors’&#160;Erase&#160;Counters&#160;allow&#160;monitoring&#160;flash&#160;usage&#160;over&#160;time.&#160;<br/>Especially,&#160;&#160;they&#160;&#160;allow&#160;&#160;re-evaluating&#160;&#160;initial&#160;&#160;estimations&#160;&#160;of&#160;&#160;blocks&#160;&#160;write&#160;&#160;cycles.&#160;<br/>&#160;<br/>
Erase&#160;cycle&#160;counters&#160;can&#160;be&#160;used&#160;to&#160;estimate&#160;total&#160;flash&#160;usage&#160;over&#160;ECU’s&#160;life-time.&#160;A&#160;key&#160;<br/>parameter&#160;&#160;is&#160;&#160;the&#160;&#160;number&#160;&#160;of&#160;&#160;erase&#160;&#160;cycles&#160;&#160;per&#160;&#160;physical&#160;&#160;sector,&#160;&#160;which&#160;&#160;is&#160;&#160;limited&#160;&#160;on&#160;&#160;Flash&#160;<br/>EEPROM&#160;devices.&#160;<br/>Precisions&#160;&#160;of&#160;&#160;both&#160;&#160;kinds&#160;&#160;of&#160;&#160;cycle&#160;&#160;counters&#160;&#160;are&#160;&#160;limited.&#160;&#160;Especially&#160;&#160;interrupted&#160;&#160;accesses&#160;<br/>and/or resets&#160;reduce&#160;precision,&#160;for certain&#160;reasons.&#160;&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Blocks’&#160;Write&#160;Cycle and&#160;Sectors’&#160;Erase&#160;Cycle counters&#160;shall&#160;be&#160;used&#160;for&#160;statistical&#160;<br/>
<b>&#160;&#160;</b>purposes only.&#160;Especially,&#160;they&#160;shall&#160;not&#160;be&#160;used&#160;to affect&#160;code execution&#160;in any&#160;way.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
83&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=84></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-84_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>7&#160;&#160;Glossary&#160;and&#160;Abbreviations&#160;</b><br/>
<b>7.1&#160;</b><br/>
<b>Glossary&#160;</b><br/>
<b>Term&#160;</b><br/>
<b>Description&#160;</b><br/>
DaVinci&#160;Configurator&#160;&#160;Tool&#160;to&#160;create a&#160;consistent&#160;and&#160;optimized&#160;ECU&#160;configuration.&#160;Generation&#160;<br/>
and validation&#160;tool&#160;for&#160;MICROSAR&#160;components.&#160;<br/>
Block&#160;Tag&#160;<br/>
Identifies&#160;a block&#160;in data&#160;flash.&#160;See&#160;also:&#160;Block&#160;Id&#160;<br/>
Block&#160;Id&#160;<br/>
Identifier&#160;used&#160;to&#160;uniquely&#160;identify&#160;blocks&#160;in&#160;a partition.&#160;Stored&#160;in&#160;data&#160;<br/>flash,&#160;it&#160;consists&#160;of&#160;Block&#160;Tag and&#160;Data&#160;Index.&#160;<br/>In conjunction&#160;with partition&#160;ID,&#160;every&#160;block in&#160;FEE&#160;can&#160;be&#160;uniquely&#160;<br/>identified.&#160;<br/>The&#160;Block Id&#160;abstracts&#160;from&#160;16Bit&#160;Block&#160;Number&#160;passed&#160;via&#160;API;&#160;it&#160;<br/>depends&#160;on&#160;current&#160;configuration,&#160;in particular&#160;on&#160;Dataset&#160;Selection Bits.&#160;<br/>The&#160;block&#160;tag&#160;is&#160;one cornerstone&#160;in FEE’s&#160;update capability:&#160;As&#160;long&#160;as&#160;a&#160;<br/>Block&#160;Id does&#160;not&#160;change&#160;across&#160;configuration&#160;updates,&#160;it&#160;can&#160;be&#160;found&#160;in&#160;<br/>data&#160;flash,&#160;data&#160;may&#160;be&#160;kept,&#160;if&#160;block&#160;length&#160;also&#160;remained unchanged.&#160;<br/>
Table&#160;7-1&#160;&#160;&#160;Glossary&#160;<br/>
&#160;<br/>
<b>7.2&#160;</b><br/>
<b>Abbreviations&#160;</b><br/>
<b>Abbreviation&#160;</b><br/>
<b>Description&#160;</b><br/>
API&#160;<br/>
Application Programming Interface&#160;&#160;&#160;<br/>
AUTOSAR&#160;<br/>
Automotive Open System&#160;Architecture&#160;<br/>
BSW&#160;<br/>
Basis&#160;Software&#160;<br/>
DEM&#160;<br/>
Diagnostic&#160;Event&#160;Manager&#160;<br/>
DET&#160;<br/>
Development&#160;Error&#160;Tracer&#160;<br/>
ECU&#160;<br/>
Electronic&#160;Control&#160;Unit&#160;<br/>
ECUM&#160;<br/>
ECU&#160;Manager&#160;<br/>
EEPROM&#160;<br/>
Electrically&#160;Erasable Programmable Read&#160;Only&#160;Memory&#160;<br/>
FBL&#160;<br/>
Flash&#160;Bootloader&#160;<br/>
FEE&#160;<br/>
Flash&#160;EEPROM&#160;Emulation Module&#160;<br/>
FLS&#160;<br/>
Flash&#160;Driver&#160;<br/>
HIS&#160;<br/>
Hersteller&#160;Initiative Software&#160;<br/>
MEMIF&#160;<br/>
Memory&#160;Abstraction&#160;Interface&#160;Module&#160;<br/>
MICROSAR&#160;<br/>
Microcontroller&#160;Open&#160;System&#160;Architecture&#160;(the&#160;Vector&#160;AUTOSAR&#160;<br/>solution)&#160;<br/>
NVM&#160;<br/>
NVRAM&#160;Manager&#160;<br/>
NVRAM&#160;<br/>
Non&#160;Volatile Random&#160;Access Memory&#160;<br/>
SchM&#160;<br/>
(AUTOSAR)&#160;Scheduling&#160;Manager&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
84&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=85></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-85_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
SRS&#160;<br/>
Software&#160;Requirement&#160;Specification&#160;<br/>
SWC&#160;<br/>
Software&#160;Component&#160;<br/>
SWS&#160;<br/>
Software&#160;Specification&#160;<br/>
Table&#160;7-2&#160;&#160;&#160;Abbreviations&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
85&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name=86></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Fee/doc/TechnicalReference_Fee-86_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR FEE&#160;&#160;<br/>
<b>8&#160;&#160;Contact&#160;</b><br/>
Visit&#160;our website&#160;for&#160;more information&#160;on&#160;<br/>&#160;<br/>&gt;&#160; &#160;News&#160;<br/>&gt;&#160; &#160;Products&#160;<br/>&gt;&#160; &#160;Demo&#160;software&#160;<br/>&gt;&#160; &#160;Support&#160;<br/>&gt;&#160; &#160;Training&#160;data&#160;<br/>&gt;&#160; &#160;Addresses&#160;<br/>&#160;<br/>
<a href="http://www.vector-informatik.com/"><b>www.vector-informatik.com&#160;</b></a><br/>
&#160;<br/>&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;8.02.02&#160;<br/>
86&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.1&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_Fees.html#10">1 Introduction</a>
<ul>
<li><a href="TechnicalReference_Fees.html#11">1.1 Architecture Overview</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#13">2 Functional Description</a>
<ul>
<li><a href="TechnicalReference_Fees.html#13">2.1 Features</a></li>
<li><a href="TechnicalReference_Fees.html#14">2.2 Initialization</a></li>
<li><a href="TechnicalReference_Fees.html#15">2.3 States</a>
<ul>
<li><a href="TechnicalReference_Fees.html#15">2.3.1 Module States</a></li>
<li><a href="TechnicalReference_Fees.html#17">2.3.2 Job States/Results</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#18">2.4 Flash organization</a>
<ul>
<li><a href="TechnicalReference_Fees.html#19">2.4.1 Block Handling</a>
<ul>
<li><a href="TechnicalReference_Fees.html#19">2.4.1.1 Block Chunks</a></li>
<li><a href="TechnicalReference_Fees.html#19">2.4.1.2 Block Search</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#19">2.4.2 Partitions</a></li>
<li><a href="TechnicalReference_Fees.html#20">2.4.3 Logical Sectors</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#21">2.5 Processing</a>
<ul>
<li><a href="TechnicalReference_Fees.html#21">2.5.1.1 Initial processing</a></li>
<li><a href="TechnicalReference_Fees.html#22">2.5.1.2 Processing of Read Job</a></li>
<li><a href="TechnicalReference_Fees.html#22">2.5.1.3 Processing of Write Job</a></li>
<li><a href="TechnicalReference_Fees.html#22">2.5.1.4 Processing of InvalidateBlock Job</a></li>
<li><a href="TechnicalReference_Fees.html#22">2.5.1.5 Processing of EraseImmediateBlock Job</a></li>
<li><a href="TechnicalReference_Fees.html#22">2.5.1.6 Processing of GetEraseCycle Job</a></li>
<li><a href="TechnicalReference_Fees.html#23">2.5.1.7 Processing of GetWriteCycle Job</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#23">2.6 Error Handling</a>
<ul>
<li><a href="TechnicalReference_Fees.html#23">2.6.1 Development Error Reporting</a>
<ul>
<li><a href="TechnicalReference_Fees.html#25">2.6.1.1 Parameter Checking</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#26">2.6.2 Production Code Error Reporting</a></li>
<li><a href="TechnicalReference_Fees.html#26">2.6.3 Error notification</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#27">2.7 Sector Switch</a>
<ul>
<li><a href="TechnicalReference_Fees.html#27">2.7.1 Background Sector Switch (BSS)</a></li>
<li><a href="TechnicalReference_Fees.html#27">2.7.2 Foreground Sector Switch (FSS)</a></li>
<li><a href="TechnicalReference_Fees.html#28">2.7.3 Sector Overflow</a></li>
<li><a href="TechnicalReference_Fees.html#28">2.7.4 Sector switch reserves and thresholds</a></li>
<li><a href="TechnicalReference_Fees.html#29">2.7.5 Background Sector Switch Reserve/Threshold</a></li>
<li><a href="TechnicalReference_Fees.html#29">2.7.6 Foreground Sector Switch/Threshold</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#30">2.8 Data Conversion</a></li>
<li><a href="TechnicalReference_Fees.html#31">2.9 Flash Page Size impacts</a></li>
<li><a href="TechnicalReference_Fees.html#31">2.10 Services for handling under-voltage situations</a></li>
<li><a href="TechnicalReference_Fees.html#32">2.11 Critical Data Blocks</a></li>
<li><a href="TechnicalReference_Fees.html#34">2.12 Fee_MainFunction Triggering</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#35">3 Integration</a>
<ul>
<li><a href="TechnicalReference_Fees.html#35">3.1 Scope of Delivery</a>
<ul>
<li><a href="TechnicalReference_Fees.html#35">3.1.1 Static Files</a></li>
<li><a href="TechnicalReference_Fees.html#36">3.1.2 Dynamic Files</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#36">3.2 Compiler Abstraction and Memory Mapping</a></li>
<li><a href="TechnicalReference_Fees.html#38">3.3 Dependencies on SW Modules</a>
<ul>
<li><a href="TechnicalReference_Fees.html#38">3.3.1 OSEK/AUTOSAR OS</a></li>
<li><a href="TechnicalReference_Fees.html#38">3.3.2 Module SchM</a></li>
<li><a href="TechnicalReference_Fees.html#38">3.3.3 Module Det</a></li>
<li><a href="TechnicalReference_Fees.html#38">3.3.4 Module Fls</a></li>
<li><a href="TechnicalReference_Fees.html#39">3.3.5 Callback Functions</a>
<ul>
<li><a href="TechnicalReference_Fees.html#39">3.3.5.1 Lower layer interaction</a></li>
<li><a href="TechnicalReference_Fees.html#39">3.3.5.2 Upper layer interaction</a></li>
<li><a href="TechnicalReference_Fees.html#40">3.3.5.3 User Error Callback</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#41">3.4 Dependencies on HW modules</a></li>
<li><a href="TechnicalReference_Fees.html#41">3.5 Critical Sections</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#42">4 API Description</a>
<ul>
<li><a href="TechnicalReference_Fees.html#42">4.1 Interfaces Overview</a></li>
<li><a href="TechnicalReference_Fees.html#42">4.2 Type Definitions</a>
<ul>
<li><a href="TechnicalReference_Fees.html#42">4.2.1 Fee_SectorSwitchStatusType</a></li>
<li><a href="TechnicalReference_Fees.html#42">4.2.2 Fee_SectorErrorType</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#44">4.3 Services provided by FEE</a>
<ul>
<li><a href="TechnicalReference_Fees.html#44">4.3.1 Fee_Init</a></li>
<li><a href="TechnicalReference_Fees.html#45">4.3.2 Fee_InitEx</a></li>
<li><a href="TechnicalReference_Fees.html#45">4.3.3 Fee_SetMode</a></li>
<li><a href="TechnicalReference_Fees.html#47">4.3.4 Fee_Read</a></li>
<li><a href="TechnicalReference_Fees.html#48">4.3.5 Fee_Write</a></li>
<li><a href="TechnicalReference_Fees.html#49">4.3.6 Fee_Cancel</a></li>
<li><a href="TechnicalReference_Fees.html#50">4.3.7 Fee_GetStatus</a></li>
<li><a href="TechnicalReference_Fees.html#50">4.3.8 Fee_GetJobResult</a></li>
<li><a href="TechnicalReference_Fees.html#51">4.3.9 Fee_InvalidateBlock</a></li>
<li><a href="TechnicalReference_Fees.html#52">4.3.10 Fee_GetVersionInfo</a></li>
<li><a href="TechnicalReference_Fees.html#52">4.3.11 Fee_EraseImmediateBlock</a></li>
<li><a href="TechnicalReference_Fees.html#53">4.3.12 Fee_MainFunction</a></li>
<li><a href="TechnicalReference_Fees.html#54">4.3.13 Fee_GetEraseCycle</a></li>
<li><a href="TechnicalReference_Fees.html#55">4.3.14 Fee_GetWriteCycle</a></li>
<li><a href="TechnicalReference_Fees.html#56">4.3.15 Fee_GetSectorSwitchStatus</a></li>
<li><a href="TechnicalReference_Fees.html#57">4.3.16</a></li>
<li><a href="TechnicalReference_Fees.html#58">4.3.17 Fee_ForceSectorSwitch</a></li>
<li><a href="TechnicalReference_Fees.html#59">4.3.18 Fee_ConvertBlockConfig</a></li>
<li><a href="TechnicalReference_Fees.html#61">4.3.19 Fee_SuspendWrites</a></li>
<li><a href="TechnicalReference_Fees.html#61">4.3.20 Fee_ResumeWrites</a></li>
<li><a href="TechnicalReference_Fees.html#62">4.3.21 Fee_DisableFss</a></li>
<li><a href="TechnicalReference_Fees.html#63">4.3.22 Fee_EnableFss</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#63">4.4 Services used by FEE</a>
<ul>
<li><a href="TechnicalReference_Fees.html#64">4.4.1 Data Conversion Callback</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#65">4.5 Callback Functions</a>
<ul>
<li><a href="TechnicalReference_Fees.html#65">4.5.1 Fee_JobEndNotification</a></li>
<li><a href="TechnicalReference_Fees.html#65">4.5.2 Fee_JobErrorNotification</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#66">4.6 Configurable Interfaces</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#67">5 Configuration</a>
<ul>
<li><a href="TechnicalReference_Fees.html#67">5.1 Configuration with DaVinci Configurator</a>
<ul>
<li><a href="TechnicalReference_Fees.html#67">5.1.1 Start configuration of the FEE</a></li>
<li><a href="TechnicalReference_Fees.html#67">5.1.2 Useful Chunk-Sizes (instance counts)</a></li>
<li><a href="TechnicalReference_Fees.html#69">5.1.3 Update of block configuration</a></li>
<li><a href="TechnicalReference_Fees.html#69">5.1.4 FEE Configuration tab</a></li>
<li><a href="TechnicalReference_Fees.html#73">5.1.5 General Settings tab</a>
<ul>
<li><a href="TechnicalReference_Fees.html#73">5.1.5.1 Error Detection – Development Mode</a></li>
<li><a href="TechnicalReference_Fees.html#73">5.1.5.2 Area “Error Callback”</a></li>
<li><a href="TechnicalReference_Fees.html#74">5.1.5.3 Area Buffer</a></li>
<li><a href="TechnicalReference_Fees.html#74">5.1.5.4 Area “Upper Layer”</a></li>
<li><a href="TechnicalReference_Fees.html#74">5.1.5.5 Area “Critical Section Handling”</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#75">5.1.6 Partitions</a>
<ul>
<li><a href="TechnicalReference_Fees.html#77">5.1.6.1 Area “Management”</a></li>
<li><a href="TechnicalReference_Fees.html#77">5.1.6.2 Area “Lower Layer”</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#78">5.1.7 Module API tab</a>
<ul>
<li><a href="TechnicalReference_Fees.html#78">5.1.7.1 API Configuration</a></li>
<li><a href="TechnicalReference_Fees.html#79">5.1.7.2 Provided API</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#79">5.2 Configuration Parameters only visible in GCE</a>
<ul>
<li><a href="TechnicalReference_Fees.html#79">5.2.1 Fls API deviating from AUTOSAR naming convention</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#81">6 AUTOSAR Standard Compliance</a>
<ul>
<li><a href="TechnicalReference_Fees.html#81">6.1 Deviations</a>
<ul>
<li><a href="TechnicalReference_Fees.html#81">6.1.1 Maximum Blocking Time</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#81">6.2 Additions/ Extensions</a>
<ul>
<li><a href="TechnicalReference_Fees.html#81">6.2.1 Parameter Checking</a></li>
<li><a href="TechnicalReference_Fees.html#81">6.2.2 Fee_InitEx</a></li>
<li><a href="TechnicalReference_Fees.html#81">6.2.3 GetEraseCycle</a></li>
<li><a href="TechnicalReference_Fees.html#81">6.2.4 GetWriteCycle</a></li>
<li><a href="TechnicalReference_Fees.html#81">6.2.5 GetSectorSwitchStatus</a></li>
<li><a href="TechnicalReference_Fees.html#81">6.2.6 ForceSectorSwitch</a></li>
<li><a href="TechnicalReference_Fees.html#81">6.2.7 Fee_ConvertBlockConfig</a></li>
<li><a href="TechnicalReference_Fees.html#81">6.2.8 Fee_SuspendWrites / Fee_ResumeWrites</a></li>
<li><a href="TechnicalReference_Fees.html#81">6.2.9 Fee_EnableFss / Fee_DisableFss</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#81">6.3 Limitations</a>
<ul>
<li><a href="TechnicalReference_Fees.html#81">6.3.1 Partitions</a></li>
<li><a href="TechnicalReference_Fees.html#82">6.3.2 Flash Usage</a></li>
<li><a href="TechnicalReference_Fees.html#82">6.3.3 Performance</a></li>
<li><a href="TechnicalReference_Fees.html#82">6.3.4 Aborts/Resets</a></li>
<li><a href="TechnicalReference_Fees.html#83">6.3.5 Write Cycle and Erase Cycle Counters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#84">7 Glossary and Abbreviations</a>
<ul>
<li><a href="TechnicalReference_Fees.html#84">7.1 Glossary</a></li>
<li><a href="TechnicalReference_Fees.html#84">7.2 Abbreviations</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Fees.html#86">8 Contact</a></li>
</ul>
<hr/>
</body>
</html>
