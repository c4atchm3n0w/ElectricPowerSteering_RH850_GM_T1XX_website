---
title: TechnicalReference_NvMs
linkTitle: TechnicalReference_NvMs
weight: 6
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-1_1.png"/><br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/><b>MICROSAR NVM&#160;<br/></b>Technical Reference&#160;<br/>&#160;<br/>&#160;&#160;<br/>Version&#160;5.06.00&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
Authors&#160;<br/>
Christian Kaiser,&#160;Tomas&#160;Ondrovic&#160;<br/>
Status&#160;<br/>
Released&#160;<br/>
&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-2_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>1&#160;&#160;Document&#160;Information&#160;</b><br/>
<b>1.1&#160;</b><br/>
<b>History&#160;</b><br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;</b><br/>
<b>Remarks&#160;</b><br/>
Christian Kaiser&#160;<br/>
2007-08-20&#160;&#160;1.4&#160;<br/>
AUTOSAR&#160;2.1,&#160;<br/>updated&#160;for&#160;EAD3.1&#160;usage,&#160;<br/>conversion to new&#160;template&#160;&#160;&#160;<br/>
Christian Kaiser&#160;<br/>
2007-12-06&#160;&#160;3.01.00&#160;<br/>
Change of&#160;the&#160;document's&#160;versioning&#160;<br/>scheme&#160;to&#160;correspond&#160;to&#160;the&#160;module's&#160;<br/>major&#160;and&#160;minor,&#160;<br/>update of&#160;parameter&#160;description in&#160;<br/>chapter&#160;'Graphical&#160;Configuration&#160;of&#160;NvM'&#160;<br/>and&#160;service port&#160;generation&#160;description,&#160;<br/>remove of&#160;DATASET&#160;ROM,&#160;feature&#160;not&#160;<br/>supported&#160;anymore,&#160;<br/>remove of&#160;introduction&#160;paragraphs&#160;from&#160;<br/>'Description&#160;of&#160;Memory&#160;Mapping&#160;and&#160;<br/>Compiler&#160;Abstraction',&#160;not&#160;subject&#160;of&#160;this&#160;<br/>document,&#160;<br/>simplified&#160;'Block&#160;Management&#160;Types'&#160;<br/>naming,&#160;<br/>formal&#160;changes&#160;&#160;&#160;&#160;<br/>
Christian Kaiser&#160;<br/>
2008-01-11&#160;<br/>
3.01.01&#160;<br/>
New&#160;chapter&#160;to&#160;clarify&#160;the dependency&#160;on&#160;<br/>the&#160;CRC&#160;library,&#160;<br/>stated&#160;explicitly&#160;that&#160;DET&#160;is&#160;optional,&#160;<br/>corrected&#160;default&#160;values&#160;&#160;&#160;<br/>
Manfred&#160;Duschinger,&#160;<br/>
2008-05-23&#160;&#160;3.02.00&#160;<br/>
AUTOSAR&#160;3,&#160;<br/>
Heike Bischof&#160;<br/>
conversion to&#160;Technical&#160;Reference&#160;<br/>
Manfred&#160;Duschinger&#160;<br/>
2008-12-08&#160;&#160;3.03.00&#160;<br/>
ESCAN00027300:&#160;Description of&#160;<br/>NvM_ServiceIdType&#160;in&#160;<br/>SingleBlockCallbackFunction&#160;and&#160;<br/>MultiBlockCallbackFunction&#160;<br/>Description&#160;and&#160;expected&#160;caller&#160;context&#160;<br/>of&#160;NvM_SetBlockLockStatus-API&#160;<br/>reworked.&#160;<br/>Chapter&#160;4.4.17&#160;‘Concurrent&#160;access&#160;to NV&#160;<br/>data&#160;for&#160;DCM’&#160;added.&#160;<br/>Chapter&#160;4.4.5.2:&#160;Write order&#160;at&#160;redundant&#160;<br/>blocks&#160;added.&#160;<br/>Expansion&#160;of&#160;glossary.&#160;<br/>Chapter&#160;7.2.2:&#160;Description of&#160;‘Dataset&#160;<br/>Selection Bits’&#160;added.&#160;<br/>
Manfred&#160;Duschinger&#160;<br/>
2009-02-25&#160;&#160;3.03.01&#160;<br/>
ESCAN00031177: Manufacturer&#160;specific&#160;<br/>requirements&#160;attribute&#160;for&#160;traceability&#160;<br/>reasons&#160;<br/>
Manfred&#160;Duschinger&#160;<br/>
2009-03-24&#160;&#160;3.03.02&#160;<br/>
ESCAN00032480:&#160;Missing&#160;information&#160;in&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
2&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=3></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-3_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
documentation:&#160;<br/>Chapter&#160;6.4.5:&#160;‘Description&#160;of&#160;<br/>NvM_RequestResultType added’.&#160;<br/>Chapters&#160;6.4.15&#160;and&#160;6.4.16:&#160;‘Services are&#160;<br/>multiblock requests’.&#160;<br/>
Manfred&#160;Duschinger&#160;<br/>
2009-06-03&#160;&#160;3.04.00&#160;<br/>
ESCAN00032480:&#160;Update of&#160;History&#160;of&#160;<br/>version 3.03.02:&#160;Updated changed&#160;<br/>chapters.&#160;&#160;<br/>Chapter&#160;&#160;6.2:&#160;‘Block ID&#160;0&#160;is&#160;only&#160;allowed&#160;<br/>for&#160;API&#160;NvM_GetErrorStatus()’&#160;<br/>ESCAN00033075:&#160;Chapter&#160;4.5.1.1:&#160;<br/>DataIndex&#160;Check&#160;in&#160;NvM_ReadBlock()&#160;<br/>added.&#160;DataIndex&#160;Check&#160;was&#160;also&#160;added&#160;<br/>to&#160;NvM_InvalidateNvBlock()&#160;and&#160;<br/>NvM_EraseNvBlock().&#160;<br/>ESCAN00033900:&#160;Chapter&#160;4.4.17:&#160;<br/>“Priority&#160;Handling&#160;of&#160;DCM-Blocks”&#160;<br/>ESCAN00035089:&#160;Chapters&#160;4.1,&#160;7.2.2&#160;<br/>“Callbacks&#160;NvM_JobEndNotification,&#160;<br/>NvM_JobErrorNotification&#160;implemented”&#160;<br/>ESCAN00034073:&#160;Chapters&#160;2,&#160;4.4.5.1,&#160;<br/>7.2.2&#160;“Crc&#160;Handling&#160;is&#160;configurable:&#160;Either&#160;<br/>an&#160;internal&#160;buffer&#160;is&#160;used&#160;or&#160;Crc&#160;is&#160;stored&#160;<br/>at&#160;the&#160;end&#160;of&#160;RAM&#160;Block.”&#160;<br/>ESCAN00035891:&#160;Chapter&#160;7.1.1&#160;<br/>“Integrate SWC-Generation&#160;into&#160;CFG&#160;<br/>Pro's&#160;Generation process”&#160;<br/>Chapter&#160;3.1:&#160;update&#160;AUTOSAR&#160;<br/>architecture&#160;figure.&#160;<br/>
Christian Kaiser&#160;<br/>
2010-01-25&#160;&#160;3.04.01&#160;<br/>
ESCAN00039648&#160;–&#160;Rebuilt&#160;document;&#160;<br/>made hyperlinks&#160;working.&#160;Updated&#160;Logo;&#160;<br/>No changes in&#160;content.&#160;<br/>
Christian Kaiser&#160;<br/>
2010-03-26&#160;&#160;3.05.00&#160;<br/>
Updated&#160;Component&#160;history&#160;<br/>Whole&#160;document:&#160;“EAD”&#160;&#160;“DaVinci&#160;<br/>Configurator”&#160;<br/>Added&#160;Ch.&#160;7.3&#160;“Attributes&#160;only&#160;<br/>configurable using&#160;GCE”&#160;<br/>Updated&#160;Ch.&#160;5.6.1&#160;–&#160;“RAM&#160;Usage”&#160;<br/>ESCAN00040662:&#160;Chapter&#160;4.4.3:&#160;Added&#160;<br/>note about&#160;restricted&#160;access to&#160;RAM&#160;<br/>block during&#160;job&#160;execution.&#160;<br/>ESCAN00035134:&#160;Chapter&#160;5.1.2&#160;<br/>reworked&#160;<br/>ESCAN00039749:&#160;Ch.&#160;4.4.10,&#160;8.2.4:&#160;<br/>Guaranteed CRC&#160;values;&#160;Ch 6.4.7:&#160;note&#160;<br/>about&#160;asynchronous&#160;CRC&#160;calculation&#160;<br/>ESCAN00031315:&#160;added Ch.&#160;4.2.1,&#160;Ch&#160;&#160;<br/>8.2.3;&#160;updated&#160;Ch.&#160;7.2.5&#160;<br/>ESCAN00042745&#160;–&#160;corrected&#160;Ch.&#160;4.5.2&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
3&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=4></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-4_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
Manfred&#160;Duschinger&#160;<br/>
2011-01-25&#160;<br/>
3.07.00&#160;<br/>
ESCAN00047171:&#160;Ch.&#160;6.4.18:&#160;<br/>NvM_KillWriteAll;&#160;Abbreviations:&#160;ECUM&#160;<br/>ESCAN00045141:&#160;Ch.&#160;4.4.5.1:&#160;<br/>information&#160;about&#160;names&#160;of&#160;Block&#160;<br/>Handles&#160;<br/>
Manuela Scheufele&#160;&#160;<br/>
2011-02-03&#160;<br/>
3.07.01&#160;<br/>
Minor&#160;changes&#160;<br/>
Manfred&#160;Duschinger&#160;<br/>
2011-07-12&#160;<br/>
3.08.00&#160;<br/>
ESCAN00049327:&#160;Ch.&#160;4.5.2&#160;DEM&#160;errors&#160;<br/>inserted&#160;into MICROSAR&#160;DEM&#160;<br/>
Christian&#160;Kaiser&#160;<br/>
2012-01-24&#160;&#160;3.09.00&#160;<br/>
ESCAN00053235,&#160;ESCAN00051729:&#160;Ch.&#160;<br/>7.1&#160;–&#160;updated&#160;PortInterface names&#160;<br/>
Manfred&#160;Duschinger&#160;<br/>
2013-01-02&#160;&#160;5.00.00&#160;<br/>
Ch.&#160;4.1:&#160;supported&#160;features added&#160;<br/>Ch.&#160;4.4.3&#160;and ch.&#160;4.4.4:&#160;added&#160;<br/>NvM_CancelJobs&#160;<br/>Ch.&#160;4.3.5:&#160;error&#160;handling&#160;updated&#160;<br/>Ch.&#160;4.4.20:&#160;added&#160;explicit&#160;synchronization&#160;<br/>mechanism&#160;<br/>Ch.&#160;5.4.6:&#160;updated&#160;callback&#160;functions&#160;<br/>Ch.&#160;5.5:&#160;updated&#160;initialization process&#160;of&#160;<br/>memory&#160;stack&#160;<br/>Ch.&#160;6.4:&#160;updated&#160;return&#160;values&#160;of&#160;most&#160;<br/>synchronous&#160;APIs&#160;<br/>Ch.&#160;6.4.6:&#160;instanceID&#160;deleted&#160;<br/>Ch.&#160;6.4.16:&#160;updated&#160;NvM_WriteAll&#160;<br/>handling&#160;<br/>Ch.&#160;6.4.19:&#160;description of&#160;API&#160;<br/>NvM_CancelJobs&#160;<br/>Ch.&#160;6.7.4&#160;and 6.7.5:&#160;Callback&#160;routines&#160;for&#160;<br/>explicit&#160;synchronization mechanism&#160;<br/>Ch.&#160;7:&#160;completely&#160;reworked&#160;<br/>Ch.&#160;9.2:&#160;added abbreviations&#160;<br/>Ch.&#160;7.2.1&#160;and ch.&#160;7.3&#160;removed&#160;<br/>
Manfred&#160;Duschinger&#160;<br/>
2013-01-04&#160;&#160;5.01.00&#160;<br/>
Ch.&#160;5.4.8&#160;Interaction&#160;with BswM&#160;<br/>&#160;<br/>
Manfred&#160;Duschinger,&#160;<br/>
2013-08-23&#160;&#160;5.01.01&#160;<br/>
ESCAN00064110:&#160;Ch.&#160;4.4.8&#160;Description&#160;<br/>
Christian Kaiser&#160;<br/>
of&#160;synchronous&#160;Job-End&#160;Notification&#160;<br/>ESCAN00062895:&#160;Ch.&#160;4.4.5.1&#160;Symbolic&#160;<br/>name values&#160;of&#160;Nv&#160;Block Handles&#160;<br/>updated.&#160;<br/>ESCAN00062896:&#160;Ch.&#160;4.4.13.&#160;4.4.20,&#160;<br/>5.4.8,&#160;6.7.3,&#160;6.7.4&#160;and&#160;6.7.5:&#160;Added&#160;<br/>information&#160;that&#160;block&#160;is&#160;still&#160;busy&#160;during&#160;<br/>invoking&#160;callback.&#160;<br/>ESCAN00063639:&#160;Ch.&#160;4.4.20:&#160;Extended&#160;<br/>information&#160;about&#160;explicit&#160;synchronization&#160;<br/>mechanism&#160;<br/>ESCAN00064063:&#160;Ch.&#160;6.2 Improve&#160;<br/>description&#160;of&#160;<br/>NvM_RequestResultType&#160;<br/>ESCAN00064173:&#160;Ch.&#160;5.3:&#160;Explanation&#160;<br/>of&#160;some necessity&#160;of&#160;memory&#160;mapping&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
4&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=5></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-5_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
ESCAN00068239:&#160;Ch.&#160;6.4,&#160;Ch.&#160;4.4.20:&#160;<br/>Limitations Explicit&#160;Synchronization&#160;<br/>Mechanism&#160;<br/>ESCAN00063532&#160;–&#160;Ch.&#160;6.4.16&#160;Block&#160;<br/>Processing&#160;order&#160;during&#160;NvM_WriteAll&#160;<br/>
Christian Kaiser&#160;<br/>
2014-06-17&#160;&#160;5.02.00&#160;<br/>
Internal&#160;release;&#160;no&#160;changes&#160;<br/>
Christian Kaiser&#160;<br/>
2014-10-13&#160;&#160;5.02.01&#160;<br/>
Updated&#160;Ch.&#160;2.&#160;Component&#160;history.&#160;<br/>ESCAN00073178&#160;&#160;–&#160;&#160;updated&#160;&#160;Ch.&#160;&#160;4.1&#160;<br/>unsupported&#160;features,&#160;Ch.&#160;8.1 Deviations&#160;<br/>ESCAN00074672&#160;<br/>
–&#160;<br/>
Description&#160;<br/>
of&#160;<br/>
Redundant&#160;Blocks;&#160;extended&#160;Ch.&#160;4.4.5.2&#160;<br/>ESCAN00076366&#160;&#160;–&#160;&#160;SWCs’&#160;&#160;callback&#160;<br/>return&#160;types&#160;–&#160;added&#160;Ch.&#160;7.1.5&#160;<br/>Removed&#160;Ch.&#160;4.4.18,&#160;4.4.19&#160;<br/>ESCAN00071933&#160;<br/>
–&#160;<br/>
Description&#160;<br/>
of&#160;<br/>
internal&#160;&#160;buffering&#160;&#160;and&#160;&#160;internal&#160;&#160;CRC&#160;<br/>storage,&#160;&#160;rewording&#160;&#160;Ch.&#160;&#160;4.4.5.1,&#160;&#160;4.4.5.5,&#160;<br/>4.4.10,&#160;5.6.1&#160;<br/>ESCAN00075284&#160;&#160;–&#160;&#160;Reworked&#160;&#160;Ch.&#160;<br/>4.4.17,&#160;Ch.&#160;6.4.8&#160;<br/>Review&#160;&#160;findings&#160;&#160;–&#160;&#160;Development&#160;&#160;Error&#160;<br/>Codes&#160;in&#160;chapter&#160;4.5.1,&#160;minor&#160;rephrasing,&#160;<br/>Glossary&#160;(PIM)&#160;<br/>Added&#160;Chapter&#160;5.7&#160;<br/>
Christian Kaiser&#160;<br/>
2015-01-07&#160;&#160;5.02.02&#160;<br/>
Chapters&#160;6.4.8,&#160;8.1&#160;<br/>NvM_SetBlockLockStatus&#160;–&#160;emphasized&#160;<br/>deviation from&#160;AUTOSAR.&#160;<br/>
Tomas&#160;Ondrovic&#160;<br/>
2015-02-02&#160;&#160;5.03.00&#160;<br/>
Chapter<a href="TechnicalReference_NvMs.html#20">&#160;4.2.1,&#160;</a><a href="TechnicalReference_NvMs.html#32">4.5.1&#160;</a>–&#160;removed&#160;RAM&#160;and&#160;<br/>ROM&#160;block&#160;length&#160;DET&#160;check&#160;<br/>Chapter<a href="TechnicalReference_NvMs.html#35">&#160;4.5.3&#160;</a>–&#160;describes&#160;the&#160;new&#160;<br/>compile time&#160;RAM&#160;and ROM&#160;block&#160;length&#160;<br/>checks&#160;<br/>Chapter<a href="TechnicalReference_NvMs.html#19">&#160;4.1.1.1–</a>&#160;created&#160;to&#160;describe&#160;<br/>feature Block&#160;Id&#160;check&#160;<br/>Chapter<a href="TechnicalReference_NvMs.html#62">&#160;6.4.20&#160;</a>–&#160;describes the&#160;new&#160;<br/>feature&#160;“Repair&#160;Redundant&#160;Blocks”&#160;<br/>
Tomas&#160;Ondrovic&#160;<br/>
2015-09-28&#160;&#160;5.03.01&#160;<br/>
Only&#160;improvements&#160;<br/>
Tomas&#160;Ondrovic&#160;<br/>
2015-11-25&#160;<br/>
5.0400&#160;<br/>
Added&#160;chapter<a href="TechnicalReference_NvMs.html#19">&#160;4.1.2&#160;</a>and&#160;updated&#160;chapter&#160;<br/><a href="TechnicalReference_NvMs.html#35">4.5.3&#160;</a><br/>
Tomas&#160;Ondrovic&#160;<br/>
2016-02-11&#160;<br/>
5.05.00&#160;<br/>
Removed&#160;the&#160;possibility&#160;to configure&#160;dev&#160;<br/>error&#160;hook,&#160;include&#160;file&#160;and&#160;reporting&#160;<br/>
Tomas&#160;Ondrovic&#160;<br/>
2016-04-14&#160;&#160;5.06.00&#160;<br/>
ESCAN00088791:&#160;updated&#160;function&#160;<br/>signatures&#160;to&#160;AUTOSAR4&#160;in chapter<a href="TechnicalReference_NvMs.html#48">&#160;6.4&#160;<br/></a>FEAT-1888:&#160;described changed&#160;callback&#160;<br/>invoking&#160;during&#160;ReadAll&#160;in chapter<a href="TechnicalReference_NvMs.html#27">s&#160;4.4.8&#160;<br/></a><a href="TechnicalReference_NvMs.html#29">and&#160;4.4.13&#160;<br/></a>Added&#160;new&#160;chapter<a href="TechnicalReference_NvMs.html#38">&#160;5.2&#160;</a>with critical&#160;<br/>section list.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
5&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=6></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-6_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-6_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
ESCAN00091004:&#160;extended chapter<a href="TechnicalReference_NvMs.html#19">&#160;4.2&#160;</a><br/>
Table&#160;1-1&#160;&#160;<br/>
History&#160;of&#160;the&#160;document&#160;<br/>
<b>1.2&#160;</b><br/>
<b>Reference&#160;Documents&#160;</b><br/>
<b>No.&#160;</b><br/>
<b>Title&#160;</b><br/>
<b>Version&#160;</b><br/>
[1]&#160;&#160;&#160;<br/>
AUTOSAR_SWS_NVRAMManager.pdf&#160;<br/>
V&#160;2.2.0&#160;<br/>
[2]&#160;&#160;&#160;<br/>
AUTOSAR_SWS_DET.pdf&#160;<br/>
V&#160;2.2.0&#160;<br/>
[3]&#160;&#160;&#160;<br/>
AUTOSAR_SWS_DEM.pdf&#160;<br/>
V&#160;2.2.1&#160;<br/>
[4]&#160;&#160;&#160;<br/>
AUTOSAR_BasicSoftwareModules.pdf&#160;<br/>
V&#160;1.2.0&#160;<br/>
Table&#160;1-2&#160;&#160;<br/>
Reference&#160;documents&#160;<br/>
&#160;<br/>
<b>Please&#160;note&#160;<br/></b>We&#160;have configured&#160;the&#160;programs&#160;in&#160;accordance&#160;with your&#160;specifications&#160;in the&#160;<br/>
&#160;&#160;questionnaire.&#160;Whereas&#160;the&#160;programs&#160;do&#160;support&#160;other&#160;configurations&#160;than&#160;the&#160;one&#160;<br/>
specified&#160;in your&#160;questionnaire,&#160;Vector´s&#160;release&#160;of&#160;the&#160;programs&#160;delivered to&#160;your&#160;<br/>company&#160;is&#160;expressly&#160;restricted&#160;to&#160;the&#160;configuration&#160;you&#160;have&#160;specified&#160;in&#160;the&#160;<br/>questionnaire.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
6&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-7_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Contents&#160;</b><br/>
<a href="TechnicalReference_NvMs.html#2"><b>1</b>&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#2"><b>Document&#160;Information&#160;.................................................................................................&#160;2</b>&#160;<br/>1.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#2">History&#160;...............................................................................................................&#160;2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#6">1.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#6">Reference&#160;Documents&#160;.......................................................................................&#160;6&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#13"><b>2</b>&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#13"><b>Component&#160;History&#160;....................................................................................................&#160;13</b>&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#15"><b>3</b>&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#15"><b>Introduction.................................................................................................................&#160;15</b>&#160;<br/></a><a href="TechnicalReference_NvMs.html#16">3.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#16">Architecture&#160;Overview&#160;......................................................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#18"><b>4</b>&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#18"><b>Functional&#160;Description&#160;...............................................................................................&#160;18</b>&#160;<br/>4.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#18">Features&#160;..........................................................................................................&#160;18&#160;<br/></a><a href="TechnicalReference_NvMs.html#19">4.1.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#19">Safety&#160;Features&#160;................................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#19">4.1.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#19">Automatic&#160;Block&#160;Length&#160;...................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#19">4.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#19">Initialization&#160;......................................................................................................&#160;19&#160;<br/></a><a href="TechnicalReference_NvMs.html#20">4.2.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#20">Start-up&#160;............................................................................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#20">4.2.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#20">Initialization of&#160;the&#160;Data&#160;Blocks&#160;........................................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#21">4.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#21">States&#160;..............................................................................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#21">4.4&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#21">Main Functions&#160;................................................................................................&#160;21&#160;<br/>4.4.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#21">Hardware&#160;Independence&#160;..................................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#21">4.4.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#21">Synchronous&#160;Requests&#160;....................................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#21">4.4.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#21">Asynchronous&#160;Requests&#160;..................................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#22">4.4.4&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#22">API&#160;Configuration&#160;Classes and additional&#160;API&#160;Services&#160;...................&#160;22&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#23">4.4.5&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#23">Block&#160;Handling&#160;.................................................................................&#160;23&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#27">4.4.6&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#27">Prioritized&#160;or&#160;non-prioritized&#160;Queuing&#160;of&#160;asynchronous Requests&#160;....&#160;27&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#27">4.4.7&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#27">Asynchronous&#160;Job-End&#160;Polling&#160;........................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#27">4.4.8&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#27">Single Block&#160;Job&#160;End&#160;Notifications&#160;...................................................&#160;27&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#28">4.4.9&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#28">Immediate&#160;Priority&#160;Jobs&#160;and Cancellation of&#160;current&#160;Jobs&#160;................&#160;28&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#28">4.4.10&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#28">Asynchronous&#160;CRC&#160;Calculation&#160;.......................................................&#160;28&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#29">4.4.11&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#29">Write Protection&#160;...............................................................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#29">4.4.12&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#29">Erase&#160;and&#160;Invalidate&#160;........................................................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#29">4.4.13&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#29">Init&#160;Block&#160;Callbacks&#160;..........................................................................&#160;29&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#30">4.4.14&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#30">Define&#160;Locking/&#160;Unlocking Services&#160;.................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#30">4.4.15&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#30">Interrupts&#160;..........................................................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#30">4.4.16&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#30">Data&#160;Corruption&#160;................................................................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#30">4.4.17&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#30">Concurrent&#160;access&#160;to NV&#160;data&#160;for&#160;DCM&#160;...........................................&#160;30&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#31">4.4.18&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#31">Explicit&#160;synchronization mechanism&#160;between application and NVM&#160;.&#160;31&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#32">4.5&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#32">Error&#160;Handling&#160;..................................................................................................&#160;32&#160;<br/>4.5.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#32">Development&#160;Error&#160;Reporting&#160;...........................................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#35">4.5.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#35">Production Code&#160;Error&#160;Reporting&#160;.....................................................&#160;35&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
7&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=8></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-8_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<a href="TechnicalReference_NvMs.html#35">4.5.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#35">Compile-time&#160;Block Length&#160;Checks&#160;..................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#37"><b>5</b>&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#37"><b>Integration&#160;...................................................................................................................&#160;37</b>&#160;<br/>5.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#37">Scope of&#160;Delivery&#160;.............................................................................................&#160;37&#160;<br/>5.1.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#37">Static Files&#160;.......................................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#37">5.1.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#37">Dynamic&#160;Files&#160;..................................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#38">5.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#38">Critical&#160;Sections&#160;...............................................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#38">5.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#38">Include Structure&#160;..............................................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#38">5.4&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#38">Compiler&#160;Abstraction&#160;and Memory&#160;Mapping&#160;.....................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#40">5.5&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#40">Dependencies on&#160;SW&#160;Modules&#160;........................................................................&#160;40&#160;<br/>5.5.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#40">OSEK&#160;/&#160;AUTOSAR&#160;OS&#160;.....................................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">5.5.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">DEM&#160;.................................................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">5.5.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">DET&#160;.................................................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">5.5.4&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">MEMIF&#160;.............................................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">5.5.5&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">CRC&#160;Library&#160;.....................................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">5.5.6&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">Callback&#160;Functions&#160;...........................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">5.5.7&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">RTE&#160;.................................................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">5.5.8&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#41">BSWM..............................................................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#42">5.6&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#42">Integration&#160;Steps&#160;..............................................................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#43">5.7&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#43">Estimating Resource&#160;Consumption&#160;..................................................................&#160;43&#160;<br/>5.7.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#43">RAM&#160;Usage&#160;.....................................................................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#43">5.7.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#43">ROM&#160;Usage&#160;.....................................................................................&#160;43&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#44">5.7.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#44">NV&#160;Usage&#160;........................................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#44">5.8&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#44">How-To:&#160;Integrate&#160;NVM&#160;with&#160;AUTOSAR3 SWC’s&#160;.............................................&#160;44&#160;<br/>5.8.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#44">NVM’s&#160;provided Interfaces/Ports.&#160;.....................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#45">5.8.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#45">Callbacks&#160;(Ports&#160;provided by&#160;client&#160;SWCs)&#160;......................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#45">5.8.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#45">Request&#160;Result&#160;Types&#160;......................................................................&#160;45&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#46"><b>6</b>&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#46"><b>API&#160;Description&#160;...........................................................................................................&#160;46</b>&#160;<br/>6.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#46">Interfaces&#160;Overview&#160;.........................................................................................&#160;46&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#46">6.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#46">Type&#160;Definitions&#160;...............................................................................................&#160;46&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">6.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">Global&#160;API&#160;Constants&#160;.......................................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">6.4&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">Services provided by&#160;NVM&#160;...............................................................................&#160;48&#160;<br/>6.4.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">NvM_Init&#160;...........................................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">6.4.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">NvM_SetDataIndex&#160;..........................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#49">6.4.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#49">NvM_GetDataIndex..........................................................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#50">6.4.4&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#50">NvM_SetBlockProtection&#160;.................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#51">6.4.5&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#51">NvM_GetErrorStatus&#160;........................................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#51">6.4.6&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#51">NvM_GetVersionInfo&#160;........................................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#52">6.4.7&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#52">NvM_SetRamBlockStatus&#160;................................................................&#160;52&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#53">6.4.8&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#53">NvM_SetBlockLockStatus&#160;................................................................&#160;53&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
8&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=9></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-9_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<a href="TechnicalReference_NvMs.html#54">6.4.9&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#54">NvM_MainFunction&#160;..........................................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#54">6.4.10&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#54">NvM_ReadBlock&#160;..............................................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#55">6.4.11&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#55">NvM_WriteBlock&#160;..............................................................................&#160;55&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#56">6.4.12&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#56">NvM_RestoreBlockDefaults&#160;.............................................................&#160;56&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#57">6.4.13&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#57">NvM_EraseNvBlock&#160;.........................................................................&#160;57&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#58">6.4.14&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#58">NvM_InvalidateNvBlock&#160;...................................................................&#160;58&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#59">6.4.15&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#59">NvM_ReadAll&#160;...................................................................................&#160;59&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#60">6.4.16&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#60">NvM_WriteAll&#160;...................................................................................&#160;60&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#61">6.4.17&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#61">NvM_CancelWriteAll&#160;........................................................................&#160;61&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#61">6.4.18&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#61">NvM_KillWriteAll&#160;..............................................................................&#160;61&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#62">6.4.19&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#62">NvM_CancelJobs&#160;.............................................................................&#160;62&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#62">6.4.20&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#62">NvM_RepairRedundantBlocks&#160;.........................................................&#160;62&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#63">6.5&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#63">Services used by&#160;NVM&#160;.....................................................................................&#160;63&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#64">6.6&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#64">Callback&#160;Functions&#160;...........................................................................................&#160;64&#160;<br/>6.6.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#64">NvM_JobEndNotification&#160;..................................................................&#160;64&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#65">6.6.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#65">NvM_JobErrorNotification&#160;................................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#65">6.7&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#65">Configurable Interfaces&#160;....................................................................................&#160;65&#160;<br/>6.7.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#65">SingleBlockCallbackFunction&#160;...........................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#66">6.7.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#66">MultiBlockCallbackFunction&#160;.............................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#66">6.7.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#66">InitBlockCallbackFunction&#160;................................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#67">6.7.4&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#67">Callback&#160;function&#160;for&#160;RAM&#160;to NvM&#160;copy&#160;...........................................&#160;67&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#68">6.7.5&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#68">Callback&#160;function&#160;for&#160;NvM&#160;to RAM&#160;copy&#160;...........................................&#160;68&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#68">6.8&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#68">Service Ports&#160;...................................................................................................&#160;68&#160;<br/>6.8.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#68">Client&#160;Server&#160;Interface&#160;.....................................................................&#160;68&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#71"><b>7</b>&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#71"><b>Configuration&#160;..............................................................................................................&#160;71</b>&#160;<br/>7.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#71">Software&#160;Component&#160;Template&#160;........................................................................&#160;71&#160;<br/>7.1.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#71">Generation&#160;.......................................................................................&#160;71&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#71">7.1.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#71">Import&#160;into&#160;DaVinci&#160;Developer&#160;..........................................................&#160;71&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#72">7.1.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#72">Dependencies on&#160;Configuration of&#160;NVM&#160;Attributes&#160;...........................&#160;72&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#73">7.1.4&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#73">Service Port&#160;Prototypes&#160;...................................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#73">7.1.5&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#73">Modelling&#160;SWC’s&#160;callback&#160;functions&#160;.................................................&#160;73&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#75">7.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#75">Configuration of&#160;NVM&#160;Attributes&#160;.......................................................................&#160;75&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77"><b>8</b>&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77"><b>AUTOSAR&#160;Standard&#160;Compliance...............................................................................&#160;77</b>&#160;<br/>8.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77">Deviations&#160;........................................................................................................&#160;77&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77">8.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77">Additions/&#160;Extensions&#160;.......................................................................................&#160;77&#160;<br/>8.2.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77">Parameter&#160;Checking&#160;........................................................................&#160;77&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77">8.2.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77">Concurrent&#160;access&#160;to NV&#160;data&#160;.........................................................&#160;77&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77">8.2.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77">RAM-/ROM&#160;Block&#160;Size checks&#160;.........................................................&#160;77&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
9&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-10_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<a href="TechnicalReference_NvMs.html#77">8.2.4&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#77">Calculated&#160;CRC&#160;value&#160;does not&#160;depend&#160;on&#160;number&#160;of&#160;calculation&#160;<br/>steps&#160;................................................................................................&#160;77&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#78">8.3&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#78">Limitations........................................................................................................&#160;78&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#79"><b>9</b>&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#79"><b>Glossary&#160;and&#160;Abbreviations&#160;......................................................................................&#160;79</b>&#160;<br/>9.1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#79">Glossary&#160;..........................................................................................................&#160;79&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#79">9.2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#79">Abbreviations&#160;...................................................................................................&#160;79&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#81"><b>10</b>&#160;&#160;<b>Contact&#160;........................................................................................................................&#160;81</b>&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
10&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=11></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-11_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Illustrations&#160;</b><br/>
<a href="TechnicalReference_NvMs.html#16">Figure&#160;3-1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#16">AUTOSAR&#160;4.x&#160;Architecture&#160;Overview&#160;.......................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#17">Figure&#160;3-2&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#17">Interfaces&#160;to adjacent&#160;modules of&#160;the&#160;NVM&#160;..............................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#38">Figure&#160;5-1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#38">The&#160;file structure&#160;of&#160;the&#160;NVM&#160;sections&#160;module&#160;..........................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#71">Figure&#160;7-1&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#71">Import&#160;a new&#160;software&#160;component&#160;into&#160;DaVinci&#160;Developer&#160;.......................&#160;71&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#74">Figure&#160;7-2&#160;A&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#74">“Single Block&#160;Job&#160;End&#160;Notification”&#160;with return&#160;type&#160;Std_ReturnType&#160;.......&#160;74&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#75">Figure&#160;7-3&#160;A&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#75">“Single Block&#160;Job&#160;End&#160;Notification”&#160;with return&#160;type&#160;void.&#160;.........................&#160;75&#160;</a><br/>
<b>&#160;</b><br/>
<b>Tables&#160;<br/></b>&#160;&#160;<br/><a href="TechnicalReference_NvMs.html#6">Table&#160;1-1&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#6">History&#160;of&#160;the&#160;document&#160;..............................................................................&#160;6&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#6">Table&#160;1-2&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#6">Reference&#160;documents&#160;.................................................................................&#160;6&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#14">Table&#160;2-1&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#14">Component&#160;history....................................................................................&#160;14&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#18">Table&#160;4-1&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#18">Supported&#160;SWS&#160;features&#160;..........................................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#18">Table&#160;4-2&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#18">Not&#160;supported&#160;SWS&#160;features&#160;....................................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#25">Table&#160;4-3&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#25">Block&#160;concept&#160;...........................................................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#33">Table&#160;4-4&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#33">Mapping&#160;of&#160;service IDs&#160;to services&#160;...........................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#34">Table&#160;4-5&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#34">Errors&#160;reported&#160;to DET&#160;.............................................................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#34">Table&#160;4-6&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#34">Development&#160;Error&#160;Checking:&#160;Assignment&#160;of&#160;checks&#160;to&#160;services&#160;..............&#160;34&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#35">Table&#160;4-7&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#35">Errors&#160;reported&#160;to DEM&#160;.............................................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#37">Table&#160;5-1&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#37">Static&#160;files&#160;.................................................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#37">Table&#160;5-2&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#37">Generated&#160;files&#160;.........................................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#39">Table&#160;5-3&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#39">Compiler&#160;abstraction&#160;and&#160;memory&#160;mapping&#160;..............................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">Table&#160;6-1&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">Type&#160;definitions&#160;.........................................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">Table&#160;6-2&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#48">NvM_Init&#160;...................................................................................................&#160;48&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#49">Table&#160;6-3&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#49">NvM_SetDataIndex...................................................................................&#160;49&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#50">Table&#160;6-4&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#50">NvM_GetDataIndex&#160;..................................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#50">Table&#160;6-5&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#50">NvM_SetBlockProtection&#160;..........................................................................&#160;50&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#51">Table&#160;6-6&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#51">NvM_GetErrorStatus&#160;................................................................................&#160;51&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#52">Table&#160;6-7&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#52">NvM_GetVersionInfo&#160;.................................................................................&#160;52&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#52">Table&#160;6-8&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#52">NvM_SetRamBlockStatus.........................................................................&#160;52&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#53">Table&#160;6-9&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#53">NvM_SetBlockLockStatus.........................................................................&#160;53&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#54">Table&#160;6-10&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#54">NvM_MainFunction&#160;...................................................................................&#160;54&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#55">Table&#160;6-11&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#55">NvM_ReadBlock&#160;.......................................................................................&#160;55&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#56">Table&#160;6-12&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#56">NvM_WriteBlock&#160;.......................................................................................&#160;56&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#57">Table&#160;6-13&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#57">NvM_RestoreBlockDefaults&#160;......................................................................&#160;57&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#58">Table&#160;6-14&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#58">NvM_EraseNvBlock&#160;..................................................................................&#160;58&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#59">Table&#160;6-15&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#59">NvM_InvalidateNvBlock&#160;............................................................................&#160;59&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#60">Table&#160;6-16&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#60">NvM_ReadAll&#160;............................................................................................&#160;60&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#61">Table&#160;6-17&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#61">NvM_WriteAll&#160;............................................................................................&#160;61&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#61">Table&#160;6-18&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#61">NvM_CancelWriteAll&#160;.................................................................................&#160;61&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#62">Table&#160;6-19&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#62">NvM_KilllWriteAll&#160;......................................................................................&#160;62&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#62">Table&#160;6-20&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#62">NvM_CancelJobs&#160;.....................................................................................&#160;62&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#63">Table&#160;6-21&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#63">NvM_RepairRedundantBlocks&#160;..................................................................&#160;63&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#64">Table&#160;6-22&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#64">Services used by&#160;the&#160;NVM&#160;........................................................................&#160;64&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#64">Table&#160;6-23&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#64">NvM_JobEndNotification&#160;..........................................................................&#160;64&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#65">Table&#160;6-24&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#65">NvM_JobErrorNotification&#160;.........................................................................&#160;65&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#66">Table&#160;6-25&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#66">SingleBlockCallbackFunction&#160;....................................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#66">Table&#160;6-26&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#66">MultiBlockCallbackFunction&#160;......................................................................&#160;66&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#67">Table&#160;6-27&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#67">InitBlockCallbackFunction&#160;.........................................................................&#160;67&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#68">Table&#160;6-28&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#68">Callback&#160;function&#160;for&#160;RAM&#160;to NvM&#160;copy&#160;....................................................&#160;68&#160;</a><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
11&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-12_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<a href="TechnicalReference_NvMs.html#68">Table&#160;6-29&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#68">Callback&#160;function&#160;for&#160;NvM&#160;to RAM&#160;copy&#160;....................................................&#160;68&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#69">Table&#160;6-30&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#69">Operations&#160;of&#160;Port&#160;Prototype&#160;Padmin_&lt;BlockName&gt;&#160;...............................&#160;69&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#69">Table&#160;6-31&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#69">Operations&#160;of&#160;Port&#160;Prototype&#160;PS_&lt;BlockName&gt;&#160;.......................................&#160;69&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#70">Table&#160;6-32&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#70">Operation&#160;of&#160;Port&#160;prototype&#160;NvM_RpNotifyFinished_Id&lt;BlockName&gt;&#160;......&#160;70&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#79">Table&#160;9-1&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#79">Glossary&#160;...................................................................................................&#160;79&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#80">Table&#160;9-2&#160;&#160;</a><br/>
<a href="TechnicalReference_NvMs.html#80">Abbreviations&#160;............................................................................................&#160;80&#160;</a><br/>
&#160;<br/>&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
12&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-13_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>2&#160;&#160;Component&#160;History&#160;</b><br/>
<b>Component&#160;</b><br/>
<b>New&#160;Features&#160;</b><br/>
<b>Version&#160;<br/>(Implementation)&#160;<br/></b>5.05.xx&#160;<br/>
Reworked&#160;job&#160;end&#160;and init&#160;block&#160;callback&#160;invocation&#160;during&#160;ReadAll&#160;for&#160;blocks&#160;<br/>with service ports&#160;<br/>
5.03.xx&#160;<br/>
Specific&#160;development&#160;errors&#160;cannot&#160;be&#160;switched on/off,&#160;only&#160;global&#160;development&#160;<br/>error&#160;mode can&#160;be&#160;enabled/disabled&#160;<br/>
5.02.xx&#160;<br/>
Added&#160;RepairRedundantBlocks&#160;functionality&#160;<br/>SafeBSW&#160;<br/>
5.01.xx&#160;<br/>
Interaction with BswM&#160;added.&#160;<br/>Defined&#160;Block&#160;Write&#160;Order&#160;(descending&#160;IDs)&#160;during&#160;write all&#160;<br/>
5.xx.xx&#160;<br/>
AUTOSAR4.0.&#160;<br/>
&#160;&#160;Changed&#160;API&#160;(return&#160;types)&#160;<br/>&#160;&#160;New&#160;service:&#160;NvM_CancelJobs&#160;<br/>&#160;&#160;New&#160;DEM&#160;Errors&#160;&#160;<br/>&#160;&#160;“Write&#160;Block&#160;during&#160;WriteAll”&#160;configurable&#160;<br/>&#160;&#160;Explicit&#160;Synchronization&#160;Mechanism&#160;<br/>
4.xx.xx&#160;<br/>
Skipped/Reserved.&#160;<br/>
3.09.xx&#160;<br/>
Removed&#160;AUTOSAR&#160;Version&#160;Check&#160;for&#160;DEM&#160;<br/>NvM_Mainfunction&#160;runnable is always&#160;generated&#160;into&#160;SWC&#160;descripion&#160;<br/>Generation&#160;of&#160;SWC&#160;Interface&#160;Names according&#160;to&#160;AUTOSAR&#160;&#160;<br/>
3.08.xx&#160;<br/>
NVM&#160;provides&#160;information&#160;about&#160;error&#160;codes&#160;for&#160;MICROSAR&#160;Dem&#160;to&#160;automate&#160;<br/>configuration.&#160;<br/>
3.07.xx&#160;<br/>
Service&#160;NvM_KillWriteAll&#160;added.&#160;<br/>Significant&#160;changes&#160;in internal&#160;handling&#160;(CRC/internal&#160;buffer)&#160;<br/>
3.06.xx&#160;<br/>
Never&#160;released;&#160;no&#160;new&#160;features.&#160;<br/>
3.05.xx&#160;<br/>
Calculated&#160;CRC32&#160;value&#160;does not&#160;depend&#160;anymore on&#160;configuration&#160;of&#160;<br/>parameter&#160;NvmCrcNumOfBytes.&#160;<br/>Added&#160;RAM&#160;and&#160;ROM&#160;block size checks:&#160;The&#160;NVM&#160;can&#160;be&#160;configured&#160;to&#160;check&#160;<br/>each RAM&#160;block’s&#160;and/or&#160;each ROM&#160;block’s&#160;size against&#160;the&#160;configured&#160;NV&#160;<br/>block length,&#160;considering CRC&#160;setting,&#160;internal&#160;buffering,&#160;etc.&#160;<br/>
3.04.xx&#160;<br/>
Crc&#160;Handling&#160;is&#160;configurable:&#160;Either&#160;the&#160;internal&#160;buffer,&#160;available since&#160;<br/>component&#160;version 3.02,&#160;is&#160;used&#160;or&#160;Crc&#160;is&#160;stored&#160;at&#160;the&#160;end&#160;of&#160;RAM&#160;Block.&#160;<br/>
3.03.xx&#160;<br/>
At&#160;processing&#160;a&#160;redundant&#160;NVRAM&#160;Block&#160;NVM&#160;determines&#160;an&#160;appropriate&#160;write&#160;<br/>order,&#160;depending&#160;on&#160;the&#160;NV&#160;Block’s&#160;current&#160;state/content.&#160;A&#160;defect&#160;NV&#160;block is&#160;<br/>written&#160;in preference&#160;to a&#160;valid one.&#160;<br/>NVM&#160;provides&#160;possibility&#160;for&#160;DCM&#160;to access&#160;NV&#160;data&#160;concurrently&#160;with NVM’s&#160;<br/>applications.&#160;<br/>
3.02.xx&#160;<br/>
Update&#160;to&#160;AUTOSAR&#160;3&#160;specification.&#160;<br/>Additional&#160;API&#160;NvM_SetBlockLockStatus.&#160;<br/>Storing&#160;each&#160;NVRAM&#160;block’s&#160;CRC&#160;internally:&#160;RAM&#160;Blocks&#160;provided by&#160;the&#160;<br/>application don’t&#160;have to&#160;allocate additional&#160;space&#160;for&#160;CRC.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
13&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=14></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-14_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Component&#160;</b><br/>
<b>New&#160;Features&#160;</b><br/>
<b>Version&#160;<br/>(Implementation)&#160;</b><br/>
Configurability,&#160;whether&#160;the&#160;NVM&#160;shall&#160;create&#160;the&#160;RAM&#160;Block&#160;associated&#160;with the&#160;<br/>ConfigID NVRAM&#160;Block&#160;on&#160;its&#160;own,&#160;or&#160;the&#160;user&#160;creates&#160;the&#160;RAM&#160;block.&#160;<br/>
Table&#160;2-1&#160;&#160;<br/>
Component&#160;history&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
14&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=15></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-15_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-15_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>3&#160;&#160;Introduction&#160;</b><br/>
This&#160;&#160;document&#160;&#160;describes&#160;&#160;the&#160;&#160;functionality,&#160;API&#160;&#160;and&#160;&#160;configuration&#160;&#160;of&#160;&#160;the&#160;AUTOSAR&#160;&#160;BSW&#160;<br/>module&#160;NVM&#160;as specified&#160;in<a href="TechnicalReference_NvMs.html#6">&#160;[1].&#160;</a>&#160;<br/>
&#160;<br/>
<b>Supported&#160;AUTOSAR&#160;R<a href="TechnicalReference_NvMs.html#15">elease*:</a></b><b>&#160;</b><br/>
4&#160;<br/>
<b>Supported&#160;Configuration&#160;Variants:&#160;</b><br/>
link-time&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Vendor&#160;ID:&#160;</b><br/>
NVM_VENDOR_ID&#160;<br/>
30&#160;decimal&#160;<br/>(=&#160;<br/>
Vector-Informatik,&#160;<br/>
according&#160;to&#160;HIS)&#160;<br/>
<b>Module&#160;ID:&#160;</b><br/>
NVM_MODULE_ID &#160;&#160;<br/>
20&#160;decimal&#160;<br/>(according&#160;to ref<a href="TechnicalReference_NvMs.html#6">.&#160;[4])</a>&#160;<br/>
*&#160;For&#160;the&#160;precise&#160;AUTOSAR Release&#160;3.x&#160;please see the&#160;release specific&#160;documentation.&#160;&#160;<br/>&#160;<br/>
The&#160;&#160;module&#160;&#160;NVM&#160;&#160;is&#160;&#160;created&#160;&#160;to&#160;&#160;abstract&#160;&#160;the&#160;&#160;usage&#160;&#160;of&#160;&#160;non-volatile&#160;&#160;memory,&#160;&#160;such&#160;&#160;as&#160;<br/>EEPROM&#160;&#160;or&#160;&#160;Flash,&#160;&#160;from&#160;&#160;application.&#160;All&#160;&#160;access&#160;&#160;to&#160;&#160;NV&#160;&#160;memory&#160;&#160;is&#160;&#160;block&#160;&#160;based.&#160;To&#160;&#160;avoid&#160;<br/>conflicts&#160;&#160;and&#160;&#160;inconsistent&#160;&#160;data&#160;&#160;the&#160;&#160;NVM&#160;&#160;shall&#160;&#160;be&#160;&#160;the&#160;&#160;only&#160;&#160;module&#160;&#160;to&#160;&#160;access&#160;&#160;non-volatile&#160;<br/>memory.&#160;<br/>The&#160;&#160;NVM&#160;&#160;accesses&#160;&#160;the&#160;&#160;module&#160;&#160;MEMIF&#160;&#160;(Memory&#160;Abstraction&#160;&#160;Interface)&#160;&#160;which&#160;&#160;abstracts&#160;<br/>the&#160;modules&#160;FEE&#160;(Flash&#160;EEPROM&#160;Emulation)&#160;and&#160;EA&#160;(EEPROM&#160;Abstraction).&#160;Thus,&#160;the&#160;<br/>NVM&#160;is&#160;hardware&#160;independent.&#160;The&#160;modules&#160;FEE&#160;and&#160;EA&#160;abstract&#160;the&#160;access&#160;to&#160;Flash&#160;or&#160;<br/>EEPROM&#160;driver.&#160;To&#160;select&#160;the&#160;appropriate&#160;device&#160;(FEE&#160;or&#160;EA)&#160;the&#160;NVM&#160;uses&#160;a&#160;handle&#160;that&#160;<br/>is provided&#160;by&#160;the&#160;MEMIF.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>MICROSAR&#160;FEE&#160;and MICROSAR&#160;EA&#160;are&#160;different&#160;products&#160;that&#160;are&#160;not&#160;part&#160;of&#160;<br/>
<b>&#160;&#160;</b>MICROSAR&#160;NVM!&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
15&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=16></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-16_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-16_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>3.1&#160;</b><br/>
<b>Architecture&#160;Overview&#160;</b><br/>
The&#160;following&#160;figure shows&#160;where the&#160;NVM&#160;is&#160;located&#160;in&#160;the&#160;AUTOSAR architecture.&#160;<br/>
&#160;<br/>
Figure&#160;3-1&#160;<br/>
AUTOSAR&#160;4.x&#160;Architecture&#160;Overview&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
16&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=17></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-17_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-17_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
The&#160;&#160;next&#160;&#160;figure&#160;&#160;shows&#160;&#160;the&#160;&#160;interfaces&#160;&#160;to&#160;&#160;adjacent&#160;&#160;modules&#160;&#160;of&#160;&#160;the&#160;&#160;NVM.&#160;&#160;These&#160;&#160;interfaces&#160;<br/>are described&#160;in&#160;chapter<a href="TechnicalReference_NvMs.html#46">&#160;6.&#160;</a>&#160;<br/>
&#160;<br/>
Figure&#160;3-2&#160;<br/>
Interfaces&#160;to&#160;adjacent&#160;modules&#160;of&#160;the&#160;NVM&#160;<br/>
Applications&#160;normally&#160;do&#160;not&#160;access&#160;the&#160;services&#160;of&#160;the&#160;BSW&#160;modules&#160;directly.&#160;They&#160;use&#160;<br/>the&#160;service&#160;ports&#160;provided&#160;by&#160;the&#160;BSW&#160;modules&#160;via&#160;the&#160;RTE.&#160;The&#160;service&#160;ports&#160;provided&#160;<br/>by&#160;the&#160;NVM&#160;are listed&#160;in&#160;chapte<a href="TechnicalReference_NvMs.html#68">r&#160;6.8&#160;</a>and&#160;are&#160;defined&#160;in<a href="TechnicalReference_NvMs.html#6">&#160;[1].</a>&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
17&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=18></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-18_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>4&#160;&#160;Functional&#160;Description&#160;</b><br/>
<b>4.1&#160;</b><br/>
<b>Features&#160;</b><br/>
The&#160;features listed&#160;in&#160;this chapter cover the&#160;complete&#160;functionality&#160;specified&#160;in<a href="TechnicalReference_NvMs.html#6">&#160;[1].</a>&#160;<br/>The&#160;<b>supported</b>&#160;and&#160;<b>not&#160;supported</b>&#160;features&#160;are&#160;presented&#160;in&#160;the&#160;following&#160;two&#160;tables.&#160;For&#160;<br/>further information&#160;on&#160;not&#160;supported&#160;features&#160;also&#160;see&#160;chapte<a href="TechnicalReference_NvMs.html#77">r&#160;8.</a>&#160;<br/>
&#160;<br/>
The&#160;following&#160;features&#160;described&#160;in<a href="TechnicalReference_NvMs.html#6">&#160;[1]&#160;</a>are&#160;supported:&#160;<br/>
<b>Supported&#160;Feature&#160;<br/></b>Complete&#160;API&#160;<br/>Block&#160;Management&#160;Types&#160;(Native,&#160;Redundant,&#160;Dataset)&#160;<br/>CRC&#160;handling&#160;(CRC16,&#160;CRC32)&#160;<br/>Priority&#160;handling,&#160;including&#160;Immediate&#160;(Crash)&#160;Data write&#160;<br/>Job&#160;queuing&#160;<br/>ROM&#160;defaults&#160;(ROM&#160;defaults&#160;block,&#160;Init&#160;callback)&#160;<br/>Config Id&#160;handling&#160;<br/>RAM&#160;block&#160;valid/modified handling&#160;<br/>Re-Validation&#160;of&#160;RAM&#160;blocks&#160;during&#160;start&#160;up&#160;using&#160;CRC&#160;<br/>Job&#160;end notifications&#160;<br/>Skipping&#160;Blocks&#160;during&#160;Start-Up&#160;<br/>API&#160;Configuration&#160;Classes&#160;<br/>Service Ports&#160;–&#160;Generation&#160;of&#160;Software&#160;Component&#160;Description&#160;<br/>Concurrent&#160;access&#160;to NV&#160;data&#160;for&#160;DCM&#160;<br/>Explicit&#160;Synchronization&#160;mechanism&#160;between application and NVM&#160;<br/>Interaction with BswM&#160;<br/>
Table&#160;4-1&#160;&#160;<br/>
Supported&#160;SWS&#160;features&#160;<br/>
The&#160;following&#160;features&#160;described&#160;in<a href="TechnicalReference_NvMs.html#6">&#160;[1]&#160;</a>are&#160;not&#160;supported:&#160;<br/>
<b>Not&#160;Supported&#160;Feature&#160;<br/></b>Dataset&#160;ROM&#160;blocks&#160;(Management&#160;Type&#160;Dataset,&#160;multiple ROM&#160;blocks)&#160;<br/>Disabling&#160;Set/Get_DataIndex&#160;API&#160;<br/>Static Block&#160;ID&#160;Check&#160;during&#160;read&#160;<br/>Write Verification&#160;<br/>Read&#160;Retries&#160;<br/>
Table&#160;4-2&#160;&#160;<br/>
Not&#160;supported&#160;SWS&#160;features&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
18&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-19_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-19_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-19_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-19_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>4.1.1&#160;</b><br/>
<b>Safety&#160;Features&#160;</b><br/>
<b>4.1.1.1&#160;</b><br/>
<b>Block&#160;Id&#160;check&#160;</b><br/>
NvM&#160;&#160;provides&#160;&#160;a&#160;&#160;feature&#160;&#160;to&#160;&#160;ensure&#160;&#160;the&#160;&#160;underlying&#160;&#160;devices&#160;&#160;deliver&#160;&#160;data&#160;&#160;for&#160;&#160;the&#160;&#160;currently&#160;<br/>processing&#160;NvM&#160;block&#160;–&#160;Block&#160;Id&#160;Check.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Since&#160;the&#160;Block&#160;Id&#160;Check&#160;is&#160;implemented&#160;via extension&#160;in CRC&#160;calculation,&#160;the&#160;feature&#160;<br/>
&#160;&#160;is&#160;only&#160;working&#160;for&#160;NvM&#160;block configured&#160;with CRC.&#160;<br/>
Since&#160;the&#160;feature uses&#160;the NvM&#160;Block&#160;Id,&#160;during&#160;configuration update&#160;the&#160;user&#160;has&#160;to&#160;<br/>ensure&#160;the&#160;Block&#160;Id&#160;remains&#160;the&#160;same&#160;for&#160;each NvM&#160;Block.&#160;Otherwise the&#160;check&#160;will&#160;fail&#160;<br/>though&#160;the&#160;correct&#160;data&#160;was read.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
To&#160;check&#160;the&#160;data&#160;to&#160;belong&#160;to&#160;currently&#160;processing&#160;NvM&#160;Block,&#160;the&#160;NvM&#160;calculates the&#160;<br/>NvM&#160;Block&#160;Id&#160;and&#160;the&#160;current&#160;Dataindex&#160;into&#160;its&#160;CRC.&#160;That&#160;means in&#160;fact&#160;that&#160;the&#160;NvM&#160;<br/>calculates&#160;the&#160;CRC&#160;over the&#160;Block&#160;Id&#160;(2&#160;bytes),&#160;Dataindex&#160;(1&#160;byte)&#160;and&#160;the&#160;actual data&#160;–&#160;&#160;<br/>NvM&#160;needs&#160;one&#160;CRC&#160;calculation&#160;function&#160;call&#160;more&#160;that&#160;without&#160;the&#160;Block&#160;Id&#160;check.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;NvM&#160;is&#160;not&#160;able&#160;to distinguish&#160;between wrong&#160;CRC&#160;and&#160;CRC&#160;calculated&#160;for&#160;<br/>
<b>&#160;&#160;</b>another&#160;NvM&#160;Block!&#160;In&#160;case&#160;the&#160;underlying&#160;modules deliver&#160;data belonging&#160;to&#160;wrong&#160;<br/>
NvM&#160;Block,&#160;the&#160;NvM&#160;behaves in&#160;same&#160;way&#160;as in&#160;case&#160;of&#160;CRC&#160;mismatch.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.1.2&#160;</b><br/>
<b>Automatic&#160;Block&#160;Length&#160;</b><br/>
Since&#160;the&#160;block&#160;length&#160;might&#160;be&#160;unknown&#160;during&#160;configuration&#160;time,&#160;the&#160;feature Automatic&#160;<br/>Block&#160;Length&#160;can&#160;be&#160;enabled&#160;for NvM&#160;blocks&#160;with&#160;permanently&#160;configured&#160;RAM.&#160;<br/>The&#160;feature&#160;changes&#160;the&#160;meaning&#160;of&#160;block&#160;length&#160;from&#160;actual&#160;length&#160;to&#160;maximum&#160;length&#160;-&#160;<br/>the&#160;actual&#160;block&#160;length&#160;is&#160;set&#160;via&#160;size&#160;of&#160;permanent&#160;RAM&#160;within&#160;generated&#160;structures.&#160;The&#160;<br/>configured&#160;&#160;length&#160;&#160;is&#160;&#160;used&#160;&#160;by&#160;&#160;underlying&#160;&#160;modules&#160;&#160;to&#160;&#160;initialize&#160;&#160;their&#160;&#160;structures,&#160;&#160;therefore&#160;&#160;it&#160;<br/>must&#160;not&#160;be&#160;less&#160;than&#160;the&#160;actual&#160;length.&#160;To&#160;check&#160;the&#160;configured&#160;length&#160;to&#160;be&#160;valid,&#160;Block&#160;<br/>Length&#160;Check&#160;(see<a href="TechnicalReference_NvMs.html#35">&#160;4.5.3)</a>&#160;shall&#160;be&#160;enabled.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>After&#160;the&#160;system&#160;is&#160;running&#160;and&#160;the&#160;actual&#160;block&#160;lengths&#160;are&#160;known,&#160;the&#160;configuration&#160;<br/>
<b>&#160;&#160;</b>shall&#160;be&#160;adjusted&#160;to&#160;the&#160;actual&#160;length.&#160;Since&#160;the&#160;configured&#160;lengths&#160;are used&#160;by&#160;<br/>
underlying&#160;modules,&#160;there might&#160;be&#160;a&#160;lot&#160;of&#160;unused space in&#160;Flash&#160;or&#160;EEPROM.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.2&#160;</b><br/>
<b>Initialization&#160;</b><br/>
Before&#160;the&#160;module&#160;&#160;NVM&#160;can&#160;be&#160;used&#160;&#160;it&#160;has&#160;to&#160;be&#160;initialized.&#160;All&#160;modules,&#160;&#160;NVM&#160;depends&#160;<br/>on,&#160;need&#160;to&#160;be&#160;initialized&#160;before.&#160;The&#160;initialization&#160;of&#160;all&#160;these&#160;modules&#160;should&#160;be&#160;done&#160;by&#160;<br/>the&#160;ECU&#160;State&#160;Manager.&#160;If&#160;the&#160;NVM&#160;is&#160;not&#160;used&#160;in&#160;an&#160;AUTOSAR&#160;environment&#160;it&#160;should&#160;be&#160;<br/>done&#160;by&#160;a&#160;different&#160;entity.&#160;Pay&#160;attention&#160;that&#160;the&#160;NVM&#160;<b>will&#160;not</b>&#160;initialize&#160;the&#160;used&#160;modules&#160;<br/>by&#160;its&#160;own.&#160;<br/>Depending&#160;&#160;on&#160;&#160;the&#160;&#160;configuration&#160;&#160;of&#160;&#160;the&#160;&#160;NVM&#160;&#160;stack,&#160;&#160;different&#160;&#160;modules&#160;&#160;might&#160;&#160;need&#160;&#160;to&#160;&#160;be&#160;<br/>initialized.&#160;It&#160;is advised&#160;to&#160;use&#160;a&#160;bottom&#160;up&#160;strategy&#160;for initialization:&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
19&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=20></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-20_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-20_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&gt;&#160;&#160;</b>NV&#160;device&#160;drivers for internal&#160;devices&#160;(FLS/EEP)&#160;<br/>
<b>&gt;&#160;&#160;</b>Low&#160;level driver that&#160;an&#160;external NV&#160;device&#160;driver&#160;might&#160;depend&#160;on&#160;(e.g.&#160;DIO,&#160;SPI)&#160;<br/>
<b>&gt;&#160;&#160;</b>Drivers for external NV&#160;devices&#160;(e.g.&#160;external&#160;EEP&#160;or FLS)&#160;<br/>
<b>&gt;&#160;&#160;</b>NV&#160;device&#160;abstraction&#160;modules&#160;(EA/FEE)&#160;<br/>
<b>&gt;&#160;&#160;</b>Non-Volatile&#160;Manager (NVM)&#160;<br/>
Initializing&#160;the&#160;modules&#160;in&#160;this&#160;sequence&#160;ensures&#160;&#160;that,&#160;as&#160;soon&#160;as&#160;a&#160;module&#160;&#160;is&#160;&#160;used,&#160;&#160;the&#160;<br/>modules&#160;it&#160;depends on&#160;are ready.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Basic Knowledge&#160;<br/></b>NvM&#160;initialization consists&#160;of&#160;two steps&#160;<br/>
&#160;<br/>
1.&#160;&#160;NvM_Init()&#160;(see<a href="TechnicalReference_NvMs.html#20">&#160;4.2.1)</a>&#160;<br/>2.&#160;&#160;NvM_ReadAll()&#160;(see<a href="TechnicalReference_NvMs.html#20">&#160;4.2.2)</a>&#160;<br/>
Indenpendently&#160;from&#160;SelectBlockForReadAll&#160;NvM&#160;uses&#160;the&#160;NvM_ReadAll()&#160;to&#160;<br/>initialize&#160;all&#160;its&#160;blocks.&#160;Therefore it&#160;is&#160;not&#160;possible to access&#160;any&#160;NvM&#160;block&#160;until&#160;it&#160;was&#160;<br/>initialized&#160;during&#160;NvM_ReadAll().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.2.1&#160;</b><br/>
<b>Start-up&#160;</b><br/>
The&#160;&#160;basic&#160;&#160;initialization&#160;&#160;of&#160;&#160;the&#160;&#160;NVRAM&#160;&#160;Manager&#160;&#160;is&#160;&#160;done&#160;&#160;by&#160;&#160;the&#160;&#160;request&#160;&#160;NvM_Init().&#160;&#160;It&#160;<br/>shall&#160;&#160;be&#160;&#160;invoked&#160;&#160;e.g.&#160;&#160;by&#160;&#160;the&#160;&#160;ECU&#160;&#160;State&#160;&#160;Manager&#160;&#160;exclusively.&#160;&#160;Due&#160;&#160;to&#160;&#160;strong&#160;&#160;constraints&#160;<br/>concerning&#160;&#160;the&#160;&#160;ECU&#160;&#160;start-up&#160;&#160;time&#160;&#160;the&#160;&#160;NvM_Init()&#160;&#160;request&#160;&#160;does&#160;&#160;not&#160;&#160;contain&#160;&#160;the&#160;&#160;basic&#160;<br/>initialization&#160;&#160;of&#160;&#160;the&#160;&#160;configured&#160;&#160;NVRAM&#160;&#160;blocks.&#160;&#160;The&#160;&#160;NvM_Init()&#160;&#160;request&#160;&#160;resets&#160;&#160;the&#160;<br/>internal variables&#160;of&#160;the&#160;NVM&#160;such&#160;as the&#160;queue&#160;and&#160;the&#160;state&#160;machine.&#160;<br/>
<b>4.2.2&#160;</b><br/>
<b>Initialization of&#160;the&#160;Data Blocks&#160;</b><br/>
The&#160;initialization&#160;of&#160;the&#160;single&#160;blocks&#160;is&#160;normally&#160;also&#160;initiated&#160;by&#160;the&#160;ECU&#160;State&#160;Manager&#160;<br/>by&#160;calling&#160;&#160;NvM_ReadAll().&#160;All&#160;blocks&#160;&#160;that&#160;have&#160;no&#160;valid&#160;RAM&#160;data&#160;&#160;anymore&#160;&#160;and&#160;have&#160;<br/>SelectBlockForReadAll&#160;&#160;set&#160;&#160;will&#160;&#160;be&#160;&#160;reloaded&#160;&#160;from&#160;&#160;NV&#160;&#160;memory&#160;&#160;or&#160;&#160;from&#160;&#160;ROM&#160;&#160;(if&#160;<br/>available).&#160;&#160;All&#160;&#160;other&#160;&#160;blocks&#160;&#160;won’t&#160;&#160;be&#160;&#160;reloaded,&#160;&#160;they&#160;&#160;must&#160;&#160;be&#160;&#160;loaded&#160;&#160;manually&#160;&#160;by&#160;&#160;the&#160;<br/>application&#160;&#160;calling&#160;&#160;NvM_ReadBlock(),&#160;&#160;but&#160;&#160;they&#160;&#160;will&#160;&#160;be&#160;&#160;initialized,&#160;&#160;e.g.&#160;&#160;their&#160;&#160;write&#160;<br/>protection&#160;and&#160;status.&#160;<br/>Block&#160;1&#160;(the&#160;configuration&#160;ID)&#160;has&#160;a&#160;special&#160;role.&#160;It&#160;is&#160;stored&#160;in&#160;NV&#160;memory&#160;and&#160;also&#160;as&#160;a&#160;<br/>constant&#160;&#160;(NvM_CompiledConfigId_t)&#160;&#160;that&#160;&#160;is&#160;&#160;externally&#160;&#160;visible&#160;&#160;and&#160;&#160;link-time&#160;<br/>configurable.&#160;&#160;During&#160;&#160;NvM_ReadAll()&#160;&#160;the&#160;&#160;NV&#160;&#160;value&#160;&#160;of&#160;&#160;block&#160;&#160;1&#160;&#160;is&#160;&#160;compared&#160;&#160;against&#160;&#160;the&#160;<br/>constant&#160;NvM_CompiledConfigId_t.&#160;In&#160;case&#160;of&#160;a&#160;match&#160;all&#160;NV&#160;blocks&#160;are&#160;presumed&#160;to&#160;<br/>be&#160;&#160;valid&#160;&#160;and&#160;&#160;NVM&#160;&#160;tries&#160;&#160;to&#160;&#160;read&#160;&#160;them&#160;&#160;from&#160;&#160;NV&#160;&#160;memory.&#160;&#160;In&#160;&#160;case&#160;&#160;of&#160;&#160;a&#160;&#160;mismatch&#160;&#160;or&#160;&#160;if&#160;&#160;the&#160;<br/>configuration&#160;ID cannot&#160;be&#160;read&#160;the&#160;system&#160;behaves as&#160;following:&#160;<br/>
<b>&gt;&#160;&#160;</b>If&#160;the&#160;configuration&#160;switch&#160;<b>Dynamic&#160;Configuration Handling</b>&#160;is&#160;<b>OFF</b>,&#160;the&#160;mismatch&#160;is&#160;<br/>
ignored.&#160;It&#160;will be&#160;tried&#160;to&#160;read&#160;all&#160;blocks&#160;from&#160;NV&#160;memory&#160;(also&#160;called&#160;‘normal runtime&#160;<br/>preparation’).&#160;<br/>
<b>&gt;&#160;&#160;</b>If&#160;the&#160;<b>Dynamic&#160;Configuration Handling</b>&#160;is&#160;<b>ON</b>,&#160;the&#160;normal runtime&#160;preparation&#160;is&#160;<br/>
processed&#160;for&#160;all&#160;blocks having&#160;been&#160;configured&#160;with&#160;the&#160;option&#160;‘Resistant&#160;to&#160;Changed&#160;<br/>SW’.&#160;For&#160;all&#160;other blocks an&#160;‘extended&#160;runtime&#160;preparation’&#160;will take&#160;place.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
20&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-21_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&gt;&#160;&#160;</b>All&#160;blocks&#160;that&#160;will be&#160;processed&#160;with&#160;the&#160;‘extended&#160;runtime&#160;preparation’&#160;will be&#160;treated&#160;<br/>
as invalid&#160;or blank.&#160;Thus,&#160;it is possible&#160;to&#160;rewrite&#160;a&#160;block&#160;having&#160;been&#160;marked&#160;as&#160;‘Write&#160;<br/>Once’.&#160;If&#160;available,&#160;ROM&#160;defaults are&#160;loaded&#160;or the&#160;initialization&#160;callback is invoked.&#160;<br/>
<b>4.3&#160;</b><br/>
<b>States&#160;</b><br/>
The&#160;NVRAM&#160;Manager&#160;is&#160;internally&#160;organized&#160;with&#160;a&#160;state&#160;machine&#160;which&#160;is&#160;shown&#160;in&#160;the&#160;<br/>following&#160;chapters.&#160;<br/>
<b>4.4&#160;</b><br/>
<b>Main Functions&#160;</b><br/>
<b>4.4.1&#160;</b><br/>
<b>Hardware&#160;Independence&#160;</b><br/>
The&#160;NVRAM&#160;Manager&#160;is&#160;independent&#160;from&#160;its&#160;&#160;underlying&#160;memory&#160;hardware.&#160;&#160;It&#160;accesses&#160;<br/>the&#160;API&#160;of&#160;the&#160;MEMIF&#160;(Memory&#160;Abstraction&#160;Interface).&#160;The&#160;MEMIF&#160;abstracts&#160;the&#160;modules&#160;<br/>FEE&#160;&#160;(Flash&#160;EEPROM&#160;&#160;Emulation)&#160;&#160;and&#160;&#160;EA&#160;&#160;(EEPROM&#160;Abstraction)&#160;for&#160;&#160;the&#160;&#160;NVM.&#160;&#160;FEE&#160;and&#160;<br/>EA&#160;are&#160;used&#160;for&#160;storing&#160;data&#160;blocks&#160;in&#160;Flash&#160;or&#160;EEPROM&#160;devices.&#160;For&#160;selecting&#160;at&#160;which&#160;<br/>FEE&#160;or&#160;EA&#160;instance&#160;a&#160;block&#160;shall&#160;be&#160;stored,&#160;the&#160;NVM&#160;uses a&#160;device&#160;handle&#160;(device&#160;ID)&#160;that&#160;<br/>is provided&#160;by&#160;the&#160;MEMIF.&#160;<br/>
<b>4.4.2&#160;</b><br/>
<b>Synchronous&#160;Requests&#160;</b><br/>
The&#160;NVM&#160;API&#160;services&#160;are divided&#160;into&#160;synchronous&#160;and&#160;asynchronous requests.&#160;&#160;<br/>The&#160;&#160;synchronous&#160;&#160;services&#160;&#160;are&#160;&#160;executed&#160;&#160;immediately&#160;&#160;when&#160;&#160;called.&#160;&#160;They&#160;&#160;are&#160;&#160;executed&#160;&#160;in&#160;<br/>the&#160;context&#160;of&#160;the&#160;calling&#160;task.&#160;This&#160;means,&#160;that&#160;behavior&#160;depends&#160;on&#160;the&#160;characteristics&#160;of&#160;<br/>the&#160;calling&#160;task&#160;and&#160;not&#160;on&#160;the&#160;NVM.&#160;For&#160;example,&#160;if&#160;the&#160;calling&#160;task&#160;is&#160;a&#160;non-preemptive&#160;<br/>one,&#160;the&#160;synchronous&#160;NVM&#160;request&#160;will&#160;be&#160;executed&#160;until&#160;it&#160;has&#160;finished.&#160;Otherwise,&#160;if&#160;the&#160;<br/>calling&#160;&#160;task&#160;&#160;is&#160;&#160;a&#160;&#160;preemptive&#160;&#160;one,&#160;&#160;the&#160;&#160;synchronous&#160;&#160;NVM&#160;&#160;request&#160;&#160;can&#160;&#160;be&#160;&#160;preempted&#160;&#160;by&#160;<br/>another higher&#160;prioritized&#160;task.&#160;<br/>Following&#160;NVM&#160;API&#160;services&#160;initiate&#160;synchronous requests:&#160;<br/><b>&gt;&#160;&#160;</b>NvM_Init()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_SetDataIndex()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_GetDataIndex()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_SetBlockProtection()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_SetBlockLockStatus()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_SetRamBlockStatus()&#160;(for&#160;not&#160;CRC&#160;protected&#160;blocks)&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_GetErrorStatus()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_GetVersionInfo()&#160;<br/>
<b>4.4.3&#160;</b><br/>
<b>Asynchronous&#160;Requests&#160;</b><br/>
Following&#160;NVM&#160;API&#160;services&#160;initiate&#160;asynchronous requests:&#160;<br/><b>&gt;&#160;&#160;</b>NvM_ReadBlock()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_WriteBlock()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_RestoreBlockDefaults()&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
21&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-22_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-22_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_EraseNvBlock()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_InvalidateNvBlock()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_SetRamBlockStatus()&#160;(for CRC protected&#160;blocks)&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_ReadAll()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_WriteAll()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_CancelWriteAll()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_CancelJobs()&#160;<br/>
The&#160;API&#160;call&#160;is&#160;handled&#160;in&#160;the&#160;context&#160;of&#160;the&#160;calling&#160;task.&#160;Here&#160;the&#160;service&#160;is&#160;queued&#160;and&#160;<br/>will&#160;be&#160;processed&#160;asynchronously.&#160;The&#160;processing&#160;of&#160;the&#160;queued&#160;requests&#160;is&#160;done&#160;in&#160;the&#160;<br/>context&#160;of&#160;the&#160;caller of&#160;the&#160;cyclic function&#160;NvM_MainFunction().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>RAM&#160;blocks&#160;must&#160;not&#160;be&#160;accessed&#160;by&#160;any&#160;user&#160;while a&#160;request&#160;to its&#160;associated&#160;<br/>
<b>&#160;&#160;</b>NVRAM&#160;Block&#160;is&#160;pending!&#160;<br/>
There are&#160;some&#160;exceptions to&#160;this&#160;limitation:&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_InvalidateNvBlock&#160;and&#160;NvM_EraseNvBlock&#160;don’t&#160;access any&#160;RAM&#160;<br/>
blocks.&#160;Thus&#160;access&#160;is&#160;still&#160;possible&#160;without&#160;limitations&#160;<br/>
<b>&gt;&#160;&#160;</b>While&#160;the&#160;NVM&#160;processes&#160;an&#160;NvM_WriteBlock&#160;request,&#160;the&#160;RAM&#160;block&#160;may&#160;still&#160;<br/>
read.&#160;<br/>
<b>&gt;&#160;&#160;</b>Though&#160;applications&#160;are&#160;not&#160;expected&#160;to&#160;be&#160;running&#160;while NVM&#160;processes&#160;<br/>
NvM_WriteAll,&#160;RAM&#160;blocks&#160;may&#160;be&#160;read,&#160;as during&#160;NvM_WriteBlock&#160;<br/>processing.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.4.4&#160;</b><br/>
<b>API&#160;Configuration&#160;Classes&#160;and&#160;additional&#160;API&#160;Services&#160;</b><br/>
Depending&#160;&#160;on&#160;&#160;the&#160;&#160;needs&#160;&#160;of&#160;&#160;the&#160;&#160;customer,&#160;&#160;the&#160;&#160;extent&#160;&#160;of&#160;&#160;the&#160;&#160;NVM&#160;&#160;can&#160;&#160;be&#160;&#160;tailored.&#160;Three&#160;<br/>configuration&#160;classes&#160;are&#160;specified&#160;that&#160;offer&#160;a&#160;different&#160;amount&#160;of&#160;functionality/functions&#160;of&#160;<br/>the&#160;NVM:&#160;<br/>
<b>API&#160;configuration class&#160;1:&#160;</b><br/>
A&#160;minimum&#160;set&#160;of&#160;API&#160;services&#160;is&#160;used.&#160;Queuing&#160;and&#160;job&#160;prioritization&#160;are&#160;not&#160;implemented.&#160;<br/>Following&#160;functions&#160;are&#160;available:&#160;<br/><b>&gt;&#160;&#160;</b>NvM_Init()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_GetErrorStatus()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_SetRamBlockStatus()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_ReadAll()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_WriteAll()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_CancelWriteAll()&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
22&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=23></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-23_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>API&#160;configuration class&#160;2:&#160;</b><br/>
Intermediate&#160;set&#160;of&#160;API&#160;services.&#160;Queuing&#160;and&#160;job&#160;prioritization&#160;are implemented.&#160;Following&#160;<br/>functions are&#160;available&#160;additionally&#160;according&#160;to&#160;API&#160;configuration&#160;class 1:&#160;<br/><b>&gt;&#160;&#160;</b>NvM_SetDataIndex()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_GetDataIndex()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_ReadBlock()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_WriteBlock()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_RestoreBlockDefaults()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_CancelJobs()&#160;<br/>
<b>API&#160;configuration class&#160;3:&#160;</b><br/>
All&#160;&#160;API&#160;&#160;services&#160;&#160;are&#160;&#160;available.&#160;&#160;Following&#160;&#160;functions&#160;&#160;can&#160;&#160;be&#160;&#160;used&#160;&#160;additionally&#160;&#160;to&#160;&#160;API&#160;<br/>configuration&#160;class 2:&#160;<br/><b>&gt;&#160;&#160;</b>NvM_SetBlockProtection()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_EraseNvBlock()&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_InvalidateNvBlock()&#160;<br/>
The&#160;&#160;functions&#160;&#160;NvM_SetRamBlockStatus()&#160;&#160;and&#160;&#160;NvM_GetVersionInfo()&#160;&#160;can&#160;&#160;be&#160;<br/>enabled/disabled&#160;<br/>
additionally&#160;<br/>
via&#160;<br/>
the&#160;<br/>
configuration&#160;<br/>
tool.&#160;<br/>
The&#160;<br/>
function&#160;<br/>
NvM_SetBlockLockStatus()&#160;&#160;is&#160;&#160;always&#160;&#160;available&#160;&#160;independent&#160;&#160;of&#160;&#160;API&#160;&#160;configuration&#160;<br/>class.&#160;<br/>
<b>4.4.5&#160;</b><br/>
<b>Block&#160;Handling&#160;</b><br/>
<b>4.4.5.1&#160;</b><br/>
<b>NV&#160;Blocks&#160;and Block&#160;Handles&#160;</b><br/>
Every&#160;&#160;application’s&#160;&#160;data&#160;&#160;packet&#160;&#160;that&#160;&#160;is&#160;&#160;intended&#160;&#160;for&#160;&#160;storage&#160;&#160;in&#160;&#160;NV&#160;&#160;memory&#160;&#160;is&#160;&#160;seen&#160;&#160;as&#160;&#160;a&#160;<br/>block.&#160;&#160;For&#160;&#160;each&#160;&#160;block&#160;&#160;a&#160;&#160;unique&#160;&#160;block&#160;&#160;handle&#160;&#160;(block&#160;&#160;ID)&#160;&#160;is&#160;&#160;used.&#160;&#160;For&#160;&#160;the&#160;&#160;application&#160;&#160;the&#160;<br/>(RAM)&#160;block&#160;is&#160;just&#160;one&#160;of&#160;its&#160;variables&#160;associated&#160;with&#160;the&#160;block.&#160;To&#160;write&#160;this&#160;variable&#160;to&#160;<br/>NV&#160;memory&#160;it&#160;calls&#160;the&#160;NvM_WriteBlock()&#160;service&#160;with&#160;the&#160;block&#160;handle&#160;that&#160;is&#160;mapped&#160;<br/>to&#160;this&#160;variable.&#160;The&#160;block&#160;handle&#160;names&#160;are&#160;given&#160;during&#160;configuration&#160;of&#160;the&#160;NVM.&#160;They&#160;<br/>are published&#160;to&#160;the&#160;application&#160;by&#160;including&#160;NvM.h.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
23&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=24></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-24_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-24_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-24_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-24_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The&#160;block&#160;handle names&#160;are&#160;automatically&#160;prefixed&#160;according to&#160;the&#160;AUTOSAR&#160;<br/>
&#160;&#160;Specification&#160;EcucConfiguration:&#160;<br/>
&#160;&lt;Module&#160;Definition&gt;Conf_&lt;Container&#160;Definition&#160;Short&#160;Name&gt;_&lt;Container&#160;Instance&#160;<br/>Short&#160;Name&gt;&#160;<br/>The&#160;prefixing&#160;has&#160;no&#160;influence&#160;on&#160;RTE.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;actual&#160;processing of&#160;an&#160;asynchronous&#160;job&#160;(such&#160;as a&#160;write&#160;job)&#160;is&#160;done in&#160;<br/>
<b>&#160;&#160;</b>NvM_MainFunction.&#160;Therefore it&#160;needs&#160;to&#160;be&#160;called&#160;cyclically.&#160;Usually&#160;this&#160;is&#160;done&#160;by&#160;<br/>
the&#160;Basic&#160;Software&#160;Scheduler&#160;(SCHM).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.4.5.2&#160;</b><br/>
<b>Different&#160;Types&#160;of NV Blocks&#160;</b><br/>
The&#160;application&#160;data&#160;can&#160;be&#160;stored&#160;in&#160;different&#160;types of&#160;blocks&#160;in&#160;the&#160;NV&#160;memory.&#160;<br/>
<b>4.4.5.2.1&#160;</b><br/>
<b>Native&#160;Blocks&#160;</b><br/>
This is the&#160;standard&#160;block type.&#160;The&#160;data&#160;is stored&#160;once&#160;in&#160;the&#160;NV&#160;area.&#160;<br/>
<b>4.4.5.2.2&#160;</b><br/>
<b>Redundant Blocks&#160;</b><br/>
This&#160;&#160;type&#160;&#160;is&#160;&#160;intended&#160;&#160;to&#160;&#160;increase&#160;&#160;<b>availability</b>&#160;&#160;of&#160;&#160;data,&#160;&#160;in&#160;&#160;case&#160;&#160;of&#160;&#160;errors,&#160;&#160;i.e.&#160;&#160;it&#160;&#160;is&#160;&#160;not&#160;<br/>intended&#160;&#160;to&#160;&#160;provide&#160;&#160;additional&#160;&#160;error&#160;&#160;detection.&#160;&#160;The&#160;&#160;main&#160;&#160;focus&#160;&#160;lies&#160;&#160;on&#160;&#160;write&#160;&#160;aborts,&#160;<br/>especially&#160;resets&#160;due&#160;to&#160;under-voltage&#160;conditions.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>It&#160;is&#160;recommended&#160;to&#160;configure CRC&#160;usage&#160;for&#160;Redundant&#160;Blocks,&#160;because CRC&#160;<br/>
&#160;&#160;provides&#160;adequate&#160;<b>error&#160;detection</b>,&#160;beyond the&#160;scope of&#160;aborts.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
The&#160;&#160;user&#160;&#160;data&#160;&#160;is&#160;&#160;stored&#160;&#160;twice&#160;&#160;in&#160;&#160;the&#160;&#160;NV&#160;&#160;area.&#160;&#160;While&#160;&#160;relying&#160;&#160;on&#160;&#160;lower&#160;&#160;layers’&#160;&#160;(FEE/EA)&#160;<br/>detection&#160;of&#160;aborted&#160;write&#160;accesses,&#160;NVM&#160;makes&#160;sure&#160;that&#160;a&#160;readable&#160;data&#160;block&#160;remains&#160;<br/>readable,&#160;even&#160;in&#160;case&#160;of&#160;write&#160;aborts.&#160;<br/>For&#160;that&#160;purpose,&#160;before&#160;starting&#160;a&#160;write&#160;access,&#160;NVM&#160;checks&#160;primary&#160;and&#160;secondary&#160;NV&#160;<br/>blocks&#160;to&#160;determine&#160;the&#160;adequate&#160;write&#160;order&#160;(which&#160;NV&#160;block&#160;to&#160;write&#160;first):&#160;If&#160;it&#160;detects&#160;a&#160;<br/>defective&#160;NV&#160;Block,&#160;it&#160;is&#160;written&#160;in&#160;preference&#160;to&#160;a&#160;valid&#160;NV&#160;Block.&#160;If&#160;writing&#160;to&#160;one&#160;single&#160;<br/>NV&#160;Block&#160;failed,&#160;the&#160;NVM&#160;reports&#160;the&#160;error&#160;NVM_E_REQ_FAILED&#160;(see&#160;chapte<a href="TechnicalReference_NvMs.html#35">r&#160;4.5.2)</a>&#160;to&#160;<br/>the&#160;&#160;DEM.&#160;&#160;If&#160;&#160;writing&#160;&#160;to&#160;&#160;primary&#160;&#160;NV&#160;&#160;block&#160;&#160;failed,&#160;&#160;NVM&#160;&#160;ends&#160;&#160;the&#160;&#160;request&#160;&#160;always&#160;&#160;with&#160;&#160;a&#160;<br/>negative&#160;&#160;job&#160;&#160;result.&#160;&#160;If&#160;the&#160;&#160;primary&#160;&#160;NV&#160;&#160;block&#160;&#160;was&#160;&#160;written&#160;&#160;successfully,&#160;&#160;the&#160;&#160;request&#160;&#160;always&#160;<br/>ends with&#160;a&#160;positive&#160;job&#160;result,&#160;even&#160;when&#160;the&#160;secondary&#160;NV&#160;block&#160;failed.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
24&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=25></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-25_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-25_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-25_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-25_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>NVM&#160;does not&#160;check&#160;any&#160;data&#160;to&#160;determine&#160;the&#160;write order.&#160;Rather,&#160;it&#160;just&#160;checks&#160;<br/>
&#160;&#160;whether&#160;lower&#160;layers&#160;would&#160;find&#160;valid data instances (i.e.&#160;whether&#160;they&#160;successfully&#160;<br/>
read a&#160;block’s&#160;first&#160;data&#160;byte).&#160;At&#160;this&#160;point,&#160;NVM&#160;relies on&#160;lower&#160;layers’&#160;abort&#160;detection&#160;<br/>capabilities.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>NVM&#160;always&#160;attempts&#160;writing&#160;both NV&#160;blocks,&#160;regardless of&#160;errors&#160;reported by&#160;lower&#160;<br/>
&#160;&#160;layers.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;A&#160;read&#160;request&#160;is&#160;successful&#160;even&#160;if&#160;one&#160;block&#160;is&#160;corrupted&#160;but&#160;the&#160;&#160;other&#160;block&#160;could&#160;be&#160;<br/>read.&#160;&#160;An&#160;&#160;erase&#160;&#160;or&#160;&#160;invalidate&#160;&#160;request&#160;&#160;is&#160;&#160;only&#160;&#160;successful&#160;&#160;if&#160;&#160;both&#160;&#160;blocks&#160;&#160;could&#160;&#160;be&#160;&#160;erased&#160;<br/>respectively&#160;invalidated.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>After&#160;a write abort,&#160;the&#160;“age”&#160;of&#160;data is&#160;not&#160;defined.&#160;NVM&#160;may&#160;deliver&#160;previous&#160;or&#160;recent&#160;<br/>
&#160;&#160;data;&#160;in&#160;fact&#160;it&#160;does&#160;not&#160;distinguish&#160;them.&#160;Before NVM&#160;completed&#160;the&#160;result&#160;with&#160;<br/>
NVM_REQ_OK,&#160;clients&#160;shall&#160;make&#160;no&#160;assumption&#160;on&#160;“age”&#160;of&#160;data&#160;in NV&#160;memory.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.4.5.2.3&#160;</b><br/>
<b>Dataset Blocks&#160;</b><br/>
A&#160;dataset&#160;block&#160;can&#160;be&#160;seen&#160;as&#160;an&#160;array.&#160;A&#160;configurable&#160;number&#160;of&#160;instances&#160;of&#160;this&#160;block&#160;<br/>are&#160;stored&#160;in&#160;NV-memory.&#160;In&#160;the&#160;RAM&#160;area&#160;there&#160;is&#160;only&#160;one&#160;RAM&#160;buffer.&#160;The&#160;appropriate&#160;<br/>NV&#160;block&#160;instance&#160;is selected&#160;by&#160;the&#160;so&#160;called&#160;<b>data&#160;index</b>.&#160;The&#160;data&#160;index&#160;can&#160;be&#160;read&#160;and&#160;<br/>set&#160;by&#160;synchronous&#160;API&#160;services&#160;NvM_GetDataIndex()&#160;and&#160;NVM_SetDataIndex().&#160;<br/>
Concept&#160;<br/>
<b>Description&#160;</b><br/>
Block&#160;<br/>
General&#160;notion&#160;of&#160;the&#160;structure&#160;composed&#160;of&#160;data,&#160;state&#160;and CRC.&#160;It&#160;is&#160;<br/>spread over&#160;RAM,&#160;ROM&#160;and&#160;NVRAM.&#160;<br/>
NV&#160;Block&#160;<br/>
One&#160;block&#160;in NVRAM&#160;–&#160;CRC&#160;is&#160;optional.&#160;<br/>
NV&#160;Block of&#160;<br/>
One&#160;NV&#160;Block&#160;of&#160;specified type.&#160;<br/>
<b>&gt;&#160;&#160;</b>Native type&#160;<br/><b>&gt;&#160;&#160;</b>Redundant&#160;type&#160;<br/><b>&gt;&#160;&#160;</b>Dataset&#160;type&#160;<br/>RAM&#160;Block&#160;<br/>
One&#160;data Block&#160;in RAM.&#160;The&#160;data&#160;is&#160;shared&#160;by&#160;NVRAM&#160;Manager&#160;and&#160;<br/>application.&#160;E.&#160;g.&#160;application&#160;writes data&#160;to&#160;this&#160;block&#160;and&#160;requests&#160;<br/>NVRAM&#160;Manager&#160;to write it&#160;into&#160;NVRAM.&#160;<br/>
ROM&#160;Block&#160;<br/>
One&#160;data block&#160;in ROM.&#160;Default&#160;data supplied&#160;by&#160;application.&#160;<br/>
NVRAM&#160;Block&#160;<br/>
A&#160;logical&#160;composition&#160;of&#160;one RAM&#160;block&#160;and its&#160;corresponding&#160;NV&#160;and&#160;<br/>ROM&#160;Block.&#160;<br/>
NV&#160;=&#160;NVRAM&#160;<br/>
Non-volatile memory.&#160;Actually&#160;a synonym&#160;for&#160;Flash&#160;or&#160;EEPROM&#160;devices.&#160;<br/>
Table&#160;4-3&#160;&#160;<br/>
Block&#160;concept&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
25&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=26></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-26_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-26_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>4.4.5.3&#160;</b><br/>
<b>Permanent&#160;and non-permanent RAM&#160;Blocks&#160;</b><br/>
The&#160;&#160;RAM&#160;&#160;block&#160;&#160;(application&#160;&#160;variable)&#160;&#160;can&#160;&#160;be&#160;&#160;either&#160;&#160;permanent&#160;&#160;or&#160;&#160;non-permanent.&#160;&#160;A&#160;<br/>permanent&#160;RAM&#160;block&#160;belongs&#160;to&#160;a&#160;NV&#160;block&#160;that&#160;is&#160;accessed&#160;only&#160;by&#160;one&#160;application.&#160;The&#160;<br/>address&#160;of&#160;the&#160;RAM&#160;block is&#160;fixed&#160;and&#160;is stored&#160;in&#160;the&#160;configuration&#160;of&#160;the&#160;NVM.&#160;<br/>It&#160;&#160;is&#160;&#160;also&#160;&#160;possible&#160;&#160;to&#160;&#160;have&#160;&#160;multiple&#160;&#160;applications&#160;&#160;accessing&#160;&#160;the&#160;&#160;same&#160;&#160;NV&#160;&#160;block.&#160;&#160;Each&#160;<br/>application&#160;uses&#160;its&#160;own&#160;RAM&#160;block.&#160;In&#160;this&#160;case&#160;the&#160;RAM&#160;block&#160;is&#160;called&#160;non-permanent.&#160;<br/>As&#160;the&#160;RAM&#160;address&#160;is&#160;not&#160;stored&#160;(and&#160;may&#160;vary)&#160;a&#160;pointer&#160;must&#160;be&#160;given&#160;for&#160;reading&#160;and&#160;<br/>writing&#160;a&#160;non-permanent&#160;block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Asynchronous&#160;API&#160;functions&#160;can&#160;be&#160;reentered&#160;by&#160;different&#160;tasks.&#160;So it&#160;is&#160;possible&#160;that&#160;<br/>
<b>&#160;&#160;</b>several&#160;tasks&#160;queue&#160;for&#160;example a&#160;write job&#160;at&#160;the same&#160;time&#160;(a&#160;task&#160;with higher&#160;priority&#160;<br/>
might&#160;interrupt&#160;a lower&#160;one).&#160;But&#160;it&#160;is&#160;not&#160;possible to&#160;queue&#160;the&#160;same&#160;block multiple&#160;<br/>times&#160;(neither&#160;by&#160;different&#160;tasks&#160;nor&#160;for&#160;different&#160;jobs).&#160;So if&#160;for&#160;instance a&#160;read job&#160;for&#160;<br/>block 5&#160;is&#160;queued,&#160;an&#160;erase&#160;job&#160;for&#160;this&#160;block&#160;can’t&#160;be&#160;queued&#160;before&#160;the&#160;read job&#160;is&#160;<br/>finished.&#160;<br/>If&#160;one block&#160;is&#160;used&#160;by&#160;multiple tasks,&#160;which is a&#160;common&#160;task&#160;for&#160;non-permanent&#160;RAM&#160;<br/>blocks,&#160;the&#160;application&#160;is&#160;responsible&#160;for&#160;synchronization.&#160;Of&#160;course&#160;if,&#160;for&#160;example,&#160;an&#160;<br/>erase&#160;request&#160;is&#160;in process&#160;the&#160;RAM&#160;block&#160;could&#160;be&#160;read&#160;or&#160;written&#160;without&#160;any&#160;effect&#160;to&#160;<br/>the&#160;result&#160;of&#160;the&#160;erase&#160;job.&#160;The&#160;only&#160;problem&#160;is&#160;that&#160;the&#160;NVM&#160;does not&#160;offer&#160;any&#160;<br/>information&#160;to an&#160;application what&#160;service is currently&#160;processed&#160;for&#160;a&#160;block.&#160;The&#160;<br/>application that&#160;initiated&#160;the&#160;service of&#160;course does&#160;know,&#160;but&#160;a different&#160;application that&#160;<br/>also uses&#160;the&#160;block&#160;does&#160;not.&#160;So&#160;the&#160;safest&#160;way&#160;for&#160;block&#160;access&#160;is&#160;not&#160;to&#160;use&#160;the&#160;RAM&#160;<br/>block as&#160;long&#160;as&#160;it&#160;is&#160;<b>pending</b>.&#160;This&#160;way&#160;RAM&#160;inconsistency&#160;can&#160;be&#160;avoided definitively.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.4.5.4&#160;</b><br/>
<b>ROM&#160;Defaults&#160;</b><br/>
ROM&#160;defaults&#160;can&#160;be&#160;assigned&#160;to&#160;any&#160;NVRAM&#160;block.&#160;The&#160;ROM&#160;defaults&#160;block&#160;is&#160;provided&#160;<br/>by&#160;the&#160;application.&#160;Alternatively,&#160;an&#160;initialization&#160;callback&#160;(see<a href="TechnicalReference_NvMs.html#29">&#160;4.4.13)</a>&#160;can&#160;be&#160;used.&#160;These&#160;<br/>features&#160;&#160;are&#160;&#160;selected&#160;&#160;during&#160;&#160;configuration.&#160;&#160;It&#160;&#160;is&#160;&#160;only&#160;&#160;possible&#160;&#160;to&#160;&#160;configure&#160;&#160;either&#160;&#160;ROM&#160;<br/>defaults or&#160;an&#160;initialization&#160;callback&#160;for&#160;a&#160;block.&#160;<br/>
ROM&#160;defaults&#160;can&#160;be&#160;read&#160;explicit&#160;(by&#160;a&#160;call&#160;of&#160;NvM_RestoreBlockDefaults()).&#160;ROM&#160;<br/>defaults&#160;&#160;will&#160;&#160;also&#160;&#160;be&#160;&#160;read&#160;&#160;implicitly&#160;&#160;during&#160;&#160;a&#160;&#160;read&#160;&#160;request,&#160;&#160;if&#160;&#160;no&#160;&#160;valid&#160;&#160;data&#160;&#160;could&#160;&#160;be&#160;&#160;read&#160;<br/>from&#160;&#160;NV-memory,&#160;&#160;either&#160;&#160;due&#160;&#160;to&#160;&#160;a&#160;&#160;CRC&#160;&#160;error&#160;&#160;or&#160;&#160;because&#160;&#160;of&#160;&#160;a&#160;&#160;failure&#160;&#160;reported&#160;&#160;by&#160;&#160;the&#160;<br/>underlying&#160;MemHwA&#160;via&#160;MEMIF.&#160;<br/>
<b>4.4.5.5&#160;</b><br/>
<b>Checksum&#160;</b><br/>
For&#160;&#160;each&#160;&#160;block&#160;&#160;an&#160;&#160;optional&#160;&#160;checksum&#160;&#160;can&#160;&#160;be&#160;&#160;configured.&#160;&#160;This&#160;&#160;checksum&#160;&#160;can&#160;&#160;be&#160;&#160;either&#160;<br/>CRC16&#160;or&#160;CRC32.&#160;The&#160;checksum&#160;will&#160;be&#160;appended&#160;to&#160;user&#160;data;&#160;in&#160;NV&#160;memory&#160;they&#160;will&#160;<br/>be&#160;stored&#160;consecutively&#160;in&#160;one&#160;single&#160;NV&#160;block.&#160;<br/>If&#160;&#160;<b>Internal&#160;&#160;Buffer&#160;&#160;for&#160;&#160;CRC&#160;&#160;Handling</b>&#160;&#160;is&#160;&#160;disabled,&#160;&#160;Storage&#160;for&#160;&#160;CRC&#160;&#160;must&#160;&#160;be&#160;provided&#160;&#160;by&#160;<br/>every&#160;&#160;single&#160;&#160;user;&#160;&#160;otherwise&#160;&#160;NVM&#160;&#160;provides&#160;&#160;an&#160;&#160;internal&#160;&#160;buffer.&#160;&#160;In&#160;&#160;this&#160;&#160;case&#160;&#160;it&#160;&#160;copies&#160;&#160;user&#160;<br/>data&#160;(associated&#160;with&#160;NVRAM&#160;blocks&#160;configured&#160;with&#160;CRC)&#160;into&#160;an&#160;internal&#160;buffer,&#160;instead&#160;<br/>of&#160;&#160;directly&#160;&#160;passing&#160;&#160;them&#160;&#160;down&#160;&#160;to&#160;&#160;lower&#160;&#160;layers.&#160;&#160;Here,&#160;&#160;data&#160;&#160;gets&#160;&#160;appended&#160;&#160;with&#160;&#160;CRC,&#160;&#160;in&#160;<br/>order&#160;to&#160;keep&#160;both&#160;within&#160;one&#160;NV&#160;block,&#160;which&#160;requires&#160;NVM&#160;to&#160;pass&#160;both&#160;down&#160;with&#160;one&#160;<br/>single&#160;write&#160;request.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
26&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=27></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-27_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-27_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
If&#160;&#160;“Calc&#160;&#160;RAM&#160;&#160;CRC”&#160;&#160;was&#160;&#160;additionally&#160;&#160;enabled,&#160;&#160;NVM&#160;&#160;will&#160;&#160;internally&#160;&#160;store&#160;&#160;CRC&#160;&#160;values&#160;&#160;in&#160;<br/>RAM,&#160;&#160;in&#160;&#160;order&#160;&#160;to&#160;&#160;check&#160;&#160;against&#160;&#160;them&#160;&#160;during&#160;&#160;NvM_ReadAll&#160;&#160;processing.&#160;&#160;Without&#160;&#160;internal&#160;<br/>buffering,&#160;additional space&#160;in&#160;RAM&#160;block&#160;serves&#160;for this purpose.&#160;<br/>
<b>4.4.6&#160;</b><br/>
<b>Prioritized&#160;or non-prioritized Queuing of&#160;asynchronous&#160;Requests&#160;</b><br/>
As&#160;mentioned&#160;before,&#160;asynchronous&#160;services&#160;are&#160;not&#160;processed&#160;immediately&#160;but&#160;queued&#160;<br/>and&#160;&#160;processed&#160;&#160;asynchronously&#160;&#160;by&#160;&#160;the&#160;&#160;NvM_MainFunction().&#160;&#160;This&#160;&#160;is&#160;&#160;necessary&#160;&#160;to&#160;<br/>decrease&#160;the&#160;runtime&#160;of&#160;application&#160;tasks and&#160;to&#160;increase&#160;the&#160;predictability&#160;of&#160;their&#160;duration&#160;<br/>(synchronous&#160;&#160;write&#160;&#160;jobs&#160;&#160;on&#160;&#160;an&#160;&#160;EEPROM&#160;&#160;or&#160;&#160;Flash&#160;&#160;would&#160;&#160;block&#160;&#160;your&#160;&#160;task&#160;&#160;for&#160;&#160;multiple&#160;<br/>milliseconds&#160;up&#160;to&#160;one&#160;second).&#160;&#160;<br/>Jobs&#160;&#160;can&#160;&#160;be&#160;&#160;queued&#160;&#160;either&#160;&#160;prioritized&#160;&#160;or&#160;&#160;non-prioritized,&#160;&#160;depending&#160;&#160;on&#160;&#160;the&#160;&#160;user&#160;<br/>configuration.&#160;&#160;<br/>If&#160;&#160;job&#160;&#160;prioritization&#160;&#160;is&#160;&#160;configured,&#160;&#160;the&#160;&#160;priorities&#160;&#160;0&#160;&#160;(immediate&#160;&#160;priority)&#160;&#160;until&#160;&#160;255&#160;&#160;(lowest&#160;<br/>priority)&#160;can&#160;be&#160;selected&#160;for&#160;a&#160;block.&#160;It&#160;is&#160;important&#160;that&#160;the&#160;priority&#160;depends&#160;on&#160;the&#160;block,&#160;<br/>rather&#160;than&#160;the&#160;request.&#160;Multi&#160;block&#160;requests&#160;always&#160;have&#160;a&#160;priority&#160;value&#160;greater&#160;than&#160;255,&#160;<br/>i.e.&#160;their&#160;priority&#160;is&#160;less&#160;than&#160;the&#160;lowest&#160;block&#160;specific&#160;priority;&#160;they&#160;will&#160;be&#160;processed&#160;after&#160;<br/>all&#160;single&#160;block&#160;requests have&#160;been&#160;completed.&#160;<br/>If&#160;block&#160;prioritization&#160;is not&#160;selected,&#160;the&#160;job&#160;queue&#160;works as a&#160;FIFO&#160;buffer.&#160;<br/>
<b>4.4.7&#160;</b><br/>
<b>Asynchronous&#160;Job-End Polling&#160;</b><br/>
As&#160;&#160;alluded&#160;&#160;before,&#160;&#160;asynchronous&#160;&#160;requests&#160;&#160;are&#160;&#160;processed&#160;&#160;in&#160;&#160;the&#160;&#160;background.&#160;&#160;The&#160;<br/>application&#160;&#160;has&#160;&#160;the&#160;&#160;possibility&#160;&#160;to&#160;&#160;poll&#160;&#160;the&#160;&#160;NVM&#160;&#160;for&#160;&#160;the&#160;&#160;end&#160;&#160;of&#160;&#160;the&#160;&#160;service&#160;&#160;by&#160;&#160;calling&#160;<br/>NvM_GetErrorStatus().&#160;&#160;NVM_REQ_PENDING&#160;&#160;will&#160;&#160;be&#160;&#160;returned&#160;&#160;as&#160;&#160;long&#160;&#160;as&#160;&#160;the&#160;&#160;job&#160;&#160;is&#160;<br/>queued&#160;or&#160;in&#160;&#160;process.&#160;Once&#160;the&#160;job&#160;is&#160;finished&#160;&#160;NvM_GetErrorStatus()&#160;&#160;will&#160;&#160;return&#160;&#160;the&#160;<br/>job&#160;result.&#160;<br/>
<b>4.4.8&#160;</b><br/>
<b>Single&#160;Block&#160;Job&#160;End&#160;Notifications&#160;</b><br/>
Alternatively&#160;&#160;to&#160;&#160;poll&#160;&#160;for&#160;&#160;the&#160;&#160;job-end,&#160;&#160;a&#160;&#160;job&#160;&#160;end&#160;&#160;notification&#160;&#160;can&#160;&#160;be&#160;&#160;implemented&#160;&#160;and&#160;<br/>configured&#160;for&#160;every&#160;block.&#160;NvM&#160;invokes&#160;the&#160;notification&#160;each&#160;time&#160;a&#160;job&#160;was&#160;processed&#160;for&#160;<br/>the&#160;block&#160;and&#160;informs&#160;about&#160;the&#160;finished&#160;job&#160;and&#160;its&#160;result via&#160;parameter.&#160;<br/>The&#160;return value&#160;of&#160;the&#160;functions is specified&#160;but&#160;will not&#160;be&#160;used&#160;by&#160;the&#160;NVM.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>There&#160;&#160;are&#160;&#160;two&#160;&#160;different&#160;&#160;exceptions&#160;&#160;where&#160;&#160;the&#160;&#160;NvM&#160;&#160;does&#160;&#160;not&#160;&#160;invoke&#160;&#160;the&#160;&#160;job&#160;&#160;end&#160;<br/>
&#160;&#160;notification:&#160;<br/>
<b>&gt;&#160;&#160;</b>During&#160;NvM_WriteAll()&#160;the&#160;single&#160;block&#160;job&#160;end notification&#160;won’t&#160;be&#160;called&#160;<br/>
<b>&gt;&#160;&#160;</b>During&#160;NvM_ReadAll()&#160;the&#160;single&#160;block&#160;job&#160;end&#160;notification&#160;won’t&#160;be&#160;called,&#160;if&#160;<br/>
the&#160;block&#160;is&#160;configured&#160;with&#160;enabled&#160;NvMUseServicePorts.&#160;This&#160;will&#160;be&#160;done&#160;<br/>because&#160;during&#160;the&#160;NvM_ReadAll()&#160;the&#160;RTE&#160;is&#160;not&#160;initialed&#160;yet&#160;and&#160;callback&#160;<br/>invocations&#160;&#160;could&#160;&#160;lead&#160;&#160;to&#160;&#160;DET&#160;&#160;error.&#160;&#160;For&#160;&#160;all&#160;&#160;blocks&#160;&#160;with&#160;&#160;disabled&#160;<br/>NvMUseServicePorts&#160;the&#160;callbacks&#160;will&#160;be&#160;invoked&#160;during&#160;NvM_ReadAll()&#160;<br/>without&#160;restrictions.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
27&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=28></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-28_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-28_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-28_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>4.4.9&#160;</b><br/>
<b>Immediate&#160;Priority&#160;Jobs&#160;and&#160;Cancellation&#160;of&#160;current&#160;Jobs&#160;</b><br/>
If&#160;job&#160;prioritization&#160;is&#160;selected,&#160;blocks&#160;of&#160;different&#160;priority&#160;exist.&#160;A&#160;new&#160;queued,&#160;higher&#160;prior&#160;<br/>job,&#160;(e.g.&#160;priority&#160;5)&#160;does&#160;not&#160;cancel/suspend&#160;a&#160;lower&#160;prioritized&#160;job&#160;(e.g.&#160;priority&#160;10)&#160;if&#160;this&#160;<br/>job&#160;is already&#160;processed.&#160;<br/>The&#160;only&#160;&#160;exceptions&#160;for&#160;this&#160;are&#160;&#160;immediate&#160;priority&#160;jobs&#160;(priority&#160;0)&#160;&#160;which&#160;&#160;can&#160;suspend&#160;a&#160;<br/>running&#160;&#160;job&#160;&#160;that&#160;&#160;priority&#160;&#160;is&#160;&#160;less.&#160;&#160;The&#160;&#160;suspended&#160;&#160;job&#160;&#160;will&#160;&#160;be&#160;&#160;restarted&#160;&#160;after&#160;&#160;all&#160;&#160;jobs&#160;&#160;with&#160;<br/>higher priority&#160;are finished.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Pay&#160;attention&#160;that&#160;only&#160;blocks with high&#160;priority&#160;(0)&#160;can&#160;be&#160;erased&#160;(by&#160;using&#160;API&#160;<br/>
<b>&#160;&#160;</b>NvM_EraseNvBlock)!&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.4.10&#160;&#160;Asynchronous&#160;CRC&#160;Calculation&#160;<br/></b>The&#160;&#160;(re-)calculation&#160;&#160;of&#160;&#160;a&#160;&#160;block’s&#160;&#160;CRC&#160;&#160;is&#160;&#160;done&#160;&#160;asynchronously&#160;&#160;by&#160;&#160;the&#160;<br/>NvM_MainFunction().&#160;A&#160;CRC&#160;protected&#160;block’s&#160;CRC&#160;value&#160;is&#160;calculated&#160;every&#160;time&#160;the&#160;<br/>block&#160;shall&#160;be&#160;written&#160;to&#160;NV&#160;memory.&#160;If&#160;a&#160;block&#160;is&#160;read&#160;from&#160;NV&#160;memory&#160;the&#160;CRC&#160;value&#160;is&#160;<br/>recalculated&#160;and&#160;compared&#160;to&#160;the&#160;one&#160;that&#160;was&#160;just&#160;read&#160;from&#160;NV&#160;memory.&#160;If&#160;configuration&#160;<br/>option&#160;&#160;‘Calculate&#160;&#160;RAM&#160;&#160;CRC’&#160;&#160;was&#160;&#160;enabled&#160;&#160;for&#160;&#160;a&#160;&#160;block,&#160;&#160;its&#160;&#160;recently&#160;&#160;calculated&#160;&#160;CRC&#160;&#160;value&#160;<br/>will&#160;be&#160;stored&#160;in&#160;RAM&#160;for later use.&#160;<br/>
If&#160;NvM_SetRamBlockStatus(TRUE)&#160;is&#160;called,&#160;the&#160;re-calculation&#160;of&#160;the&#160;CRC&#160;value&#160;over&#160;<br/>the&#160;&#160;RAM&#160;block’s&#160;&#160;data&#160;&#160;will&#160;&#160;also&#160;&#160;be&#160;&#160;initiated,&#160;&#160;if&#160;&#160;‘Calculate&#160;&#160;RAM&#160;&#160;CRC’&#160;&#160;was&#160;&#160;enabled&#160;for&#160;&#160;this&#160;<br/>block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The&#160;purpose&#160;of&#160;requesting recalculation of&#160;the&#160;RAM&#160;CRC&#160;with every&#160;call&#160;to&#160;<br/>
&#160;&#160;NvM_SetRamBlockStatus&#160;is&#160;to&#160;provide&#160;the&#160;possibility&#160;to re-use&#160;the&#160;RAM&#160;data&#160;even&#160;if&#160;<br/>
a reset&#160;(short&#160;power-loss,&#160;watchdog-reset)&#160;occurred.&#160;<br/>NvM&#160;attempts&#160;so&#160;during&#160;NvM_ReadAll&#160;processing&#160;for&#160;all&#160;NVRAM&#160;blocks&#160;having&#160;‘Read&#160;<br/>during&#160;ReadAll’&#160;and ‘Calc&#160;RAM&#160;CRC’&#160;enabled&#160;in their&#160;configuration:&#160;If&#160;the&#160;block is&#160;<br/>internally&#160;still&#160;marked&#160;as&#160;VALID,&#160;NVM&#160;calculates&#160;the&#160;CRC&#160;value&#160;over&#160;current&#160;RAM&#160;<br/>block’s&#160;contents&#160;and&#160;compares&#160;it&#160;with the&#160;value&#160;stored&#160;elsewhere.&#160;If&#160;thy&#160;match&#160;it&#160;does&#160;<br/>not&#160;touch RAM&#160;contents;&#160;rather&#160;NVM&#160;pretends having&#160;successfully&#160;read those&#160;values&#160;<br/>from&#160;NV.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
The&#160;CRC&#160;calculation&#160;is&#160;done&#160;in&#160;the&#160;cyclically&#160;called&#160;service&#160;NvM_MainFunction().&#160;To&#160;be&#160;<br/>able&#160;to&#160;split&#160;a&#160;CRC&#160;calculation&#160;job,&#160;the&#160;number&#160;of&#160;CRC&#160;bytes&#160;to&#160;be&#160;calculated&#160;during&#160;one&#160;<br/>cycle&#160;can&#160;be&#160;configured&#160;via&#160;the&#160;configuration&#160;tool.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
28&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=29></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-29_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-29_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-29_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>If&#160;an&#160;AUTOSAR&#160;compliant&#160;CRC&#160;library&#160;implementation is&#160;used,&#160;the&#160;NVM&#160;ensures&#160;for&#160;all&#160;<br/>
&#160;&#160;supported&#160;CRC&#160;types&#160;that&#160;calculated&#160;values&#160;do&#160;not&#160;depend&#160;on&#160;the&#160;number&#160;of&#160;cycles&#160;<br/>
needed&#160;for&#160;calculation,&#160;i.e.&#160;for&#160;any&#160;number&#160;of&#160;calculation steps&#160;any&#160;CRC&#160;value&#160;is&#160;<br/>guaranteed&#160;to&#160;be&#160;equal&#160;to the&#160;CRC&#160;value&#160;calculated&#160;over&#160;same data with&#160;one single&#160;<br/>call&#160;to&#160;the&#160;appropriate&#160;library&#160;function.&#160;<br/>For&#160;CRC32&#160;this&#160;is&#160;a&#160;feature&#160;in NvM,&#160;beyond the&#160;requirements&#160;of&#160;AUTOSAR.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.4.11&#160;&#160;Write&#160;Protection&#160;<br/></b>The&#160;&#160;NVM&#160;&#160;supports&#160;&#160;write&#160;&#160;protection&#160;&#160;of&#160;&#160;any&#160;&#160;NV&#160;&#160;Block.&#160;&#160;The&#160;&#160;API&#160;&#160;services&#160;<br/>NvM_SetBlockProtection()&#160;is&#160;used&#160;for&#160;locking&#160;and&#160;unlocking&#160;a&#160;NV&#160;block.&#160;The&#160;initial&#160;<br/>write&#160;protection&#160;(after reset) can&#160;be&#160;configured.&#160;It&#160;will be&#160;set&#160;during&#160;NvM_ReadAll().&#160;<br/>
A&#160;&#160;block&#160;&#160;can&#160;&#160;also&#160;&#160;be&#160;&#160;configured&#160;&#160;to&#160;&#160;be&#160;&#160;written&#160;&#160;once.&#160;The&#160;&#160;write&#160;&#160;protection&#160;&#160;of&#160;&#160;such&#160;&#160;a&#160;&#160;block&#160;<br/>cannot&#160;be&#160;removed&#160;by&#160;an&#160;API&#160;call.&#160;Nevertheless,&#160;it&#160;is&#160;possible&#160;to&#160;rewrite&#160;such&#160;a&#160;block&#160;by&#160;<br/>using&#160;the&#160;extended&#160;runtime&#160;preparation&#160;during&#160;NvM_ReadAll().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Pay&#160;attention,&#160;for&#160;a&#160;dataset&#160;block&#160;configured&#160;as&#160;write once only&#160;one dataset&#160;can&#160;be&#160;<br/>
<b>&#160;&#160;</b>written.&#160;The&#160;other&#160;datasets&#160;can’t&#160;be&#160;written&#160;any&#160;more.&#160;The&#160;whole block&#160;is&#160;protected&#160;<br/>
after&#160;first&#160;write.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.4.12&#160;&#160;Erase&#160;and Invalidate&#160;<br/></b>There&#160;&#160;are&#160;&#160;two&#160;&#160;services&#160;&#160;specified&#160;&#160;for&#160;&#160;making&#160;&#160;a&#160;&#160;NV&#160;&#160;block&#160;&#160;unreadable:&#160;<br/>NvM_EraseNvBlock()&#160;and&#160;NvM_InvalidateNvBlock().&#160;<br/>
Invalidating&#160;&#160;a&#160;&#160;block&#160;&#160;is&#160;&#160;much&#160;&#160;faster&#160;&#160;than&#160;&#160;erasing&#160;&#160;the&#160;&#160;block&#160;&#160;because&#160;&#160;only&#160;&#160;the&#160;&#160;status&#160;<br/>information&#160;will be&#160;invalidated.&#160;<br/>
<b>4.4.13&#160;&#160;Init&#160;Block&#160;Callbacks&#160;<br/></b>For&#160;any&#160;block&#160;&#160;ROM&#160;defaults&#160;&#160;(see<a href="TechnicalReference_NvMs.html#26">&#160;&#160;4.4.5.4)</a>&#160;&#160;or&#160;an&#160;initialization&#160;callback&#160;can&#160;be&#160;configured.&#160;<br/>The&#160;&#160;initialization&#160;&#160;callback&#160;&#160;is&#160;&#160;called&#160;&#160;every&#160;&#160;time&#160;&#160;the&#160;&#160;default&#160;&#160;values&#160;&#160;of&#160;&#160;the&#160;&#160;block&#160;&#160;have&#160;&#160;to&#160;be&#160;<br/>loaded,&#160;e.g.&#160;during&#160;a&#160;restore&#160;block&#160;defaults service&#160;or for&#160;failed&#160;read&#160;jobs.&#160;&#160;<br/>In&#160;contrast&#160;to&#160;ROM&#160;defaults&#160;NvM&#160;does&#160;not&#160;update&#160;the&#160;RAM&#160;data&#160;itself,&#160;this&#160;shall&#160;be&#160;done&#160;<br/>within&#160;the&#160;initialization&#160;callback.&#160;<br/>The&#160;return value&#160;of&#160;the&#160;functions is specified&#160;but&#160;will not&#160;be&#160;used&#160;by&#160;the&#160;NVM.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
29&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=30></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-30_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-30_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note</b>&#160;<br/>
<b>&gt;&#160;&#160;</b>Init&#160;callback&#160;is&#160;invoked&#160;when the&#160;related&#160;block&#160;is&#160;still&#160;busy,&#160;so no&#160;request&#160;shall&#160;<br/>
&#160;<br/>
be&#160;issued until&#160;the&#160;block&#160;isn’t&#160;busy&#160;any&#160;more.&#160;<br/>
<b>&gt;&#160;&#160;</b>During&#160;NvM_ReadAll()&#160;the&#160;initialization&#160;callback&#160;won’t&#160;be&#160;called,&#160;if&#160;the&#160;block&#160;is&#160;<br/>
configured&#160;&#160;with&#160;&#160;enabled&#160;&#160;NvMUseServicePorts.&#160;&#160;This&#160;&#160;will&#160;&#160;be&#160;&#160;done&#160;&#160;because&#160;<br/>during&#160;&#160;the&#160;&#160;NvM_ReadAll()&#160;&#160;the&#160;&#160;RTE&#160;&#160;is&#160;&#160;not&#160;&#160;initialed&#160;&#160;yet&#160;&#160;and&#160;&#160;callback&#160;<br/>invocations&#160;&#160;could&#160;&#160;lead&#160;&#160;to&#160;&#160;DET&#160;&#160;error.&#160;&#160;For&#160;&#160;all&#160;&#160;blocks&#160;&#160;with&#160;&#160;disabled&#160;<br/>NvMUseServicePorts&#160;the&#160;callbacks&#160;will&#160;be&#160;invoked&#160;during&#160;NvM_ReadAll()&#160;<br/>without&#160;restrictions.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.4.14&#160;&#160;Define&#160;Locking/&#160;Unlocking&#160;Services&#160;<br/></b>In&#160;preemptive&#160;systems,&#160;it&#160;is&#160;necessary&#160;to&#160;protect&#160;some&#160;actions&#160;of&#160;preemption.&#160;That&#160;means&#160;<br/>that&#160;&#160;a&#160;&#160;few&#160;&#160;NVM&#160;&#160;internal&#160;&#160;actions&#160;&#160;need&#160;&#160;to&#160;&#160;be&#160;&#160;atomic.&#160;&#160;So&#160;&#160;for&#160;&#160;protecting&#160;&#160;these&#160;&#160;sequences&#160;<br/>functions&#160;for&#160;entering&#160;and&#160;leaving&#160;such&#160;a&#160;critical&#160;section&#160;can&#160;be&#160;configured.&#160;By&#160;default&#160;the&#160;<br/>Operating&#160;System&#160;(OS) services&#160;are used.&#160;<br/>The&#160;&#160;configuration&#160;&#160;tool&#160;&#160;can&#160;&#160;be&#160;&#160;used&#160;&#160;to&#160;&#160;define&#160;&#160;or&#160;&#160;configure&#160;&#160;services&#160;&#160;such&#160;&#160;as&#160;&#160;the&#160;&#160;OSEK&#160;<br/>services&#160;GetResource(…)&#160;and&#160;ReleaseResource(…)&#160;to&#160;lock&#160;and&#160;unlock&#160;resources.&#160;To&#160;<br/>use&#160;these&#160;services&#160;of&#160;your&#160;Operating&#160;System,&#160;you&#160;must&#160;also&#160;publish&#160;the&#160;header&#160;file&#160;of&#160;the&#160;<br/>Operating&#160;System&#160;via&#160;configuration&#160;tool&#160;(in&#160;the&#160;‘MyECU’&#160;window&#160;and&#160;the&#160;included&#160;tab&#160;‘OS&#160;<br/>Services’).&#160;<br/>
<b>4.4.15&#160;&#160;Interrupts&#160;<br/></b>When&#160;&#160;interrupts&#160;&#160;occur&#160;&#160;during&#160;&#160;write&#160;&#160;accesses,&#160;&#160;they&#160;&#160;do&#160;&#160;not&#160;&#160;corrupt&#160;&#160;already&#160;&#160;saved&#160;&#160;data&#160;&#160;or&#160;<br/>data&#160;&#160;to&#160;&#160;be&#160;&#160;written.&#160;&#160;To&#160;&#160;ensure&#160;&#160;this,&#160;&#160;these&#160;&#160;critical&#160;&#160;sections&#160;&#160;have&#160;&#160;to&#160;&#160;be&#160;&#160;locked,&#160;&#160;which&#160;&#160;is&#160;<br/>configurable&#160;via&#160;configuration&#160;tool.&#160;<br/>
<b>4.4.16&#160;&#160;Data&#160;Corruption&#160;<br/></b>Write&#160;&#160;operations&#160;&#160;to&#160;&#160;non-volatile&#160;&#160;memories&#160;&#160;are&#160;&#160;non-atomic&#160;&#160;operations.&#160;&#160;A&#160;&#160;power&#160;&#160;supply&#160;<br/>failure&#160;&#160;during&#160;&#160;write&#160;&#160;accesses&#160;&#160;may&#160;&#160;lead&#160;&#160;to&#160;&#160;corrupted/invalid&#160;&#160;data.&#160;Assuring&#160;&#160;that&#160;&#160;corrupted&#160;<br/>data&#160;will not&#160;be&#160;signaled&#160;as valid&#160;is no&#160;more&#160;the&#160;task of&#160;the&#160;NVM but&#160;of&#160;the&#160;FEE&#160;or&#160;EA.&#160;<br/>
<b>4.4.17&#160;&#160;Concurrent&#160;access&#160;to NV data for DCM&#160;<br/></b>NVM&#160;&#160;provides&#160;&#160;possibility&#160;&#160;to&#160;&#160;access&#160;&#160;NV&#160;&#160;data&#160;&#160;concurrently&#160;&#160;with&#160;&#160;NVM’s&#160;&#160;applications.&#160;<br/>Therefore&#160;each&#160;configured&#160;NVRAM&#160;block&#160;has&#160;an&#160;additional&#160;alias.&#160;Aliases&#160;are&#160;neither&#160;read&#160;<br/>at&#160;&#160;start-up&#160;&#160;(during&#160;&#160;NvM_ReadAll&#160;&#160;processing)&#160;&#160;nor&#160;&#160;written&#160;&#160;at&#160;&#160;shut-down&#160;&#160;(during&#160;<br/>NvM_WriteAll&#160;&#160;processing).&#160;&#160;In&#160;&#160;fact,&#160;&#160;they&#160;&#160;are&#160;&#160;treated&#160;&#160;as&#160;&#160;NVRAM&#160;&#160;Blocks&#160;&#160;without&#160;<br/>permanent&#160;&#160;RAM&#160;&#160;block.&#160;&#160;Consequently,&#160;&#160;explicit&#160;&#160;read&#160;&#160;or&#160;&#160;write&#160;&#160;requests&#160;&#160;must&#160;&#160;supply&#160;&#160;a&#160;<br/>reference&#160;to&#160;a&#160;temporary&#160;RAM block&#160;&#160;&#160;<br/>For&#160;&#160;accessing&#160;&#160;the&#160;&#160;alias&#160;&#160;of&#160;&#160;a&#160;&#160;NVRAM&#160;&#160;block,&#160;&#160;NVM&#160;&#160;provides&#160;&#160;the&#160;&#160;global&#160;&#160;macro&#160;<br/>NvM_GetDcmBlockId(&lt;BlockId&gt;).&#160;&#160;The&#160;&#160;macro&#160;&#160;expects&#160;&#160;the&#160;&#160;BlockId&#160;&#160;of&#160;&#160;the&#160;&#160;original&#160;<br/>NVRAM&#160;&#160;block&#160;&#160;as&#160;&#160;parameter&#160;&#160;and&#160;&#160;returns&#160;&#160;the&#160;&#160;block’s&#160;&#160;alias&#160;&#160;of&#160;&#160;type&#160;&#160;NvM_BlockIdType.&#160;<br/>Only&#160;&#160;one&#160;&#160;asynchronous&#160;&#160;request&#160;&#160;of&#160;&#160;one&#160;&#160;alias&#160;&#160;can&#160;&#160;be&#160;&#160;queued&#160;&#160;at&#160;&#160;a&#160;&#160;time.&#160;&#160;Otherwise&#160;&#160;the&#160;<br/>asynchronous&#160;API&#160;returns&#160;with&#160;E_NOT_OK,&#160;which&#160;indicates&#160;that&#160;the&#160;request&#160;has&#160;not&#160;been&#160;<br/>accepted,&#160;because&#160;of&#160;the&#160;block pending&#160;state&#160;check.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
30&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=31></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-31_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-31_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-31_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
All&#160;jobs&#160;of&#160;DCM&#160;are&#160;always&#160;put&#160;into&#160;<b>Standard&#160;Job&#160;Queue</b>,&#160;even&#160;if&#160;blocks&#160;with&#160;immediate&#160;<br/>priority&#160;are&#160;requested&#160;and&#160;job&#160;prioritization&#160;&#160;was&#160;enabled.&#160;So&#160;cancellation&#160;of&#160;pending&#160;jobs&#160;<br/>by&#160;an&#160;immediate&#160;DCM-Block&#160;is avoided.&#160;The&#160;original priority&#160;itself&#160;is kept.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>It&#160;is&#160;recommended&#160;that&#160;DCM&#160;accesses NVRAM&#160;data only&#160;via aliases.&#160;Otherwise it&#160;&#160;<br/>
&#160;&#160;would be&#160;responsible&#160;for&#160;synchronization&#160;with every&#160;single NVM&#160;client&#160;(blocks’&#160;owners)&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>DCM&#160;should lock&#160;the&#160;block&#160;using&#160;NvM_SetBlockLockStatus&#160;(see&#160;chapt<a href="TechnicalReference_NvMs.html#53">er&#160;6.4.8)&#160;</a><br/>
<b>&#160;&#160;</b>before&#160;requesting&#160;jobs&#160;(via&#160;the&#160;alias,&#160;especially&#160;write requests).&#160;In&#160;case&#160;of&#160;an&#160;error&#160;<br/>
during&#160;job&#160;processing,&#160;DCM&#160;should also unlock&#160;the&#160;block&#160;again.&#160;If&#160;job&#160;processing&#160;<br/>completes&#160;successfully&#160;the&#160;block&#160;should&#160;remain locked;&#160;it&#160;will&#160;be&#160;automatically&#160;<br/>unlocked&#160;after&#160;next&#160;start-up&#160;(NvM_ReadAll&#160;processing).&#160;&#160;<br/>A&#160;lock itself&#160;only&#160;affects&#160;the&#160;original&#160;block&#160;(i.e.&#160;the&#160;alias cannot&#160;be&#160;locked).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>4.4.18&#160;&#160;Explicit&#160;synchronization mechanism&#160;between application&#160;and&#160;NVM&#160;<br/></b>NvM&#160;&#160;supports&#160;&#160;an&#160;&#160;optional&#160;&#160;explicit&#160;&#160;synchronization&#160;&#160;mechanism&#160;&#160;between&#160;&#160;application&#160;&#160;and&#160;<br/>NvM.&#160;&#160;It&#160;&#160;is&#160;&#160;realized&#160;&#160;by&#160;&#160;a&#160;&#160;RAM&#160;&#160;mirror&#160;&#160;in&#160;&#160;the&#160;&#160;NvM&#160;&#160;module.&#160;&#160;The&#160;&#160;data&#160;&#160;is&#160;&#160;transferred&#160;&#160;by&#160;&#160;the&#160;<br/>application&#160;in&#160;both&#160;directions via&#160;callback routines,&#160;called&#160;by&#160;the&#160;NvM&#160;module.&#160;<br/>The&#160;synchronization&#160;mechanism&#160;can&#160;be&#160;configured&#160;for&#160;every&#160;NVRAM&#160;block&#160;separately.&#160;If&#160;<br/>the&#160;synchronization&#160;mechanism&#160;is&#160;configured&#160;NvM&#160;uses&#160;the&#160;internal&#160;buffer&#160;as&#160;RAM&#160;mirror&#160;<br/>between&#160;&#160;NvM&#160;&#160;and&#160;&#160;application.&#160;&#160;It&#160;&#160;is&#160;&#160;the&#160;&#160;same&#160;&#160;internal&#160;&#160;buffer&#160;&#160;which&#160;&#160;is&#160;&#160;used&#160;&#160;for&#160;&#160;Crc&#160;<br/>calculation&#160;(see&#160;chapte<a href="TechnicalReference_NvMs.html#23">r&#160;4.4.5.1).&#160;</a>The&#160;size&#160;of&#160;the&#160;internal&#160;buffer&#160;is&#160;the&#160;size&#160;of&#160;the&#160;biggest&#160;<br/>configured&#160;block&#160;plus&#160;configured&#160;Crc bytes.&#160;<br/>If&#160;&#160;the&#160;&#160;synchronization&#160;&#160;mechanism&#160;&#160;is&#160;&#160;configured,&#160;&#160;both&#160;&#160;NvMWriteRamBlockToNvM&#160;&#160;and&#160;<br/>NvMReadRamBlockFromNvM&#160;must&#160;be&#160;configured.&#160;&#160;<br/>It&#160;is not&#160;useful to&#160;configure a&#160;permanent&#160;RAM&#160;block&#160;for&#160;a&#160;block&#160;which&#160;uses the&#160;<br/>synchronization&#160;mechanism.&#160;In&#160;this case&#160;the&#160;RAM block&#160;will be&#160;ignored.&#160;It&#160;is&#160;also&#160;not&#160;<br/>recommended&#160;to&#160;configure&#160;an&#160;Init callback&#160;for a&#160;block&#160;using&#160;synchronization&#160;mechanism.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
31&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=32></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-32_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-32_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-32_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-32_4.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-32_5.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-32_6.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>If&#160;Explicit&#160;Synchronization was configured&#160;for&#160;a&#160;block,&#160;clients&#160;may&#160;modify&#160;RAM&#160;contents&#160;<br/>
&#160;&#160;(which are not&#160;visible to&#160;NVM)&#160;while block&#160;is&#160;pending.&#160;In&#160;this&#160;case&#160;take&#160;care&#160;they&#160;may&#160;<br/>
get&#160;overwritten&#160;when a&#160;pending&#160;read completes.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Basic Knowledge&#160;<br/></b>By&#160;definition,&#160;this&#160;mechanism&#160;serves as&#160;permanent&#160;RAM&#160;block.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/>Calculate&#160;RAM&#160;CRC&#160;</b>and related&#160;fast&#160;re-validation of&#160;RAM&#160;data during&#160;NvM_ReadAll&#160;<br/>
&#160;&#160;processing&#160;cannot&#160;be&#160;used&#160;along with explicit&#160;synchronization mechanism.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.4.18.1&#160;&#160;Explicit synchronization mechanism&#160;during&#160;write&#160;requests&#160;<br/></b>After&#160;application&#160;issued&#160;NvM_WriteBlock,&#160;application&#160;might&#160;modify&#160;the&#160;RAM&#160;block&#160;until&#160;<br/>callback&#160;&#160;NvMWriteRamBlockToNvM&#160;&#160;is&#160;&#160;called&#160;&#160;by&#160;&#160;NvM.&#160;&#160;If&#160;&#160;NvMWriteRamBlockToNvM&#160;&#160;is&#160;<br/>called,&#160;application&#160;has&#160;to&#160;provide&#160;a&#160;consistent&#160;copy&#160;of&#160;the&#160;RAM&#160;block&#160;to&#160;the&#160;internal&#160;RAM&#160;<br/>mirror.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>During&#160;calling&#160;NvMWriteRamBlockToNvM&#160;callback&#160;related&#160;block&#160;is&#160;still&#160;busy.&#160;No&#160;<br/>
&#160;&#160;request&#160;for&#160;it&#160;shall&#160;be&#160;issued&#160;as long&#160;as block&#160;is&#160;busy.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.4.18.2&#160;&#160;Explicit synchronization mechanism&#160;during read requests&#160;<br/></b>After&#160;&#160;application&#160;&#160;issued&#160;&#160;NvM_ReadBlock,&#160;&#160;application&#160;&#160;might&#160;&#160;modify&#160;&#160;the&#160;&#160;RAM&#160;&#160;block&#160;&#160;until&#160;<br/>the&#160;<br/>
routine&#160;<br/>
NvMReadRamBlockFromNvM&#160;<br/>
is&#160;<br/>
called&#160;<br/>
by&#160;<br/>
the&#160;<br/>
NvM.&#160;<br/>
If&#160;<br/>
NvMReadRamBlockFromNvM&#160;&#160;is&#160;&#160;called,&#160;&#160;then&#160;&#160;application&#160;&#160;has&#160;&#160;to&#160;&#160;copy&#160;&#160;the&#160;&#160;data&#160;&#160;from&#160;&#160;the&#160;<br/>internal RAM&#160;mirror to&#160;the&#160;RAM&#160;block.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>During&#160;calling&#160;NvMReadRamBlockFromNvM&#160;callback&#160;related&#160;block&#160;is&#160;still&#160;busy.&#160;No&#160;<br/>
&#160;&#160;request&#160;for&#160;it&#160;shall&#160;be&#160;issued&#160;as long&#160;as block&#160;is&#160;busy.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>4.5&#160;</b><br/>
<b>Error&#160;Handling&#160;</b><br/>
<b>4.5.1&#160;</b><br/>
<b>Development&#160;Error&#160;Reporting&#160;</b><br/>
By&#160;&#160;default,&#160;&#160;development&#160;&#160;errors&#160;&#160;are&#160;&#160;reported&#160;&#160;to&#160;&#160;the&#160;&#160;DET&#160;&#160;using&#160;&#160;the&#160;&#160;service&#160;<br/>Det_ReportError()&#160;&#160;as&#160;&#160;specified&#160;&#160;in<a href="TechnicalReference_NvMs.html#6">&#160;&#160;[2],&#160;&#160;</a>if&#160;&#160;development&#160;error&#160;&#160;reporting&#160;&#160;is&#160;&#160;enabled&#160;&#160;(i.e.&#160;<br/>pre-compile&#160;parameter&#160;NVM_DEV_ERROR_DETECT == STD_ON).&#160;<br/>
The&#160;reported&#160;NVM&#160;ID&#160;can&#160;be&#160;seen&#160;here&#160;[chapte<a href="TechnicalReference_NvMs.html#15">r&#160;3]</a>.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
32&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=33></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-33_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
The&#160;&#160;reported&#160;&#160;service&#160;&#160;IDs&#160;&#160;identify&#160;&#160;the&#160;&#160;services&#160;&#160;which&#160;&#160;are&#160;&#160;described&#160;&#160;in&#160;&#160;<a href="TechnicalReference_NvMs.html#48">6.4.&#160;&#160;</a>The&#160;&#160;following&#160;<br/>table&#160;presents&#160;the&#160;service&#160;IDs and&#160;the&#160;related&#160;services:&#160;<br/>
<b>Service&#160;ID&#160;</b><br/>
<b>Service&#160;</b><br/>
0x00&#160;<br/>
NvM_Init()&#160;<br/>
0x01&#160;<br/>
NvM_SetDataIndex()&#160;<br/>
0x02&#160;<br/>
NvM_GetDataIndex()&#160;<br/>
0x03&#160;<br/>
NvM_SetBlockProtection()&#160;<br/>
0x04&#160;<br/>
NvM_GetErrorStatus()&#160;<br/>
0x05&#160;<br/>
NvM_SetRamBlockStatus()&#160;<br/>
0x06&#160;<br/>
NvM_ReadBlock()&#160;<br/>
0x07&#160;<br/>
NvM_WriteBlock()&#160;<br/>
0x08&#160;<br/>
NvM_RestoreBlockDefaults()&#160;<br/>
0x09&#160;<br/>
NvM_EraseNvBlock()&#160;<br/>
0x0A&#160;<br/>
NvM_CancelWriteAll()&#160; &#160; &#160;&#160;&#160;<br/>
0x0B&#160;<br/>
NvM_InvalidateNvBlock()&#160;<br/>
0x0C&#160;<br/>
NvM_ReadAll()&#160;<br/>
0x0D&#160;<br/>
NvM_WriteAll()&#160;<br/>
0x0E&#160;<br/>
NvM_MainFunction()&#160;<br/>
0x0F&#160;<br/>
NvM_GetVersionInfo()&#160;<br/>
0x10&#160;<br/>
NvM_CancelJobs()&#160;<br/>
0x13&#160;<br/>
NvM_SetBlockLockStatus()&#160;<br/>
Table&#160;4-4&#160;&#160;<br/>
Mapping&#160;of&#160;service&#160;IDs&#160;to&#160;services&#160;<br/>
The&#160;errors reported&#160;to&#160;DET&#160;are&#160;described&#160;in&#160;the&#160;following&#160;table:&#160;<br/>
<b>Error&#160;Code&#160;</b><br/>
<b>Description&#160;</b><br/>
0x14&#160;<br/>
NVM_E_NOT_INITIALIZED&#160;<br/>
Every&#160;API&#160;service,&#160;except&#160;NvM_Init()&#160;and&#160;<br/>NvM_GetVersionInfo(),&#160;may&#160;check&#160;if&#160;NVM&#160;has&#160;<br/>already&#160;been&#160;initialized.&#160;<br/>
0x15&#160;<br/>
NVM_E_BLOCK_PENDING&#160;<br/>
As&#160;long as&#160;an&#160;asynchronous&#160;operation&#160;on&#160;a certain&#160;<br/>Block&#160;has&#160;not&#160;been&#160;completed,&#160;no&#160;further&#160;requests&#160;<br/>belonging&#160;to&#160;this&#160;Block&#160;are allowed.&#160;&#160;<br/>
0x18&#160;<br/>
NVM_E_BLOCK_CONFIG&#160;<br/>
This&#160;service is not&#160;possible with this&#160;configuration.&#160;<br/>
0x0A&#160;<br/>
NVM_E_PARAM_BLOCK_ID&#160;<br/>
NVM&#160;API&#160;services&#160;may&#160;check,&#160;whether&#160;the&#160;passed&#160;<br/>BlockId&#160;is&#160;in the allowed range.&#160;<br/>
0x0B&#160;<br/>
NVM_E_PARAM_BLOCK_&#160;TYPE&#160;&#160;NvM_SetDataIndex()&#160;and&#160;<br/>
NvM_GetDataIndex()&#160;are&#160;restricted&#160;to&#160;Dataset&#160;<br/>bocks.&#160;If&#160;these&#160;functions&#160;are&#160;called&#160;with any&#160;other&#160;<br/>bock&#160;type,&#160;this&#160;error&#160;code&#160;is&#160;produced.&#160;<br/>NvM_RestoreBlockDefaults()&#160;is&#160;restricted&#160;to&#160;<br/>blocks&#160;configured&#160;with ROM&#160;defaults&#160;or&#160;an&#160;init&#160;<br/>callback.&#160;<br/>
0x0C&#160;<br/>
NVM_E_PARAM_BLOCK_DATA_<br/>
NvM_SetDataIndex()&#160;may&#160;check&#160;the&#160;range&#160;of&#160;the&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
33&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-34_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Error&#160;Code&#160;</b><br/>
<b>Description&#160;</b><br/>
IDX&#160;<br/>
passed&#160;DataIndex.&#160;&#160;<br/>
0x0D&#160;<br/>
NVM_E_PARAM_ADDRESS&#160;<br/>
A&#160;wrong&#160;pointer&#160;parameter&#160;was passed.&#160;(NULL_PTR&#160;<br/>passed&#160;in an&#160;asynchronous call,&#160;e.g.&#160;<br/>NvM_WriteBlock()&#160;for&#160;a non-permanent&#160;block)&#160;<br/>
0x0E&#160;<br/>
NVM_E_PARAM_DATA&#160;<br/>
A&#160;NULL_PTR&#160;was passed in&#160;one of&#160;the&#160;synchronous&#160;<br/>functions&#160;NvM_GetDataIndex(),&#160;<br/>NvM_GetErrorStatus()&#160;or&#160;<br/>NvM_GetVersionInfo().&#160;<br/>
Table&#160;4-5&#160;&#160;<br/>
Errors&#160;reported&#160;to&#160;DET&#160;<br/>
<b>4.5.1.1&#160;</b><br/>
<b>Parameter&#160;Checking&#160;</b><br/>
AUTOSAR&#160;requires&#160;that&#160;API&#160;functions&#160;check the&#160;validity&#160;of&#160;their&#160;parameters.&#160;The&#160;checks&#160;in&#160;<br/><a href="TechnicalReference_NvMs.html#34">Table&#160;4-6&#160;</a>are internal parameter checks of&#160;the&#160;API&#160;functions.&#160;<br/>The&#160;following&#160;table&#160;shows&#160;which&#160;parameter&#160;checks are&#160;performed&#160;on&#160;which&#160;services:&#160;<br/>
<b>Check&#160;</b><br/>
&#160;<br/>
e-<br/>
k&#160;c<br/>
k&#160;<br/>
g<br/>
ng<br/>
k&#160;<br/>
c<br/>
k&#160;<br/>
&#160;<br/>
k&#160;<br/>
he<br/>
i<br/>d<br/>
c<br/>
he<br/>
c<br/>
n&#160;<br/>
c<br/>
na<br/>
k&#160;<br/>
he<br/>
&#160;c<br/>
he<br/>
&#160;<br/>
&#160;<br/>
o<br/>
e c<br/>
en<br/>
c<br/>
s<br/>
ti<br/>
he<br/>
&#160;c<br/>
&#160;c<br/>
a<br/>
&#160;Ma<br/>
py<br/>
&#160;P<br/>
he<br/>
ex<br/>
s<br/>
&#160;<br/>
e’l&#160;z&#160;&#160;c<br/>
i<br/>
s<br/>
s<br/>
r<br/>
l<br/>
’<br/>
T<br/>
’<br/>
&#160;Id<br/>
ndI<br/>
a<br/>
us<br/>
kc<br/>
k<br/>
e c<br/>
k<br/>
nte<br/>
<b>Service</b><br/>
du<br/>
nt&#160;<br/>
<b>&#160;</b><br/>
ti<br/>
tat<br/>
ocl&#160;tat<br/>
ocl<br/>
oi<br/>
Mo<br/>
nii&#160;S<br/>
Blo<br/>
me<br/>
B<br/>
S<br/>
B<br/>
Data<br/>
P<br/>
NvM_Init()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_SetDataIndex()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
NvM_GetDataIndex()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_SetBlockProtection()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_GetErrorStatus()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_GetVersionInfo()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_SetRamBlockStatus()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_SetBlockLockStatus()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_ReadBlock()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;&#160;&#160;<br/>
NvM_WriteBlock()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;&#160;&#160;<br/>
NvM_RestoreBlockDefaults()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_EraseNvBlock()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
NvM_CancelWriteAll()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_InvalidateNvBlock()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
NvM_ReadAll()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_WriteAll()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_MainFunction()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NvM_CancelJobs()&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Table&#160;4-6&#160;&#160;<br/>
Development&#160;Error&#160;Checking:&#160;Assignment&#160;of&#160;checks&#160;to&#160;services&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
34&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=35></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-35_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>4.5.2&#160;</b><br/>
<b>Production Code&#160;Error Reporting&#160;</b><br/>
Production&#160;&#160;code&#160;&#160;related&#160;&#160;errors&#160;&#160;are&#160;&#160;reported&#160;&#160;by&#160;&#160;default&#160;&#160;to&#160;&#160;the&#160;&#160;DEM&#160;&#160;using&#160;&#160;the&#160;&#160;service&#160;<br/>Dem_ReportErrorStatus()&#160;as specified&#160;in<a href="TechnicalReference_NvMs.html#6">&#160;[3].</a>&#160;<br/>
However,&#160;the&#160;service&#160;to&#160;be&#160;used&#160;(and&#160;the&#160;appropriate&#160;include&#160;file)&#160;for&#160;error&#160;reporting&#160;may&#160;<br/>be&#160;configured.&#160;&#160;<br/>The&#160;errors reported&#160;to&#160;DEM are described&#160;in&#160;the&#160;following&#160;table:&#160;<br/>
<b>Error&#160;Code&#160;</b><br/>
<b>Description&#160;</b><br/>
NVM_E_INTEGRITY_FAILED&#160;<br/>
API&#160;request&#160;integrity&#160;failed&#160;<br/>
NVM_E_REQ_FAILED&#160;<br/>
API&#160;request&#160;failed&#160;<br/>
NVM_E_WRITE_PROTECTED&#160;<br/>
NvM_WriteBlock,&#160;NvM_EraseNvBlock&#160;and&#160;<br/>NvM_InvalidateNvBlock&#160;check,&#160;if&#160;the&#160;<br/>block with specified&#160;BlockId&#160;is&#160;write-protected,&#160;<br/>before&#160;it&#160;is&#160;written&#160;(or&#160;erased&#160;or&#160;invalidated).&#160;<br/>
NVM_E_QUEUE_OVERFLOW&#160;<br/>
All&#160;asynchronous&#160;requests&#160;can&#160;only&#160;be&#160;en-<br/>queued&#160;if&#160;the&#160;queue&#160;is&#160;not&#160;full.&#160;<br/>
NVM_E_LOSS_OF_REDUNDANCY&#160;<br/>
One&#160;single block&#160;of&#160;a&#160;redundant&#160;block&#160;is&#160;<br/>invalid.&#160;<br/>
Table&#160;4-7&#160;&#160;<br/>
Errors&#160;reported&#160;to&#160;DEM&#160;<br/>
According&#160;&#160;to&#160;AUTOSAR&#160;&#160;component&#160;&#160;specific&#160;&#160;DEM&#160;&#160;errors&#160;&#160;must&#160;&#160;be&#160;&#160;configured&#160;&#160;in&#160;&#160;DEM.&#160;&#160;If&#160;<br/>MICROSAR&#160;&#160;DEM&#160;&#160;is&#160;&#160;used,&#160;&#160;production&#160;&#160;code&#160;&#160;errors&#160;&#160;are&#160;&#160;automatically&#160;&#160;inserted&#160;&#160;into&#160;&#160;DEM&#160;<br/>configuration.&#160;<br/>If&#160;&#160;another&#160;&#160;module&#160;&#160;is&#160;&#160;used&#160;&#160;for&#160;&#160;production&#160;&#160;code&#160;&#160;error&#160;&#160;reporting,&#160;&#160;the&#160;&#160;function&#160;&#160;name&#160;&#160;for&#160;<br/>reporting&#160;the&#160;error&#160;can&#160;be&#160;configured&#160;by&#160;the&#160;integrator,&#160;but&#160;must&#160;have&#160;the&#160;same&#160;signature&#160;<br/>as&#160;the&#160;service&#160;Dem_ReportErrorStatus().&#160;<br/>
Both&#160;error&#160;codes&#160;shall&#160;have&#160;a&#160;value&#160;of&#160;type&#160;Dem_EventIdType&#160;(an&#160;integer&#160;type).&#160;It&#160;must&#160;<br/>be&#160;assured,&#160;that&#160;these&#160;two&#160;error&#160;codes&#160;as&#160;well&#160;as&#160;the&#160;type&#160;are&#160;<b>published</b>&#160;to&#160;the&#160;NVM&#160;via&#160;<br/>the&#160;user-specified&#160;include&#160;file.&#160;<br/>
<b>4.5.3&#160;</b><br/>
<b>Compile-time&#160;Block&#160;Length Checks&#160;</b><br/>
For&#160;each&#160;block&#160;&#160;with&#160;permanent&#160;&#160;RAM&#160;or&#160;ROM,&#160;&#160;NvM&#160;provides&#160;the&#160;Block&#160;&#160;Length&#160;Check&#160;to&#160;<br/>ensure&#160;&#160;the&#160;&#160;configured&#160;&#160;block&#160;&#160;length&#160;&#160;and&#160;&#160;the&#160;&#160;permanent&#160;&#160;RAM’s/ROM’s&#160;&#160;length&#160;&#160;fits&#160;&#160;to&#160;&#160;each&#160;<br/>other.&#160;<br/>There are&#160;three&#160;different&#160;checks&#160;for&#160;permanent&#160;RAM&#160;<br/>
<b>&gt;&#160;&#160;</b>Automatic&#160;&#160;Block&#160;&#160;Length&#160;&#160;enabled&#160;&#160;(see&#160;&#160;<a href="TechnicalReference_NvMs.html#19">4.1.2)</a>:&#160;&#160;size&#160;&#160;of&#160;&#160;permanent&#160;&#160;RAM&#160;&#160;must&#160;&#160;not&#160;<br/>
exceed&#160;the&#160;configured&#160;block&#160;length&#160;<br/>
<b>&gt;&#160;&#160;</b>Strict&#160;&#160;Block&#160;&#160;Length:&#160;&#160;configured&#160;&#160;block&#160;&#160;length&#160;&#160;has&#160;&#160;to&#160;&#160;match&#160;&#160;the&#160;&#160;size&#160;&#160;of&#160;&#160;permanent&#160;<br/>
RAM exactly&#160;<br/>
<b>&gt;&#160;&#160;</b>Non-strict&#160;&#160;Block&#160;&#160;Length:&#160;&#160;configured&#160;&#160;block&#160;&#160;length&#160;&#160;must&#160;&#160;not&#160;&#160;exceed&#160;&#160;the&#160;&#160;size&#160;&#160;of&#160;<br/>
permanent&#160;RAM&#160;<br/>
And&#160;one&#160;for&#160;permanent&#160;ROM&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
35&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-36_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-36_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&gt;&#160;&#160;</b>Non-strict&#160;&#160;Block&#160;&#160;Length:&#160;&#160;configured&#160;&#160;block&#160;&#160;length&#160;&#160;must&#160;&#160;not&#160;&#160;exceed&#160;&#160;the&#160;&#160;size&#160;&#160;of&#160;<br/>
permanent&#160;ROM&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Basic Knowledge&#160;<br/></b>To&#160;check&#160;the&#160;block&#160;length during&#160;compile time,&#160;NvM&#160;uses&#160;bitfields&#160;–&#160;those&#160;have to be&#160;<br/>
&#160;&#160;initialized&#160;with positive length.&#160;Once a&#160;bitfield is initialized&#160;with negative length&#160;(block&#160;<br/>
length&#160;check&#160;failed),&#160;compiler&#160;error&#160;shall&#160;occur&#160;and mark&#160;the&#160;corresponding&#160;line.&#160;<br/>&#160;<br/>Each&#160;length&#160;check&#160;shows&#160;all&#160;required&#160;information:&#160;block&#160;name,&#160;RAM&#160;symbol&#160;and what&#160;<br/>is&#160;wrong&#160;with the&#160;block&#160;(depends&#160;on&#160;strict,&#160;non-strict&#160;or&#160;automatic block&#160;length)&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
36&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-37_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>5&#160;&#160;Integration&#160;</b><br/>
This&#160;chapter&#160;gives&#160;necessary&#160;information&#160;for&#160;the&#160;integration&#160;of&#160;the&#160;MICROSAR&#160;NVM&#160;into&#160;<br/>an&#160;application&#160;environment&#160;of&#160;an&#160;ECU.&#160;<br/>
<b>5.1&#160;</b><br/>
<b>Scope&#160;of&#160;Delivery&#160;</b><br/>
The&#160;delivery&#160;of&#160;the&#160;NVM&#160;contains&#160;the&#160;files&#160;which&#160;are&#160;described&#160;in&#160;the&#160;chapters<a href="TechnicalReference_NvMs.html#37">&#160;5.1.1&#160;</a>and&#160;<br/><a href="TechnicalReference_NvMs.html#37">5.1.2:</a>&#160;<br/>
<b>5.1.1&#160;</b><br/>
<b>Static&#160;Files&#160;</b><br/>
<b>File&#160;Name&#160;</b><br/>
<b>Description&#160;</b><br/>
NvM.h&#160;<br/>
This&#160;file must&#160;not&#160;be&#160;modified&#160;by&#160;user.&#160;<br/>Defines&#160;the&#160;interface&#160;of&#160;NVM.&#160;Only&#160;this&#160;file&#160;shall&#160;be&#160;included&#160;by&#160;the&#160;<br/>application.&#160;<br/>
NvM_Cbk.h&#160;<br/>
This&#160;file must&#160;not&#160;be&#160;modified&#160;by&#160;user.&#160;<br/>Contains the&#160;declarations&#160;of&#160;the&#160;callback&#160;functions&#160;being&#160;invoked&#160;by&#160;<br/>EEPROM&#160;driver&#160;<br/>
NvM_Types.h&#160;<br/>
This&#160;file must&#160;not&#160;be&#160;modified&#160;by&#160;user.&#160;<br/>Defines&#160;general&#160;types&#160;used&#160;by&#160;NVM.&#160;<br/>
NvM.c&#160;/&#160;<br/>
This&#160;file must&#160;not&#160;be&#160;modified&#160;by&#160;user.&#160;<br/>
NvM.lib/NvM.a&#160;<br/>
Implementation&#160;of&#160;NVM,&#160;delivered&#160;as object&#160;library.&#160;<br/>
NvM_Act&#160;/&#160;<br/>
These&#160;are&#160;files&#160;for&#160;internal&#160;use&#160;of&#160;the&#160;NvM.&#160;<br/>
NvM_Crc&#160;/&#160;<br/>
If&#160;NVM&#160;is&#160;delivered&#160;as object&#160;then&#160;this&#160;parts&#160;are&#160;content&#160;of&#160;NvM.lib.&#160;<br/>
NvM_JobProc /&#160;<br/>NvM_Qry&#160;/&#160;<br/>NvM_Queue.c&#160;*.h&#160;<br/>
Table&#160;5-1&#160;&#160;<br/>
Static&#160;files&#160;<br/>
<b>5.1.2&#160;</b><br/>
<b>Dynamic&#160;Files&#160;</b><br/>
The&#160;&#160;dynamic&#160;&#160;files&#160;&#160;are&#160;&#160;generated&#160;&#160;by&#160;&#160;the&#160;&#160;configuration&#160;&#160;tool&#160;&#160;DaVinci&#160;&#160;Configurator.&#160;&#160;Do&#160;&#160;not&#160;<br/>modify&#160;them&#160;manually.&#160;<br/>
<b>File&#160;Name&#160;</b><br/>
<b>Description&#160;</b><br/>
NvM_Cfg.c&#160;<br/>
It&#160;contains&#160;configuration&#160;parameters&#160;of&#160;NVM&#160;which can&#160;be&#160;modified&#160;after&#160;<br/>compilation of&#160;NvM.c.&#160;<br/>
NvM_Cfg.h&#160;<br/>
Contains&#160;<b>public</b>&#160;configuration parameters&#160;of&#160;NVM.&#160;They&#160;are&#160;(or&#160;might&#160;be)&#160;<br/>also&#160;important&#160;to&#160;NvM’s&#160;user(s),&#160;or&#160;they&#160;may&#160;affect&#160;NvM’s&#160;API&#160;<br/>It&#160;contains&#160;also&#160;<b>public</b>&#160;types&#160;and symbol&#160;declarations&#160;to&#160;be&#160;used&#160;by&#160;NVM&#160;as&#160;<br/>well&#160;as its&#160;user(s).&#160;<br/>
NvM_PrivateCfg.h&#160;&#160;Contains parameters&#160;as&#160;well&#160;as type&#160;and symbol&#160;declarations,&#160;which&#160;are&#160;<br/>
private&#160;to&#160;the&#160;NvM,&#160;i.e.&#160;they&#160;only&#160;affect&#160;internal&#160;behavior.&#160;<br/>This&#160;file&#160;is&#160;intended&#160;to&#160;be&#160;included&#160;only&#160;by&#160;NvM’s&#160;sources.&#160;<br/>
Table&#160;5-2&#160;&#160;<br/>
Generated&#160;files&#160;&#160;&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
37&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-38_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-38_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>5.2&#160;</b><br/>
<b>Critical&#160;Sections&#160;</b><br/>
To&#160;protect&#160;critical code&#160;against&#160;interruptions&#160;NvM&#160;uses following&#160;critical section:&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_NVM_EXCLUSIVE_AREA_0&#160;<br/>
<b>5.3&#160;</b><br/>
<b>Include&#160;Structure&#160;</b><br/>
The&#160;&#160;following&#160;&#160;figure&#160;&#160;illustrates&#160;&#160;the&#160;&#160;hierarchy&#160;&#160;of&#160;&#160;included&#160;&#160;files.&#160;&#160;It&#160;&#160;also&#160;&#160;shows&#160;&#160;that&#160;<br/>Std_Types.h&#160;and&#160;Nvm.h&#160;must&#160;be&#160;included&#160;by&#160;the&#160;application.&#160;<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;5-1&#160;<br/>
The&#160;file&#160;structure&#160;of&#160;the&#160;NVM&#160;sections&#160;module&#160;<br/>
<b>5.4&#160;</b><br/>
<b>Compiler&#160;Abstraction and Memory&#160;Mapping&#160;&#160;</b><br/>
The&#160;&#160;objects&#160;&#160;(e.g.&#160;&#160;variables,&#160;&#160;functions,&#160;&#160;constants)&#160;&#160;are&#160;&#160;declared&#160;&#160;by&#160;&#160;compiler&#160;&#160;independent&#160;<br/>definitions&#160;&#160;–&#160;&#160;the&#160;&#160;compiler&#160;&#160;abstraction&#160;&#160;definitions.&#160;&#160;Each&#160;&#160;compiler&#160;&#160;abstraction&#160;&#160;definition&#160;&#160;is&#160;<br/>assigned&#160;to&#160;a&#160;memory&#160;section.&#160;<br/>The&#160;&#160;following&#160;&#160;table&#160;&#160;contains&#160;&#160;the&#160;&#160;memory&#160;&#160;section&#160;&#160;names&#160;&#160;and&#160;&#160;the&#160;&#160;compiler&#160;&#160;abstraction&#160;<br/>definitions&#160;of&#160;NVM&#160;and&#160;illustrates the&#160;relationship&#160;among&#160;each&#160;them.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
38&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=39></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-39_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-39_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Compiler&#160;Abstraction&#160;</b><br/>
&#160;<br/>
T&#160;<br/>
E<br/>
S<br/>
&#160;<br/>
&#160;<br/>
T&#160;<br/>
T&#160;<br/>
&#160;<br/>
<b>Definitions</b><br/>
S<br/>
<b>&#160;</b><br/>
D<br/>
N<br/>
AT<br/>
E<br/>
S<br/>
T&#160;<br/>
A<br/>
A<br/>
&#160;<br/>
D<br/>
N<br/>
&#160;<br/>
N<br/>
E<br/>
S<br/>
&#160;<br/>
T<br/>
<b>&#160;</b><br/>
A<br/>
A<br/>
A<br/>
_CO<br/>
_CO<br/>
_D<br/>
T<br/>
D<br/>
N<br/>
T<br/>A<br/>
_CO<br/>
_D<br/>
&#160;<br/>
E<br/>
E<br/>
E<br/>
A<br/>
T<br/>
T<br/>
T<br/>
CO<br/>
CO<br/>
D<br/>
_D<br/>
C_CO<br/>
C_CO<br/>
IG<br/>
IG<br/>
&#160;<br/>
A<br/>
A<br/>
A<br/>
V<br/>
V<br/>
V<br/>
T<br/>
LI<br/>
LI<br/>
L_<br/>
L_<br/>
L_<br/>
S<br/>
B<br/>
B<br/>
P<br/>
P<br/>
P<br/>
NF<br/>
NF<br/>
<b>Memory&#160;Mapping&#160;</b><br/>
RI<br/>
RI<br/>
RI<br/>
A<br/>
U<br/>
U<br/>
P<br/>
P<br/>
P<br/>
<b>Sections&#160;</b><br/>
_P<br/>
_P<br/>
_P<br/>
_F<br/>
_P<br/>
_P<br/>
_A<br/>
_A<br/>
_A<br/>
_CO<br/>
_CO<br/>
M<br/>
M<br/>
M<br/>
M<br/>
M<br/>
M<br/>
M<br/>
M<br/>
M<br/>
M<br/>
M<br/>
NV<br/>
NV<br/>
NV<br/>
NV<br/>
NV<br/>
NV<br/>
NV<br/>
NV<br/>
NV<br/>
NV<br/>
NV<br/>
NVM_START_SEC_CODE&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NVM_START_SEC_&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
VAR_NOINIT_UNSPECIFIED&#160;<br/>
NVM_START_SEC_VAR_NOINIT_8&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NVM_START_SEC_VAR_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NVM_START_SEC_VAR_FAST_8&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NVM_START_SEC_&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CONST_UNSPECIFIED&#160;<br/>
NVM_START_SEC_CONST_8&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NVM_START_SEC_CONST_16&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
NVM_START_SEC_&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
CONST_DESCRIPTOR_TABLE&#160;<br/>
NVM_START_SEC_VAR_POWER_ON_I<br/>NIT_UNSPECIFIED&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Table&#160;5-3&#160;&#160;<br/>
Compiler&#160;abstraction&#160;and&#160;memory&#160;mapping&#160;<br/>
For&#160;&#160;each&#160;&#160;start&#160;&#160;keyword,&#160;&#160;there&#160;&#160;is&#160;&#160;a&#160;&#160;stop&#160;&#160;keyword.&#160;&#160;As&#160;&#160;these&#160;&#160;stop&#160;&#160;keywords&#160;&#160;are&#160;&#160;used&#160;&#160;to&#160;<br/>restore the&#160;default section,&#160;the&#160;stop&#160;keywords&#160;do&#160;not&#160;need&#160;to&#160;be&#160;configured.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;size of&#160;the&#160;section&#160;NVM_START_SEC_CONST_DESCRIPTOR_TABLE&#160;depends&#160;<br/>
<b>&#160;&#160;</b>on&#160;the&#160;configuration settings.&#160;It&#160;makes&#160;sense&#160;to&#160;create an&#160;own&#160;section&#160;for&#160;this&#160;item&#160;if&#160;it&#160;<br/>
becomes&#160;too&#160;big to&#160;link it&#160;into&#160;the&#160;same&#160;page/section&#160;as&#160;the&#160;elements&#160;of&#160;the&#160;<br/>MICROSAR&#160;NVM&#160;module.&#160;In&#160;this&#160;case&#160;the&#160;according&#160;memory&#160;modifier&#160;has&#160;to&#160;be&#160;used&#160;<br/>in order&#160;to&#160;address&#160;the&#160;elements&#160;in&#160;this&#160;section.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
Above&#160;&#160;listed&#160;&#160;section&#160;&#160;keywords&#160;&#160;are&#160;&#160;compiler&#160;&#160;dependent.&#160;&#160;They&#160;&#160;are&#160;&#160;set&#160;&#160;in&#160;&#160;the&#160;&#160;files&#160;<br/>MemMap.h&#160;and&#160;Compiler.h/Compiler_Cfg.h.&#160;Compiler&#160;pragmas&#160;may&#160;be&#160;used&#160;to&#160;open&#160;and&#160;<br/>close&#160;&#160;a&#160;&#160;special&#160;&#160;memory&#160;&#160;section.&#160;As&#160;&#160;these&#160;&#160;pragmas&#160;&#160;are&#160;&#160;already&#160;&#160;used&#160;&#160;when&#160;&#160;creating&#160;&#160;the&#160;<br/>NVM&#160;library&#160;(object&#160;code)&#160;these&#160;parameters&#160;are&#160;&#160;not&#160;&#160;link-time&#160;configurable.&#160;Libraries&#160;&#160;with&#160;<br/>different&#160;settings&#160;can&#160;be&#160;obtained&#160;at&#160;Vector&#160;Informatik&#160;GmbH.&#160;Please&#160;refer&#160;to&#160;the&#160;Software&#160;<br/>release&#160;notes&#160;&#160;(SRN)&#160;&#160;(or&#160;&#160;to&#160;&#160;the&#160;delivered&#160;&#160;MemMap.h,&#160;&#160;Compiler.h/Compiler_Cfg.h)&#160;for&#160;&#160;the&#160;<br/>settings made&#160;for your&#160;delivery.&#160;<br/>
NVM_START_SEC_VAR_POWER_ON_INIT_UNSPECIFIED&#160;&#160;shall&#160;&#160;be&#160;&#160;mapped&#160;&#160;to&#160;&#160;a&#160;&#160;section&#160;<br/>that&#160;&#160;is&#160;&#160;guaranteed&#160;&#160;to&#160;be&#160;&#160;zeroed&#160;&#160;out&#160;&#160;after&#160;&#160;Power-On&#160;&#160;Reset&#160;&#160;(therefore&#160;&#160;it&#160;&#160;may&#160;&#160;be&#160;&#160;a&#160;&#160;normal&#160;<br/>ZERO_INIT&#160;&#160;section,&#160;&#160;being&#160;&#160;zeroed&#160;&#160;out&#160;&#160;after&#160;&#160;any&#160;&#160;reset.&#160;&#160;Make&#160;&#160;sure&#160;&#160;this&#160;&#160;helds&#160;&#160;true&#160;&#160;for&#160;&#160;all&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
39&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-40_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-40_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-40_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-40_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
kinds&#160;of&#160;variable&#160;data&#160;(esp.&#160;uninitialized).&#160;If&#160;necessary,&#160;create&#160;a&#160;special&#160;section&#160;(don’t&#160;map&#160;<br/>to&#160;a&#160;common&#160;one).&#160;<br/>
NVM_START_SEC_VAR_UNSPECIFIED&#160;&#160;shall&#160;&#160;also&#160;&#160;be&#160;&#160;mapped&#160;&#160;to&#160;&#160;a&#160;&#160;section&#160;&#160;that&#160;&#160;is&#160;<br/>guaranteed&#160;&#160;to&#160;&#160;be&#160;&#160;zeroed&#160;&#160;out.&#160;&#160;It&#160;&#160;holds&#160;&#160;the&#160;&#160;variable&#160;&#160;NvM_TaskState_t&#160;&#160;which&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;<br/>zero since&#160;NvM&#160;is not&#160;initialized.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>The&#160;integrator&#160;has&#160;to&#160;make&#160;sure&#160;specific&#160;section&#160;related&#160;settings&#160;(#pragmas)&#160;cover&#160;<b>all</b>&#160;<br/>
&#160;&#160;(intended)&#160;variables defined within in&#160;a particular&#160;specific&#160;section.&#160;(It&#160;might&#160;be&#160;desired,&#160;<br/>
and possible with a&#160;compiler&#160;to&#160;further&#160;divide&#160;variables,&#160;e.g.&#160;by&#160;type/size/alignment&#160;<br/>requirements).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>It&#160;is&#160;important&#160;to understand that&#160;a&#160;variable declaration&#160;lacking&#160;an&#160;initializer&#160;does&#160;not&#160;<br/>
&#160;&#160;actually&#160;mean an&#160;uninitialized&#160;variable (unless the&#160;variable has&#160;<i>automatic&#160;storage&#160;</i><br/>
<i>duration)</i>.&#160;<br/>Instead,&#160;according&#160;to&#160;ANSI/ISO,&#160;every&#160;<i>object&#160;that&#160;has&#160;static&#160;storage duration&#160;is&#160;not&#160;<br/>initialized&#160;explicitly&#160;</i>(ISO/IEC&#160;9899:1999&#160;chapter&#160;6.7.8&#160;clause&#160;10)<i>&#160;</i>shall&#160;<b>be&#160;initialized&#160;<br/></b>(according to&#160;the&#160;rules&#160;defined there).&#160;Technically,&#160;they&#160;shall&#160;be&#160;initialized&#160;to 0&#160;<br/>However,&#160;how&#160;a compiler&#160;achieves it,&#160;is&#160;beyond&#160;the&#160;standard.&#160;It&#160;is&#160;also&#160;beyond the&#160;<br/>standard,&#160;how&#160;compilers&#160;map&#160;variables to&#160;sections,&#160;what&#160;default&#160;sections&#160;they&#160;define,&#160;<br/>etc.&#160;<br/>A&#160;compiler&#160;may&#160;treat&#160;a&#160;variable explicitly&#160;initialized to&#160;0 like an&#160;“uninitialized”&#160;variable,&#160;it&#160;<br/>may&#160;treat&#160;it&#160;like an&#160;initialized&#160;variable,&#160;or&#160;it&#160;may&#160;even treat&#160;it&#160;completely&#160;differently&#160;(e.g.&#160;<br/>some&#160;compilers&#160;can&#160;be&#160;setup&#160;to emit&#160;all&#160;explicitly&#160;initialized&#160;variables to a&#160;section&#160;<br/>“.zbss”,&#160;in contrast&#160;to&#160;“.data”&#160;and&#160;“.bss”,&#160;used&#160;for&#160;initialized,&#160;and uninitialized variables,&#160;<br/>respectively”.&#160;<br/>Therefore,&#160;any&#160;section&#160;definition&#160;(#pragmas)&#160;should consider&#160;all&#160;variables&#160;(regardless&#160;<br/>of&#160;existence of&#160;an&#160;explicit&#160;initializer,&#160;and/or&#160;eventually&#160;other&#160;differentiations&#160;a compiler&#160;<br/>might&#160;provide),&#160;unless&#160;there’s&#160;a&#160;good&#160;reason&#160;to&#160;exclude some of&#160;them.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;sections&#160;mentioned&#160;above have to&#160;fit&#160;to&#160;the&#160;linker&#160;configuration&#160;(linker&#160;command&#160;<br/>
<b>&#160;&#160;</b>file)&#160;as&#160;well&#160;as to the&#160;memory&#160;modifier&#160;settings&#160;in&#160;the&#160;Compiler&#160;Abstraction!&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>5.5&#160;</b><br/>
<b>Dependencies&#160;on SW&#160;Modules&#160;</b><br/>
<b>5.5.1&#160;</b><br/>
<b>OSEK&#160;/&#160;AUTOSAR OS&#160;</b><br/>
An&#160;&#160;OS&#160;&#160;environment&#160;&#160;is&#160;&#160;not&#160;&#160;necessary&#160;&#160;unless&#160;&#160;it&#160;&#160;is&#160;&#160;used&#160;&#160;for&#160;&#160;interrupt&#160;&#160;or&#160;&#160;resource&#160;&#160;locking&#160;<br/>issues.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
40&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=41></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-41_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-41_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-41_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>5.5.2&#160;</b><br/>
<b>DEM&#160;</b><br/>
NVM depends on&#160;an&#160;implementation&#160;of&#160;the&#160;DEM. It&#160;is used&#160;to&#160;report errors occurred&#160;during&#160;<br/>processing.&#160;The&#160;header file&#160;declaring&#160;the&#160;API&#160;must&#160;be&#160;configured&#160;via&#160;configuration&#160;tool.&#160;<br/>
<b>5.5.3&#160;</b><br/>
<b>DET&#160;</b><br/>
Module&#160;&#160;DET:&#160;&#160;Can&#160;&#160;be&#160;&#160;used&#160;&#160;in&#160;&#160;development&#160;&#160;mode.&#160;&#160;It&#160;&#160;records&#160;&#160;all&#160;&#160;development&#160;&#160;errors&#160;&#160;for&#160;<br/>evaluation&#160;&#160;purposes.&#160;&#160;Its&#160;&#160;usage&#160;&#160;can&#160;&#160;be&#160;&#160;enabled/disabled&#160;&#160;via&#160;&#160;configuration&#160;&#160;tool&#160;&#160;by&#160;&#160;the&#160;<br/>switch&#160;<b>Development&#160;Error&#160;Reporting</b>.&#160;<br/>
<b>5.5.4&#160;</b><br/>
<b>MEMIF&#160;</b><br/>
The&#160;NVM uses configuration&#160;parameters defined&#160;by&#160;the&#160;MEMIF.&#160;<br/>
<b>5.5.5&#160;</b><br/>
<b>CRC Library&#160;</b><br/>
For&#160;&#160;CRC&#160;&#160;calculations&#160;&#160;the&#160;&#160;NVM&#160;&#160;uses&#160;&#160;the&#160;&#160;services&#160;&#160;provided&#160;&#160;by&#160;&#160;an&#160;&#160;AUTOSAR&#160;&#160;compliant&#160;<br/>CRC Library.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Since&#160;the&#160;<b>Configuration&#160;Id&#160;Block</b>&#160;must&#160;be&#160;configured&#160;with either&#160;CRC16&#160;or&#160;CRC32;&#160;<br/>
&#160;&#160;you&#160;will&#160;always&#160;need&#160;the&#160;CRC&#160;library.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>5.5.6&#160;</b><br/>
<b>Callback&#160;Functions&#160;</b><br/>
MICROSAR&#160;&#160;NVM&#160;&#160;offers&#160;&#160;the&#160;&#160;usage&#160;&#160;of&#160;&#160;notifications&#160;&#160;that&#160;&#160;can&#160;&#160;be&#160;&#160;mapped&#160;&#160;to&#160;&#160;callback&#160;<br/>functions&#160;&#160;provided&#160;&#160;by&#160;&#160;other&#160;&#160;modules,&#160;&#160;in&#160;&#160;order&#160;&#160;to&#160;&#160;inform&#160;&#160;them&#160;&#160;about&#160;&#160;job&#160;&#160;completion.&#160;&#160;For&#160;<br/>each&#160;&#160;NVRAM&#160;&#160;block&#160;&#160;a&#160;&#160;separate&#160;&#160;callback&#160;&#160;function&#160;&#160;may&#160;&#160;be&#160;&#160;defined&#160;&#160;by&#160;&#160;application.&#160;&#160;These&#160;<br/>callback&#160;function&#160;declarations&#160;must&#160;be&#160;made&#160;within&#160;the&#160;application&#160;and&#160;be&#160;included&#160;by&#160;the&#160;<br/>NVM.&#160;<br/>
<b>5.5.7&#160;</b><br/>
<b>RTE&#160;</b><br/>
When&#160;&#160;at&#160;&#160;least&#160;&#160;one&#160;&#160;Service&#160;&#160;Port&#160;&#160;is&#160;&#160;enabled&#160;&#160;and&#160;&#160;corresponding&#160;&#160;PIM&#160;&#160;(see&#160;&#160;Technical&#160;<br/>Reference&#160;&#160;of&#160;&#160;RTE)&#160;&#160;is&#160;&#160;available,&#160;&#160;all&#160;&#160;additional&#160;&#160;necessary&#160;&#160;header&#160;&#160;files&#160;&#160;are&#160;&#160;included&#160;<br/>automatically.&#160;SWC&#160;must&#160;not&#160;include&#160;NvM.h.&#160;<br/>
<b>5.5.8&#160;</b><br/>
<b>BSWM&#160;</b><br/>
If&#160;the&#160;switch&#160;<b>BSWM&#160;Multi&#160;Block&#160;Job&#160;Status&#160;Information</b>&#160;is&#160;enabled&#160;the&#160;NVM&#160;shall&#160;inform&#160;<br/>the&#160;<br/>
BSWM&#160;<br/>
about&#160;<br/>
the&#160;<br/>
current&#160;<br/>
state&#160;<br/>
of&#160;<br/>
a&#160;<br/>
multi&#160;<br/>
block&#160;<br/>
job&#160;<br/>
via&#160;<br/>
BswM_NvM_CurrentJobMode().&#160;The&#160;multi job&#160;callback is not&#160;called.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>During&#160;calling&#160;BswM_NvM_CurrentJobMode(),&#160;if&#160;called&#160;with status&#160;<br/>
&#160;&#160;NVM_REQ_PENDING,&#160;callback&#160;related&#160;block&#160;is&#160;still&#160;busy.&#160;No request&#160;for&#160;it&#160;shall&#160;be&#160;<br/>
issued&#160;as long&#160;as&#160;block&#160;is&#160;busy.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
If&#160;&#160;the&#160;&#160;switch&#160;&#160;<b>BSWM&#160;&#160;Block&#160;Status&#160;&#160;Information&#160;&#160;</b>for&#160;&#160;a&#160;&#160;single&#160;&#160;block&#160;&#160;is&#160;&#160;true,&#160;&#160;the&#160;&#160;NVM&#160;&#160;shall&#160;<br/>inform&#160;<br/>
the&#160;<br/>
BSWM&#160;<br/>
about&#160;<br/>
the&#160;<br/>
current&#160;<br/>
state&#160;<br/>
of&#160;<br/>
the&#160;<br/>
block&#160;<br/>
via&#160;<br/>
BswM_NvM_CurrentBlockMode().&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
41&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-42_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-42_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>During&#160;calling&#160;BswM_NvM_CurrentBlockMode(),if&#160;called&#160;with status&#160;<br/>
&#160;&#160;NVM_REQ_PENDING,&#160;callback&#160;related&#160;block&#160;is&#160;still&#160;busy.&#160;No request&#160;for&#160;it&#160;shall&#160;be&#160;<br/>
issued&#160;as long&#160;as&#160;block&#160;is&#160;busy.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>5.6&#160;</b><br/>
<b>Integration Steps&#160;</b><br/>
To&#160;integrate&#160;MICROSAR&#160;NVM&#160;into&#160;your&#160;system,&#160;several&#160;steps&#160;beginning&#160;with&#160;configuration&#160;<br/>have&#160;to&#160;be&#160;done:&#160;<br/>
<b>&gt;&#160;&#160;</b>Configure MICROSAR&#160;NVM and&#160;MICROSAR&#160;MEMIF according&#160;to&#160;applications’&#160;<br/>
requirements&#160;using&#160;MICROSAR&#160;configuration&#160;tool&#160;or a&#160;GCE&#160;editor.&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>Generate&#160;the&#160;configuration&#160;files&#160;of&#160;the&#160;modules NVM&#160;and&#160;MEMIF.&#160;<br/>
<b>&gt;&#160;&#160;</b>Configure and&#160;generate&#160;the&#160;lower modules&#160;FEE/EA&#160;and&#160;the&#160;driver modules&#160;for&#160;<br/>
FLS/EEP.&#160;<br/>
<b>&gt;&#160;&#160;</b>If&#160;a&#160;FEE&#160;or&#160;EA&#160;module&#160;is used&#160;that&#160;is not&#160;delivered&#160;by&#160;Vector,&#160;make&#160;sure that&#160;the&#160;<br/>
parameters that&#160;are&#160;exchanged&#160;between&#160;the&#160;two&#160;modules&#160;are consistent.&#160;<br/>
<b>&gt;&#160;&#160;</b>Each&#160;application&#160;is responsible&#160;to&#160;make&#160;their&#160;RAM and&#160;ROM&#160;blocks&#160;available&#160;(do&#160;not&#160;<br/>
use&#160;the&#160;static&#160;modifier!).&#160;The&#160;MICROSAR NVM&#160;includes the&#160;file&#160;that&#160;declares these&#160;<br/>blocks&#160;and&#160;defines&#160;memory&#160;modifier to&#160;address the&#160;blocks.&#160;This&#160;memory&#160;modifier can&#160;<br/>be&#160;changed&#160;in&#160;the&#160;Compiler.h.&#160;<br/>
<b>&gt;&#160;&#160;</b>Make&#160;sure&#160;all&#160;applications using&#160;MICROSAR NVM include&#160;Std_Types.h&#160;and&#160;NvM.h&#160;<br/>
(in&#160;that&#160;order).&#160;<br/>
<b>&gt;&#160;&#160;</b>Check the&#160;initialization&#160;of&#160;the&#160;drivers FLS/EEP,&#160;FEE/EA&#160;and&#160;the&#160;MICROSAR NVM&#160;<br/>
(MICROSAR NVM does not&#160;initialize&#160;any&#160;other module).&#160;<br/>
<b>&gt;&#160;&#160;</b>Make&#160;sure&#160;that&#160;the&#160;initialization&#160;sequence&#160;is correct.&#160;FEE/EA&#160;and&#160;FLS/EEP&#160;must&#160;be&#160;<br/>
initialized&#160;before&#160;any&#160;NVM request&#160;(usually&#160;NvM_ReadAll()) can&#160;be&#160;used.&#160;Take&#160;care&#160;<br/>initialization&#160;sequence&#160;of&#160;FEE/EA&#160;must&#160;be&#160;finished&#160;until FEE/EA&#160;is&#160;able&#160;to&#160;accept&#160;a&#160;job&#160;<br/>from&#160;NvM.&#160;In&#160;case&#160;Fee_MainFunction&#160;calls and/or Fls_MainFunction&#160;calls are&#160;<br/>necessary&#160;to&#160;finish&#160;initialization&#160;process&#160;for FEE/EA&#160;the&#160;calls have&#160;to&#160;be&#160;executed&#160;<br/>before&#160;NvM&#160;requests&#160;the&#160;first&#160;job&#160;to&#160;FEE/EA.&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>Ensure&#160;that&#160;the&#160;main&#160;functions of&#160;the&#160;NVM,&#160;the&#160;FEE/EA&#160;and&#160;the&#160;FLS/EEP&#160;drivers are&#160;<br/>
called&#160;cyclically.&#160;This must&#160;be&#160;done&#160;within&#160;an&#160;application&#160;task running&#160;at&#160;sufficient&#160;<br/>priority&#160;(to&#160;avoid&#160;starving).&#160;<br/>
<b>&gt;&#160;&#160;</b>Ensure&#160;that&#160;a&#160;waiting&#160;task&#160;frees CPU to&#160;make&#160;it&#160;possible&#160;that&#160;the&#160;action&#160;for the&#160;task is&#160;<br/>
waiting&#160;for,&#160;can&#160;be&#160;done!&#160;<br/>
Finally:&#160;Compile&#160;and&#160;link your MICROSAR NVM together with&#160;your&#160;project.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
42&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-43_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>5.7&#160;</b><br/>
<b>Estimating Resource&#160;Consumption&#160;</b><br/>
Besides resources&#160;needed&#160;anyway&#160;when&#160;using&#160;NVM,&#160;there are some&#160;configuration&#160;options&#160;<br/>influencing&#160;&#160;resource&#160;&#160;consumption&#160;&#160;of&#160;&#160;your&#160;&#160;system.&#160;&#160;In&#160;&#160;general&#160;&#160;these&#160;&#160;options&#160;&#160;affect&#160;&#160;usage&#160;<br/>independently&#160;&#160;of&#160;&#160;the&#160;&#160;number&#160;&#160;of&#160;&#160;configured&#160;&#160;NVRAM&#160;&#160;blocks.&#160;&#160;Additionally&#160;&#160;each&#160;&#160;NVRAM&#160;<br/>block&#160;&#160;requires&#160;&#160;resources&#160;&#160;in&#160;&#160;RAM,&#160;&#160;ROM&#160;&#160;and&#160;&#160;NV,&#160;&#160;respectively.&#160;The&#160;&#160;following&#160;&#160;sections&#160;&#160;will&#160;<br/>summarize&#160;the&#160;options&#160;and&#160;give&#160;you&#160;hints,&#160;how&#160;to&#160;estimate&#160;their&#160;effects.&#160;<br/>
<b>5.7.1&#160;</b><br/>
<b>RAM&#160;Usage&#160;</b><br/>
In&#160;general, each&#160;NVRAM&#160;block&#160;consumes RAM&#160;–&#160;for the&#160;application-defined&#160;RAM-block&#160;as&#160;<br/>well&#160;as&#160;for&#160;the&#160;internal block&#160;management&#160;structure,&#160;which&#160;holds&#160;information&#160;about&#160;request&#160;<br/>results,&#160;blocks’&#160;attributes&#160;and&#160;its&#160;current&#160;data&#160;index.&#160;The&#160;amount&#160;of&#160;RAM&#160;occupied&#160;by&#160;the&#160;<br/>RAM&#160;&#160;block&#160;&#160;itself&#160;&#160;should&#160;&#160;be&#160;&#160;equal&#160;&#160;to&#160;&#160;the&#160;&#160;configured&#160;&#160;length.&#160;&#160;However,&#160;&#160;the&#160;&#160;actual&#160;&#160;size&#160;<br/>depends&#160;&#160;on&#160;&#160;the&#160;&#160;size&#160;&#160;of&#160;&#160;the&#160;&#160;object&#160;&#160;(variable)&#160;&#160;the&#160;&#160;application&#160;&#160;declares.&#160;&#160;The&#160;&#160;size&#160;&#160;of&#160;&#160;each&#160;<br/>management&#160;area&#160;is currently&#160;3&#160;bytes.&#160;<br/>However,&#160;though&#160;they&#160;need&#160;to&#160;be&#160;considered&#160;when&#160;estimating&#160;(overall)&#160;RAM&#160;consumption,&#160;<br/>RAM blocks&#160;technically&#160;belong&#160;to&#160;the&#160;clients&#160;of&#160;NVM.&#160;<br/>The&#160;configuration&#160;options&#160;affecting&#160;RAM&#160;consumption&#160;pertain&#160;to&#160;size&#160;of&#160;the&#160;&#160;queue(s)&#160;and&#160;<br/>the&#160;option&#160;&#160;job&#160;prioritization.&#160;The&#160;&#160;size&#160;&#160;of&#160;&#160;one&#160;&#160;queue&#160;&#160;entry&#160;&#160;depends&#160;&#160;on&#160;&#160;the&#160;&#160;target&#160;&#160;platform&#160;<br/>and&#160;the&#160;compiler&#160;options&#160;used.&#160;It&#160;ranges&#160;from&#160;8&#160;bytes&#160;(16&#160;bit&#160;platform,&#160;16bit&#160;pointers)&#160;to&#160;12&#160;<br/>bytes (32bit&#160;architectures,&#160;aligned&#160;structure&#160;members).&#160;<br/>Additionally&#160;the&#160;setting&#160;<b>Internal&#160;Buffer&#160;for&#160;Crc&#160;Handling</b>&#160;affects&#160;RAM&#160;usage:&#160;If&#160;enabled,&#160;<br/>the&#160;NVM&#160;internally&#160;allocates&#160;a&#160;RAM&#160;buffer.&#160;Its&#160;size&#160;is&#160;at&#160;least&#160;the&#160;size&#160;of&#160;largest&#160;NVRAM&#160;<br/>block&#160;configured&#160;with&#160;CRC,&#160;including&#160;CRC&#160;size.&#160;Sizes&#160;of&#160;NVRAM&#160;Blocks&#160;configured&#160;with&#160;<br/><b>Use&#160;&#160;Synchronisation&#160;&#160;Mechanism</b>,&#160;&#160;will&#160;&#160;also&#160;&#160;be&#160;&#160;considered&#160;&#160;in&#160;&#160;calculation&#160;&#160;of&#160;&#160;internal&#160;<br/>buffer’s size.&#160;<br/>Additionally,&#160;each&#160;NVRAM&#160;block&#160;with&#160;<b>Calc&#160;RAM&#160;Block&#160;CRC</b>&#160;gets&#160;a&#160;dedicated&#160;RAM&#160;area&#160;<br/>for&#160;CRC&#160;storage,&#160;&#160;exactly&#160;matching&#160;CRC’s&#160;size.&#160;As&#160;a&#160;result,&#160;&#160;applications’&#160;&#160;RAM&#160;blocks&#160;&#160;do&#160;<br/>not&#160;&#160;need&#160;&#160;to&#160;&#160;provide&#160;&#160;additional&#160;&#160;space&#160;&#160;for&#160;&#160;CRC.&#160;&#160;Therefore&#160;&#160;it&#160;&#160;does&#160;&#160;not&#160;&#160;affect&#160;&#160;RAM&#160;<br/>consumption.&#160;<br/>
<b>5.7.2&#160;</b><br/>
<b>ROM&#160;Usage&#160;</b><br/>
Because&#160;each&#160;NVRAM&#160;block’s&#160;configuration&#160;is&#160;compiled&#160;into&#160;a&#160;constant&#160;block&#160;descriptor,&#160;<br/>the&#160;&#160;ROM&#160;&#160;needed&#160;&#160;is&#160;&#160;also&#160;&#160;affected&#160;&#160;by&#160;&#160;the&#160;&#160;whole&#160;&#160;number&#160;&#160;of&#160;&#160;configured&#160;&#160;NVRAM&#160;&#160;blocks.&#160;<br/>Again,&#160;the&#160;size&#160;of&#160;one&#160;descriptor&#160;varies&#160;with&#160;the&#160;target&#160;platform&#160;and&#160;the&#160;compiler&#160;options&#160;<br/>used.&#160;&#160;<br/>There are&#160;some&#160;configuration&#160;options&#160;affecting&#160;NVM code&#160;size.&#160;The&#160;options&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>Development&#160;mode&#160;<br/>
<b>&gt;&#160;&#160;</b>API&#160;configuration&#160;class&#160;<br/>
<b>&gt;&#160;&#160;</b>use&#160;Version&#160;Info&#160;API&#160;<br/>
<b>&gt;&#160;&#160;</b>use&#160;Set&#160;Ram&#160;Block Status&#160;API&#160;<br/>
result in&#160;switching&#160;on/off&#160;complete&#160;code&#160;sections.&#160;<br/>NVM’s&#160;&#160;ROM&#160;&#160;usage&#160;&#160;<b>does&#160;&#160;not</b>&#160;&#160;depend&#160;&#160;on&#160;&#160;block&#160;&#160;configured&#160;&#160;with&#160;&#160;ROM&#160;&#160;defaults.&#160;&#160;ROM&#160;<br/>default blocks&#160;(defining&#160;default&#160;data)&#160;belong&#160;to&#160;the&#160;clients&#160;of&#160;NVM,&#160;as&#160;any&#160;callbacks do.&#160;&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
43&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=44></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-44_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>5.7.3&#160;</b><br/>
<b>NV&#160;Usage&#160;</b><br/>
The&#160;requirements&#160;on&#160;NV&#160;memory&#160;space&#160;per&#160;device&#160;are affected&#160;by&#160;the&#160;NVRAM&#160;blocks&#160;and&#160;<br/>their&#160;&#160;configuration.&#160;&#160;Basically,&#160;&#160;each&#160;&#160;NV&#160;&#160;block&#160;&#160;allocates&#160;&#160;as&#160;many&#160;&#160;bytes&#160;&#160;as&#160;&#160;specified&#160;for&#160;&#160;its&#160;<br/>length,&#160;&#160;plus&#160;&#160;CRC&#160;&#160;bytes&#160;&#160;(if&#160;&#160;configured).&#160;&#160;Underlying&#160;&#160;components&#160;&#160;(FEE&#160;&#160;or&#160;&#160;EA)&#160;&#160;would&#160;&#160;also&#160;<br/>add&#160;&#160;internal&#160;&#160;management&#160;&#160;information,&#160;&#160;as&#160;&#160;well&#160;&#160;as&#160;&#160;padding&#160;&#160;bytes&#160;&#160;to&#160;&#160;meet&#160;&#160;NV&#160;&#160;memory&#160;<br/>device’s alignment&#160;requirements.&#160;<br/>According&#160;to&#160;the&#160;management&#160;type&#160;of&#160;the&#160;NVRAM&#160;block,&#160;it&#160;consists&#160;of&#160;one&#160;or&#160;more&#160;blocks&#160;<br/>consuming&#160;NV&#160;space:&#160;<br/>
<b>&gt;&#160;&#160;</b>NATIVE&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;1&#160;NV&#160;Block&#160;<br/>
<b>&gt;&#160;&#160;</b>REDUNDANT&#160;&#160;2&#160;NV&#160;Blocks&#160;<br/>
<b>&gt;&#160;&#160;</b>DATASET&#160;&#160;&#160;&#160;&#160;&#160;&#160;<b>Count</b>&#160;NV&#160;Blocks&#160;<br/>
<b>5.8&#160;</b><br/>
<b>How-To:&#160;Integrate NVM&#160;with&#160;AUTOSAR3&#160;SWC’s&#160;</b><br/>
Embedded&#160;Interface&#160;of&#160;ASR4&#160;NVM is NOT&#160;compatible&#160;with&#160;ASR3;&#160;especially&#160;return types&#160;<br/>have&#160;been&#160;changed.&#160;<br/>However,&#160;RTE&#160;encapsulates&#160;all&#160;of&#160;them:&#160;If&#160;an&#160;SWC&#160;calls&#160;a&#160;C/S-Interface’s operation&#160;(via&#160;<br/>RTE), it&#160;always gets&#160;Std_ReturnType.&#160;<br/>Finally,&#160;existing&#160;embedded&#160;code&#160;–&#160;SWCs&#160;as&#160;well&#160;as NVM&#160;itself&#160;–&#160;compiles&#160;against&#160;these&#160;<br/>changed&#160;interfaces without&#160;modifications.&#160;<br/>Unfortunately,&#160;to&#160;achieve&#160;this embedded&#160;compatibility,&#160;SWC-descriptions (which&#160;instruct&#160;<br/>the&#160;RTE&#160;generator,&#160;how&#160;to&#160;create&#160;compatible&#160;code) slightly&#160;differ between&#160;AUTOSAR&#160;<br/>services.&#160;Users&#160;will have&#160;to&#160;adapt&#160;their&#160;clients’&#160;interface&#160;references&#160;in&#160;order to&#160;use&#160;<br/>AUTOSAR4&#160;BSW&#160;along&#160;with&#160;AUTOSAR3&#160;SWCs.&#160;<br/>
<b>5.8.1&#160;</b><br/>
<b>NVM’s&#160;provided Interfaces/Ports.&#160;</b><br/>
Every&#160;interface&#160;used&#160;by&#160;client&#160;SWCs needs&#160;to&#160;be&#160;remapped.&#160;<br/>
<b>5.8.1.1&#160;</b><br/>
<b>NvMAdministration&#160;</b><br/>
The&#160;only&#160;operation&#160;–&#160;SetBlockProtection&#160;–&#160;changed&#160;from&#160;POSSIBLE-ERRORS()&#160;to&#160;<br/>POSSIBLE-ERRORS(E_NOT_OK).&#160;<br/>This&#160;definition&#160;may&#160;be&#160;exchanged&#160;at&#160;R-Port side,&#160;because&#160;the&#160;embedded&#160;software already&#160;<br/>used&#160;Std_ReturnType&#160;(and&#160;E_OK/E_NOT_OK),&#160;due&#160;to&#160;RTE&#160;API.&#160;Code&#160;should&#160;have&#160;been&#160;<br/>implemented&#160;in&#160;a&#160;defensive&#160;way,&#160;i.e.&#160;it should&#160;check&#160;return values.&#160;<br/>However,&#160;this operation&#160;can&#160;only&#160;fail,&#160;if&#160;development&#160;error detection&#160;was enabled.&#160;<br/>
<b>5.8.1.2&#160;</b><br/>
<b>NvMService_AC[1|2|3][_SRBS][_Defs]&#160;</b><br/>
For information&#160;about&#160;naming,&#160;please&#160;refer to<a href="TechnicalReference_NvMs.html#73">&#160;7.1.4&#160;<br/></a>Return types (POSSIBLE-ERRORS) of&#160;following&#160;operations changed:&#160;<br/><b>&gt;&#160;&#160;</b>GetErrorStatus&#160;<br/>
<b>&gt;&#160;&#160;</b>GetDataIndex&#160;<br/>
<b>&gt;&#160;&#160;</b>SetDataIndex&#160;<br/>
<b>&gt;&#160;&#160;</b>SetRamBlockStatus&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
44&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=45></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-45_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-45_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>NvM_SetDataIndex&#160;and&#160;NvM_GetDataIndex&#160;may&#160;fail&#160;if&#160;“Development&#160;Error&#160;<br/>
&#160;&#160;Detection”&#160;is&#160;disabled.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>Similar to&#160;NvMAdministration&#160;interface,&#160;clients’&#160;R-Port Prototypes&#160;must&#160;be&#160;associated&#160;with&#160;<br/>these&#160;new&#160;interfaces.&#160;The&#160;implications&#160;on&#160;Runnables’&#160;implementations are the&#160;same&#160;as&#160;<br/>above&#160;–&#160;no&#160;changes&#160;are necessary.&#160;<br/>
<b>5.8.2&#160;</b><br/>
<b>Callbacks&#160;(Ports&#160;provided by&#160;client&#160;SWCs)&#160;</b><br/>
Actually,&#160;callbacks&#160;specifications did&#160;not&#160;change&#160;from&#160;AUTOSAR3&#160;to&#160;AUTOSAR4.&#160;<br/>However,&#160;&#160;a&#160;&#160;recent&#160;&#160;feature&#160;&#160;added&#160;&#160;to&#160;&#160;DaVinci&#160;&#160;Developer&#160;&#160;and&#160;&#160;RTE&#160;&#160;Generator&#160;&#160;allows&#160;&#160;for&#160;<br/>more&#160;flexibility&#160;in&#160;modeling&#160;and&#160;implementing&#160;callback’&#160;signatures.&#160;&#160;Refer&#160;to&#160;chapte<a href="TechnicalReference_NvMs.html#73">r&#160;7.1.5&#160;<br/></a>for&#160;&#160;information&#160;&#160;the&#160;&#160;relationship&#160;&#160;between&#160;&#160;modelled&#160;&#160;callbacks&#160;&#160;(SWC’s&#160;&#160;P-Ports)&#160;&#160;and&#160;&#160;their&#160;<br/>RUNNABLEs’&#160;prototypes.&#160;<br/>
<b>5.8.3&#160;</b><br/>
<b>Request Result Types&#160;</b><br/>
In&#160;AUTOSAR4&#160;new&#160;values&#160;for&#160;NvM_RequestResultType&#160;have&#160;been&#160;defined,&#160;namely&#160;<br/>NVM_REQ_REDUNDANCY_FAILED&#160;and&#160;NVM_REQ_RESTORED_FROM_ROM.&#160;<br/>However,&#160;since&#160;their&#160;actual usage&#160;is not&#160;specified,&#160;they&#160;will&#160;not&#160;be&#160;used&#160;by&#160;NVM;&#160;its&#160;<br/>interface&#160;description&#160;omits them,&#160;and&#160;clients&#160;do&#160;not&#160;need&#160;to&#160;deal with&#160;them.&#160;&#160;<br/>Finally,&#160;NvM&#160;uses the&#160;same&#160;set&#160;of&#160;request&#160;result values that&#160;was specified&#160;in&#160;AUTOSAR3.&#160;<br/>Therefore,&#160;this&#160;change&#160;in&#160;specification&#160;does not&#160;require&#160;any&#160;actions.&#160;<br/>&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
45&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=46></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-46_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>6&#160;&#160;API&#160;Description&#160;</b><br/>
<b>6.1&#160;</b><br/>
<b>Interfaces&#160;Overview&#160;</b><br/>
For an&#160;interfaces overview&#160;please&#160;see<a href="TechnicalReference_NvMs.html#17">&#160;Figure&#160;3-2.</a>&#160;<br/>
<b>6.2&#160;</b><br/>
<b>Type&#160;Definitions&#160;</b><br/>
<b>Type&#160;Name&#160;</b><br/>
<b>C-Type&#160;&#160;Description&#160;</b><br/>
<b>Value&#160;Range&#160;</b><br/>
NvM_RequestResult&#160;<br/>
uint8&#160;<br/>
An asynchronous&#160;API&#160;<br/>
NVM_REQ_OK&#160;(see chapter&#160;<br/>
Type&#160;<br/>
service can have&#160;following&#160;&#160;<a href="TechnicalReference_NvMs.html#32">4.5.1)</a>&#160;<br/>
results&#160;or status&#160;that&#160;can&#160;<br/>
The&#160;last asynchronous&#160;request has&#160;<br/>
be&#160;polled&#160;by&#160;<br/>
been&#160;finished successfully. This&#160;is&#160;the&#160;<br/>
NvM_GetErrorStatus&#160;default&#160;value after reset.&#160;This&#160;status&#160;<br/>
().&#160;<br/>
has&#160;the&#160;value 0.&#160;<br/>Can&#160;be delivered&#160;by&#160;all&#160;asynchronous&#160;<br/>APIs.&#160;<br/>NVM_REQ_NOT_OK&#160;(see&#160;<br/><a href="TechnicalReference_NvMs.html#32">chapter&#160;4.5.1)</a>&#160;<br/>The&#160;last asynchronous&#160;request has&#160;<br/>been&#160;finished unsuccessfully.&#160;<br/>Can&#160;be delivered&#160;by&#160;all&#160;asynchronous&#160;<br/>APIs.&#160;<br/>NVM_REQ_PENDING&#160;(see&#160;<br/><a href="TechnicalReference_NvMs.html#32">chapter&#160;4.5.1)</a>&#160;<br/>An asynchronous&#160;request&#160;is&#160;currently&#160;<br/>being&#160;processed&#160;by&#160;the task.&#160;<br/>Can&#160;be delivered&#160;by&#160;all&#160;asynchronous&#160;<br/>APIs.&#160;<br/>NVM_REQ_INTEGRITY_FAILED&#160;<br/><a href="TechnicalReference_NvMs.html#32">(see chapter&#160;4.5.1)</a>&#160;<br/>A&#160;NV&#160;block&#160;was&#160;supposed to be&#160;valid&#160;<br/>but&#160;it turned&#160;out that&#160;the&#160;data are&#160;<br/>corrupted&#160;(either CRC mismatch or&#160;the&#160;<br/>FEE&#160;or the&#160;EA&#160;reported an&#160;<br/>inconsistency).&#160;<br/>Can&#160;be&#160;delivered&#160;by&#160;NvM_ReadBlock&#160;<br/>or NvM_ReadAll.&#160;<br/>NVM_REQ_BLOCK_SKIPPED&#160;(see&#160;<br/><a href="TechnicalReference_NvMs.html#32">chapter&#160;4.5.1)</a>&#160;<br/>The&#160;block&#160;was&#160;skipped&#160;during&#160;a&#160;multi&#160;<br/>block&#160;request.&#160;<br/>Can&#160;be delivered&#160;by&#160;NvM_ReadAll&#160;and&#160;<br/>NvM_WriteAll.&#160;<br/>NVM_REQ_NV_INVALIDATED&#160;<br/><a href="TechnicalReference_NvMs.html#32">(see chapter&#160;4.5.1)</a>&#160;<br/>The&#160;NV&#160;block&#160;is&#160;marked&#160;as&#160;invalid.&#160;<br/>Can&#160;be delivered&#160;by&#160;NvM_ReadBlock&#160;<br/>or NvM_ReadAll.&#160;<br/>NVM_REQ_CANCELLED&#160;(see&#160;<br/><a href="TechnicalReference_NvMs.html#32">chapter&#160;4.5.1)</a>&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
46&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=47></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-47_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Type&#160;Name&#160;</b><br/>
<b>C-Type&#160;&#160;Description&#160;</b><br/>
<b>Value&#160;Range&#160;<br/></b>The&#160;last asynchronous&#160;<br/>NvM_WriteAll()&#160;has&#160;been&#160;&#160;<br/>cancelled&#160;by&#160;<br/>NvM_CancelWriteAll().&#160;<br/>
NvM_BlockIdType&#160;<br/>
uint16&#160;<br/>
It is&#160;the type&#160;of&#160;a&#160;block&#160;<br/>
{<br/>
[0.&#160;.2𝑛[,&#160;]215.&#160;.&#160;215&#160;+&#160;2𝑛[,<br/>
}&#160;<br/>
handle&#160;that&#160;is&#160;used by&#160;the&#160;<br/>
&#160;𝑛&#160;=&#160;16&#160;−&#160;NVM_DATASET_SELECTION_BITS<br/>
application&#160;in&#160;order&#160;to&#160;<br/>
&#160;<br/>
access&#160;a NVM&#160;block.&#160;There&#160;&#160;NVM_DATASET_SELECTION_BITS&#160;<br/>
are two reserved IDs:&#160;<br/>
is&#160;the maximum&#160;number&#160;of&#160;bits&#160;that&#160;are&#160;<br/>
<b>&gt;&#160;&#160;</b>Block&#160;ID&#160;0 for multi&#160;<br/>
needed&#160;in&#160;order&#160;to&#160;store the maximum&#160;<br/>
block&#160;requests&#160;(Block&#160;ID&#160;&#160;dataset&#160;value.&#160;<br/>0 is&#160;only&#160;allowed&#160;for&#160;API&#160;&#160;The&#160;second range describes&#160;each&#160;<br/>NvM_GetErrorStatus())&#160;&#160;block’s&#160;DCM alias.&#160;Block&#160;ID&#160;0 does&#160;not&#160;<br/>and&#160;<br/>
have such an alias.&#160;<br/>
<b>&gt;&#160;&#160;</b>Block&#160;ID&#160;1 for the&#160;<br/>
Example:&#160;<br/>
configuration&#160;Id&#160;block&#160;<br/>
The&#160;dataset&#160;block&#160;with&#160;the&#160;greatest&#160;<br/>
The&#160;block&#160;handles&#160;are&#160;<br/>
number&#160;of&#160;datasets&#160;has&#160;six&#160;of&#160;them. So&#160;<br/>
created&#160;as&#160;defines&#160;in&#160;an&#160;<br/>
it is&#160;necessary&#160;to store the&#160;data&#160;index&#160;<br/>
ascending&#160;define&#160;list.&#160;<br/>
0…5&#160;to select the appropriate&#160;dataset&#160;<br/>block.&#160;To store the&#160;value&#160;five,&#160;three bits&#160;<br/>
&#160;<br/>
are necessary.&#160;So&#160;<br/>
&#160;<br/>
NVM_DATASET_SELECTION_BITS&#160;has&#160;<br/>the&#160;value&#160;3.&#160;<br/>This&#160;means&#160;that&#160;only&#160;the&#160;block&#160;IDs&#160;<br/>0&#160;…&#160;8191&#160;are&#160;available&#160;as&#160;block&#160;<br/>handles.&#160;Additionally&#160;NVM&#160;provides&#160;<br/>access&#160;to&#160;these IDs’&#160;block&#160;aliases&#160;via&#160;<br/>handles&#160;32768+1 …&#160;32768+8191&#160;<br/>
NvM_ServiceIdType&#160;<br/>
uint8&#160;<br/>
Service Ids&#160;of&#160;the&#160;different&#160;&#160;NVM_INIT (0u)&#160;<br/>service routines&#160;of&#160;the&#160;<br/>
NVM_SET_DATA_INDEX (1u)&#160;<br/>
NVM.&#160;<br/>
NVM_GET_DATA_INDEX (2u)&#160;<br/>NVM_SET_BLOCK_PROTECTION&#160;<br/>(3u)&#160;<br/>NVM_GET_ERROR_STATUS (4u)&#160;<br/>NVM_SET_RAM_BLOCK_STATUS&#160;<br/>(5u)&#160;<br/>NVM_READ_BLOCK (6u)&#160;<br/>NVM_WRITE_BLOCK (7u)&#160;<br/>NVM_RESTORE_BLOCK_DEFAULTS&#160;<br/>(8u)&#160;<br/>NVM_ERASE_BLOCK (9u)&#160;<br/>NVM_CANCEL_WRITE_ALL&#160;(10u)&#160;<br/>NVM_INVALIDATE_NV_BLOCK&#160;<br/>(11u)&#160;<br/>NVM_READ_ALL (12u)&#160;<br/>NVM_WRITE_ALL (13u)&#160;<br/>NVM_MAINFUNCTION (14u)&#160;<br/>NVM_GET_VERSION_INFO (15u)&#160;<br/>NVM_SET_BLOCK_LOCK_STATUS&#160;<br/>(16u)&#160;<br/>The&#160;single&#160;values&#160;are&#160;applied&#160;as&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
47&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=48></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-48_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Type&#160;Name&#160;</b><br/>
<b>C-Type&#160;&#160;Description&#160;</b><br/>
<b>Value&#160;Range&#160;<br/></b>defines.&#160;<br/>See&#160;also chapter<a href="TechnicalReference_NvMs.html#32">&#160;4.5.1&#160;</a><br/>
Table&#160;6-1&#160;&#160;<br/>
Type&#160;definitions&#160;<br/>
<b>6.3&#160;</b><br/>
<b>Global&#160;API&#160;Constants&#160;</b><br/>
These&#160;&#160;NVM&#160;&#160;specific&#160;&#160;constants&#160;&#160;are&#160;&#160;available&#160;&#160;through&#160;&#160;the&#160;&#160;inclusion&#160;&#160;of&#160;&#160;NvM.h.&#160;&#160;They&#160;&#160;are&#160;<br/>configurable&#160;within&#160;DaVinci Configurator Pro.&#160;<br/>
<b>&gt;&#160;&#160;</b>NVM_COMPILED_CONFIG_ID:&#160;configured&#160;identifier&#160;for the&#160;NV&#160;memory&#160;layout&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>NVM_NO_OF_BLOCK_IDS:&#160;number of&#160;all&#160;defined&#160;NVRAM&#160;Blocks&#160;(including&#160;reserved&#160;<br/>
blocks)&#160;<br/>
<b>&gt;&#160;&#160;</b>Name&#160;of&#160;the&#160;NVRAM blocks&#160;<br/>
<b>6.4&#160;</b><br/>
<b>Services&#160;provided by&#160;NVM&#160;</b><br/>
The&#160;NVM&#160;API&#160;consists&#160;of&#160;services,&#160;which&#160;are realized&#160;by&#160;function&#160;calls.&#160;<br/>
<b>6.4.1&#160;</b><br/>
<b>NvM_Init&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;NvM_Init&#160;(&#160;void&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service for basic&#160;NVM&#160;initialization.&#160;The&#160;time consuming&#160;NVRAM&#160;block&#160;initialization&#160;and setup according&#160;to&#160;<br/>the&#160;block&#160;descriptor&#160;is&#160;done&#160;by&#160;the&#160;NvM_ReadAll&#160;request.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/><b>&gt;&#160;&#160;</b>It&#160;is&#160;expected&#160;to be&#160;exclusively&#160;called&#160;by&#160;ECU&#160;State&#160;Manager&#160;(or&#160;a&#160;comparable component)&#160;<br/>
Table&#160;6-2&#160;&#160;<br/>
NvM_Init&#160;<br/>
<b>6.4.2&#160;</b><br/>
<b>NvM_SetDataIndex&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;NvM_SetDataIndex ( NvM_BlockIdType BlockId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160; &#160; &#160; &#160;&#160;uint8 DataIndex )&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
48&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=49></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-49_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-49_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
DataIndex&#160;<br/>
Index&#160;position&#160;of&#160;a&#160;Block&#160;in&#160;the&#160;NV&#160;Block&#160;of&#160;Dataset&#160;type.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g.&#160;Det&#160;error occurred.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;request sets&#160;the&#160;specified&#160;index&#160;to associate&#160;a&#160;dataset&#160;NV&#160;block&#160;(with/without&#160;ROM blocks)&#160;with&#160;its&#160;<br/>corresponding&#160;RAM block.&#160;The&#160;DataIndex&#160;needs&#160;to&#160;have a&#160;valid&#160;value&#160;before a&#160;read/write/erase or&#160;<br/>invalidate&#160;request&#160;is&#160;initiated.&#160;<br/>If&#160;the dataset&#160;block&#160;has&#160;a&#160;set&#160;of&#160;ROM defaults,&#160;this&#160;function&#160;is&#160;used&#160;(prior&#160;to&#160;NvM_ReadBlock())&#160;to&#160;select&#160;<br/>the&#160;appropriate ROM set.&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is&#160;re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is&#160;available&#160;if&#160;API&#160;configuration&#160;class&#160;2 or&#160;3&#160;is&#160;configured.&#160;&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Usage of&#160;Explicit Synchronization, does&#160;not&#160;permit NvM’s&#160;clients&#160;to&#160;issue&#160;new&#160;requests&#160;for a&#160;<br/>
&#160;&#160;pending block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service&#160;is&#160;expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-3&#160;&#160;<br/>
NvM_SetDataIndex&#160;<br/>
<b>6.4.3&#160;</b><br/>
<b>NvM_GetDataIndex&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;NvM_GetDataIndex (&#160;NvM_BlockIdType BlockId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160; &#160; &#160; &#160;&#160;uint8* DataIndexPtr&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
DataIndexPtr&#160;<br/>
Address&#160;where the&#160;current&#160;DataIndex&#160;shall&#160;be&#160;written&#160;to&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g.&#160;Det&#160;error occurred.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;request&#160;passes&#160;the&#160;current DataIndex&#160;(association)&#160;of&#160;the specified&#160;dataset&#160;block.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
49&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=50></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-50_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-50_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is available&#160;if&#160;API&#160;configuration&#160;class&#160;2 or&#160;3 is&#160;configured.&#160;&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-4&#160;&#160;<br/>
NvM_GetDataIndex&#160;<br/>
<b>6.4.4&#160;</b><br/>
<b>NvM_SetBlockProtection&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType NvM_SetBlockProtection( NvM_BlockIdType BlockId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;boolean ProtectionEnabled )&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
ProtectionEnabled&#160;<br/>
This&#160;parameter&#160;is&#160;responsible for setting&#160;the&#160;write&#160;protection&#160;of&#160;a&#160;selected&#160;<br/>NVRAM block:&#160;<br/>TRUE: enable protection&#160;<br/>FALSE: disable&#160;protection&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g.&#160;Det&#160;error occurred.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;request sets&#160;the&#160;write&#160;protection&#160;for the&#160;NV&#160;block.&#160;Any&#160;further&#160;write/erase/invalidate requests&#160;to&#160;the&#160;<br/>NVRAM block&#160;are rejected&#160;synchronously&#160;if&#160;the NV&#160;block-write&#160;protection&#160;is&#160;set.&#160;The&#160;data&#160;area&#160;of&#160;the RAM&#160;<br/>block&#160;remains&#160;writable&#160;in&#160;any&#160;case.&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is available&#160;if&#160;API&#160;configuration&#160;class&#160;3 is configured.&#160;&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;The&#160;protection&#160;<br/>
cannot&#160;be&#160;released&#160;for&#160;a&#160;write once block&#160;that&#160;has&#160;already&#160;been&#160;written.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Usage of&#160;Explicit Synchronization, does&#160;not&#160;permit NvM’s&#160;clients&#160;to&#160;issue&#160;new&#160;requests&#160;for a&#160;<br/>
&#160;&#160;pending block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-5&#160;&#160;<br/>
NvM_SetBlockProtection&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
50&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=51></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-51_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>6.4.5&#160;</b><br/>
<b>NvM_GetErrorStatus&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;NvM_GetErrorStatus&#160;(&#160;NvM_BlockIdType BlockId,&#160;&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160; &#160; &#160; &#160;&#160;NvM_RequestResultType*&#160;RequestResultPtr&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
RequestResultPtr&#160;<br/>
Pointer&#160;where&#160;the&#160;result shall&#160;be&#160;written&#160;to.&#160;<br/>Result&#160;is&#160;of&#160;type&#160;NvM_RequestResultType.&#160;All&#160;possible results&#160;are&#160;<br/>described&#160;in&#160;chapt<a href="TechnicalReference_NvMs.html#46">er&#160;6.2.</a>&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g.&#160;Det&#160;error occurred.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;request reads&#160;the&#160;block&#160;dependent&#160;error/status&#160;information&#160;and&#160;writes&#160;it to the given address.&#160;The&#160;<br/>status/error information&#160;was&#160;set&#160;by&#160;a former or&#160;current&#160;asynchronous&#160;request.&#160;<br/>This&#160;API can&#160;also be requested&#160;with&#160;BlockId&#160;0 (multi&#160;block).&#160;Then the&#160;multi&#160;block&#160;error/status&#160;information&#160;<br/>will&#160;be read to&#160;the&#160;given address. Only&#160;NvM_ReadAll()&#160;and&#160;NvM_WriteAll()&#160;are multi&#160;block&#160;requests&#160;<br/>and change the status/error information&#160;of&#160;the multi&#160;block.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is&#160;always&#160;available.&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-6&#160;&#160;<br/>
NvM_GetErrorStatus&#160;<br/>
<b>6.4.6&#160;</b><br/>
<b>NvM_GetVersionInfo&#160;</b><br/>
<b>Prototype&#160;<br/></b>void NvM_GetVersionInfo&#160;(&#160;Std_VersionInfoType* versioninfo&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
versioninfo&#160;<br/>
Pointer&#160;to the&#160;address&#160;where the&#160;version&#160;info shall&#160;be&#160;written&#160;to.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;request&#160;writes&#160;the version&#160;info (Vendor&#160;ID,&#160;module&#160;ID,&#160;SW&#160;major version, SW&#160;minor&#160;version,&#160;SW&#160;patch&#160;<br/>version) to the&#160;given&#160;pointer.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is available&#160;if&#160;the&#160;pre-compile switch&#160;<b>Use&#160;version&#160;info&#160;API</b>&#160;is&#160;enabled.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
51&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=52></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-52_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-52_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-7&#160;&#160;<br/>
NvM_GetVersionInfo&#160;<br/>
<b>6.4.7&#160;</b><br/>
<b>NvM_SetRamBlockStatus&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;NvM_SetRamBlockStatus&#160;(&#160;NvM_BlockIdType BlockId,&#160;&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;boolean BlockChanged&#160;)&#160;&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;block&#160;identifier.&#160;<br/>
BlockChanged&#160;<br/>
Sets&#160;the new&#160;status&#160;of&#160;the&#160;RAM&#160;block:&#160;<br/>TRUE:&#160;Validates&#160;the RAM&#160;block&#160;and marks&#160;it as&#160;changed.&#160;If&#160;the block&#160;has&#160;a&#160;<br/>CRC and the option&#160;NVM_CALC_RAM_BLOCK_CRC&#160;is&#160;TRUE&#160;the&#160;CRC&#160;<br/>calculation is&#160;initiated.&#160;<br/>FALSE: Mark&#160;the block&#160;as&#160;unchanged&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g.&#160;Det&#160;error occurred.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
The&#160;request sets&#160;a&#160;block’s&#160;status&#160;to&#160;valid/changed&#160;respectively&#160;to&#160;unchanged.&#160;Setting a&#160;block&#160;to&#160;changed&#160;<br/>marks&#160;it for writing&#160;it during&#160;NvM_WriteAll().&#160;<br/>If&#160;the block&#160;shall&#160;be&#160;set&#160;to&#160;<b>changed</b>,&#160;it&#160;has&#160;a&#160;CRC&#160;and&#160;the&#160;option&#160;NVM_CALC_RAM_BLOCK_CRC&#160;is&#160;TRUE&#160;the&#160;<br/>CRC calculation&#160;of&#160;the&#160;RAM block&#160;is&#160;initiated.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Though this&#160;service is&#160;defined&#160;to&#160;operate synchronously,&#160;the CRC&#160;re-calculation&#160;will&#160;be&#160;<br/>
&#160;&#160;performed&#160;asynchronously.&#160;However,&#160;there is&#160;no restriction&#160;on&#160;accessing&#160;RAM&#160;block&#160;data,&#160;or&#160;<br/>
on&#160;calling&#160;other services.&#160;Consistency&#160;of&#160;data and&#160;CRC is&#160;ensured&#160;by&#160;WriteBlock/WriteAll,&#160;<br/>which&#160;will&#160;unconditionally&#160;recalculate&#160;the&#160;CRC before&#160;writing.&#160;Requesting CRC&#160;re-calculation,&#160;<br/>using&#160;NvM_SetRamBlockStatus&#160;again,&#160;will&#160;be&#160;recognized in a&#160;save&#160;way,&#160;the&#160;calculation&#160;<br/>will&#160;be re-queued,&#160;if&#160;necessary..&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is&#160;always&#160;available.&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in&#160;application context.&#160;<br/>
Table&#160;6-8&#160;&#160;<br/>
NvM_SetRamBlockStatus&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
52&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=53></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-53_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-53_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>6.4.8&#160;</b><br/>
<b>NvM_SetBlockLockStatus&#160;</b><br/>
<b>Prototype&#160;<br/></b>void NvM_SetBlockLockStatus(&#160;NvM_BlockIdType BlockId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;boolean BlockLocked&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
BlockLocked&#160;<br/>
This&#160;parameter&#160;is&#160;responsible for setting&#160;the&#160;lock&#160;protection&#160;status&#160;of&#160;a&#160;<br/>selected&#160;NVRAM block:&#160;<br/>TRUE: Lock&#160;shall&#160;be enabled&#160;&#160;<br/>FALSE: Lock&#160;shall&#160;be disabled&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Service for&#160;setting/resetting&#160;the&#160;lock&#160;of&#160;a NV&#160;block.&#160;&#160;<br/>If&#160;locked, the&#160;NV&#160;contents&#160;associated to the NVRAM block&#160;identified&#160;by&#160;BlockId,&#160;will&#160;not&#160;be&#160;modified&#160;by&#160;any&#160;<br/>subsequent&#160;write&#160;request,&#160;i.e.&#160;the Block&#160;will&#160;be&#160;skipped&#160;during&#160;NvM_WriteAll; other requests,&#160;namely&#160;<br/>NvM_WriteBlock,&#160;NvM_InvalidateNvBlock,&#160;NvM_EraseNvBlock,&#160;will&#160;be&#160;rejected&#160;without&#160;error&#160;<br/>notification&#160;to&#160;Det&#160;or&#160;Dem; i.e.&#160;they&#160;just return&#160;E_NOT_OK.&#160;&#160;<br/>During processing of&#160;NvM_ReadAll,&#160;a locked&#160;NVRAM block&#160;shall&#160;be loaded&#160;from&#160;NV&#160;memory,&#160;regardless&#160;<br/>of&#160;RAM block’s&#160;state (see<a href="TechnicalReference_NvMs.html#28">&#160;4.4.10)</a>.&#160;After&#160;that&#160;the&#160;lock&#160;is&#160;disabled&#160;again.&#160;<br/>If&#160;a block&#160;gets&#160;locked&#160;with&#160;NvM_SetBlockLockStatus,&#160;only&#160;the&#160;original&#160;NVRAM&#160;block&#160;is&#160;locked,&#160;<br/>regardless&#160;which&#160;BlockId&#160;was&#160;passed&#160;-&#160;original&#160;or DCM&#160;(see&#160;chapter<a href="TechnicalReference_NvMs.html#30">&#160;4.4.17)</a>&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Expert&#160;Knowledge&#160;<br/></b>It&#160;is&#160;allowed&#160;to&#160;use&#160;this&#160;service&#160;for&#160;an&#160;already&#160;pending&#160;block.&#160;However,&#160;setting&#160;a&#160;lock&#160;<br/>
&#160;&#160;affects&#160;only&#160;subsequent&#160;requests;&#160;an&#160;already&#160;pending&#160;write will&#160;be&#160;processed.&#160;<br/>
This&#160;is&#160;a deviation&#160;from&#160;AUTOSAR,&#160;which prohibits&#160;this&#160;request&#160;for&#160;a&#160;pending&#160;block.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available independent&#160;on&#160;API&#160;configuration&#160;class.&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;The&#160;protection&#160;<br/>
cannot&#160;be&#160;released&#160;for&#160;a&#160;write once block&#160;that&#160;has&#160;already&#160;been&#160;written.&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;service is only&#160;usable by&#160;BSW&#160;components;&#160;it&#160;is&#160;not&#160;accessible via RTE.&#160;<br/>
&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;by&#160;DCM.&#160;<br/>
Table&#160;6-9&#160;&#160;<br/>
NvM_SetBlockLockStatus&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
53&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=54></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-54_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>6.4.9&#160;</b><br/>
<b>NvM_MainFunction&#160;</b><br/>
<b>Prototype&#160;<br/></b>void NvM_MainFunction ( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
This&#160;function&#160;has&#160;to be called&#160;cyclically.&#160;It&#160;is&#160;the&#160;entry&#160;point&#160;of&#160;the&#160;NVRAM Manager. In&#160;here&#160;the&#160;processing&#160;<br/>of&#160;the asynchronous&#160;jobs&#160;(read/write/erase/invalidate/CRC&#160;calculation…)&#160;is&#160;handled.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is&#160;synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is&#160;non&#160;re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-10&#160;&#160;<br/>
NvM_MainFunction&#160;<br/>
<b>6.4.10&#160;&#160;NvM_ReadBlock&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType NvM_ReadBlock (&#160;NvM_BlockIdType BlockId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;void* NvM_DstPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
NvM_DstPtr&#160;<br/>
Pointer&#160;where&#160;the&#160;data of&#160;a&#160;non-permanent RAM block&#160;shall&#160;be&#160;written&#160;to.&#160;If&#160;<br/>the&#160;block&#160;is&#160;permanent&#160;NULL_PTR&#160;shall&#160;be&#160;passed.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g.&#160;because of&#160;a&#160;list&#160;overflow.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request to&#160;copy&#160;the&#160;data of&#160;the NV&#160;block&#160;to&#160;its&#160;corresponding&#160;RAM block.&#160;This&#160;function&#160;queues&#160;the read&#160;<br/>request and&#160;returns&#160;the acceptance result&#160;synchronously.&#160;&#160;<br/>The&#160;NVM can&#160;notify&#160;the application by&#160;callback&#160;when the&#160;service&#160;is&#160;finished.&#160;&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
54&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=55></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-55_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-55_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is available&#160;if&#160;API&#160;configuration&#160;class&#160;2 or&#160;3 is&#160;configured.&#160;&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;In&#160;development&#160;<br/>
mode&#160;the&#160;service will&#160;not&#160;accept&#160;the&#160;call&#160;if&#160;the&#160;block is already&#160;queued&#160;(either&#160;for&#160;this&#160;or&#160;for&#160;a&#160;<br/>different&#160;service).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Usage of&#160;Explicit Synchronization, does&#160;not&#160;permit NvM’s&#160;clients&#160;to&#160;issue&#160;new&#160;requests&#160;for a&#160;<br/>
&#160;&#160;pending block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-11&#160;&#160;<br/>
NvM_ReadBlock&#160;<br/>
<b>6.4.11&#160;&#160;NvM_WriteBlock&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType NvM_WriteBlock (&#160;NvM_BlockIdType BlockId,&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;const&#160;void* NvM_SrcPtr )&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
NvM_SrcPtr&#160;<br/>
Pointer&#160;where&#160;the&#160;data of&#160;a&#160;non-permanent RAM block&#160;shall&#160;be&#160;read&#160;from. If&#160;<br/>the&#160;block&#160;is&#160;permanent,&#160;NULL_PTR&#160;shall&#160;be&#160;passed.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g. list overflow.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request&#160;for&#160;copying&#160;data&#160;from&#160;the&#160;RAM&#160;block&#160;to&#160;its&#160;corresponding&#160;NV&#160;block.&#160;This&#160;function queues&#160;the&#160;write&#160;<br/>request and&#160;returns&#160;the acceptance result synchronously.&#160;&#160;<br/>If&#160;the block&#160;has&#160;a&#160;CRC,&#160;the&#160;RAM&#160;block&#160;CRC will&#160;be&#160;recalculated before the&#160;data&#160;and&#160;the CRC&#160;are&#160;written to&#160;<br/>the&#160;NV&#160;memory,&#160;even&#160;if&#160;the&#160;service&#160;NvM_SetRamBlockStatus&#160;was&#160;called&#160;before&#160;and&#160;the&#160;configuration&#160;<br/>was&#160;set&#160;that&#160;within this&#160;service,&#160;the CRC&#160;calculation&#160;should be&#160;done.&#160;<br/>If&#160;writing&#160;the&#160;data to&#160;NV&#160;memory&#160;fails, the NVM&#160;will&#160;retry&#160;writing.&#160;The&#160;number&#160;of&#160;write&#160;retries&#160;is&#160;a&#160;<br/>configuration&#160;option.&#160;<br/>The&#160;NVM can&#160;notify&#160;the application by&#160;callback&#160;when the&#160;service&#160;is&#160;finished.&#160;&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
55&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=56></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-56_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-56_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is available&#160;if&#160;API&#160;configuration&#160;class&#160;2 or&#160;3 is&#160;configured.&#160;&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;In&#160;development&#160;<br/>
mode&#160;the&#160;service will&#160;not&#160;accept&#160;the&#160;call&#160;if&#160;the&#160;block is already&#160;queued&#160;(either&#160;for&#160;this&#160;or&#160;for&#160;a&#160;<br/>different&#160;service).&#160;If&#160;the&#160;block’s&#160;write protection&#160;is&#160;activated&#160;it&#160;can’t&#160;be&#160;written.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Usage of&#160;Explicit Synchronization, does&#160;not&#160;permit NvM’s&#160;clients&#160;to&#160;issue&#160;new&#160;requests&#160;for a&#160;<br/>
&#160;&#160;pending block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-12&#160;&#160;<br/>
NvM_WriteBlock&#160;<br/>
<b>6.4.12&#160;&#160;NvM_RestoreBlockDefaults&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType NvM_RestoreBlockDefaults&#160;(&#160;NvM_BlockIdType BlockId,&#160;&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;void* NvM_DstPtr&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
NvM_DstPtr&#160;<br/>
Pointer&#160;where&#160;the&#160;data of&#160;a&#160;non-permanent RAM block&#160;shall&#160;be&#160;written&#160;to.&#160;If&#160;<br/>the&#160;block&#160;is&#160;permanent,&#160;NULL_PTR&#160;shall&#160;be&#160;passed.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g. list overflow.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request to&#160;copy&#160;the&#160;ROM&#160;block&#160;default data&#160;to&#160;its&#160;corresponding RAM block.&#160;The&#160;selected&#160;block&#160;needs&#160;<br/>either ROM&#160;defaults&#160;or an&#160;initialization&#160;callback.&#160;&#160;<br/>This&#160;function&#160;queues&#160;the&#160;restore request and returns&#160;the&#160;acceptance result synchronously.&#160;&#160;<br/>The&#160;NVM can&#160;notify&#160;the application by&#160;callback&#160;when the&#160;service&#160;is&#160;finished.&#160;&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
56&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=57></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-57_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-57_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is&#160;available&#160;if&#160;API&#160;configuration&#160;class&#160;2 or&#160;3 is&#160;configured.&#160;&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;In&#160;development&#160;<br/>
mode&#160;the&#160;service will&#160;not&#160;accept&#160;the&#160;call&#160;if&#160;the&#160;block is already&#160;queued&#160;(either&#160;for&#160;this&#160;or&#160;for&#160;a&#160;<br/>different&#160;service).&#160;This&#160;function is not&#160;intended&#160;for&#160;reading&#160;ROM&#160;sets&#160;of&#160;a&#160;dataset&#160;ROM&#160;block.&#160;<br/>Use&#160;NvM_ReadBlock&#160;instead&#160;for&#160;these blocks.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Usage of&#160;Explicit Synchronization, does&#160;not&#160;permit NvM’s&#160;clients&#160;to&#160;issue&#160;new&#160;requests&#160;for a&#160;<br/>
&#160;&#160;pending block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-13&#160;&#160;<br/>
NvM_RestoreBlockDefaults&#160;<br/>
<b>6.4.13&#160;&#160;NvM_EraseNvBlock&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType NvM_EraseNvBlock ( NvM_BlockIdType&#160;BlockId )&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g. list overflow.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request to&#160;erase a&#160;specified NV&#160;block.&#160;This&#160;function&#160;queues&#160;the&#160;erase&#160;request and returns&#160;the&#160;acceptance&#160;<br/>result synchronously.&#160;<br/>The&#160;NVM can&#160;notify&#160;the application by&#160;callback&#160;when the&#160;service&#160;is&#160;finished.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
57&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=58></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-58_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-58_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-58_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-58_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is available&#160;if&#160;API&#160;configuration&#160;class&#160;3 is configured.&#160;&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;In&#160;development&#160;<br/>
mode&#160;the&#160;service will&#160;not&#160;accept&#160;the&#160;call&#160;if&#160;the&#160;block is already&#160;queued&#160;(either&#160;for&#160;this&#160;or&#160;for&#160;a&#160;<br/>different&#160;service).&#160;If&#160;the&#160;block’s&#160;write protection&#160;is&#160;activated&#160;it&#160;also&#160;can’t&#160;be&#160;erased.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution</b>&#160;<br/>Pay&#160;attention&#160;that only&#160;high&#160;priority&#160;jobs&#160;(priority&#160;0) can&#160;be&#160;erased!&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Usage of&#160;Explicit Synchronization, does&#160;not&#160;permit NvM’s&#160;clients&#160;to&#160;issue&#160;new&#160;requests&#160;for&#160;a&#160;<br/>
&#160;&#160;pending block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-14&#160;&#160;<br/>
NvM_EraseNvBlock&#160;<br/>
<b>6.4.14&#160;&#160;NvM_InvalidateNvBlock&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;NvM_InvalidateNvBlock ( NvM_BlockIdType BlockId )&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g. list overflow.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request to&#160;invalidate&#160;a specified&#160;NV&#160;block.&#160;This&#160;function&#160;queues&#160;the&#160;invalidate&#160;request and returns&#160;the&#160;<br/>acceptance result&#160;synchronously.&#160;&#160;<br/>The&#160;NVM can&#160;notify&#160;the application by&#160;callback&#160;when the&#160;service&#160;is&#160;finished.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is available&#160;if&#160;API&#160;configuration&#160;class&#160;3 is configured.&#160;&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;In&#160;development&#160;<br/>
mode&#160;the&#160;service will&#160;not&#160;accept&#160;the&#160;call&#160;if&#160;the&#160;block is already&#160;queued&#160;(either&#160;for&#160;this&#160;or&#160;for&#160;a&#160;<br/>different&#160;service).&#160;If&#160;the&#160;block’s&#160;write protection&#160;is&#160;activated&#160;it&#160;also&#160;can’t&#160;be&#160;invalidated.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Usage of&#160;Explicit Synchronization, does&#160;not&#160;permit NvM’s&#160;clients&#160;to&#160;issue&#160;new&#160;requests&#160;for a&#160;<br/>
&#160;&#160;pending block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
58&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=59></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-59_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-59_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-15&#160;&#160;<br/>
NvM_InvalidateNvBlock&#160;<br/>
<b>6.4.15&#160;&#160;NvM_ReadAll&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;NvM_ReadAll (&#160;void&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request&#160;to&#160;(re)load all&#160;RAM&#160;blocks&#160;that&#160;have&#160;the&#160;option&#160;NVM_SELECT_BLOCK_FOR_READALL&#160;<br/>selected.&#160;The&#160;function&#160;queues the&#160;request&#160;that&#160;will&#160;be&#160;processed&#160;asynchronously&#160;in&#160;<br/>NvM_MainFunction.&#160;<br/>Before&#160;reloading&#160;a&#160;block’s&#160;NV&#160;data,&#160;it&#160;first&#160;checks&#160;if&#160;the&#160;RAM&#160;block&#160;data is&#160;still&#160;valid.&#160;This&#160;can&#160;only&#160;<br/>be&#160;assured&#160;if&#160;the&#160;block&#160;has a&#160;checksum.&#160;In&#160;case&#160;of&#160;valid RAM&#160;data,&#160;the&#160;NV&#160;data will&#160;not&#160;be&#160;<br/>reloaded.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution</b>&#160;<br/>Non-permanent&#160;blocks&#160;and&#160;dataset&#160;blocks&#160;are also skipped&#160;during&#160;a ReadAll&#160;job.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
The&#160;first&#160;block&#160;that&#160;is&#160;read&#160;from&#160;NV&#160;memory&#160;is&#160;the&#160;configuration&#160;ID&#160;(block&#160;1).&#160;The&#160;value&#160;is&#160;<br/>compared&#160;to&#160;the compiled&#160;configuration&#160;ID.&#160;The&#160;result&#160;of&#160;this&#160;check&#160;affects&#160;the&#160;further&#160;processing&#160;<br/>of&#160;the&#160;ReadAll&#160;job,&#160;depending&#160;on&#160;the&#160;setting&#160;of&#160;<b>Dynamic Configuration&#160;Handling</b>:&#160;If&#160;disabled,&#160;all&#160;<br/>NVRAM&#160;blocks&#160;will&#160;be&#160;processed&#160;as&#160;described above,&#160;regardless&#160;of&#160;the&#160;result&#160;of&#160;<br/>reading/checking&#160;the&#160;configuration&#160;ID&#160;(match/mismatch/block&#160;invalid/integrity&#160;error/read&#160;failure).&#160;<br/>If&#160;<b>Dynamic Configuration&#160;Handling</b>&#160;is&#160;enabled,&#160;the&#160;NVM&#160;loads all&#160;NVRAM&#160;blocks&#160;as described&#160;<br/>above,&#160;only&#160;if&#160;it&#160;detected&#160;a configuration&#160;ID&#160;match.&#160;Otherwise (including&#160;failures)&#160;those&#160;blocks&#160;<br/>having&#160;option&#160;<b>Resistant&#160;to Changed Software</b>&#160;set&#160;will&#160;be&#160;loaded as&#160;if&#160;the&#160;configuration&#160;ID&#160;<br/>matched.&#160;The&#160;NVRAM&#160;blocks having&#160;this&#160;option&#160;cleared&#160;will&#160;be&#160;restored&#160;with ROM&#160;defaults,&#160;if&#160;<br/>available,&#160;and if&#160;<b>Select&#160;for&#160;ReadAll</b>&#160;was configured.&#160;<br/>When&#160;the&#160;last&#160;block&#160;is&#160;reloaded the&#160;NVM&#160;can&#160;notify&#160;the&#160;application by&#160;callback&#160;(configurable&#160;multi&#160;<br/>block callback).&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
59&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=60></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-60_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-60_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-60_3.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-60_4.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is a&#160;multi&#160;block request.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is&#160;non&#160;re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is&#160;always&#160;available.&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Usage&#160;of&#160;Explicit&#160;Synchronization,&#160;does not&#160;permit&#160;NvM’s&#160;clients&#160;to issue&#160;new&#160;<br/>
&#160;&#160;requests&#160;for&#160;a&#160;pending&#160;block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;intended&#160;only&#160;to be&#160;called&#160;by&#160;the&#160;ECU&#160;State&#160;Manager&#160;during&#160;startup.&#160;<br/>
Table&#160;6-16&#160;&#160;<br/>
NvM_ReadAll&#160;<br/>
<b>6.4.16&#160;&#160;NvM_WriteAll&#160;</b><br/>
<b>Prototype&#160;<br/></b>void NvM_WriteAll ( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request to&#160;write&#160;all&#160;blocks&#160;with&#160;changed&#160;RAM&#160;data&#160;that&#160;have&#160;the&#160;option&#160;<br/>NVM_SELECT_BLOCK_FOR_WRITEALL&#160;selected&#160;to&#160;the&#160;NV&#160;memory.&#160;The&#160;function&#160;will&#160;queue the&#160;WriteAll&#160;job&#160;<br/>that&#160;will&#160;be processed&#160;asynchronously.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Non-permanent&#160;and dataset&#160;blocks&#160;will&#160;not&#160;be&#160;written&#160;during&#160;NvM_WriteAll().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
When&#160;the&#160;last block&#160;is&#160;written&#160;the NVM can notify&#160;the&#160;application&#160;by&#160;callback&#160;(configurable multiblock&#160;<br/>callback).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>It&#160;is&#160;not&#160;recommended&#160;to&#160;make&#160;any&#160;assumption on the&#160;order&#160;in which&#160;blocks&#160;will&#160;be&#160;<br/>
&#160;&#160;processed.&#160;<br/>
It&#160;is&#160;only&#160;ensured&#160;that&#160;the ConfigID&#160;block&#160;(ID1)&#160;is&#160;the&#160;final&#160;block&#160;being&#160;processed,&#160;in&#160;<br/>order&#160;to&#160;“commit”&#160;a Configuration Update and&#160;any&#160;related&#160;activity.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
60&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=61></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-61_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-61_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is a&#160;multi&#160;block request.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Usage of&#160;Explicit Synchronization, does&#160;not&#160;permit NvM’s&#160;clients&#160;to&#160;issue&#160;new&#160;requests&#160;for a&#160;<br/>
&#160;&#160;pending block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;function&#160;is&#160;intended&#160;only&#160;to be&#160;called&#160;by&#160;the&#160;ECU&#160;State&#160;Manager&#160;during&#160;shutdown.&#160;<br/>
Table&#160;6-17&#160;&#160;<br/>
NvM_WriteAll&#160;<br/>
<b>6.4.17&#160;&#160;NvM_CancelWriteAll&#160;</b><br/>
<b>Prototype&#160;<br/></b>void NvM_CancelWriteAll ( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request to&#160;cancel&#160;a running&#160;NvM_WriteAll()&#160;request.&#160;This&#160;call&#160;en-queues&#160;the request&#160;that&#160;will&#160;be&#160;<br/>processed&#160;asynchronously.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is always&#160;available.&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-18&#160;&#160;<br/>
NvM_CancelWriteAll&#160;<br/>
<b>6.4.18&#160;&#160;NvM_KillWriteAll&#160;</b><br/>
<b>Prototype&#160;<br/></b>void NvM_KillWriteAll ( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
61&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=62></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-62_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request to&#160;cancel&#160;a running&#160;NvM_WriteAll()&#160;request&#160;destructively.&#160;To keep required&#160;wake-up&#160;response&#160;<br/>times&#160;in an&#160;ECU the&#160;ECUM&#160;has&#160;the possibility&#160;to time-out a&#160;non-destructive&#160;NvM_CancelWriteAll()&#160;<br/>request.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is available if&#160;the&#160;pre-compile switch&#160;<b>NvmKillWriteAllApi</b>&#160;(only&#160;in Generic Editor&#160;<br/>
in container&#160;<b>Nvm_30_CommonVendorParams</b>)&#160;is&#160;enabled&#160;independent&#160;on&#160;API&#160;configuration&#160;<br/>class.&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;by&#160;ECUM&#160;<br/>
Table&#160;6-19&#160;&#160;<br/>
NvM_KilllWriteAll&#160;<br/>
<b>6.4.19&#160;&#160;NvM_CancelJobs&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType NvM_CancelJobs&#160;( NvM_BlockIdType BlockId)&#160;<br/>
<b>Parameter&#160;</b><br/>
BlockId&#160;<br/>
The&#160;Block&#160;identifier.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Request has&#160;been&#160;accepted.&#160;<br/>
E_NOT_OK&#160;<br/>
Request has&#160;not&#160;been&#160;accepted,&#160;e.g. because of&#160;a&#160;list&#160;overflow.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request to&#160;cancel&#160;pending&#160;job&#160;for a NV&#160;Block.&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is available if&#160;API&#160;configuration&#160;class&#160;2 or&#160;3 is&#160;configured.&#160;&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called.&#160;&#160;<br/><b>&gt;&#160;&#160;</b>Was&#160;Cancellation successful&#160;Block&#160;result&#160;is&#160;set&#160;to&#160;NVM_REQ_CANCELED.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-20&#160;&#160;<br/>
NvM_CancelJobs&#160;<br/>
<b>6.4.20&#160;&#160;NvM_RepairRedundantBlocks&#160;</b><br/>
<b>Prototype&#160;</b><br/>
void NvM_RepairRedundantBlocks&#160;(void)&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
62&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=63></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-63_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Request&#160;to check&#160;the&#160;redundancy&#160;within NV&#160;RAM&#160;for&#160;all&#160;configured&#160;redundant&#160;blocks.&#160;Write&#160;<br/>protection&#160;or&#160;lock&#160;state does&#160;not&#160;matter&#160;–&#160;NvM&#160;do&#160;not&#160;change&#160;the&#160;data,&#160;it&#160;always&#160;overwrites&#160;<br/>blocks&#160;with data&#160;from&#160;NV&#160;RAM.&#160;<br/>&#160;<br/>If&#160;the&#160;NvM&#160;recognizes a&#160;lost&#160;redundancy,&#160;it&#160;will&#160;try&#160;to&#160;restore it&#160;via overwriting the&#160;defect&#160;block&#160;with&#160;<br/>data&#160;from&#160;valid block.&#160;<br/>&#160;<br/>Nothing&#160;to&#160;repair:&#160;<br/>
-&#160;<br/>
Both&#160;sub-blocks&#160;are&#160;readable&#160;<br/>
-&#160;<br/>
Both&#160;sub-blocks’&#160;Crcs&#160;match&#160;the&#160;recalculates&#160;Crc&#160;<br/>
&#160;<br/>Repairable blocks:&#160;<br/>
-&#160;<br/>
One&#160;sub-block&#160;isn’t&#160;readable,&#160;another&#160;is&#160;<br/>
-&#160;<br/>
One&#160;sub-block’s&#160;Crc&#160;doesn’t&#160;match&#160;the&#160;recalculated&#160;one,&#160;another&#160;sub-block’s&#160;Crc&#160;does&#160;<br/>
-&#160;<br/>
Both&#160;sub-blocks’&#160;Crcs&#160;match&#160;the&#160;data,&#160;but&#160;their&#160;do not&#160;match&#160;each other&#160;(first&#160;block&#160;is&#160;<br/>valid)&#160;<br/>
&#160;<br/>Non-repairable blocks:&#160;<br/>
-&#160;<br/>
Both&#160;sub-blocks&#160;aren’t&#160;readable&#160;<br/>
-&#160;<br/>
Block&#160;sub-blocks’&#160;Crc&#160;does not&#160;match&#160;the&#160;recalculated&#160;Crc&#160;<br/>
&#160;<br/>NvM&#160;will&#160;report&#160;the&#160;error&#160;NVM_E_LOSS_OF_REDUNDANCY&#160;in case&#160;block isn’t&#160;stored&#160;in NV&#160;<br/>RAM&#160;redundantly&#160;and the NvM&#160;could not&#160;restore&#160;the&#160;redundancy.&#160;<br/>&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is asynchronous&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is re-entrant&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is suspendable via all&#160;single and&#160;multi&#160;block&#160;requests&#160;–&#160;it&#160;will&#160;resume after&#160;the&#160;<br/>
requests&#160;are&#160;done&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service can&#160;be&#160;enabled&#160;or&#160;disabled&#160;via configuration&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;NVRAM&#160;Manager&#160;shall&#160;have been&#160;initialized&#160;before&#160;this&#160;request&#160;is&#160;called&#160;<br/>
Call&#160;context&#160;<br/>
<b>&gt;&#160;&#160;</b>This&#160;service is expected&#160;to be&#160;called&#160;in application context.&#160;<br/>
Table&#160;6-21&#160;&#160;<br/>
NvM_RepairRedundantBlocks&#160;<br/>
<b>6.5&#160;</b><br/>
<b>Services&#160;used&#160;by&#160;NVM&#160;</b><br/>
In&#160;the&#160;following&#160;table&#160;services&#160;provided&#160;by&#160;other&#160;components,&#160;which&#160;are&#160;used&#160;by&#160;the&#160;NVM&#160;<br/>are&#160;&#160;listed.&#160;&#160;For&#160;details&#160;about&#160;&#160;prototype&#160;and&#160;functionality&#160;refer&#160;to&#160;the&#160;documentation&#160;of&#160;&#160;the&#160;<br/>providing&#160;component.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
63&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=64></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-64_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Component&#160;</b><br/>
<b>API&#160;</b><br/>
DET&#160;<br/>
Det_ReportError&#160;<br/>
DEM&#160;<br/>
Dem_SetEventStatus&#160;<br/>
MEMIF&#160;<br/>
MemIf_Read&#160;<br/>
MEMIF&#160;<br/>
MemIf_InvalidateBlock&#160;<br/>
MEMIF&#160;<br/>
MemIf_GetJobResult&#160;<br/>
MEMIF&#160;<br/>
MemIf_Write&#160;<br/>
MEMIF&#160;<br/>
MemIf_EraseImmediateBlock&#160;<br/>
MEMIF&#160;<br/>
MemIf_GetStatus&#160;<br/>
MEMIF&#160;<br/>
MemIf_Cancel&#160;<br/>
MEMIF&#160;<br/>
MemIf_SetMode&#160;<br/>
CRC&#160;<br/>
Crc_CalculateCRC16&#160;<br/>
CRC&#160;<br/>
Crc_CalculateCRC32&#160;<br/>
EA&#160;<br/>
Used&#160;by&#160;MEMIF&#160;<br/>
FEE&#160;<br/>
Used&#160;by&#160;MEMIF&#160;<br/>
Table&#160;6-22&#160;&#160;<br/>
Services&#160;used&#160;by&#160;the&#160;NVM&#160;<br/>
<b>6.6&#160;</b><br/>
<b>Callback&#160;Functions&#160;</b><br/>
This&#160;&#160;chapter&#160;&#160;describes&#160;&#160;the&#160;&#160;callback&#160;&#160;functions&#160;&#160;that&#160;&#160;are&#160;&#160;implemented&#160;&#160;by&#160;&#160;the&#160;&#160;NVM&#160;&#160;and&#160;&#160;can&#160;&#160;be&#160;<br/>invoked&#160;by&#160;other&#160;modules.&#160;The&#160;prototypes&#160;of&#160;the&#160;callback&#160;functions&#160;are&#160;provided&#160;in&#160;the&#160;header&#160;file&#160;<br/>NvM_Cbk.h&#160;by&#160;the&#160;NVM.&#160;<br/>
<b>6.6.1&#160;</b><br/>
<b>NvM_JobEndNotification&#160;</b><br/>
<b>Prototype&#160;<br/></b>void NvM_JobEndNotification ( void )&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Function to&#160;be&#160;used&#160;by&#160;the&#160;underlying memory&#160;abstraction&#160;to&#160;signal&#160;end&#160;of&#160;job&#160;without&#160;error.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
&#160;&#160;The&#160;callback&#160;function&#160;NvM_JobEndNotification&#160;is&#160;intended&#160;to&#160;be&#160;used by&#160;the&#160;underlying&#160;<br/>
memory&#160;abstraction&#160;(Fee/Ea)&#160;to&#160;signal&#160;end&#160;of&#160;job&#160;without&#160;error.&#160;<br/>
Table&#160;6-23&#160;&#160;<br/>
NvM_JobEndNotification&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
64&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=65></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-65_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>6.6.2&#160;</b><br/>
<b>NvM_JobErrorNotification&#160;</b><br/>
<b>Prototype&#160;<br/></b>void NvM_JobErrorNotification (&#160;void )&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Function to&#160;be&#160;used&#160;by&#160;the&#160;underlying memory&#160;abstraction&#160;to&#160;signal&#160;end&#160;of&#160;job&#160;with error.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>Expected&#160;Caller&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;callback&#160;function&#160;NvM_JobErrorNotification&#160;is&#160;intended&#160;to&#160;be&#160;used&#160;by&#160;the&#160;<br/>
underlying&#160;memory&#160;abstraction&#160;(Fee/Ea)&#160;to&#160;signal&#160;end of&#160;job&#160;with error.&#160;<br/>
Table&#160;6-24&#160;&#160;<br/>
NvM_JobErrorNotification&#160;<br/>
<b>6.7&#160;</b><br/>
<b>Configurable&#160;Interfaces&#160;</b><br/>
At&#160;its&#160;configurable&#160;interfaces&#160;the&#160;NVM&#160;defines&#160;notifications&#160;that&#160;can&#160;be&#160;mapped&#160;to&#160;callback&#160;<br/>functions&#160;&#160;provided&#160;&#160;by&#160;&#160;other&#160;&#160;modules.&#160;The&#160;&#160;mapping&#160;&#160;is&#160;&#160;not&#160;&#160;statically&#160;&#160;defined&#160;&#160;by&#160;&#160;the&#160;&#160;BSW&#160;<br/>module&#160;&#160;but&#160;&#160;can&#160;&#160;be&#160;&#160;performed&#160;at&#160;&#160;configuration&#160;&#160;time.&#160;The&#160;function&#160;prototypes&#160;&#160;that&#160;&#160;can&#160;&#160;be&#160;<br/>used&#160;&#160;for&#160;&#160;the&#160;&#160;configuration&#160;&#160;have&#160;&#160;to&#160;&#160;match&#160;&#160;the&#160;&#160;signatures&#160;&#160;described&#160;&#160;in&#160;&#160;the&#160;&#160;following&#160;&#160;sub-<br/>chapters.&#160;<br/>
<b>6.7.1&#160;</b><br/>
<b>&#160;SingleBlockCallbackFunction&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;&lt;SingleBlockCallbackFunction&gt;&#160;(&#160;<br/>
NvM_ServiceIdType ServiceId,&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160;<br/>NvM_RequestResultType&#160;JobResult&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
ServiceId&#160;<br/>
The&#160;service identifier&#160;(see&#160;chapt<a href="TechnicalReference_NvMs.html#46">er&#160;6.2)</a>&#160;of&#160;the completed request.&#160;<br/>NvM_ServiceIdType&#160;is&#160;of&#160;type&#160;uint8.&#160;<br/>
JobResult&#160;<br/>
Result&#160;of&#160;the&#160;single block&#160;job.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Callback&#160;function&#160;has&#160;been&#160;processed&#160;successfully&#160;<br/>
E_NOT_OK&#160;<br/>
Callback&#160;function&#160;has&#160;not&#160;been&#160;processed&#160;successfully.&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Callback&#160;routine to&#160;notify&#160;the upper&#160;layer&#160;that an&#160;asynchronous&#160;single&#160;block&#160;request has&#160;been&#160;finished.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
65&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=66></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-66_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-66_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>This&#160;description&#160;is&#160;limited to&#160;embedded&#160;code;&#160;it&#160;does&#160;not&#160;describe&#160;RUNNABLES&#160;<br/>
<b>&#160;&#160;</b>implementing&#160;a&#160;callback’s&#160;behavior&#160;in an&#160;SWC,&#160;but&#160;it&#160;describes&#160;the prototype&#160;to be&#160;<br/>
implemented/generated&#160;be&#160;the&#160;RTE&#160;or&#160;by&#160;a BSW&#160;component.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
Call&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Called&#160;from&#160;NvM_MainFunction&#160;<br/><b>&gt;&#160;&#160;</b>Asynchronous&#160;block&#160;processing&#160;completed&#160;(except&#160;NvM_WriteAll,&#160;for&#160;NvM_ReadAll&#160;it&#160;is&#160;<br/>
configurable)&#160;<br/>
Table&#160;6-25&#160;&#160;<br/>
SingleBlockCallbackFunction&#160;<br/>
<b>6.7.2&#160;</b><br/>
<b>MultiBlockCallbackFunction&#160;&#160;</b><br/>
<b>Prototype&#160;<br/></b>void&#160;&lt;MultiBlockCallbackFunction&gt;&#160;(&#160;NvM_ServiceIdType ServiceId,&#160;&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160;<br/>&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;NvM_RequestResultType JobResult&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
ServiceId&#160;<br/>
The&#160;service identifier&#160;(see&#160;chapt<a href="TechnicalReference_NvMs.html#46">er&#160;6.2)</a>&#160;of&#160;the completed request.&#160;<br/>NvM_ServiceIdType&#160;is&#160;of&#160;type&#160;uint8.&#160;<br/>
JobResult&#160;<br/>
Result&#160;of&#160;the&#160;multi&#160;block&#160;job.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
void&#160;<br/>
--&#160;<br/>
<b>Functional&#160;Description&#160;</b><br/>
Common&#160;callback&#160;routine&#160;to notify&#160;the upper&#160;layer that&#160;an&#160;asynchronous&#160;multi&#160;block&#160;request has&#160;been&#160;<br/>finished.&#160;&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant.&#160;<br/>Call&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Called&#160;from&#160;NvM_MainFunction.&#160;<br/><b>&gt;&#160;&#160;</b>Called&#160;upon&#160;completion&#160;of&#160;NvM_ReadAll&#160;and&#160;NvM_WriteAll,&#160;respectively&#160;<br/>
Table&#160;6-26&#160;<br/>
MultiBlockCallbackFunction&#160;<br/>
<b>6.7.3&#160;</b><br/>
<b>InitBlockCallbackFunction&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType&#160;&lt;InitBlockCallbackFunction&gt;&#160;( void )&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
66&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=67></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-67_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-67_2.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-67_3.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Parameter&#160;</b><br/>
--&#160;<br/>
--&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
Std_ReturnType&#160;<br/>
NVM&#160;always&#160;returns&#160;E_OK.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Callback&#160;routine&#160;which shall&#160;be&#160;called&#160;by&#160;the&#160;NVM&#160;module to copy&#160;default&#160;data&#160;to a&#160;RAM&#160;block&#160;if&#160;<br/>a ROM&#160;block is configured.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>During&#160;calling&#160;init&#160;block&#160;callback&#160;related&#160;block&#160;is&#160;still&#160;busy.&#160;No request&#160;for&#160;it&#160;shall&#160;be&#160;<br/>
&#160;&#160;issued&#160;as long&#160;as&#160;block&#160;is&#160;busy.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant&#160;<br/>Call&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Called&#160;from&#160;NvM_MainFunction&#160;<br/><b>&gt;&#160;&#160;</b>Called&#160;during&#160;processing of&#160;NvM_ReadAll,&#160;if&#160;application shall&#160;copy&#160;default&#160;values&#160;into&#160;the&#160;<br/>
corresponding RAM&#160;block.&#160;<br/>
Table&#160;6-27&#160;<br/>
InitBlockCallbackFunction&#160;<br/>
<b>6.7.4&#160;</b><br/>
<b>Callback&#160;function for&#160;RAM&#160;to NvM&#160;copy&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType &lt;NvM_WriteRamBlockToNvm&gt; ( void* NvMBuffer&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
NvMBuffer&#160;<br/>
Internal&#160;RAM mirror where&#160;Ram&#160;block&#160;data&#160;shall&#160;be&#160;written to&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Callback&#160;function&#160;has&#160;been&#160;processed&#160;successfully&#160;<br/>
E_NOT_OK&#160;<br/>
Callback&#160;function&#160;has&#160;not&#160;been&#160;processed&#160;successfully.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Block&#160;specific&#160;callback&#160;routine which shall&#160;be&#160;called&#160;in order&#160;to let&#160;the&#160;application copy&#160;data&#160;from&#160;<br/>RAM&#160;block&#160;to&#160;internal&#160;NvM&#160;RAM&#160;mirror.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>During&#160;calling&#160;NvM_WriteRamBlockToNvM&#160;callback&#160;related&#160;block&#160;is&#160;still&#160;busy.&#160;No&#160;<br/>
&#160;&#160;request&#160;for&#160;it&#160;shall&#160;be&#160;issued&#160;as long&#160;as block&#160;is&#160;busy.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant&#160;<br/>Call&#160;Context&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
67&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=68></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-68_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-68_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&gt;&#160;&#160;</b>Called&#160;from&#160;NvM_MainFunction&#160;<br/><b>&gt;&#160;&#160;</b>Called&#160;during&#160;processing of&#160;NvM&#160;write requests,&#160;if&#160;application shall&#160;copy&#160;RAM&#160;block data&#160;into&#160;<br/>
the&#160;internal&#160;RAM&#160;mirror.&#160;<br/>
Table&#160;6-28&#160;<br/>
Callback&#160;function&#160;for&#160;RAM&#160;to&#160;NvM&#160;copy&#160;<br/>
<b>6.7.5&#160;</b><br/>
<b>Callback&#160;function for&#160;NvM&#160;to&#160;RAM&#160;copy&#160;</b><br/>
<b>Prototype&#160;<br/></b>Std_ReturnType &lt;NvM_ReadRamBlockFromNvm&gt; (&#160;const&#160;void* NvMBuffer&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
NvMBuffer&#160;<br/>
Internal&#160;RAM mirror where&#160;Ram&#160;block&#160;data&#160;can&#160;be&#160;read from&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
E_OK&#160;<br/>
Callback&#160;function&#160;has&#160;been&#160;processed&#160;successfully&#160;<br/>
E_NOT_OK&#160;<br/>
Callback&#160;function&#160;has&#160;not&#160;been&#160;processed&#160;successfully.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>Block&#160;specific&#160;callback&#160;routine which shall&#160;be&#160;called&#160;in order&#160;to let&#160;the&#160;application copy&#160;data&#160;from&#160;<br/>NvM&#160;module’s&#160;mirror&#160;to&#160;RAM&#160;block.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>During&#160;calling&#160;NvM_ReadRamBlockFromNvM&#160;callback&#160;related&#160;block&#160;is&#160;still&#160;busy.&#160;No&#160;<br/>
&#160;&#160;request&#160;for&#160;it&#160;shall&#160;be&#160;issued&#160;as long&#160;as block&#160;is&#160;busy.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>This&#160;service is synchronous.&#160;<br/><b>&gt;&#160;&#160;</b>This&#160;service is non&#160;re-entrant&#160;<br/>Call&#160;Context&#160;<br/>
<b>&gt;&#160;&#160;</b>Called&#160;from&#160;NvM_MainFunction&#160;<br/><b>&gt;&#160;&#160;</b>Called&#160;during&#160;processing of&#160;NvM&#160;read&#160;requests,&#160;if&#160;application&#160;can&#160;copy&#160;data&#160;from&#160;internal&#160;RAM&#160;<br/>
mirror&#160;to&#160;RAM&#160;block.&#160;<br/>
Table&#160;6-29&#160;<br/>
Callback&#160;function&#160;for&#160;NvM&#160;to&#160;RAM&#160;copy&#160;<br/>
<b>6.8&#160;</b><br/>
<b>Service&#160;Ports&#160;</b><br/>
Via&#160;Service&#160;Ports&#160;the&#160;software&#160;components&#160;(SWC)&#160;have&#160;the&#160;possibility&#160;to&#160;execute&#160;services&#160;<br/>of&#160;&#160;the&#160;&#160;NVM&#160;&#160;with&#160;&#160;an&#160;&#160;abstract&#160;&#160;RTE&#160;&#160;interface.&#160;&#160;Hence,&#160;&#160;the&#160;&#160;software&#160;&#160;components&#160;&#160;are&#160;<br/>independent&#160;from&#160;the&#160;underlying&#160;basic software stack.&#160;<br/>
<b>6.8.1&#160;</b><br/>
<b>Client&#160;Server Interface&#160;</b><br/>
A&#160;&#160;client&#160;&#160;server&#160;&#160;interface&#160;&#160;is&#160;&#160;related&#160;&#160;to&#160;&#160;a&#160;&#160;Provide&#160;&#160;Port&#160;&#160;(Pport)&#160;&#160;at&#160;&#160;the&#160;&#160;server&#160;&#160;side&#160;&#160;and&#160;&#160;a&#160;<br/>Require&#160;Port&#160;(Rport)&#160;at&#160;client&#160;side.&#160;<br/>Configuration&#160;dependent&#160;naming&#160;details&#160;are described&#160;in&#160;the&#160;chapte<a href="TechnicalReference_NvMs.html#72">rs&#160;7.1.3&#160;</a>and<a href="TechnicalReference_NvMs.html#73">&#160;7.1.4.</a>&#160;<br/>
<b>6.8.1.1&#160;</b><br/>
<b>Provide&#160;Ports&#160;on&#160;NVM&#160;side&#160;</b><br/>
At&#160;&#160;the&#160;&#160;Pports&#160;&#160;of&#160;&#160;the&#160;&#160;NVM&#160;&#160;the&#160;API&#160;&#160;functions&#160;&#160;described&#160;&#160;<a href="TechnicalReference_NvMs.html#48">in&#160;&#160;6.4&#160;&#160;</a>are&#160;&#160;available&#160;&#160;as&#160;&#160;Runnable&#160;<br/>Entities.&#160;&#160;The&#160;&#160;Runnable&#160;&#160;Entities&#160;&#160;are&#160;&#160;invoked&#160;&#160;via&#160;&#160;Operations.&#160;&#160;The&#160;&#160;mapping&#160;&#160;from&#160;&#160;a&#160;&#160;SWC&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
68&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=69></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-69_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
client&#160;&#160;call&#160;&#160;to&#160;&#160;an&#160;&#160;Operation&#160;&#160;is&#160;&#160;performed&#160;&#160;by&#160;&#160;the&#160;&#160;RTE.&#160;&#160;In&#160;this&#160;&#160;mapping&#160;&#160;the&#160;&#160;RTE&#160;adds&#160;&#160;Port&#160;<br/>Defined&#160;Argument&#160;Values to&#160;the&#160;client&#160;call&#160;of&#160;the&#160;SWC,&#160;if&#160;configured.&#160;<br/>The&#160;following&#160;&#160;subchapters&#160;present&#160;the&#160;Pports&#160;&#160;defined&#160;for&#160;the&#160;&#160;NVM&#160;&#160;and&#160;their&#160;Operations,&#160;<br/>the&#160;API&#160;functions&#160;related&#160;to&#160;those&#160;Operations&#160;and&#160;the&#160;Port&#160;Defined&#160;Argument&#160;Values&#160;to&#160;be&#160;<br/>added&#160;by&#160;the&#160;RTE:&#160;<br/>
<b>6.8.1.1.1&#160;</b><br/>
<b>Padmin_&lt;BlockName&gt;&#160;</b><br/>
A&#160;port&#160;of&#160;type&#160;<b>Padmin</b>&#160;is&#160;a&#160;Pport&#160;of&#160;one&#160;NVRAM&#160;block,&#160;which&#160;is&#160;configured&#160;to&#160;use&#160;Service&#160;<br/>Ports.&#160;<br/>If&#160;the&#160;SWC&#160;setting&#160;<b>Long&#160;Service&#160;Port&#160;Names</b>&#160;is&#160;enabled,&#160;the&#160;name&#160;of&#160;the&#160;service&#160;ports&#160;is&#160;<br/>Padmin_&lt;BlockName&gt;;&#160;&#160;if&#160;&#160;<b>Long&#160;&#160;Service&#160;&#160;Port&#160;&#160;Names</b>&#160;&#160;is&#160;&#160;disabled,&#160;&#160;the&#160;&#160;name&#160;&#160;is&#160;<br/>Padmin_&lt;BlockId&gt;.&#160;<br/>Available&#160;if&#160;API&#160;Config&#160;Class =&#160;3&#160;<br/>
<b>Operation&#160;</b><br/>
<b>API&#160;Function&#160;</b><br/>
<b>Port&#160;Defined&#160;Argument&#160;Values&#160;</b><br/>
SetBlockProtection<br/>
NvM_SetBlockProtection()&#160;<br/>
NvM_BlockIdType4&#160;1..n<br/>
&#160;<br/>
&#160;<br/>
Table&#160;6-30&#160;<br/>
Operations&#160;of&#160;Port&#160;Prototype&#160;Padmin_&lt;BlockName&gt;&#160;<br/>
<b>6.8.1.1.2&#160;</b><br/>
<b>PS_&lt;BlockName&gt;&#160;</b><br/>
A&#160;port of&#160;type&#160;<b>PS</b>&#160;is a&#160;Pport&#160;of&#160;one&#160;NVRAM&#160;block,&#160;which&#160;is&#160;configured&#160;to&#160;use&#160;Service&#160;Ports.&#160;<br/>If&#160;the&#160;SWC&#160;setting&#160;<b>Long&#160;Service&#160;Port&#160;Names</b>&#160;is&#160;enabled,&#160;the&#160;name&#160;of&#160;the&#160;service&#160;ports&#160;is&#160;<br/>PS_&lt;BlockName&gt;;&#160;if&#160;<b>Long Service&#160;Port Names</b>&#160;is&#160;disabled,&#160;the&#160;name&#160;is PS_&lt;BlockId&gt;.&#160;<br/>
<b>Operation&#160;</b><br/>
<b>API&#160;Function&#160;</b><br/>
<b>Port&#160;Defined&#160;Argument&#160;Values&#160;</b><br/>
GetErrorStatus&#160;1<br/>
NvM_GetErrorStatus()&#160;<br/>
NvM_BlockIdType4&#160;1..n<br/>
&#160;<br/>
&#160;<br/>
SetRamBlockStatus1<br/>
NvM_SetRamBlockStatus()&#160;<br/>
NvM_BlockIdType4&#160;1..n<br/>
&#160;<br/>
&#160;<br/>
SetDataIndex2,5<br/>
NvM_SetDataIndex()&#160;<br/>
NvM_BlockIdType4&#160;1..n<br/>
&#160;<br/>
&#160;<br/>
GetDataIndex2,5<br/>
NvM_GetDataIndex()&#160;<br/>
NvM_BlockIdType4&#160;1..n<br/>
&#160;<br/>
&#160;<br/>
ReadBlock2<br/>
NvM_ReadBlock()&#160;<br/>
NvM_BlockIdType4&#160;1..n<br/>
&#160;<br/>
&#160;<br/>
WriteBlock2<br/>
NvM_WriteBlock()&#160;<br/>
NvM_BlockIdType4&#160;1..n<br/>
&#160;<br/>
&#160;<br/>
RestoreBlockDefaults2, 6<br/>
NvM_RestoreBlockDefaults()&#160;&#160;NvM_BlockIdType4&#160;1..n<br/>
&#160;<br/>
&#160;<br/>
EraseBlock3<br/>
NvM_EraseNvBlock()&#160;<br/>
NvM_BlockIdType4&#160;1..n<br/>
&#160;<br/>
&#160;<br/>
InvalidateNvBlock3<br/>
NvM_InvalidateNvBlock()&#160;<br/>
NvM_BlockIdType4&#160;1..n<br/>
&#160;<br/>
&#160;<br/>
Table&#160;6-31&#160;<br/>
Operations&#160;of&#160;Port&#160;Prototype&#160;PS_&lt;BlockName&gt;&#160;<br/>
1.&#160;&#160;Always available&#160;<br/>
2.&#160;&#160;Available&#160;if&#160;API&#160;Config&#160;Class &gt;=&#160;2&#160;<br/>
3.&#160;&#160;Available&#160;if&#160;API&#160;Config&#160;Class = 3&#160;<br/>
4.&#160;&#160;Is&#160;derived&#160;from&#160;the&#160;block’s position&#160;in&#160;the&#160;configuration&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
69&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=70></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-70_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
5.&#160;&#160;Only&#160;available&#160;for blocks of&#160;Management&#160;Type&#160;Dataset&#160;<br/>
6.&#160;&#160;Only&#160;available&#160;for blocks with&#160;Rom&#160;defaults&#160;configured&#160;<br/>
<b>6.8.1.2&#160;</b><br/>
<b>Require&#160;Ports&#160;</b><br/>
NVM&#160;invokes&#160;callbacks&#160;using&#160;Rports.&#160;These&#160;Operations&#160;have&#160;to&#160;be&#160;provided&#160;by&#160;the&#160;SWCs&#160;<br/>by&#160;&#160;means&#160;&#160;of&#160;&#160;Runnable&#160;&#160;Entities&#160;&#160;using&#160;&#160;Pports.&#160;&#160;These&#160;&#160;Runnable&#160;&#160;Entities&#160;&#160;implement&#160;&#160;the&#160;<br/>callback&#160;functions expected&#160;by&#160;the&#160;NVM.&#160;<br/>The&#160;following&#160;subchapters&#160;present&#160;the&#160;Require&#160;Ports&#160;defined&#160;for&#160;the&#160;NVM,&#160;the&#160;Operations&#160;<br/>that&#160;are&#160;called&#160;from&#160;the&#160;NVM&#160;and&#160;the&#160;related&#160;Notifications,&#160;which&#160;are&#160;described&#160;in&#160;chapter&#160;<br/><a href="TechnicalReference_NvMs.html#65">6.7.</a>&#160;<br/>
<b>6.8.1.2.1&#160;</b><br/>
<b>NvM_RpNotifyFinished_Id&lt;BlockName&gt;&#160;</b><br/>
A&#160;&#160;port&#160;&#160;of&#160;&#160;type&#160;&#160;<b>NvM_RpNotifyFinished_Id</b>&#160;&#160;is&#160;&#160;a&#160;&#160;Rport&#160;&#160;of&#160;&#160;one&#160;&#160;NVRAM&#160;&#160;block,&#160;&#160;which&#160;&#160;is&#160;<br/>configured&#160;to&#160;use&#160;Service&#160;Ports.&#160;<br/>If&#160;the&#160;SWC&#160;setting&#160;<b>Long&#160;Service&#160;Port&#160;Names</b>&#160;is&#160;enabled,&#160;the&#160;name&#160;of&#160;the&#160;service&#160;ports&#160;is&#160;<br/>NvM_RpNotifyFinished_Id&lt;BlockName&gt;;&#160;&#160;if&#160;&#160;<b>Long&#160;&#160;Service&#160;&#160;Port&#160;&#160;Names</b>&#160;&#160;is&#160;&#160;disabled,&#160;&#160;the&#160;<br/>name&#160;is NvM_RpNotifyFinished_Id&lt;BlockId&gt;.&#160;<br/>Available&#160;in&#160;all&#160;API&#160;Config&#160;Classes but&#160;<b>Use&#160;Callbacks</b>&#160;must&#160;be&#160;enabled.&#160;<br/>
<b>Operation&#160;</b><br/>
<b>Notification&#160;</b><br/>
JobFinished<br/>
SingleBlockCallbackFunction<br/>
&#160;<br/>
&#160;<br/>
Table&#160;6-32&#160;<br/>
Operation&#160;of&#160;Port&#160;prototype&#160;NvM_RpNotifyFinished_Id&lt;BlockName&gt;&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
70&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=71></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-71_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-71_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>7&#160;&#160;Configuration&#160;</b><br/>
<b>7.1&#160;</b><br/>
<b>Software&#160;Component Template&#160;</b><br/>
<b>7.1.1&#160;</b><br/>
<b>Generation&#160;</b><br/>
The&#160;definition&#160;of&#160;the&#160;Provide&#160;Ports&#160;is&#160;described&#160;in&#160;an&#160;XML&#160;file.&#160;This&#160;file&#160;describes&#160;the&#160;NVM&#160;<br/>as&#160;a&#160;software&#160;component&#160;with&#160;ports&#160;to&#160;which&#160;other&#160;applications&#160;can&#160;connect.&#160;This&#160;XML&#160;file&#160;<br/>is&#160;&#160;always&#160;&#160;saved&#160;&#160;consistent&#160;&#160;to&#160;&#160;the&#160;&#160;current&#160;&#160;ECUC&#160;&#160;file&#160;&#160;when&#160;&#160;the&#160;&#160;project&#160;&#160;in&#160;&#160;DaVinci&#160;<br/>Configurator&#160;is&#160;saved.&#160;The&#160;target&#160;directory&#160;for&#160;SW-C&#160;files&#160;can&#160;be&#160;set&#160;&#160;in&#160;&#160;the&#160;&#160;Dpa&#160;file.&#160;For&#160;<br/>more information&#160;see&#160;documentation&#160;of&#160;DaVinci Configurator.&#160;<br/>
<b>7.1.2&#160;</b><br/>
<b>Import&#160;into DaVinci&#160;Developer&#160;</b><br/>
For&#160;further&#160;processing&#160;the&#160;generated&#160;software&#160;component&#160;template&#160;file&#160;has&#160;to&#160;be&#160;imported&#160;<br/>into&#160;DaVinci&#160;Developer.&#160;This&#160;can&#160;be&#160;done&#160;while&#160;a&#160;DaVinci-project&#160;is&#160;open&#160;by&#160;clicking&#160;<b>File&#160;</b>|&#160;<br/><b>Import&#160;XML&#160;File...</b>.&#160;Choose&#160;the&#160;correct&#160;file&#160;for&#160;the&#160;import.&#160;<br/>
&#160;&#160;<br/>
Figure&#160;7-1&#160;<br/>
Import&#160;a&#160;new&#160;software&#160;component&#160;into&#160;DaVinci&#160;Developer&#160;<br/>
After&#160;&#160;importing&#160;&#160;the&#160;&#160;NVM&#160;&#160;as&#160;&#160;software&#160;&#160;component&#160;&#160;there&#160;&#160;is&#160;&#160;a&#160;&#160;new&#160;&#160;component&#160;&#160;type&#160;&#160;in&#160;&#160;the&#160;<br/>library&#160;&#160;view&#160;available.&#160;After&#160;double&#160;&#160;clicking&#160;&#160;the&#160;&#160;component&#160;&#160;NVM,&#160;&#160;all&#160;configured&#160;ports&#160;are&#160;<br/>presented.&#160;<br/>The&#160;&#160;DaVinci&#160;&#160;tool&#160;&#160;suite&#160;&#160;lets&#160;&#160;you&#160;&#160;design&#160;&#160;the&#160;&#160;complete&#160;&#160;architecture&#160;&#160;of&#160;&#160;a&#160;&#160;car,&#160;&#160;consisting&#160;&#160;of&#160;<br/>several ECUs,&#160;each&#160;with&#160;its&#160;own&#160;NVM.&#160;Therefore it&#160;is desirable&#160;to&#160;import several NVM SW-<br/>C&#160;&#160;descriptions,&#160;&#160;each&#160;&#160;containing&#160;&#160;the&#160;&#160;description&#160;&#160;of&#160;&#160;an&#160;&#160;NVM&#160;&#160;to&#160;&#160;be&#160;&#160;mapped&#160;&#160;to&#160;&#160;a&#160;&#160;particular&#160;<br/>ECU.&#160;&#160;Using&#160;the&#160;&#160;‘Service&#160;Component&#160;&#160;Name&#160;Parameter’&#160;&#160;you&#160;can&#160;give&#160;&#160;your&#160;configurations&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
71&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=72></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-72_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
meaningful&#160;&#160;unique&#160;&#160;names.&#160;&#160;All&#160;&#160;elements&#160;&#160;of&#160;&#160;the&#160;&#160;SW-C&#160;&#160;description&#160;&#160;are&#160;&#160;unique&#160;&#160;in&#160;&#160;this&#160;<br/>particular&#160;&#160;configuration&#160;&#160;and&#160;&#160;are&#160;&#160;prefixed&#160;&#160;with&#160;&#160;this&#160;&#160;parameter’s&#160;&#160;value.&#160;&#160;However,&#160;&#160;most&#160;<br/>elements&#160;&#160;are&#160;&#160;common&#160;&#160;to&#160;&#160;all&#160;&#160;SW-C&#160;&#160;descriptions,&#160;&#160;or&#160;&#160;are&#160;&#160;at&#160;&#160;least&#160;&#160;unique&#160;&#160;to&#160;&#160;the&#160;&#160;used&#160;<br/>configuration&#160;(which&#160;is also&#160;expressed&#160;by&#160;the&#160;elements’&#160;names)&#160;so&#160;that&#160;some&#160;elements&#160;are&#160;<br/>contained&#160;in&#160;each&#160;different&#160;SW-C&#160;description.&#160;During&#160;import,&#160;DaVinci&#160;will&#160;warn&#160;you&#160;about&#160;<br/>these&#160;doubled&#160;elements.&#160;You&#160;can&#160;ignore&#160;them&#160;(overwrite&#160;the&#160;existing&#160;elements);&#160;they&#160;are&#160;<br/>identical.&#160;<br/>
<b>7.1.3&#160;</b><br/>
<b>Dependencies&#160;on Configuration&#160;of&#160;NVM&#160;Attributes&#160;</b><br/>
The&#160;configuration&#160;of&#160;the&#160;NVM&#160;attributes&#160;(described&#160;in&#160;chapte<a href="TechnicalReference_NvMs.html#73">r&#160;7.1.5)&#160;</a>highly&#160;influences&#160;the&#160;<br/>resulting&#160;&#160;SW-C&#160;&#160;Description.&#160;&#160;So,&#160;&#160;the&#160;&#160;value&#160;&#160;of&#160;&#160;the&#160;&#160;parameter&#160;&#160;<b>Service&#160;&#160;Component&#160;&#160;Name</b>&#160;<br/>influences&#160;&#160;the&#160;&#160;names&#160;&#160;of&#160;&#160;several&#160;&#160;elements&#160;&#160;in&#160;&#160;the&#160;&#160;description,&#160;&#160;especially&#160;&#160;the&#160;&#160;name&#160;&#160;of&#160;&#160;the&#160;<br/><b>Service&#160;&#160;Component</b>.&#160;&#160;It&#160;&#160;is&#160;&#160;also&#160;&#160;the&#160;&#160;prefix&#160;&#160;for&#160;&#160;several&#160;&#160;other&#160;&#160;names&#160;&#160;that&#160;&#160;belong&#160;&#160;to&#160;&#160;this&#160;<br/>particular NVM configuration&#160;(and&#160;the&#160;resulting&#160;service&#160;component).&#160;<br/>There&#160;&#160;is&#160;&#160;a&#160;&#160;couple&#160;&#160;of&#160;&#160;different&#160;&#160;port&#160;&#160;interfaces&#160;&#160;that&#160;&#160;will&#160;&#160;be&#160;&#160;generated,&#160;&#160;depending&#160;&#160;on&#160;&#160;the&#160;<br/>particular&#160;configuration.&#160;Each&#160;generated&#160;interface&#160;that&#160;results&#160;from&#160;a&#160;specific&#160;configuration&#160;<br/>has&#160;a&#160;unique&#160;name,&#160;i.e.&#160;in&#160;different&#160;SW-C&#160;descriptions&#160;port&#160;interfaces&#160;with&#160;the&#160;same&#160;name&#160;<br/>are&#160;compatible;&#160;they&#160;provide&#160;the&#160;same&#160;operations,&#160;each&#160;with&#160;the&#160;same&#160;arguments&#160;of&#160;same&#160;<br/>type.&#160;<br/>
<b>7.1.3.1&#160;</b><br/>
<b>Naming of Service&#160;Port Interfaces&#160;</b><br/>
The&#160;&#160;Service&#160;&#160;Port&#160;&#160;Interface&#160;&#160;provides&#160;&#160;the&#160;&#160;prototypes&#160;&#160;of&#160;&#160;the&#160;&#160;elementary&#160;&#160;block&#160;&#160;related&#160;<br/>services&#160;&#160;of&#160;&#160;the&#160;&#160;NVM,&#160;&#160;such&#160;&#160;as&#160;&#160;read&#160;&#160;data&#160;&#160;from&#160;&#160;NV&#160;&#160;memory,&#160;&#160;write&#160;&#160;data&#160;&#160;to&#160;&#160;NV&#160;&#160;memory.&#160;&#160;It&#160;<br/>generally&#160;contains&#160;the&#160;string&#160;<b>Service</b>.&#160;<br/>As&#160;&#160;described&#160;&#160;above,&#160;&#160;port&#160;&#160;interfaces&#160;&#160;resulting&#160;&#160;from&#160;different&#160;&#160;configurations,&#160;&#160;have&#160;&#160;different&#160;<br/>names.&#160;These&#160;names&#160;are given&#160;according&#160;to&#160;this scheme:&#160;<br/>
<b>&gt;&#160;&#160;</b>Each&#160;Interface&#160;is&#160;prefixed&#160;by&#160;<b>NvM</b>&#160;<br/>
&gt;<b>&#160;&#160;Set Ram&#160;Block&#160;Status&#160;Api&#160;</b><br/>
If&#160;enabled,&#160;the&#160;interface&#160;name&#160;contains&#160;the&#160;string&#160;‘SRBS’,&#160;and&#160;it&#160;contains&#160;the&#160;operation&#160;<br/>SetRamBlockStatus.&#160;<br/>
<b>&gt;&#160;&#160;API&#160;Configuration Class</b>&#160;<br/>
The&#160;interface&#160;name&#160;contains&#160;a&#160;short string&#160;that&#160;denotes the&#160;API&#160;configuration&#160;class it&#160;<br/>belongs to:&#160;<b>AC1</b>,&#160;<b>AC2</b>&#160;or&#160;<b>AC3</b>.&#160;The&#160;operations the&#160;interface&#160;describes in&#160;that&#160;<br/>configuration&#160;class&#160;are&#160;described&#160;in&#160;Chapte<a href="TechnicalReference_NvMs.html#68">r&#160;&#160;6.8.1.1.</a>&#160;<br/>
&gt;<b>&#160;&#160;Availability&#160;of ROM&#160;default data</b>&#160;<br/>
The&#160;interface&#160;contains&#160;the&#160;operation&#160;RestoreBlockDefaults;&#160;it contains&#160;the&#160;string&#160;<b>Defs</b>.&#160;<br/>This interface&#160;will be&#160;used&#160;by&#160;all&#160;P-Port-Prototypes belonging&#160;to&#160;a&#160;NVRAM block&#160;that&#160;<br/>was configured&#160;with&#160;ROM default data.&#160;<br/>
<b>&gt;&#160;&#160;Block&#160;Management&#160;Type&#160;DATASET</b>&#160;<br/>
The&#160;interface&#160;provides&#160;the&#160;operations&#160;GetDataIndex&#160;and&#160;SetDataIndex.&#160;Its name&#160;<br/>contains&#160;<b>DS</b>.&#160;This interface&#160;will be&#160;used&#160;by&#160;all&#160;NVRAM&#160;blocks&#160;of&#160;Management&#160;Type&#160;<br/><b>DATASET</b>&#160;<br/>
The&#160;first&#160;two&#160;possibilities&#160;are&#160;common&#160;within&#160;one&#160;SW-C&#160;Description.&#160;Only&#160;one&#160;combination&#160;<br/>of&#160;&#160;them&#160;&#160;will&#160;&#160;occur.&#160;&#160;Unless&#160;&#160;<b>API&#160;&#160;Configuration&#160;&#160;Class&#160;&#160;1</b>&#160;&#160;was&#160;&#160;chosen,&#160;&#160;Port&#160;&#160;Interfaces&#160;<br/>describing&#160;any&#160;combination&#160;of&#160;the&#160;latter two&#160;possibilities may&#160;be&#160;generated.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
72&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=73></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-73_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>7.1.4&#160;</b><br/>
<b>Service&#160;Port Prototypes&#160;</b><br/>
For&#160;&#160;each&#160;&#160;active&#160;&#160;NVRAM&#160;&#160;block&#160;&#160;(including&#160;&#160;the&#160;&#160;configuration&#160;&#160;ID&#160;&#160;block)&#160;&#160;that&#160;&#160;was&#160;&#160;configured&#160;<br/>with&#160;&#160;<b>Use&#160;&#160;Service&#160;&#160;Ports</b>&#160;&#160;port,&#160;&#160;prototypes&#160;&#160;will&#160;&#160;be&#160;&#160;generated.&#160;&#160;The&#160;&#160;port&#160;&#160;interfaces&#160;&#160;they&#160;&#160;are&#160;<br/>based&#160;on&#160;can&#160;differ.&#160;The&#160;interfaces&#160;depend&#160;on&#160;the&#160;block’s&#160;configuration,&#160;and&#160;hence&#160;on&#160;the&#160;<br/>operations that&#160;are&#160;necessary&#160;for current&#160;block.&#160;<br/>
<b>7.1.4.1&#160;</b><br/>
<b>Port Prototype&#160;Naming&#160;</b><br/>
The&#160;short&#160;name&#160;uniquely&#160;identifying&#160;the&#160;prototype&#160;is based&#160;on&#160;the&#160;numeric block&#160;ID (which,&#160;<br/>in&#160;&#160;turn,&#160;&#160;is&#160;&#160;derived&#160;&#160;from&#160;&#160;the&#160;&#160;block’s&#160;&#160;position&#160;&#160;in&#160;&#160;the&#160;&#160;configuration)&#160;&#160;and&#160;&#160;the&#160;&#160;port&#160;&#160;interface&#160;<br/><b>class</b>&#160;it corresponds to.&#160;<br/>Each&#160;&#160;prototype&#160;&#160;is&#160;&#160;prefixed&#160;&#160;by&#160;&#160;the&#160;&#160;String&#160;&#160;<b>NvM_</b>;&#160;&#160;the&#160;&#160;next&#160;&#160;substring&#160;&#160;describes&#160;&#160;the&#160;<br/>corresponding&#160;&#160;port&#160;&#160;interface,&#160;&#160;and&#160;&#160;whether&#160;&#160;it&#160;&#160;is&#160;&#160;a&#160;&#160;Provide&#160;&#160;Port&#160;&#160;(‘Pp’)&#160;&#160;or&#160;&#160;a&#160;&#160;Require&#160;&#160;Port&#160;<br/>(‘Rp’):&#160;<br/>
<b>&gt;&#160;&#160;Padmin</b>&#160;<br/>
Linked&#160;with&#160;port interface&#160;<b>NvMAdministration</b>&#160;(only&#160;in&#160;<b>API&#160;Configuration Class&#160;3</b>)&#160;<br/>
&gt;<b>&#160;&#160;PS&#160;</b><br/>
Linked&#160;with&#160;Port Interface&#160;‘NvMService_AC{1|2|3}[_SRBS][_Defs][_DS]’.&#160;The&#160;actual&#160;<br/>interface&#160;depends&#160;on&#160;the&#160;possibilities described&#160;above.&#160;<br/>
<b>&gt;&#160;&#160;NvM_RpNotifyFinished</b>&#160;<br/>
Linked&#160;with&#160;Port Interface&#160;NvMNotifyJobFinished&#160;that&#160;describes&#160;the&#160;interface&#160;used&#160;by&#160;<br/>the&#160;NVM&#160;for&#160;<b>single&#160;block&#160;job end notification</b>&#160;<br/>
If&#160;SWC&#160;setting&#160;<b>Long&#160;Service&#160;Port&#160;Names</b>&#160;is&#160;disabled,&#160;each&#160;port&#160;prototype’s&#160;name&#160;is&#160;post&#160;<br/>fixed&#160;&#160;by&#160;&#160;<b>_Id{BlockId}</b>.&#160;&#160;If&#160;&#160;SWC&#160;&#160;setting&#160;&#160;<b>Long&#160;&#160;Service&#160;&#160;Port&#160;&#160;Names</b>&#160;&#160;is&#160;&#160;enabled,&#160;&#160;each&#160;&#160;port&#160;<br/>prototype’s name&#160;is post&#160;fixed&#160;by&#160;‘_{BlockName}’.&#160;&#160;<br/>Additionally&#160;&#160;each&#160;&#160;port&#160;&#160;prototype&#160;&#160;contains&#160;&#160;a&#160;&#160;long&#160;&#160;name&#160;&#160;as&#160;&#160;well&#160;&#160;as&#160;&#160;a&#160;&#160;description,&#160;&#160;which&#160;<br/>describe&#160;&#160;it&#160;&#160;in&#160;&#160;a&#160;&#160;better,&#160;&#160;human&#160;&#160;readable&#160;&#160;form.&#160;&#160;They&#160;&#160;contain&#160;&#160;the&#160;&#160;logical&#160;&#160;block&#160;&#160;name,&#160;&#160;as&#160;<br/>configured,&#160;instead&#160;of&#160;the&#160;block ID,&#160;and&#160;the&#160;used&#160;port interface’s short&#160;name.&#160;<br/>
<b>7.1.5&#160;</b><br/>
<b>Modelling SWC’s&#160;callback&#160;functions&#160;</b><br/>
According&#160;to&#160;AUTOSAR,&#160;the&#160;prototype&#160;of&#160;a<a href="TechnicalReference_NvMs.html#65">&#160;SingleBlockCallbackFunction&#160;</a>(Chapte<a href="TechnicalReference_NvMs.html#65">r&#160;6.7.1),</a>&#160;<br/>differs from&#160;that&#160;of&#160;a&#160;RUNNABLE&#160;implementing&#160;SWC’s&#160;behavior&#160;of&#160;that&#160;callback.&#160;Therefore&#160;<br/>the&#160;prototype&#160;describes the&#160;RTE&#160;function&#160;called&#160;by&#160;NVM.&#160;<br/>The&#160;prototype&#160;of&#160;the&#160;RUNNABLE,&#160;which&#160;is&#160;actually&#160;called&#160;by&#160;RTE,&#160;must&#160;match&#160;model,&#160;i.e.&#160;<br/>the&#160;&#160;return&#160;&#160;type&#160;&#160;must&#160;&#160;match&#160;&#160;the&#160;&#160;information&#160;&#160;given&#160;&#160;in&#160;&#160;callback’s&#160;&#160;interface&#160;&#160;description&#160;<br/>(“Application&#160;&#160;Errors”).&#160;&#160;The&#160;&#160;correct&#160;&#160;modelling&#160;&#160;would&#160;&#160;be&#160;&#160;“no&#160;&#160;Application&#160;&#160;Errors”,&#160;&#160;which&#160;<br/>requires a&#160;RUNNABLE&#160;implementation&#160;without&#160;return&#160;type:&#160;<br/><b>void</b>&#160;&lt;init_cbk_runnable_name&gt;(void)&#160;<br/>
<b>void</b>&#160;&lt;jobend_cbk_runnable_name&gt;(&#160;NvM_ServiceIdType ServiceId,&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160;<br/>
NvM_RequestResultType JobResult)&#160;<br/>
However,&#160;&#160;DaVinci&#160;&#160;Developer&#160;&#160;since&#160;&#160;Version&#160;&#160;3.8&#160;&#160;along&#160;&#160;with&#160;&#160;MICROSAR&#160;&#160;RTE&#160;&#160;version&#160;<br/>4.04.00&#160;and&#160;later&#160;enable&#160;NVM&#160;to&#160;support&#160;another&#160;different&#160;(actually&#160;incompatible)&#160;function&#160;<br/>prototype:&#160;&#160;<br/><b>Std_ReturnType</b>&#160;&lt;init_cbk_runnable_name&gt;(void)&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
73&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=74></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-74_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-74_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>Std_ReturnType</b>&#160;&lt;jobend_cbk_runnable_name&gt;(&#160;NvM_ServiceIdType&#160;<br/>
ServiceId,&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160;<br/>NvM_RequestResultType JobResult)&#160;<br/>
&#160;<br/>
Both&#160;implementations&#160;require&#160;slightly&#160;different&#160;&#160;Interface&#160;definitions;&#160;&#160;they&#160;may&#160;be&#160;adapted&#160;<br/>using&#160;&#160;DaVinci&#160;&#160;Developer.&#160;&#160;From&#160;&#160;a&#160;&#160;modeling&#160;&#160;point&#160;&#160;of&#160;&#160;view,&#160;&#160;the&#160;&#160;runnable&#160;&#160;must&#160;&#160;be&#160;<br/>implemented&#160;according&#160;to&#160;the&#160;Interface&#160;associated&#160;with&#160;the&#160;related&#160;Pport-Prototype.&#160;<br/>
&#160;<br/>
Figure&#160;7-2&#160;A&#160;&#160;<br/>
“Single&#160;Block&#160;Job&#160;End&#160;Notification”&#160;with&#160;return&#160;type&#160;Std_ReturnType&#160;<br/>
&#160;<br/>&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
74&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=75></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-75_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-75_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
&#160;<br/>
Figure&#160;7-3&#160;A&#160;&#160;<br/>
“Single&#160;Block&#160;Job&#160;End&#160;Notification”&#160;with&#160;return&#160;type&#160;void.&#160;<br/>
NVM itself provides interfaces&#160;as described&#160;by<a href="TechnicalReference_NvMs.html#75">&#160;Figure&#160;7-3.&#160;</a>To&#160;make&#160;SWCs independent&#160;of&#160;<br/>this definition,&#160;they&#160;may&#160;associate&#160;their&#160;PPort prototype&#160;to&#160;their&#160;own&#160;interface&#160;definitions,&#160;<br/>according&#160;to&#160;their&#160;(planned) RUNNABLEs’&#160;implementations.&#160;Of&#160;course,&#160;the&#160;interface&#160;must&#160;<br/>be&#160;compatible&#160;according&#160;to&#160;AUTOSAR’s rules;&#160;which&#160;limits possible&#160;interface&#160;definitions to&#160;<br/>exactly&#160;one&#160;of&#160;both&#160;mentioned&#160;here.&#160;<br/>
<b>7.2&#160;</b><br/>
<b>Configuration&#160;of&#160;NVM&#160;Attributes&#160;</b><br/>
The&#160;NVM&#160;attributes&#160;can&#160;be&#160;configured&#160;using&#160;the&#160;DaVinci&#160;Configurator.&#160;The&#160;outputs&#160;of&#160;the&#160;<br/>configuration&#160;and&#160;generation&#160;process are&#160;the&#160;configuration&#160;source&#160;files.&#160;&#160;<br/>The&#160;description&#160;of&#160;each&#160;used&#160;parameter is set&#160;in&#160;the&#160;NvM&#160;bswmd&#160;file.&#160;<br/>Only&#160;additional information&#160;is given&#160;in&#160;this chapter.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
75&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=76></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-76_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-76_2.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Because&#160;sizeof-operator&#160;cannot&#160;be&#160;used&#160;during configuration&#160;in production&#160;code&#160;<br/>
<b>&#160;&#160;</b>because sizes also affect&#160;lower&#160;layers,&#160;the&#160;exact&#160;sizes of&#160;your&#160;NVRAM&#160;blocks,&#160;and&#160;<br/>
hence&#160;your&#160;data structures must&#160;be&#160;known at&#160;configuration&#160;time.&#160;Therefore&#160;you&#160;are&#160;<br/>required&#160;to determine&#160;these&#160;values&#160;by&#160;yourself.&#160;This&#160;leads to&#160;some significant&#160;pitfalls:&#160;<br/>
<b>&gt;&#160;&#160;</b>The&#160;sizes of&#160;basic&#160;data&#160;types&#160;are&#160;platform&#160;dependent.&#160;To&#160;handle&#160;this&#160;problem,&#160;you&#160;<br/>
should use only&#160;AUTOSAR&#160;data&#160;types&#160;as defined in&#160;Std_Types.h&#160;(respectively&#160;<br/>Platform_Types.h).&#160;They&#160;are&#160;defined&#160;to&#160;have the&#160;same&#160;size on&#160;all&#160;platforms.&#160;The&#160;<br/>enumeration&#160;type’s&#160;size also depends&#160;on&#160;your&#160;platform,&#160;the&#160;compiler&#160;and&#160;its&#160;options.&#160;<br/>Be aware&#160;of&#160;the&#160;size the&#160;compiler&#160;actually&#160;chooses.&#160;Usually&#160;an&#160;enum&#160;equals&#160;to&#160;an&#160;<br/>int&#160;by&#160;default,&#160;but&#160;you&#160;can&#160;force it&#160;to be&#160;the&#160;smallest&#160;possible&#160;type&#160;(e.g.&#160;char).&#160;<br/>
<b>&gt;&#160;&#160;</b>Be aware&#160;of&#160;the&#160;composition&#160;of&#160;bit&#160;fields.&#160;It&#160;can&#160;be&#160;affected&#160;by&#160;compiler&#160;switches.&#160;<br/><b>&gt;&#160;&#160;</b>The&#160;compiler&#160;may&#160;rearrange&#160;members&#160;of&#160;structures to&#160;save memory.&#160;The&#160;best&#160;<br/>
solution would be&#160;to arrange&#160;members&#160;according&#160;to&#160;their&#160;type&#160;manually.&#160;The&#160;<br/>compiler&#160;may&#160;add unused padding&#160;bytes&#160;to increase&#160;accessibility&#160;to&#160;the&#160;members&#160;of&#160;<br/>a structure.&#160;According&#160;to&#160;the&#160;previous&#160;fact,&#160;you&#160;should order&#160;your&#160;structure’s&#160;<br/>members.&#160;Doing&#160;so,&#160;you&#160;should be&#160;aware&#160;of&#160;aligned&#160;start&#160;addresses&#160;for&#160;larger&#160;<br/>integral&#160;data&#160;types&#160;(e.g.&#160;uint16&#160;or&#160;uint32)&#160;according&#160;to&#160;the&#160;CPU’s&#160;requirements&#160;<br/>for&#160;accessing&#160;them.&#160;<br/>
<b>&gt;&#160;&#160;</b>As&#160;stated&#160;above,&#160;some&#160;compiler&#160;switches&#160;influence the&#160;sizes&#160;of&#160;data&#160;types.&#160;Keep in&#160;<br/>
mind&#160;that&#160;changing&#160;these ones&#160;may&#160;result&#160;in changed&#160;sizes of&#160;your&#160;data&#160;blocks,&#160;<br/>leading&#160;to&#160;a&#160;reconfiguration&#160;of&#160;NVM.&#160;<br/>
A&#160;good way&#160;to determine&#160;the&#160;blocks’&#160;sizes is to extract&#160;the&#160;required&#160;information&#160;from&#160;<br/>the&#160;linker&#160;file or&#160;from&#160;the&#160;generated&#160;object.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
76&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=77></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-77_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>8&#160;&#160;AUTOSAR&#160;Standard&#160;Compliance&#160;</b><br/>
<b>8.1&#160;</b><br/>
<b>Deviations&#160;</b><br/>
<b>&gt;&#160;&#160;</b>In&#160;contrast&#160;to&#160;AUTOSAR most&#160;configuration&#160;parameters are&#160;link-time&#160;parameters.&#160;<br/>
<b>&gt;&#160;&#160;</b>Saving&#160;RAM&#160;CRC&#160;of&#160;current&#160;block is&#160;configuration&#160;dependent.&#160;Either it is saved&#160;behind&#160;<br/>
the&#160;block’s data&#160;or&#160;it&#160;is&#160;saved&#160;internally&#160;by&#160;NVM&#160;in&#160;an&#160;own&#160;variable.&#160;<br/>
<b>&gt;&#160;&#160;</b>Unified&#160;handling&#160;of&#160;ROM&#160;defaults among&#160;all&#160;block&#160;management&#160;types&#160;is processed.&#160;<br/>
Rom&#160;defaults handling&#160;of&#160;blocks&#160;of&#160;type&#160;dataset&#160;is just&#160;like&#160;the&#160;handling&#160;of&#160;blocks&#160;of&#160;the&#160;<br/>other&#160;management&#160;types.&#160;<br/>
<b>&gt;&#160;&#160;</b>NVM&#160;is able&#160;to&#160;provide&#160;the&#160;Config&#160;Id’s RAM&#160;block on&#160;its&#160;own.&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_WriteAll()&#160;does&#160;not&#160;write&#160;unchanged&#160;data,&#160;even&#160;if&#160;this would&#160;repair&#160;(redundant)&#160;<br/>
NV&#160;data.&#160;<br/>
<b>&gt;&#160;&#160;</b>Attempts&#160;to&#160;write&#160;to&#160;a&#160;locked&#160;block&#160;(NvM_SetBlockLockStatus) are&#160;explicitly&#160;not&#160;<br/>
treated&#160;as Development&#160;Error;&#160;error NVM_E_BLOCK_LOCKED is&#160;not&#160;defined.&#160;<br/>
<b>&gt;&#160;&#160;</b>NvM_SetBlockLockStatus&#160;is allowed&#160;for pending&#160;Blocks;&#160;no&#160;related&#160;Development&#160;<br/>
Error Check will be&#160;performed.&#160;<br/>
<b>&gt;&#160;&#160;</b>Block&#160;CRC type&#160;CRC8&#160;is not&#160;supported.&#160;<br/>
<b>&gt;&#160;&#160;</b>Write&#160;retries can&#160;only&#160;be&#160;globally&#160;configured,&#160;rather than&#160;individually&#160;per NVRAM Block&#160;<br/>
<b>&gt;&#160;&#160;</b>Calls to&#160;Explicit Synchronization&#160;callbacks (see&#160;chapte<a href="TechnicalReference_NvMs.html#31">r&#160;4.4.18) ca</a>nnot&#160;be&#160;limited&#160;by&#160;<br/>
configuration.&#160;Rather those&#160;functions&#160;are expected&#160;to&#160;succeed&#160;within&#160;few&#160;attempts.&#160;<br/>
<b>8.2&#160;</b><br/>
<b>Additions/&#160;Extensions&#160;</b><br/>
<b>8.2.1&#160;</b><br/>
<b>Parameter&#160;Checking&#160;</b><br/>
The&#160;&#160;internal&#160;&#160;parameter&#160;&#160;checks&#160;&#160;of&#160;&#160;the&#160;API&#160;&#160;functions&#160;&#160;can&#160;&#160;be&#160;&#160;en-/disabled&#160;&#160;separately.&#160;&#160;The&#160;<br/>AUTOSAR&#160;standard&#160;&#160;requires&#160;en-/disabling&#160;of&#160;the&#160;complete&#160;parameter&#160;checking&#160;only.&#160;For&#160;<br/>details see&#160;chapter<a href="TechnicalReference_NvMs.html#34">&#160;4.5.1.1.</a>&#160;<br/>
<b>8.2.2&#160;</b><br/>
<b>Concurrent&#160;access&#160;to NV data&#160;</b><br/>
NVM&#160;provides&#160;for&#160;DCM&#160;possibility&#160;to&#160;access&#160;NV&#160;data&#160;concurrently&#160;with&#160;NVM&#160;application.&#160;<br/>(see&#160;chapte<a href="TechnicalReference_NvMs.html#30">r&#160;4.4.17)</a>&#160;<br/>
<b>8.2.3&#160;</b><br/>
<b>RAM-/ROM Block&#160;Size&#160;checks&#160;</b><br/>
NVM&#160;can&#160;be&#160;configured&#160;to&#160;check&#160;all&#160;RAM&#160;and&#160;ROM&#160;blocks’&#160;lengths&#160;against&#160;corresponding&#160;<br/>NV&#160;Block&#160;lengths,&#160;using&#160;sizeof&#160;operator; see&#160;chapte<a href="TechnicalReference_NvMs.html#35">r&#160;4.5.3.</a>&#160;<br/>
<b>8.2.4&#160;</b><br/>
<b>Calculated CRC&#160;value&#160;does&#160;not depend on number of calculation steps&#160;</b><br/>
Due&#160;to&#160;the&#160;specified&#160;CRC32&#160;algorithm,&#160;and&#160;missing&#160;further&#160;requirements&#160;on&#160;NVM’s&#160;&#160;CRC&#160;<br/>calculation,&#160;&#160;a&#160;&#160;calculated&#160;&#160;CRC32&#160;&#160;value&#160;&#160;depends&#160;&#160;on&#160;&#160;the&#160;&#160;number&#160;&#160;of&#160;&#160;necessary&#160;&#160;calculation&#160;<br/>steps&#160;&#160;(defined&#160;&#160;by&#160;&#160;block&#160;&#160;length&#160;&#160;and&#160;&#160;parameter&#160;&#160;<b>CRC&#160;&#160;Bytes&#160;&#160;per&#160;&#160;Cycle</b>).&#160;&#160;Unless&#160;&#160;the&#160;&#160;CRC&#160;<br/>can&#160;be&#160;calculated&#160;with&#160;one&#160;step&#160;(i.e.&#160;the&#160;block&#160;is&#160;small&#160;enough),&#160;the&#160;CRC32&#160;value&#160;will&#160;not&#160;<br/>match&#160;the&#160;value&#160;resulting&#160;from&#160;calling&#160;the&#160;CRC32&#160;library&#160;function&#160;once&#160;for the&#160;whole&#160;block.&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
77&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=78></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-78_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
The&#160;reason&#160;is&#160;the&#160;negation&#160;of&#160;the&#160;result,&#160;as&#160;specified&#160;for&#160;CRC32&#160;(which&#160;in&#160;turn&#160;belongs&#160;to&#160;<br/>standard/widely&#160;used&#160;<b>Ethernet&#160;CRC</b>).&#160;This&#160;behavior&#160;introduces&#160;some&#160;drawbacks&#160;on&#160;NVM,&#160;<br/>especially:&#160;&#160;<br/>
<b>&gt;&#160;&#160;</b>Changing&#160;parameter&#160;<b>CRC Bytes&#160;per Cycle</b>&#160;(for run-time&#160;optimization),&#160;in&#160;an&#160;existing&#160;<br/>
(already&#160;flashed)&#160;project.&#160;Data&#160;blocks&#160;with&#160;CRC32&#160;could&#160;not&#160;be&#160;read&#160;after the&#160;update.&#160;<br/>
<b>&gt;&#160;&#160;</b>CRC32&#160;values cannot&#160;be&#160;verified&#160;outside&#160;NVM&#160;(e.g.&#160;for testing&#160;purposes),&#160;without&#160;<br/>
knowing&#160;the&#160;configuration&#160;–&#160;each&#160;single&#160;step&#160;would&#160;have&#160;to&#160;be&#160;reproduced.&#160;<br/>
<b>&gt;&#160;&#160;</b>Valid&#160;data&#160;blocks&#160;along&#160;with&#160;their&#160;CRC32&#160;cannot&#160;be&#160;pre-defined&#160;using&#160;standard&#160;CRC&#160;<br/>
algorithms.&#160;<br/>
NVM circumvents&#160;these&#160;restrictions&#160;by&#160;reverting&#160;the&#160;final negation&#160;of&#160;each&#160;single&#160;CRC32&#160;<br/>calculation&#160;step,&#160;except&#160;the&#160;last&#160;one.&#160;This&#160;(quite&#160;simple) measure guarantees that&#160;the&#160;CRC&#160;<br/>value&#160;does&#160;NOT&#160;depend&#160;on&#160;the&#160;number&#160;of&#160;calculation&#160;steps,&#160;as&#160;it&#160;is originally&#160;guaranteed&#160;<br/>for CRC16&#160;(since&#160;it&#160;will not&#160;be&#160;inverted&#160;by&#160;the&#160;CRC&#160;library).&#160;<br/>
<b>8.3&#160;</b><br/>
<b>Limitations&#160;</b><br/>
There are&#160;no&#160;limitations.&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
78&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=79></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-79_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>9&#160;&#160;Glossary&#160;and&#160;Abbreviations&#160;</b><br/>
<b>9.1&#160;</b><br/>
<b>Glossary&#160;</b><br/>
<b>Term&#160;</b><br/>
<b>Description&#160;</b><br/>
DaVinci&#160;Configurator&#160;&#160;Configuration and&#160;generation tool&#160;for&#160;MICROSAR.&#160;<br/>Pro&#160;<br/>DCM&#160;<br/>
Diagnostic&#160;Communication&#160;Manager&#160;<br/>
GCE&#160;<br/>
Generic&#160;Configuration&#160;Editor&#160;–&#160;generic&#160;tool&#160;for&#160;editing&#160;AUTOSAR&#160;<br/>configuration&#160;files.&#160;<br/>In DaVinci&#160;Configurator,&#160;the&#160;view&#160;can&#160;be&#160;switch to&#160;<b>Generic&#160;Editor</b>.&#160;<br/>
Per&#160;Instance&#160;Memory&#160;&#160;Memory&#160;(RAM)&#160;to be&#160;used&#160;by&#160;an&#160;instance&#160;of&#160;an&#160;Softwar&#160;Component,&#160;<br/>(PIM)&#160;<br/>
provide&#160;by&#160;RTE.&#160;It&#160;may&#160;also be&#160;used&#160;as permanent&#160;or&#160;tempary&#160;RAM&#160;<br/>block.&#160;<br/>Such&#160;a&#160;memory&#160;need&#160;is&#160;usually&#160;modeled&#160;using&#160;a&#160;tool&#160;like&#160;DaVinci&#160;<br/>Developer.&#160;<br/>
Primary&#160;NV&#160;Block&#160;<br/>
The&#160;first&#160;NV&#160;block&#160;of&#160;an&#160;NVRAM&#160;Block&#160;of&#160;type&#160;Redundant.&#160;During&#160;reads,&#160;<br/>this&#160;block&#160;will&#160;always&#160;be&#160;tried&#160;first.&#160;During writes it&#160;will&#160;be&#160;preferred,&#160;<br/>unless only&#160;secondary&#160;is&#160;defective.&#160;<br/>
Secondary&#160;NV&#160;Block&#160;&#160;The&#160;second&#160;NV&#160;block&#160;of&#160;an&#160;NVRAM&#160;Block&#160;of&#160;type&#160;Redundant.&#160;During&#160;<br/>
reads and&#160;this&#160;block&#160;will&#160;be&#160;accessed&#160;second;&#160;if&#160;primary&#160;is&#160;defective.&#160;<br/>
Table&#160;9-1&#160;&#160;<br/>
Glossary&#160;<br/>
<b>9.2&#160;</b><br/>
<b>Abbreviations&#160;</b><br/>
<b>Abbreviation&#160;</b><br/>
<b>Description&#160;</b><br/>
API&#160;<br/>
Application Programming Interface&#160;&#160;&#160;<br/>
AUTOSAR&#160;<br/>
Automotive Open System&#160;Architecture&#160;<br/>
BSW&#160;<br/>
Basis&#160;Software&#160;<br/>
CRC&#160;<br/>
Cyclic&#160;Redundancy&#160;Check&#160;<br/>
DEM&#160;<br/>
Diagnostic&#160;Event&#160;Manager&#160;<br/>
DET&#160;<br/>
Development&#160;Error&#160;Tracer&#160;<br/>
DPA&#160;<br/>
DaVinci&#160;Project&#160;Assistant&#160;<br/>
EA&#160;<br/>
EEPROM&#160;Abstraction Module&#160;<br/>
ECU&#160;<br/>
Electronic&#160;Control&#160;Unit&#160;<br/>
ECUC&#160;<br/>
ECU&#160;Configuration&#160;<br/>
ECUM&#160;<br/>
ECU&#160;State&#160;Manager&#160;<br/>
EEP&#160;<br/>
EEPROM&#160;Driver&#160;<br/>
EEPROM&#160;<br/>
Electrically&#160;Erasable Programmable Read&#160;Only&#160;Memory&#160;<br/>
FEE&#160;<br/>
Flash&#160;EEPROM&#160;Emulation&#160;Module&#160;<br/>
FIFO&#160;<br/>
First&#160;In First&#160;Out&#160;<br/>
FLS&#160;<br/>
Flash&#160;Driver&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
79&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=80></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-80_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
GCE&#160;<br/>
Generic&#160;Configuration&#160;Editor&#160;<br/>
HIS&#160;<br/>
Hersteller&#160;Initiative&#160;Software&#160;<br/>
ISR&#160;<br/>
Interrupt&#160;Service Routine&#160;<br/>
MemHwA&#160;<br/>
Memory&#160;Hardware&#160;Abstraction Layer&#160;<br/>
MEMIF&#160;<br/>
Memory&#160;Abstraction&#160;Interface&#160;Module&#160;<br/>
MICROSAR&#160;<br/>
Microcontroller&#160;Open&#160;System&#160;Architecture&#160;(the&#160;Vector&#160;AUTOSAR&#160;<br/>solution)&#160;<br/>
NVM&#160;<br/>
NVRAM&#160;Manager&#160;<br/>
NV,&#160;NVRAM&#160;<br/>
Non&#160;Volatile Random&#160;Access Memory&#160;<br/>
OS&#160;<br/>
Operating&#160;System&#160;<br/>
PPort&#160;<br/>
Provide&#160;Port&#160;<br/>
RAM&#160;<br/>
Random&#160;Access&#160;Memory&#160;<br/>
ROM&#160;<br/>
Read Only&#160;Memory&#160;<br/>
RPort&#160;<br/>
Require Port&#160;<br/>
RTE&#160;<br/>
Runtime Environment&#160;<br/>
SRS&#160;<br/>
Software&#160;Requirement&#160;Specification&#160;<br/>
SWC&#160;<br/>
Software&#160;Component&#160;<br/>
SWS&#160;<br/>
Software&#160;Specification&#160;<br/>
Table&#160;9-2&#160;&#160;<br/>
Abbreviations&#160;<br/>
&#160;<br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
80&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name=81></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/NvM/doc/TechnicalReference_NvM-81_1.png"/><br/>
Technical&#160;Reference&#160;MICROSAR&#160;NVM&#160;<br/>
<b>10&#160;&#160;Contact&#160;</b><br/>
Visit&#160;our website&#160;for&#160;more information&#160;on&#160;<br/>&#160;<br/><b>&gt;&#160;&#160;</b>&#160;News&#160;<br/>
<b>&gt;&#160;&#160;</b>Products&#160;<br/>
<b>&gt;&#160;&#160;</b>Demo&#160;software&#160;<br/>
<b>&gt;&#160;&#160;</b>Support&#160;<br/>
<b>&gt;&#160;&#160;</b>Training&#160;data&#160;<br/>
<b>&gt;&#160;&#160;</b>Addresses&#160;<br/>
&#160;<br/>
<a href="http://www.vector.com/"><b>www.vector.com&#160;</b></a><br/>
&#160;<br/>
©&#160;2016&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version&#160;5.06.00&#160;<br/>
81&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.01&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_NvMs.html#2">1 Document Information</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#2">1.1 History</a></li>
<li><a href="TechnicalReference_NvMs.html#6">1.2 Reference Documents</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#13">2 Component History</a></li>
<li><a href="TechnicalReference_NvMs.html#15">3 Introduction</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#16">3.1 Architecture Overview</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#18">4 Functional Description</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#18">4.1 Features</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#19">4.1.1 Safety Features</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#19">4.1.1.1 Block Id check</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#19">4.1.2 Automatic Block Length</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#19">4.2 Initialization</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#20">4.2.1 Start-up</a></li>
<li><a href="TechnicalReference_NvMs.html#20">4.2.2 Initialization of the Data Blocks</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#21">4.3 States</a></li>
<li><a href="TechnicalReference_NvMs.html#21">4.4 Main Functions</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#21">4.4.1 Hardware Independence</a></li>
<li><a href="TechnicalReference_NvMs.html#21">4.4.2 Synchronous Requests</a></li>
<li><a href="TechnicalReference_NvMs.html#21">4.4.3 Asynchronous Requests</a></li>
<li><a href="TechnicalReference_NvMs.html#22">4.4.4 API Configuration Classes and additional API Services</a></li>
<li><a href="TechnicalReference_NvMs.html#23">4.4.5 Block Handling</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#23">4.4.5.1 NV Blocks and Block Handles</a></li>
<li><a href="TechnicalReference_NvMs.html#24">4.4.5.2 Different Types of NV Blocks</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#24">4.4.5.2.1 Native Blocks</a></li>
<li><a href="TechnicalReference_NvMs.html#24">4.4.5.2.2 Redundant Blocks</a></li>
<li><a href="TechnicalReference_NvMs.html#25">4.4.5.2.3 Dataset Blocks</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#26">4.4.5.3 Permanent and non-permanent RAM Blocks</a></li>
<li><a href="TechnicalReference_NvMs.html#26">4.4.5.4 ROM Defaults</a></li>
<li><a href="TechnicalReference_NvMs.html#26">4.4.5.5 Checksum</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#27">4.4.6 Prioritized or non-prioritized Queuing of asynchronous Requests</a></li>
<li><a href="TechnicalReference_NvMs.html#27">4.4.7 Asynchronous Job-End Polling</a></li>
<li><a href="TechnicalReference_NvMs.html#27">4.4.8 Single Block Job End Notifications</a></li>
<li><a href="TechnicalReference_NvMs.html#28">4.4.9 Immediate Priority Jobs and Cancellation of current Jobs</a></li>
<li><a href="TechnicalReference_NvMs.html#28">4.4.10 Asynchronous CRC Calculation</a></li>
<li><a href="TechnicalReference_NvMs.html#29">4.4.11 Write Protection</a></li>
<li><a href="TechnicalReference_NvMs.html#29">4.4.12 Erase and Invalidate</a></li>
<li><a href="TechnicalReference_NvMs.html#29">4.4.13 Init Block Callbacks</a></li>
<li><a href="TechnicalReference_NvMs.html#30">4.4.14 Define Locking/ Unlocking Services</a></li>
<li><a href="TechnicalReference_NvMs.html#30">4.4.15 Interrupts</a></li>
<li><a href="TechnicalReference_NvMs.html#30">4.4.16 Data Corruption</a></li>
<li><a href="TechnicalReference_NvMs.html#30">4.4.17 Concurrent access to NV data for DCM</a></li>
<li><a href="TechnicalReference_NvMs.html#31">4.4.18 Explicit synchronization mechanism between application and NVM</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#32">4.4.18.1 Explicit synchronization mechanism during write requests</a></li>
<li><a href="TechnicalReference_NvMs.html#32">4.4.18.2 Explicit synchronization mechanism during read requests</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#32">4.5 Error Handling</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#32">4.5.1 Development Error Reporting</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#34">4.5.1.1 Parameter Checking</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#35">4.5.2 Production Code Error Reporting</a></li>
<li><a href="TechnicalReference_NvMs.html#35">4.5.3 Compile-time Block Length Checks</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#37">5 Integration</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#37">5.1 Scope of Delivery</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#37">5.1.1 Static Files</a></li>
<li><a href="TechnicalReference_NvMs.html#37">5.1.2 Dynamic Files</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#38">5.2 Critical Sections</a></li>
<li><a href="TechnicalReference_NvMs.html#38">5.3 Include Structure</a></li>
<li><a href="TechnicalReference_NvMs.html#38">5.4 Compiler Abstraction and Memory Mapping</a></li>
<li><a href="TechnicalReference_NvMs.html#40">5.5 Dependencies on SW Modules</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#40">5.5.1 OSEK / AUTOSAR OS</a></li>
<li><a href="TechnicalReference_NvMs.html#41">5.5.2 DEM</a></li>
<li><a href="TechnicalReference_NvMs.html#41">5.5.3 DET</a></li>
<li><a href="TechnicalReference_NvMs.html#41">5.5.4 MEMIF</a></li>
<li><a href="TechnicalReference_NvMs.html#41">5.5.5 CRC Library</a></li>
<li><a href="TechnicalReference_NvMs.html#41">5.5.6 Callback Functions</a></li>
<li><a href="TechnicalReference_NvMs.html#41">5.5.7 RTE</a></li>
<li><a href="TechnicalReference_NvMs.html#41">5.5.8 BSWM</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#42">5.6 Integration Steps</a></li>
<li><a href="TechnicalReference_NvMs.html#43">5.7 Estimating Resource Consumption</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#43">5.7.1 RAM Usage</a></li>
<li><a href="TechnicalReference_NvMs.html#43">5.7.2 ROM Usage</a></li>
<li><a href="TechnicalReference_NvMs.html#44">5.7.3 NV Usage</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#44">5.8 How-To: Integrate NVM with AUTOSAR3 SWC’s</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#44">5.8.1 NVM’s provided Interfaces/Ports.</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#44">5.8.1.1 NvMAdministration</a></li>
<li><a href="TechnicalReference_NvMs.html#44">5.8.1.2 NvMService_AC[1|2|3][_SRBS][_Defs]</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#45">5.8.2 Callbacks (Ports provided by client SWCs)</a></li>
<li><a href="TechnicalReference_NvMs.html#45">5.8.3 Request Result Types</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#46">6 API Description</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#46">6.1 Interfaces Overview</a></li>
<li><a href="TechnicalReference_NvMs.html#46">6.2 Type Definitions</a></li>
<li><a href="TechnicalReference_NvMs.html#48">6.3 Global API Constants</a></li>
<li><a href="TechnicalReference_NvMs.html#48">6.4 Services provided by NVM</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#48">6.4.1 NvM_Init</a></li>
<li><a href="TechnicalReference_NvMs.html#48">6.4.2 NvM_SetDataIndex</a></li>
<li><a href="TechnicalReference_NvMs.html#49">6.4.3 NvM_GetDataIndex</a></li>
<li><a href="TechnicalReference_NvMs.html#50">6.4.4 NvM_SetBlockProtection</a></li>
<li><a href="TechnicalReference_NvMs.html#51">6.4.5 NvM_GetErrorStatus</a></li>
<li><a href="TechnicalReference_NvMs.html#51">6.4.6 NvM_GetVersionInfo</a></li>
<li><a href="TechnicalReference_NvMs.html#52">6.4.7 NvM_SetRamBlockStatus</a></li>
<li><a href="TechnicalReference_NvMs.html#53">6.4.8 NvM_SetBlockLockStatus</a></li>
<li><a href="TechnicalReference_NvMs.html#54">6.4.9 NvM_MainFunction</a></li>
<li><a href="TechnicalReference_NvMs.html#54">6.4.10 NvM_ReadBlock</a></li>
<li><a href="TechnicalReference_NvMs.html#55">6.4.11 NvM_WriteBlock</a></li>
<li><a href="TechnicalReference_NvMs.html#56">6.4.12 NvM_RestoreBlockDefaults</a></li>
<li><a href="TechnicalReference_NvMs.html#57">6.4.13 NvM_EraseNvBlock</a></li>
<li><a href="TechnicalReference_NvMs.html#58">6.4.14 NvM_InvalidateNvBlock</a></li>
<li><a href="TechnicalReference_NvMs.html#59">6.4.15 NvM_ReadAll</a></li>
<li><a href="TechnicalReference_NvMs.html#60">6.4.16 NvM_WriteAll</a></li>
<li><a href="TechnicalReference_NvMs.html#61">6.4.17 NvM_CancelWriteAll</a></li>
<li><a href="TechnicalReference_NvMs.html#61">6.4.18 NvM_KillWriteAll</a></li>
<li><a href="TechnicalReference_NvMs.html#62">6.4.19 NvM_CancelJobs</a></li>
<li><a href="TechnicalReference_NvMs.html#62">6.4.20 NvM_RepairRedundantBlocks</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#63">6.5 Services used by NVM</a></li>
<li><a href="TechnicalReference_NvMs.html#64">6.6 Callback Functions</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#64">6.6.1 NvM_JobEndNotification</a></li>
<li><a href="TechnicalReference_NvMs.html#65">6.6.2 NvM_JobErrorNotification</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#65">6.7 Configurable Interfaces</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#65">6.7.1 &#160;SingleBlockCallbackFunction</a></li>
<li><a href="TechnicalReference_NvMs.html#66">6.7.2 MultiBlockCallbackFunction</a></li>
<li><a href="TechnicalReference_NvMs.html#66">6.7.3 InitBlockCallbackFunction</a></li>
<li><a href="TechnicalReference_NvMs.html#67">6.7.4 Callback function for RAM to NvM copy</a></li>
<li><a href="TechnicalReference_NvMs.html#68">6.7.5 Callback function for NvM to RAM copy</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#68">6.8 Service Ports</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#68">6.8.1 Client Server Interface</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#68">6.8.1.1 Provide Ports on NVM side</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#69">6.8.1.1.1 Padmin_&lt;BlockName&gt;</a></li>
<li><a href="TechnicalReference_NvMs.html#69">6.8.1.1.2 PS_&lt;BlockName&gt;</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#70">6.8.1.2 Require Ports</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#70">6.8.1.2.1 NvM_RpNotifyFinished_Id&lt;BlockName&gt;</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#71">7 Configuration</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#71">7.1 Software Component Template</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#71">7.1.1 Generation</a></li>
<li><a href="TechnicalReference_NvMs.html#71">7.1.2 Import into DaVinci Developer</a></li>
<li><a href="TechnicalReference_NvMs.html#72">7.1.3 Dependencies on Configuration of NVM Attributes</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#72">7.1.3.1 Naming of Service Port Interfaces</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#73">7.1.4 Service Port Prototypes</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#73">7.1.4.1 Port Prototype Naming</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#73">7.1.5 Modelling SWC’s callback functions</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#75">7.2 Configuration of NVM Attributes</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#77">8 AUTOSAR Standard Compliance</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#77">8.1 Deviations</a></li>
<li><a href="TechnicalReference_NvMs.html#77">8.2 Additions/ Extensions</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#77">8.2.1 Parameter Checking</a></li>
<li><a href="TechnicalReference_NvMs.html#77">8.2.2 Concurrent access to NV data</a></li>
<li><a href="TechnicalReference_NvMs.html#77">8.2.3 RAM-/ROM Block Size checks</a></li>
<li><a href="TechnicalReference_NvMs.html#77">8.2.4 Calculated CRC value does not depend on number of calculation steps</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#78">8.3 Limitations</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#79">9 Glossary and Abbreviations</a>
<ul>
<li><a href="TechnicalReference_NvMs.html#79">9.1 Glossary</a></li>
<li><a href="TechnicalReference_NvMs.html#79">9.2 Abbreviations</a></li>
</ul>
</li>
<li><a href="TechnicalReference_NvMs.html#81">10 Contact</a></li>
</ul>
<hr/>
</body>
</html>
