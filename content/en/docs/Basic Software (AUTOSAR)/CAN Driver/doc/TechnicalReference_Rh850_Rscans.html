---
title: TechnicalReference_Rh850_Rscans
linkTitle: TechnicalReference_Rh850_Rscans
weight: 9
---

<!DOCTYPE html><html>
<head>
<title></title>
<style type="text/css">
<!--
.xflip {
    -moz-transform: scaleX(-1);
    -webkit-transform: scaleX(-1);
    -o-transform: scaleX(-1);
    transform: scaleX(-1);
    filter: fliph;
}
.yflip {
    -moz-transform: scaleY(-1);
    -webkit-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    transform: scaleY(-1);
    filter: flipv;
}
.xyflip {
    -moz-transform: scaleX(-1) scaleY(-1);
    -webkit-transform: scaleX(-1) scaleY(-1);
    -o-transform: scaleX(-1) scaleY(-1);
    transform: scaleX(-1) scaleY(-1);
    filter: fliph + flipv;
}
-->
</style>
</head>
<body>
<a name=1></a>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/><b>Vector CAN&#160;Driver&#160;<br/></b>Technical Reference&#160;<br/>
&#160;<br/>
Renesas&#160;<br/>RH850&#160;<br/>RSCAN&#160;<br/>
&#160;<br/>Version&#160;1.05.00&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Authors&#160;<br/>
Torsten&#160;Kercher&#160;<br/>
Status&#160;<br/>
Released&#160;<br/>
&#160;<br/>
&#160;<br/>
<hr/>
<a name=2></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-2_1.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>Document&#160;Information&#160;</b><br/>
<b>History&#160;</b><br/>
&#160;<br/>
<b>Author&#160;</b><br/>
<b>Date&#160;</b><br/>
<b>Version&#160;&#160;Remarks&#160;</b><br/>
Torsten&#160;Kercher&#160;&#160;2013-05-27&#160;&#160;1.00.00&#160;&#160;Initial&#160;release&#160;(support&#160;F1L&#160;with Green Hills&#160;compiler)&#160;<br/>Torsten&#160;Kercher&#160;&#160;2013-07-18&#160;&#160;1.01.00&#160;&#160;Support&#160;R1L&#160;<br/>
Correct&#160;description of&#160;nested&#160;interrupt&#160;behavior&#160;<br/>
Torsten&#160;Kercher&#160;&#160;2013-08-26&#160;&#160;1.02.00&#160;&#160;Support&#160;HighEnd&#160;features&#160;<br/>
Support&#160;Diab&#160;compiler&#160;<br/>
Torsten&#160;Kercher&#160;&#160;2013-10-16&#160;&#160;1.03.00&#160;&#160;Support&#160;R1M&#160;<br/>
Update&#160;referenced&#160;version&#160;of&#160;the&#160;R1x&#160;hardware&#160;manual&#160;<br/>Support&#160;external&#160;wakeup&#160;functionality&#160;<br/>Update&#160;chapters<a href="TechnicalReference_Rh850_Rscans.html#13">&#160;5,&#160;</a><a href="TechnicalReference_Rh850_Rscans.html#15">6,&#160;</a><a href="TechnicalReference_Rh850_Rscans.html#18">7.2.2&#160;</a><br/>
Torsten&#160;Kercher&#160;&#160;2014-04-04&#160;&#160;1.04.00&#160;&#160;Support&#160;extended&#160;CAN&#160;RAM&#160;check&#160;<br/>
Support&#160;RSCAN&#160;RAM&#160;test&#160;<br/>Support&#160;D1L,&#160;D1M,&#160;P1M&#160;<br/>Update&#160;referenced&#160;version&#160;of&#160;the&#160;F1L&#160;hardware&#160;manual&#160;<br/>
Torsten&#160;Kercher&#160;&#160;2014-04-29&#160;&#160;1.04.01&#160;&#160;Update description of&#160;nested&#160;interrupt&#160;behavior&#160;<br/>Torsten&#160;Kercher&#160;&#160;2014-05-15&#160;&#160;1.05.00&#160;&#160;Support&#160;IAR&#160;compiler&#160;<br/>
Support&#160;F1H&#160;<br/>Update&#160;expected&#160;loop&#160;durations in&#160;chapter<a href="TechnicalReference_Rh850_Rscans.html#13">&#160;5&#160;</a><br/>
Table&#160;1-1&#160;&#160;&#160;History&#160;of&#160;the&#160;document&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Please&#160;note&#160;<br/></b>We&#160;have configured&#160;the&#160;programs&#160;in&#160;accordance&#160;with your&#160;specifications&#160;in the&#160;<br/>
<b>&#160;&#160;</b>questionnaire.&#160;Whereas&#160;the&#160;programs&#160;do&#160;support&#160;other&#160;configurations&#160;than&#160;the&#160;one&#160;<br/>
specified&#160;in your&#160;questionnaire,&#160;Vector´s&#160;release&#160;of&#160;the&#160;programs&#160;delivered to&#160;your&#160;<br/>company&#160;is&#160;expressly&#160;restricted&#160;to&#160;the&#160;configuration&#160;you&#160;have specified&#160;in&#160;the&#160;<br/>questionnaire.&#160;<br/>
<b>&#160;</b><br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
2&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=3></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>Contents&#160;</b><br/>
<b>&#160;</b><br/>
<a href="TechnicalReference_Rh850_Rscans.html#5"><b>1</b>&#160;&#160;<b>Introduction&#160;....................................................................................................................&#160;5</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#6"><b>2</b>&#160;&#160;<b>Important&#160;References&#160;....................................................................................................&#160;6</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#7"><b>3</b>&#160;&#160;<b>Usage&#160;of&#160;Controller&#160;Features&#160;........................................................................................&#160;7</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#7">3.1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#7">[#hw_comObj]&#160;-&#160;Communication Objects&#160;.........................................................&#160;7&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#10">3.2&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#10">Acceptance Filters&#160;.........................................................................................&#160;10&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#11"><b>4</b>&#160;&#160;<b>[#hw_sleep]&#160;-&#160;SleepMode&#160;and&#160;WakeUp&#160;.......................................................................&#160;11</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#11">4.1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#11">Sleep&#160;.............................................................................................................&#160;11&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#11">4.2&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#11">Internal&#160;Wakeup&#160;............................................................................................&#160;11&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#11">4.3&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#11">External&#160;Wakeup&#160;...........................................................................................&#160;11&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#13"><b>5</b>&#160;&#160;<b>[#hw_loop]&#160;-&#160;Hardware&#160;Loop&#160;Check&#160;............................................................................&#160;13</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#15"><b>6</b>&#160;&#160;<b>[#hw_busoff]&#160;-&#160;Bus&#160;off&#160;.................................................................................................&#160;15</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#16"><b>7</b>&#160;&#160;<b>CAN&#160;Driver&#160;Features&#160;....................................................................................................&#160;16</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#16">7.1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#16">[#hw_feature]&#160;-&#160;Feature&#160;List&#160;...........................................................................&#160;16&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#18">7.2&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#18">Description&#160;of&#160;Hardware-related&#160;Features&#160;.....................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#18">7.2.1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#18">[#hw_status]&#160;-&#160;Status&#160;.....................................................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#18">7.2.2&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#18">[#hw_stop]&#160;-&#160;Stop&#160;Mode&#160;................................................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#18">7.2.3&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#18">[#hw_int]&#160;-&#160;Control&#160;of&#160;CAN&#160;Interrupts&#160;.............................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#19">7.2.4&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#19">[#hw_cancel]&#160;-&#160;Cancel&#160;in Hardware&#160;...............................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#19">7.2.5&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#19">Remote&#160;Frames&#160;............................................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#19">7.2.6&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#19">CAN&#160;RAM&#160;Check&#160;..........................................................................................&#160;19&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#20">7.2.7&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#20">Extended CAN&#160;RAM&#160;Check&#160;...........................................................................&#160;20&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#21">7.2.8&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#21">RSCAN&#160;ECC&#160;Configuration&#160;...........................................................................&#160;21&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#22">7.2.9&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#22">RSCAN&#160;RAM&#160;Test&#160;.........................................................................................&#160;22&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#23"><b>8</b>&#160;&#160;<b>[#hw_assert]&#160;–&#160;Assertions&#160;...........................................................................................&#160;23</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#24"><b>9</b>&#160;&#160;<b>API&#160;.................................................................................................................................&#160;24</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#24">9.1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#24">Category&#160;.......................................................................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#24">9.2&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#24">RSCAN&#160;ECC&#160;Configuration&#160;...........................................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#25">9.3&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#25">(Extended)&#160;CAN&#160;RAM&#160;Check&#160;........................................................................&#160;25&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#30">9.4&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#30">CAN&#160;Interrupt&#160;Handling&#160;by&#160;Application&#160;..........................................................&#160;30&#160;</a><br/>
&#160;<br/>
<b>&#160;</b><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
3&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=4></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<a href="TechnicalReference_Rh850_Rscans.html#32"><b>10</b>&#160;&#160;<b>Implementations Hints&#160;.................................................................................................&#160;32</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#32">10.1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#32">Important&#160;Notes&#160;.............................................................................................&#160;32&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#33">10.2&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#33">Interrupt&#160;Configuration&#160;...................................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#34">10.2.1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#34">Configuration of&#160;Interrupt&#160;Vectors&#160;with IAR&#160;compiler......................................&#160;34&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#35">10.3&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#35">CAN&#160;Interrupt&#160;Handling&#160;by&#160;Application&#160;..........................................................&#160;35&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#37"><b>11</b>&#160;&#160;<b>Configuration................................................................................................................&#160;37</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#37">11.1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#37">Configuration by&#160;GENy&#160;..................................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#37">11.1.1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#37">Platform&#160;Settings&#160;...........................................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#38">11.1.2&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#38">Component&#160;Settings&#160;......................................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#39">11.1.3&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#39">Channel-specific&#160;Settings&#160;..............................................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#44">11.2&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#44">Manual&#160;Configuration&#160;....................................................................................&#160;44&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#45"><b>12</b>&#160;&#160;<b>Known&#160;Issues&#160;/&#160;Limitations&#160;.........................................................................................&#160;45</b>&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#46"><b>13</b>&#160;&#160;<b>Contact..........................................................................................................................&#160;46</b>&#160;<br/></a>&#160;<br/>&#160;<br/>&#160;<br/>&#160;<br/><b>Illustrations&#160;</b><br/>
&#160;<br/>
&#160;<br/><a href="TechnicalReference_Rh850_Rscans.html#7">Figure&#160;3-1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#7">Hardware&#160;Object&#160;Layout&#160;.............................................................................&#160;7&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#37">Figure&#160;11-1&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#37">GENy&#160;Platform&#160;Settings&#160;............................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#38">Figure&#160;11-2&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#38">GENy&#160;Component&#160;Settings&#160;.......................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#39">Figure&#160;11-3&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#39">GENy&#160;Channel&#160;Specific&#160;Settings&#160;...............................................................&#160;39&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#41">Figure&#160;11-4&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#41">GENy&#160;Acceptance&#160;Filter&#160;Configuration&#160;......................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#42">Figure&#160;11-5&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#42">GENy&#160;Acceptance&#160;Filter&#160;Assignment&#160;........................................................&#160;42&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#43">Figure&#160;11-6&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#43">GENy&#160;Bustiming&#160;Configuration&#160;.................................................................&#160;43&#160;</a><br/>
&#160;<br/>&#160;<br/>&#160;<br/><b>Tables&#160;<br/></b>&#160;<br/><a href="TechnicalReference_Rh850_Rscans.html#2">Table&#160;1-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#2">History&#160;of&#160;the&#160;document&#160;..............................................................................&#160;2&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#6">Table&#160;2-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#6">Supported&#160;Hardware&#160;Overview&#160;...................................................................&#160;6&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#9">Table&#160;3-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#9">Hardware&#160;Object&#160;Layout&#160;.............................................................................&#160;9&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#17">Table&#160;7-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#17">CAN&#160;Driver&#160;Functionality&#160;..........................................................................&#160;17&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#18">Table&#160;7-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#18">CAN&#160;Status&#160;...............................................................................................&#160;18&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#24">Table&#160;9-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#24">API&#160;Category&#160;............................................................................................&#160;24&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#33">Table&#160;10-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#33">Interrupt&#160;Service Routines&#160;........................................................................&#160;33&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#37">Table&#160;11-1&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#37">GENy&#160;Platform&#160;Settings&#160;............................................................................&#160;37&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#38">Table&#160;11-2&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#38">GENy&#160;Component&#160;Settings&#160;.......................................................................&#160;38&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#40">Table&#160;11-3&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#40">GENy&#160;Channel&#160;Specific&#160;Settings&#160;...............................................................&#160;40&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#41">Table&#160;11-4&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#41">GENy&#160;Acceptance&#160;Filter&#160;Configuration&#160;......................................................&#160;41&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#43">Table&#160;11-5&#160;&#160;</a><br/>
<a href="TechnicalReference_Rh850_Rscans.html#43">GENy&#160;Bustiming&#160;Configuration&#160;.................................................................&#160;43&#160;</a><br/>
&#160;<br/>&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
4&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=5></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>1&#160;&#160;Introduction&#160;</b><br/>
The&#160;concept&#160;of&#160;the&#160;CAN&#160;driver&#160;and&#160;the&#160;standardized&#160;interface&#160;between&#160;the&#160;CAN&#160;driver&#160;and&#160;<br/>the&#160;&#160;application&#160;&#160;is&#160;&#160;described&#160;&#160;in&#160;&#160;the&#160;&#160;document&#160;&#160;<b>TechnicalReference_CANDriver.pdf</b>.&#160;&#160;The&#160;<br/>CAN&#160;driver&#160;interface&#160;to&#160;the&#160;hardware&#160;is&#160;designed&#160;in&#160;a&#160;way&#160;that&#160;capabilities&#160;of&#160;the&#160;special&#160;<br/>CAN&#160;chips&#160;can&#160;be&#160;utilized&#160;optimally.&#160;The&#160;interface&#160;to&#160;the&#160;application&#160;was&#160;made&#160;identical for&#160;<br/>the&#160;&#160;different&#160;&#160;CAN&#160;&#160;chips,&#160;&#160;so&#160;&#160;that&#160;&#160;the&#160;&#160;&#34;higher&#34;&#160;&#160;layers&#160;&#160;such&#160;&#160;as&#160;&#160;network&#160;&#160;management,&#160;<br/>transport&#160;protocols&#160;and&#160;especially&#160;the&#160;application&#160;would&#160;essentially&#160;be&#160;independent&#160;of&#160;the&#160;<br/>particular CAN chip&#160;used.&#160;<br/>&#160;<br/>This&#160;&#160;document&#160;&#160;describes&#160;&#160;the&#160;&#160;hardware&#160;&#160;dependent&#160;&#160;special&#160;&#160;features&#160;&#160;and&#160;&#160;implementation&#160;<br/>specifics&#160;of&#160;the<i>&#160;</i>Renesas&#160;RSCAN&#160;on&#160;the&#160;RH850&#160;platform.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
5&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=6></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>2&#160;&#160;Important&#160;References&#160;</b><br/>
The&#160;&#160;following&#160;&#160;table&#160;&#160;summarizes&#160;&#160;information&#160;&#160;about&#160;&#160;the&#160;&#160;CAN&#160;&#160;Driver.&#160;&#160;It&#160;&#160;gives&#160;&#160;you&#160;&#160;detailed&#160;<br/>information&#160;&#160;about&#160;&#160;the&#160;&#160;versions,&#160;&#160;derivatives&#160;&#160;and&#160;&#160;compilers.&#160;As&#160;&#160;very&#160;&#160;important&#160;&#160;information&#160;<br/>the&#160;&#160;documentations&#160;&#160;of&#160;&#160;the&#160;&#160;hardware&#160;&#160;manufacturers&#160;&#160;are&#160;&#160;listed.&#160;The&#160;&#160;CAN&#160;&#160;Driver&#160;&#160;is&#160;&#160;based&#160;<br/>upon&#160;these&#160;documents&#160;in&#160;the&#160;given&#160;version.&#160;&#160;<br/>
&#160;<br/>
<b>Driver&#160;</b><br/>
<b>Supported&#160;</b><br/>
<b>Supported&#160;</b><br/>
<b>Hardware&#160;Manufacturer&#160;Document&#160;</b><br/>
<b>Version</b><br/>
<b>Version</b><br/>
<b>&#160;</b><br/>
<b>&#160;&#160;Compilers&#160;</b><br/>
<b>Derivatives&#160;</b><br/>
3.11.xx,&#160;&#160;Green&#160;Hills,&#160;<br/>
D1L&#160;<br/>
R01UH0451EJ0041,&#160;RH850/D1L/D1M&#160;<br/>
Rev.0.41&#160;<br/>
RI&#160;1.5&#160;<br/>
Wind&#160;River&#160;Diab,&#160;&#160;D1M&#160;<br/>
Group,&#160;User’s&#160;Manual:&#160;Hardware&#160;<br/>
Jan&#160;2014&#160;<br/>
IAR&#160;<br/>
F1L&#160;<br/>
R01UH0390EJ0100,&#160;RH850/F1L&#160;Group,&#160;&#160;&#160;Rev.1.00&#160;<br/>User’s&#160;Manual:&#160;Hardware&#160;<br/>
Jan&#160;2014&#160;<br/>
F1H&#160;1&#160;<br/>
R01UH0445EJ0010,&#160;RH850/F1H&#160;Group,&#160;&#160;Rev.0.10&#160;<br/>User’s&#160;Manual:&#160;Hardware&#160;<br/>
Jan&#160;2014&#160;<br/>
P1M&#160;<br/>
R01UH0436EJ0041,&#160;RH850/P1x&#160;Group,&#160;&#160;&#160;Rev.0.41&#160;<br/>User’s&#160;Manual:&#160;Hardware&#160;<br/>
Nov&#160;2013&#160;<br/>
R1L&#160;<br/>
R01UH0411EJ0061,&#160;RH850/R1x&#160;Group,&#160;&#160;&#160;Rev.0.61&#160;<br/>
R1M&#160;<br/>
User’s&#160;Manual:&#160;Hardware&#160;<br/>
Aug&#160;2013&#160;<br/>
&#160;<br/>
R01US0058EJ0020,&#160;RH850 Family,&#160;<br/>
Rev.0.20&#160;<br/>
User’s&#160;Manual:&#160;Software&#160;<br/>
Feb&#160;2013&#160;<br/>
Table&#160;2-1&#160;&#160;&#160;Supported&#160;Hardware&#160;Overview&#160;<br/>
&#160;<br/><b>Driver&#160;Version:&#160;</b>This&#160;is&#160;the&#160;current version&#160;of&#160;the CAN&#160;Driver. RI shows&#160;the version of&#160;the Reference&#160;<br/>Implementation and&#160;therefore the&#160;functional&#160;scope of&#160;the&#160;CAN Driver.&#160;<br/><b>Supported&#160;Compilers:&#160;</b>List of&#160;compilers&#160;the CAN Driver is&#160;working&#160;with.&#160;<br/><b>Supported&#160;Derivatives:&#160;</b>List of&#160;derivatives&#160;the&#160;CAN Driver can be&#160;used&#160;on.&#160;<br/><b>Hardware Manufacturer&#160;Document:&#160;</b>List of&#160;hardware&#160;documentation the CAN Driver is&#160;based&#160;on.&#160;&#160;<br/><b>Version:&#160;</b>To be able to reference to this&#160;hardware documentation&#160;its&#160;version is&#160;very&#160;important.&#160;<br/>&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>
1&#160;Only&#160;RSCAN0 is&#160;supported&#160;(physical&#160;channels&#160;CAN0-CAN5).&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
6&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=7></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-7_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-7_2.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>3&#160;&#160;Usage&#160;of&#160;Controller&#160;Features&#160;</b><br/>
<b>3.1&#160;</b><br/>
<b>[#hw_comObj]&#160;-&#160;Communication Objects&#160;</b><br/>
The&#160;generation&#160;tool supports&#160;a&#160;flexible&#160;allocation&#160;of&#160;message&#160;buffers:&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
Figure&#160;3-1&#160;&#160;Hardware&#160;Object&#160;Layout&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>Figure&#160;3-1&#160;depicts&#160;the&#160;maximum&#160;RSCAN&#160;capacities&#160;-&#160;the&#160;actual&#160;layout&#160;depends&#160;on&#160;the&#160;<br/>
&#160;&#160;used derivative.&#160;Refer&#160;to&#160;the&#160;hardware&#160;manual&#160;to&#160;get&#160;the&#160;number&#160;of&#160;supported&#160;physical&#160;<br/>
channels&#160;to&#160;determine&#160;which&#160;Tx&#160;buffers&#160;are&#160;available.&#160;The&#160;amount&#160;of&#160;supported&#160;Rx&#160;<br/>buffers&#160;(nRXMBmax)&#160;equals&#160;the&#160;number&#160;of&#160;supported&#160;physical&#160;channels&#160;*&#160;16.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
7&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=8></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>Obj&#160;</b><br/>
<b>Hw&#160;object&#160;&#160;Log object&#160;&#160;No.&#160;of&#160;</b><br/>
<b>Comment&#160;</b><br/>
<b>number&#160;</b><br/>
<b>type&#160;</b><br/>
<b>type&#160;</b><br/>
<b>objects&#160;</b><br/>
These&#160;objects&#160;are&#160;used&#160;to receive&#160;<br/>specific&#160;CAN&#160;messages.&#160;The&#160;user&#160;<br/>defines&#160;statically&#160;(Generation&#160;Tool)&#160;that&#160;<br/>a CAN&#160;message should&#160;be&#160;received&#160;in a&#160;<br/>FullCAN&#160;message&#160;object.&#160;The&#160;<br/>
&#160;<br/>
Generation&#160;Tool&#160;distributes the&#160;<br/>
0<br/>
messages&#160;to&#160;the&#160;FullCAN&#160;objects.&#160;Up&#160;to&#160;<br/>
0<br/>
&#160;<br/>
&#160;<br/>
Receive&#160;<br/>
Receive&#160;<br/>
-&#160;<br/>
nRxMBmax&#160;receive FullCAN&#160;objects&#160;can&#160;<br/>
-&#160;<br/>
buffer<br/>
FullCAN<br/>
nRxMBmax<br/>
be&#160;configured&#160;per&#160;channel,&#160;but&#160;the&#160;sum&#160;<br/>
(nRxFC&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
-1)&#160;<br/>
&#160;<br/>
over&#160;all&#160;receive FullCAN&#160;objects&#160;on&#160;all&#160;<br/>
=&#160;nRXFC&#160;<br/>
channels&#160;must&#160;not&#160;exceed nRxMBmax.&#160;<br/>The&#160;receive buffers&#160;for&#160;the FullCAN&#160;<br/>objects&#160;of&#160;all&#160;channels&#160;(sorted&#160;<br/>ascending&#160;by&#160;the&#160;physical&#160;channel&#160;<br/>index)&#160;are&#160;allocated&#160;continuously&#160;<br/>starting&#160;from&#160;index&#160;0.&#160;<br/>These&#160;objects&#160;are&#160;not&#160;used.&#160;It&#160;depends&#160;<br/>on&#160;the&#160;configuration of&#160;receive FullCAN&#160;<br/>
nRxFC&#160;<br/>
0<br/>
Receive&#160;<br/>
&#160;<br/>
objects&#160;and&#160;nRxMBmax&#160;how&#160;many&#160;<br/>
-&#160;<br/>
Unused<br/>
buffer<br/>
&#160;<br/>
-&#160;<br/>
receive buffers&#160;are&#160;not&#160;used.&#160;These&#160;<br/>
127<br/>
&#160;<br/>
&#160;<br/>
128&#160;<br/>
objects&#160;will&#160;not&#160;be&#160;configured,&#160;so&#160;they&#160;<br/>don’t&#160;consume shared&#160;hardware&#160;buffers.&#160;<br/>All&#160;other&#160;CAN&#160;messages&#160;(Application,&#160;<br/>Diagnostics,&#160;Network&#160;Management)&#160;are&#160;<br/>received&#160;via the&#160;BasicCAN&#160;objects.&#160;<br/>Each&#160;object&#160;consists&#160;of&#160;one&#160;receive&#160;<br/>FIFO&#160;buffer&#160;with a&#160;configurable amount&#160;<br/>of&#160;acceptance&#160;filters&#160;and&#160;an individually&#160;<br/>configurable FIFO&#160;depth&#160;(number&#160;of&#160;<br/>allocated&#160;shared&#160;buffers).&#160;In&#160;general&#160;<br/>
0<br/>
there&#160;is&#160;one BasicCAN&#160;object&#160;per&#160;<br/>
128<br/>
&#160;<br/>
&#160;<br/>
-&#160;<br/>
channel,&#160;but&#160;by&#160;using&#160;the&#160;Multiple&#160;<br/>
-&#160;&#160;<br/>
Receive&#160;<br/>
Receive&#160;<br/>
8<br/>
BasicCAN&#160;feature&#160;the&#160;amount&#160;of&#160;used&#160;<br/>
(128&#160;+&#160;<br/>
&#160;<br/>
&#160;<br/>
FIFO&#160;buffer&#160;&#160;BasicCAN&#160;<br/>
BasicCAN&#160;objects&#160;can&#160;be configured.&#160;<br/>
nRxBC&#160;<br/>
&#160;<br/>
-1)&#160;<br/>
=&#160;nRXBC&#160;<br/>
Up to&#160;8&#160;receive&#160;BasicCAN&#160;objects&#160;can&#160;<br/>be&#160;configured&#160;per&#160;channel,&#160;but&#160;the&#160;sum&#160;<br/>over&#160;all&#160;receive&#160;BasicCAN&#160;objects&#160;on&#160;all&#160;<br/>channels&#160;must&#160;not&#160;exceed&#160;8.&#160;The&#160;<br/>receive FIFO&#160;buffers&#160;for&#160;the&#160;BasicCAN&#160;<br/>objects&#160;of&#160;all&#160;channels&#160;(sorted&#160;<br/>ascending&#160;by&#160;the&#160;physical&#160;channel&#160;<br/>index)&#160;are&#160;allocated&#160;continuously&#160;<br/>starting&#160;from&#160;index&#160;128.&#160;<br/>These&#160;objects&#160;are&#160;not&#160;used.&#160;It&#160;depends&#160;<br/>on&#160;the&#160;configuration of&#160;receive&#160;<br/>
128&#160;+&#160;nRxBC&#160;<br/>
0<br/>
Receive&#160;<br/>
&#160;<br/>
BasicCAN&#160;objects&#160;how&#160;many&#160;receive&#160;<br/>
-&#160;<br/>
Unused<br/>
FIFO&#160;buffer<br/>
&#160;<br/>
-&#160;<br/>
FIFO&#160;buffers&#160;are&#160;not&#160;used.&#160;These&#160;<br/>
135<br/>
&#160;<br/>
&#160;<br/>
8&#160;<br/>
objects&#160;will&#160;not&#160;be&#160;configured,&#160;so&#160;they&#160;<br/>don’t&#160;consume shared&#160;hardware&#160;buffers.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
8&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=9></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>Obj&#160;</b><br/>
<b>Hw&#160;object&#160;&#160;Log object&#160;&#160;No.&#160;of&#160;</b><br/>
<b>Comment&#160;</b><br/>
<b>number&#160;</b><br/>
<b>type&#160;</b><br/>
<b>type&#160;</b><br/>
<b>objects&#160;</b><br/>
The&#160;usage of&#160;Transmit&#160;/&#160;Receive&#160;FIFO&#160;<br/>
136&#160;<br/>
Transmit&#160;/&#160;<br/>
buffers&#160;is&#160;not&#160;supported&#160;by&#160;this&#160;driver.&#160;<br/>
-&#160;<br/>
Receive&#160;<br/>
Unused&#160;<br/>
24&#160;<br/>
These&#160;objects&#160;are&#160;always&#160;unused and&#160;<br/>
159&#160;<br/>
FIFO&#160;buffer&#160;<br/>
will&#160;not&#160;be&#160;configured,&#160;so&#160;they&#160;don’t&#160;<br/>consume&#160;shared&#160;hardware&#160;buffers.&#160;<br/>This&#160;object&#160;is&#160;used by&#160;CanTransmit()&#160;<br/>to send&#160;several&#160;messages&#160;on&#160;the&#160;logical&#160;<br/>
Transmit&#160;<br/>
Transmit&#160;<br/>
1&#160;<br/>
160 +&#160;(n*16)<br/>
&#160;<br/>
channel&#160;that&#160;is&#160;mapped&#160;to physical&#160;<br/>
&#160;<br/>
buffer&#160;<br/>
Normal&#160;<br/>
per&#160;channel&#160;&#160;channel&#160;n.&#160;If&#160;the&#160;transmit&#160;message&#160;<br/>
object&#160;is&#160;busy,&#160;the&#160;transmit&#160;request&#160;is&#160;<br/>stored&#160;in a&#160;software&#160;queue.&#160;<br/>This&#160;object&#160;is&#160;used by&#160;<br/>
0&#160;or&#160;1&#160;<br/>
Transmit&#160;<br/>
CanMsgTransmit()&#160;to&#160;send&#160;its&#160;<br/>
Low&#160;Level&#160;&#160;per&#160;channel<br/>
161 +&#160;(n*16)<br/>
&#160;<br/>
&#160;<br/>
buffer<br/>
messages&#160;on&#160;the&#160;logical&#160;channel&#160;that&#160;is&#160;<br/>
&#160;<br/>
Transmit&#160;<br/>
&#160;<br/>=&#160;nTXLL<br/>
mapped&#160;to physical&#160;channel&#160;n&#160;if&#160;the&#160;Low&#160;<br/>
&#160;<br/>
Level&#160;transmit&#160;functionality&#160;is&#160;used.&#160;<br/>These&#160;objects&#160;are&#160;used&#160;by&#160;<br/>CanTransmit()&#160;to&#160;send a&#160;certain&#160;<br/>message&#160;on&#160;the&#160;logical&#160;channel&#160;that&#160;is&#160;<br/>
&#160;<br/>
161&#160;+&#160;(n*16)&#160;<br/>
0<br/>
mapped&#160;to physical&#160;channel&#160;n.&#160;The&#160;user&#160;<br/>
&#160;<br/>
&#160;+&#160;nTXLL&#160;&#160;<br/>
defines&#160;statically&#160;(Generation&#160;Tool)&#160;<br/>
-&#160;<br/>
-&#160;<br/>
Transmit&#160;<br/>
Transmit&#160;<br/>
15<br/>
which CAN&#160;messages&#160;are located&#160;in&#160;<br/>
&#160;<br/>
161 +&#160;(n*16)&#160;+&#160;&#160;buffer&#160;<br/>
FullCAN&#160;<br/>
such&#160;Tx&#160;FullCAN&#160;objects.&#160;The&#160;<br/>
nTXLL&#160;+&#160;<br/>
per&#160;channel&#160;&#160;Generation&#160;Tool&#160;distributes the&#160;<br/>
nTXFC(n)&#160;<br/>
&#160;<br/>
-1&#160;<br/>
messages&#160;to&#160;the&#160;objects.&#160;Up to&#160;15&#160;<br/>
=&#160;nTXFC(n)&#160;&#160;&#160;transmit&#160;FullCAN&#160;objects&#160;can&#160;be&#160;<br/>
assigned&#160;per&#160;channel&#160;(up to&#160;14&#160;if&#160;the&#160;<br/>Low&#160;Level&#160;transmit&#160;functionality&#160;is&#160;used).&#160;<br/>
161 +&#160;(n*16)&#160;+&#160;<br/>
These&#160;objects&#160;are&#160;not&#160;used.&#160;It&#160;depends&#160;<br/>
nTXLL&#160;+&#160;<br/>
0&#160;<br/>
on&#160;the&#160;configuration of&#160;transmit&#160;objects&#160;<br/>
nTXFC(n)&#160;<br/>
Transmit&#160;<br/>
how&#160;many&#160;transmit&#160;buffer&#160;objects&#160;are&#160;<br/>
Unused<br/>
-&#160;<br/>
&#160;<br/>
-&#160;<br/>
buffer&#160;<br/>
15&#160;&#160;<br/>
not&#160;used.&#160;Additionally&#160;all&#160;transmit&#160;buffers&#160;<br/>
161 +&#160;(n*16)&#160;<br/>
per&#160;channel&#160;&#160;of&#160;not&#160;supported&#160;or&#160;unused&#160;physical&#160;<br/>
+14&#160;<br/>
channels&#160;n&#160;are unused.&#160;<br/>
Table&#160;3-1&#160;&#160;&#160;Hardware&#160;Object&#160;Layout&#160;<br/>
&#160;<br/>
nRxMBmax&#160;&#160;Amount&#160;of&#160;RX&#160;buffers&#160;that&#160;is&#160;supported&#160;by&#160;the used derivative&#160;(see&#160;note above)&#160;<br/>
nRxFC&#160;<br/>
Number&#160;of&#160;used&#160;Rx&#160;FullCAN objects&#160;over all&#160;channels&#160;<br/>
nRxBC&#160;<br/>
Number&#160;of&#160;used&#160;Rx&#160;BasicCAN objects&#160;over all&#160;channels&#160;<br/>
n&#160;<br/>
Index&#160;of&#160;the physical&#160;channel&#160;<br/>
nTXLL&#160;<br/>
Number&#160;of&#160;Low&#160;Level&#160;transmit objects&#160;per&#160;channel&#160;(0&#160;or&#160;1)&#160;<br/>
nTXFC(n)&#160;<br/>
Number&#160;of&#160;used&#160;Tx&#160;FullCAN objects&#160;on&#160;the&#160;channel&#160;that&#160;is&#160;mapped to the physical&#160;channel&#160;n&#160;<br/>
&#160;<br/>&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
9&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=10></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-10_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-10_2.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;number&#160;of&#160;available&#160;transmit&#160;buffer&#160;objects&#160;per&#160;physical&#160;channel&#160;is&#160;constant.&#160;The&#160;<br/>
<b>&#160;&#160;</b>receive buffers&#160;and&#160;FIFOs&#160;are&#160;shared&#160;over&#160;all&#160;channels&#160;and the availability&#160;per&#160;channel&#160;<br/>
is&#160;restricted&#160;as&#160;explained&#160;in table 3-1.&#160;Furthermore&#160;the&#160;internal&#160;buffers&#160;for&#160;all&#160;receive&#160;<br/>objects&#160;are allocated&#160;out&#160;of&#160;a&#160;common&#160;buffer&#160;pool&#160;with size of&#160;(number&#160;of&#160;supported&#160;<br/>physical&#160;channels&#160;*&#160;64).&#160;This&#160;has&#160;to be&#160;considered when configuring&#160;the&#160;number&#160;of&#160;the&#160;<br/>Rx&#160;FullCAN&#160;objects&#160;and&#160;the&#160;number&#160;and&#160;individual&#160;FIFO&#160;depths&#160;of&#160;the&#160;Rx&#160;BasicCAN&#160;<br/>objects&#160;(refer&#160;to&#160;section<a href="TechnicalReference_Rh850_Rscans.html#39">&#160;11.1.3&#160;</a>for&#160;further&#160;information&#160;and details&#160;on&#160;how&#160;to&#160;configure&#160;<br/>the&#160;hardware&#160;objects).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>3.2&#160;</b><br/>
<b>Acceptance&#160;Filters&#160;</b><br/>
The&#160;hardware&#160;acceptance&#160;filters&#160;of&#160;the&#160;receive&#160;BasicCAN&#160;objects&#160;must&#160;allow&#160;reception&#160;of&#160;<br/>all&#160;&#160;messages&#160;&#160;that&#160;&#160;are&#160;&#160;not&#160;&#160;received&#160;&#160;in&#160;&#160;FullCAN&#160;&#160;message&#160;&#160;objects&#160;&#160;and&#160;&#160;additionally&#160;&#160;all&#160;<br/>messages&#160;&#160;that&#160;&#160;fit&#160;&#160;in&#160;&#160;a&#160;&#160;configured&#160;&#160;range&#160;&#160;(e.g.&#160;&#160;for&#160;&#160;Network&#160;&#160;Management,&#160;&#160;Transport&#160;<br/>Protocol).&#160;&#160;The&#160;&#160;generation&#160;&#160;tool&#160;&#160;offers&#160;&#160;assistance&#160;&#160;for&#160;&#160;configuration.&#160;&#160;The&#160;&#160;number&#160;&#160;of&#160;&#160;used&#160;<br/>filters&#160;&#160;is&#160;&#160;also&#160;&#160;configurable&#160;&#160;to&#160;&#160;allow&#160;&#160;efficient&#160;&#160;hardware&#160;&#160;filtering&#160;&#160;to&#160;&#160;minimize&#160;&#160;unnecessary&#160;<br/>CPU load.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;hardware&#160;supports&#160;a&#160;pool&#160;of&#160;acceptance&#160;filters&#160;with size of&#160;(number&#160;of&#160;supported&#160;<br/>
<b>&#160;&#160;</b>physical&#160;channels&#160;*&#160;64)&#160;that&#160;are used&#160;for&#160;Rx&#160;BasicCAN&#160;as well&#160;as Rx&#160;FullCAN&#160;objects.&#160;<br/>
This&#160;has&#160;to be&#160;considered when configuring&#160;the&#160;number&#160;of&#160;Rx&#160;FullCAN&#160;objects&#160;and&#160;the&#160;<br/>number&#160;of&#160;filters&#160;per&#160;Rx&#160;BasicCAN&#160;object.&#160;See&#160;sectio<a href="TechnicalReference_Rh850_Rscans.html#39">n&#160;11.1.3&#160;</a>for&#160;further&#160;information&#160;<br/>and details&#160;on&#160;the&#160;configuration.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
10&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=11></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>4&#160;&#160;&#160;[#hw_sleep]&#160;-&#160;SleepMode&#160;and&#160;WakeUp&#160;</b><br/>
The&#160;&#160;driver&#160;&#160;supports&#160;&#160;sleep&#160;&#160;and&#160;&#160;wakeup&#160;&#160;functionality.&#160;&#160;With&#160;&#160;the&#160;&#160;function&#160;&#160;CanSleep()&#160;&#160;the&#160;<br/>CAN&#160;controller&#160;enters&#160;sleep&#160;mode&#160;and&#160;leaves&#160;it&#160;with&#160;the&#160;function&#160;CanWakeUp()&#160;(internal&#160;<br/>wakeup)&#160;&#160;or&#160;&#160;upon&#160;&#160;a&#160;&#160;falling&#160;&#160;edge&#160;&#160;respectively&#160;&#160;dominant&#160;&#160;level&#160;&#160;on&#160;&#160;the&#160;&#160;Rx&#160;&#160;pin&#160;&#160;(external&#160;<br/>wakeup).&#160;<br/>If&#160;&#160;you&#160;&#160;want&#160;&#160;to&#160;&#160;use&#160;&#160;sleep/wakeup&#160;&#160;functionality&#160;&#160;specify&#160;&#160;the&#160;&#160;Sleep/Wakeup&#160;&#160;option&#160;&#160;in&#160;&#160;the&#160;<br/>generation&#160;&#160;tool.&#160;&#160;If&#160;&#160;this&#160;&#160;functionality&#160;&#160;is&#160;&#160;not&#160;&#160;configured,&#160;&#160;the&#160;&#160;service&#160;&#160;functions&#160;&#160;CanSleep()&#160;<br/>and&#160;CanWakeUp()&#160;are empty&#160;and&#160;return&#160;kCanNotSupported.&#160;<br/>
<b>4.1&#160;</b><br/>
<b>Sleep&#160;</b><br/>
The&#160;&#160;function&#160;&#160;CanSleep()&#160;&#160;changes&#160;&#160;the&#160;&#160;channel&#160;&#160;from&#160;&#160;communication&#160;&#160;mode&#160;&#160;via&#160;&#160;reset&#160;<br/>mode&#160;to&#160;stop&#160;mode.&#160;If&#160;the&#160;function&#160;is&#160;called&#160;during&#160;CAN&#160;communication,&#160;the&#160;reception&#160;or&#160;<br/>transmission&#160;&#160;is&#160;&#160;terminated&#160;&#160;before&#160;&#160;it&#160;&#160;is&#160;&#160;completed&#160;&#160;(the&#160;&#160;same&#160;&#160;applies&#160;&#160;to&#160;&#160;a&#160;&#160;call&#160;&#160;of&#160;<br/>CanResetBusSleep()).&#160;<br/>
These&#160;&#160;transitions&#160;&#160;do&#160;not&#160;&#160;depend&#160;&#160;on&#160;&#160;external&#160;&#160;influences&#160;&#160;(e.g.&#160;&#160;the&#160;&#160;CAN&#160;&#160;bus&#160;&#160;level),&#160;&#160;so&#160;&#160;the&#160;<br/>return&#160;&#160;value&#160;&#160;kCanOk&#160;&#160;is&#160;&#160;always&#160;&#160;expected.&#160;&#160;However,&#160;&#160;if&#160;&#160;the&#160;&#160;function&#160;&#160;returns&#160;&#160;kCanFailed&#160;<br/>call&#160;CanSleep()&#160;again&#160;or&#160;re-initialize&#160;the&#160;channel.&#160;<br/>
<b>4.2&#160;</b><br/>
<b>Internal&#160;Wakeup&#160;</b><br/>
The&#160;&#160;function&#160;&#160;CanWakeUp()&#160;&#160;changes&#160;&#160;the&#160;&#160;channel&#160;&#160;from&#160;&#160;stop&#160;&#160;mode&#160;&#160;via&#160;&#160;reset&#160;&#160;mode&#160;&#160;to&#160;<br/>communication&#160;mode.&#160;<br/>
The&#160;&#160;return&#160;&#160;value&#160;&#160;kCanOk&#160;&#160;is&#160;&#160;always&#160;&#160;expected&#160;&#160;for&#160;&#160;this&#160;&#160;mode&#160;&#160;change.&#160;&#160;However,&#160;&#160;as&#160;&#160;the&#160;<br/>transition&#160;to&#160;operation&#160;mode&#160;takes&#160;two&#160;CAN&#160;bit&#160;times&#160;&#160;on&#160;the&#160;corresponding&#160;channel,&#160;the&#160;<br/>hardware&#160;&#160;loop&#160;&#160;kCanLoopEnterOperationMode&#160;&#160;is&#160;&#160;implemented&#160;&#160;(see&#160;&#160;chapter<a href="TechnicalReference_Rh850_Rscans.html#13">&#160;&#160;5).&#160;&#160;</a>If&#160;&#160;the&#160;<br/>function&#160;&#160;returns&#160;&#160;kCanFailed&#160;&#160;(e.g.&#160;&#160;caused&#160;&#160;by&#160;&#160;a&#160;&#160;loop&#160;&#160;cancellation)&#160;&#160;call&#160;&#160;CanWakeup()&#160;<br/>again&#160;or&#160;re-initialize&#160;the&#160;channel.&#160;<br/>
<b>4.3&#160;</b><br/>
<b>External&#160;Wakeup&#160;</b><br/>
The&#160;external&#160;wakeup&#160;functionality&#160;is&#160;realized&#160;by&#160;external&#160;interrupts&#160;but&#160;fully&#160;handled&#160;by&#160;the&#160;<br/>CAN&#160;driver.&#160;The&#160;RSCAN&#160;itself&#160;does&#160;not&#160;provide&#160;any&#160;possibility&#160;of&#160;detecting&#160;bus&#160;activity&#160;if&#160;it&#160;<br/>is&#160;in&#160;stop&#160;mode.&#160;Instead&#160;the&#160;port&#160;configuration&#160;of&#160;the&#160;RH850&#160;allows&#160;combining&#160;the&#160;CANn&#160;<br/>Rx&#160;pin&#160;with&#160;an&#160;external&#160;interrupt&#160;INTPn&#160;to&#160;be&#160;able&#160;to&#160;detect&#160;a&#160;CAN&#160;event&#160;even&#160;if&#160;the&#160;driver&#160;<br/>is in&#160;sleep&#160;mode.&#160;Refer to&#160;chapte<a href="TechnicalReference_Rh850_Rscans.html#32">r&#160;10&#160;</a>for implementation&#160;hints.&#160;<br/>When&#160;the&#160;driver&#160;is&#160;in&#160;&#160;sleep&#160;mode&#160;and&#160;a&#160;&#160;CAN&#160;event&#160;is&#160;detected&#160;on&#160;the&#160;Rx&#160;pin&#160;a&#160;wakeup&#160;<br/>interrupt&#160;is&#160;generated.&#160;This&#160;event&#160;can&#160;also&#160;be&#160;detected&#160;by&#160;polling.&#160;The&#160;ISR&#160;or&#160;the&#160;polling&#160;<br/>task&#160;&#160;calls&#160;&#160;the&#160;&#160;application&#160;&#160;function&#160;&#160;ApplCanPreWakeUp()&#160;&#160;(if&#160;&#160;configured),&#160;&#160;changes&#160;&#160;the&#160;<br/>channel&#160;mode&#160;via&#160;reset&#160;mode&#160;to&#160;communication&#160;mode&#160;and&#160;calls&#160;ApplCanWakeUp().&#160;&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
11&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=12></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-12_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-12_2.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>If&#160;the&#160;Sleep/Wakeup&#160;functionality&#160;is&#160;enabled&#160;via&#160;the&#160;configuration&#160;tool&#160;both&#160;the&#160;internal&#160;<br/>
<b>&#160;&#160;</b>and&#160;external&#160;wakeup&#160;are&#160;available&#160;and&#160;the&#160;CAN&#160;driver&#160;expects&#160;that&#160;the&#160;Rx&#160;pin&#160;of&#160;each&#160;<br/>
used&#160;&#160;CAN&#160;&#160;channel&#160;&#160;is&#160;&#160;linked&#160;&#160;with&#160;&#160;an&#160;&#160;external&#160;&#160;interrupt&#160;&#160;in&#160;&#160;context&#160;&#160;of&#160;&#160;the&#160;&#160;RH850&#160;&#160;port&#160;<br/>configuration.&#160;Also&#160;the&#160;driver&#160;expects&#160;that&#160;each&#160;external&#160;interrupt&#160;source&#160;is&#160;assigned&#160;to&#160;<br/>the&#160;&#160;lowest&#160;&#160;possible&#160;&#160;interrupt&#160;&#160;channel&#160;&#160;(check&#160;&#160;the&#160;&#160;“INTC1&#160;&#160;interrupt&#160;&#160;select&#160;&#160;register”&#160;&#160;if&#160;<br/>applicable).&#160;<br/>
If&#160;&#160;this&#160;&#160;configuration&#160;&#160;is&#160;&#160;not&#160;&#160;possible&#160;&#160;for&#160;&#160;the&#160;&#160;actual&#160;&#160;derivative&#160;&#160;(refer&#160;&#160;to&#160;&#160;the&#160;&#160;hardware&#160;<br/>documentation)&#160;or&#160;any&#160;respective&#160;external&#160;interrupt&#160;cannot&#160;be&#160;used&#160;exclusively&#160;by&#160;the&#160;<br/>driver&#160;&#160;(write&#160;&#160;accesses&#160;&#160;to&#160;&#160;the&#160;&#160;corresponding&#160;&#160;interrupt&#160;&#160;control&#160;&#160;register),&#160;&#160;the&#160;&#160;external&#160;<br/>wakeup&#160;functionality&#160;can’t&#160;be&#160;used.&#160;<br/>
In this&#160;case&#160;Sleep/Wakeup&#160;functionality&#160;itself&#160;has&#160;to&#160;be&#160;disabled&#160;or&#160;the&#160;external&#160;wakeup&#160;<br/>has&#160;to&#160;be&#160;deactivated&#160;by&#160;adding&#160;following&#160;to&#160;the&#160;user&#160;configuration&#160;file.&#160;Then&#160;only&#160;the&#160;<br/>internal&#160;wakeup is&#160;possible and the&#160;driver&#160;does&#160;not&#160;wake&#160;up&#160;on&#160;bus&#160;activity.&#160;<br/>
#define&#160;C_ENABLE_EXTERNAL_WAKEUP_SUPPRESSION&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;driver&#160;performs&#160;write&#160;accesses&#160;within&#160;the&#160;interrupt&#160;controller&#160;address&#160;space&#160;of&#160;the&#160;<br/>
<b>&#160;&#160;</b>MCU.&#160;&#160;If&#160;&#160;wakeup&#160;&#160;processing&#160;&#160;is&#160;&#160;configured&#160;&#160;to&#160;&#160;interrupt&#160;&#160;the&#160;&#160;corresponding&#160;&#160;interrupt&#160;&#160;is&#160;<br/>
enabled&#160;at&#160;successful&#160;sleep&#160;transitions&#160;and&#160;disabled&#160;at&#160;successful&#160;wakeup&#160;transitions.&#160;<br/>Additionally&#160;the&#160;corresponding&#160;interrupt&#160;request&#160;flag&#160;is&#160;cleared&#160;right&#160;before&#160;the&#160;interrupt&#160;<br/>is&#160;enabled;&#160;hence&#160;a&#160;wakeup&#160;event&#160;can&#160;only&#160;be&#160;detected&#160;after&#160;the&#160;sleep&#160;transition&#160;has&#160;<br/>been&#160;&#160;completed.&#160;&#160;Refer&#160;&#160;to&#160;&#160;section&#160;&#160;<a href="TechnicalReference_Rh850_Rscans.html#35">10.3&#160;&#160;</a>if&#160;&#160;an&#160;&#160;exclusive&#160;&#160;write&#160;&#160;access&#160;&#160;to&#160;&#160;the&#160;&#160;interrupt&#160;<br/>control&#160;registers&#160;is&#160;not&#160;possible.&#160;Please&#160;note&#160;that&#160;the&#160;interrupt&#160;request&#160;flag&#160;also&#160;has&#160;to&#160;<br/>be&#160;cleared&#160;for&#160;polling&#160;configurations.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
12&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=13></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-13_1.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>5&#160;&#160;&#160;[#hw_loop]&#160;-&#160;Hardware&#160;Loop&#160;Check&#160;</b><br/>
In&#160;&#160;context&#160;&#160;of&#160;&#160;the&#160;&#160;feature&#160;&#160;Hardware&#160;&#160;Loop&#160;&#160;Check&#160;&#160;(see&#160;&#160;TechnicalReference_CANDriver,&#160;<br/>chapter Hardware Loop&#160;Check) this CAN Driver provides the&#160;following&#160;timer identifications.&#160;&#160;<br/>If&#160;the&#160;common&#160;term&#160;clock&#160;is&#160;used&#160;below&#160;always&#160;consider&#160;the&#160;one&#160;with&#160;the&#160;lower&#160;frequency&#160;<br/>out&#160;of&#160;clkc&#160;and&#160;pclk.&#160;The&#160;RSCAN&#160;requires&#160;clkc&#160;to&#160;be&#160;less&#160;or&#160;equal&#160;pclk/2,&#160;thus&#160;clkc&#160;can&#160;be&#160;<br/>taken&#160;as&#160;a&#160;basis&#160;in&#160;general.&#160;Refer&#160;to&#160;the&#160;hardware&#160;manual&#160;for&#160;a&#160;description&#160;of&#160;the&#160;different&#160;<br/>clocks&#160;and&#160;hardware&#160;specifics.&#160;&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Always&#160;significantly&#160;increase&#160;the&#160;given&#160;durations&#160;for&#160;the&#160;loop&#160;callout&#160;implementation&#160;to&#160;<br/>
<b>&#160;&#160;</b>compensate additional&#160;software&#160;delays.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>kCanLoopRamInit&#160;<br/></b>This&#160;loop&#160;may&#160;be&#160;called&#160;within&#160;the&#160;function&#160;CanInitPowerOn()&#160;and&#160;is&#160;processed&#160;until&#160;<br/>the&#160;&#160;CAN&#160;&#160;RAM&#160;&#160;initialization&#160;&#160;after&#160;&#160;a&#160;&#160;MCU&#160;&#160;reset&#160;&#160;has&#160;&#160;finished.&#160;&#160;This&#160;&#160;is&#160;&#160;necessary&#160;&#160;as&#160;&#160;this&#160;<br/>initialization&#160;has&#160;to&#160;be&#160;completed&#160;before&#160;the&#160;&#160;RSCAN&#160;&#160;can&#160;be&#160;configured.&#160;As&#160;this&#160;loop&#160;is&#160;<br/>not&#160;called&#160;in&#160;channel context&#160;the&#160;channel parameter has to&#160;be&#160;ignored.&#160;<br/>The&#160;maximum&#160;&#160;expected&#160;&#160;duration&#160;&#160;to&#160;&#160;wait&#160;for&#160;&#160;the&#160;&#160;CAN&#160;&#160;RAM&#160;&#160;initialization&#160;&#160;starts&#160;&#160;from&#160;&#160;the&#160;<br/>time&#160;&#160;of&#160;&#160;the&#160;&#160;MCU&#160;&#160;reset&#160;&#160;and&#160;&#160;is&#160;&#160;device&#160;&#160;specific.&#160;&#160;Refer&#160;&#160;to&#160;&#160;the&#160;&#160;corresponding&#160;&#160;hardware&#160;<br/>manual&#160;(e.g.&#160;&#160;section&#160;RSCAN&#160;Setting&#160;Procedure&#160;&#160;–&#160;&#160;Initial&#160;Settings)&#160;to&#160;get&#160;&#160;the&#160;number&#160;of&#160;<br/>required&#160;&#160;clock&#160;&#160;cycles.&#160;&#160;If&#160;&#160;the&#160;&#160;loop&#160;&#160;is&#160;&#160;canceled&#160;&#160;try&#160;&#160;to&#160;&#160;call&#160;&#160;CanInitPowerOn()&#160;&#160;again&#160;&#160;or&#160;<br/>reset&#160;the&#160;MCU.&#160;<br/>
&#160;<br/>
<b>kCanLoopInit&#160;<br/></b>This&#160;&#160;loop&#160;may&#160;&#160;be&#160;&#160;called&#160;&#160;within&#160;&#160;the&#160;function&#160;&#160;CanInitPowerOn().&#160;As&#160;&#160;it&#160;&#160;is&#160;&#160;not&#160;&#160;called&#160;&#160;in&#160;<br/>channel&#160;&#160;context&#160;&#160;the&#160;&#160;channel&#160;&#160;parameter&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;ignored.&#160;&#160;The&#160;&#160;loop&#160;&#160;may&#160;&#160;be&#160;&#160;called&#160;<br/>multiple&#160;times within&#160;this function&#160;and&#160;the&#160;possible&#160;occurrences are&#160;as&#160;follows:&#160;<br/>&#160;&#160;To&#160;protect&#160;the&#160;transition&#160;via&#160;global&#160;reset&#160;mode&#160;to&#160;global&#160;stop&#160;mode&#160;(only&#160;active&#160;if&#160;the&#160;<br/>
RSCAN&#160;ECC&#160;callout&#160;is&#160;enabled).&#160;<br/>
&#160;&#160;To&#160;protect&#160;the&#160;transition&#160;to&#160;global reset&#160;mode.&#160;<br/>&#160;&#160;To&#160;protect&#160;transitions&#160;and&#160;settings&#160;in&#160;context&#160;of&#160;the&#160;global&#160;test&#160;mode&#160;(only&#160;active&#160;if&#160;the&#160;<br/>
RSCAN RAM&#160;test&#160;is&#160;enabled)&#160;<br/>
&#160;&#160;To&#160;protect&#160;the&#160;transition&#160;to&#160;channel reset&#160;mode&#160;for each&#160;active&#160;channel.&#160;<br/>&#160;&#160;To&#160;protect&#160;the&#160;transition&#160;to&#160;global operation&#160;mode.&#160;<br/>
&#160;<br/>
The&#160;duration&#160;for&#160;each&#160;mode&#160;transition&#160;in&#160;this&#160;context&#160;is&#160;expected&#160;to&#160;be&#160;10&#160;clock&#160;cycles&#160;at&#160;<br/>highest.&#160;&#160;If&#160;&#160;any&#160;&#160;loop&#160;&#160;occurrence&#160;&#160;is&#160;&#160;canceled&#160;&#160;try&#160;&#160;to&#160;&#160;call&#160;&#160;CanInitPowerOn()&#160;&#160;again&#160;&#160;or&#160;<br/>reset&#160;the&#160;MCU.&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
13&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=14></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>kCanLoopBusOffRecovery&#160;<br/></b>This&#160;channel&#160;dependent&#160;loop&#160;may&#160;be&#160;called&#160;in&#160;CanInit()&#160;if&#160;the&#160;RSCAN&#160;is&#160;currently&#160;in&#160;<br/>BusOff&#160;&#160;state&#160;&#160;and&#160;&#160;is&#160;&#160;processed&#160;&#160;until&#160;&#160;11&#160;&#160;consecutive&#160;&#160;recessive&#160;&#160;bits&#160;&#160;have&#160;&#160;been&#160;&#160;detected&#160;<br/>128&#160;&#160;times&#160;&#160;on&#160;&#160;the&#160;&#160;bus&#160;&#160;to&#160;&#160;ensure&#160;&#160;compliance&#160;&#160;to&#160;&#160;the&#160;&#160;BusOff&#160;&#160;recovery&#160;&#160;specification&#160;&#160;(see&#160;<br/>chapte<a href="TechnicalReference_Rh850_Rscans.html#15">r&#160;6)</a>.&#160;<br/>The&#160;&#160;maximum&#160;&#160;expected&#160;&#160;duration&#160;&#160;is&#160;&#160;1408&#160;&#160;CAN&#160;&#160;bit&#160;&#160;times&#160;&#160;on&#160;&#160;a&#160;&#160;recessive&#160;&#160;bus,&#160;&#160;128&#160;<br/>message&#160;&#160;times&#160;&#160;(including&#160;&#160;inter-frame&#160;&#160;space)&#160;&#160;on&#160;&#160;a&#160;&#160;communicative&#160;&#160;bus&#160;&#160;or&#160;&#160;any&#160;&#160;time&#160;&#160;if&#160;<br/>disturbances&#160;are&#160;present.&#160;There&#160;is&#160;no&#160;issue&#160;and&#160;nothing&#160;to&#160;do&#160;if&#160;the&#160;loop&#160;is&#160;canceled,&#160;but&#160;<br/>the&#160;specified&#160;BusOff&#160;recovery&#160;time&#160;may&#160;not&#160;be&#160;met.&#160;<br/>
&#160;<br/>
<b>kCanLoopEnterResetMode&#160;<br/></b>This&#160;channel&#160;dependent&#160;loop&#160;may&#160;be&#160;called&#160;in&#160;CanInit()&#160;and&#160;is&#160;processed&#160;as&#160;long&#160;as&#160;<br/>the&#160;CAN&#160;cell&#160;does not&#160;enter channel reset&#160;mode.&#160;&#160;<br/>The&#160;maximum&#160;expected&#160;duration&#160;of&#160;the&#160;loop&#160;is&#160;three&#160;clock&#160;cycles.&#160;If&#160;the&#160;loop&#160;is&#160;canceled&#160;<br/>try&#160;to&#160;reinitialize&#160;the&#160;channel again&#160;or call&#160;CanInitPowerOn().&#160;<br/>
&#160;<br/>
<b>kCanLoopEnterOperationMode&#160;<br/></b>This&#160;&#160;channel&#160;&#160;dependent&#160;&#160;loop&#160;&#160;is&#160;&#160;always&#160;&#160;called&#160;&#160;in&#160;&#160;CanInit(),&#160;&#160;CanStart()&#160;&#160;and&#160;<br/>CanWakeUp()&#160;&#160;and&#160;&#160;is&#160;&#160;processed&#160;&#160;as&#160;&#160;long&#160;&#160;as&#160;&#160;the&#160;&#160;CAN&#160;&#160;cell&#160;&#160;does&#160;&#160;not&#160;&#160;enter&#160;&#160;channel&#160;<br/>operation&#160;mode.&#160;&#160;<br/>The&#160;maximum&#160;expected&#160;duration&#160;of&#160;the&#160;loop&#160;is&#160;two&#160;CAN&#160;bit&#160;times&#160;on&#160;the&#160;current&#160;channel.&#160;<br/>If&#160;&#160;the&#160;&#160;loop&#160;&#160;is&#160;&#160;canceled&#160;&#160;try&#160;&#160;to&#160;&#160;call&#160;&#160;CanStart()&#160;&#160;respectively&#160;&#160;CanWakeUp()&#160;&#160;again&#160;&#160;or&#160;<br/>reinitialize&#160;the&#160;channel.&#160;<br/>
&#160;<br/>
<b>kCanLoopRxFcProcess&#160;<br/></b>This&#160;&#160;channel&#160;&#160;depended&#160;&#160;loop&#160;&#160;is&#160;&#160;always&#160;&#160;called&#160;&#160;in&#160;&#160;CanFullCanMsgReceived()&#160;&#160;and&#160;&#160;is&#160;<br/>processed&#160;as&#160;long&#160;as&#160;new&#160;messages&#160;are&#160;received&#160;by&#160;the&#160;current&#160;hardware&#160;object&#160;while&#160;<br/>copying&#160;a&#160;previously&#160;received&#160;message&#160;to&#160;a&#160;temporary&#160;software&#160;buffer.&#160;This&#160;ensures&#160;that&#160;<br/>always consistent&#160;and&#160;most&#160;recent&#160;data&#160;is indicated.&#160;<br/>It&#160;is&#160;expected&#160;that&#160;the&#160;loop&#160;iterates&#160;one&#160;or&#160;two&#160;times.&#160;Please&#160;note&#160;that&#160;if&#160;the&#160;loop&#160;iterates&#160;<br/>more&#160;&#160;than&#160;&#160;one&#160;&#160;time&#160;&#160;previously&#160;&#160;received&#160;&#160;messages&#160;&#160;of&#160;&#160;the&#160;&#160;current&#160;&#160;receive&#160;&#160;buffer&#160;&#160;are&#160;<br/>discarded&#160;without&#160;further&#160;notification&#160;as&#160;data&#160;consistency&#160;cannot&#160;be&#160;ensured.&#160;There&#160;is&#160;no&#160;<br/>issue&#160;and&#160;nothing&#160;to&#160;do&#160;if&#160;the&#160;loop&#160;is&#160;canceled,&#160;but&#160;the&#160;latest&#160;message&#160;is&#160;also&#160;discarded&#160;<br/>and&#160;CanFullCanMsgReceived()&#160;returns&#160;without&#160;indicating&#160;any&#160;message&#160;at&#160;all.&#160;<br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
14&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=15></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>6&#160;&#160;[#hw_busoff]&#160;-&#160;Bus&#160;off&#160;</b><br/>
In&#160;&#160;case&#160;&#160;of&#160;&#160;a&#160;&#160;BusOff&#160;&#160;event&#160;&#160;the&#160;&#160;controller&#160;&#160;automatically&#160;&#160;changes&#160;&#160;to&#160;&#160;stop&#160;&#160;mode&#160;&#160;on&#160;&#160;the&#160;<br/>respective&#160;&#160;channel.&#160;&#160;There&#160;&#160;is&#160;&#160;no&#160;&#160;automatic&#160;&#160;recovery&#160;&#160;as&#160;&#160;specified&#160;&#160;by&#160;&#160;ISO11898-1;&#160;&#160;the&#160;<br/>application&#160;&#160;has&#160;&#160;to&#160;&#160;restart&#160;&#160;communication&#160;&#160;following&#160;&#160;the&#160;&#160;description&#160;&#160;in&#160;&#160;the&#160;&#160;Technical&#160;<br/>Reference&#160;CAN&#160;driver,&#160;i.e.&#160;by&#160;calling&#160;CanResetBusOffStart/-End()&#160;which&#160;leads&#160;to&#160;a&#160;<br/>call&#160;&#160;of&#160;&#160;CanInit().&#160;&#160;Please&#160;&#160;note&#160;&#160;that&#160;&#160;if&#160;&#160;CanResetBusOffEnd()&#160;&#160;is&#160;&#160;called&#160;&#160;before&#160;&#160;11&#160;<br/>consecutive&#160;recessive&#160;bits&#160;have&#160;been&#160;detected&#160;128&#160;times,&#160;kCanLoopBusOffRecovery&#160;is&#160;<br/>called&#160;within&#160;CanInit()&#160;(see&#160;chapter<a href="TechnicalReference_Rh850_Rscans.html#13">&#160;5).</a>&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
15&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=16></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>7&#160;&#160;CAN&#160;Driver&#160;Features&#160;</b><br/>
<b>7.1&#160;</b><br/>
<b>[#hw_feature]&#160;-&#160;Feature&#160;List&#160;</b><br/>
&#160;<br/>
<b>Standard&#160;</b><br/>
<b>HighEnd&#160;</b><br/>
<b>Initialization&#160;</b><br/>
Power-On Initialization&#160;<br/>
&#160;<br/>
&#160;<br/>
Re-Initialization&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Transmission&#160;</b><br/>
Transmit Request&#160;<br/>
&#160;<br/>
&#160;<br/>
Transmit Request Queue&#160;<br/>
&#160;<br/>
&#160;<br/>
Internal&#160;data&#160;copy&#160;mechanism&#160;<br/>
&#160;<br/>
&#160;<br/>
Pretransmit functions&#160;<br/>
&#160;<br/>
&#160;<br/>
Common&#160;confirmation&#160;function&#160;<br/>
&#160;<br/>
&#160;<br/>
Confirmation&#160;flag&#160;<br/>
&#160;<br/>
&#160;<br/>
Confirmation&#160;function&#160;<br/>
&#160;<br/>
&#160;<br/>
Offline&#160;Mode&#160;<br/>
&#160;<br/>
&#160;<br/>
Partial&#160;Offline&#160;Mode&#160;<br/>
&#160;<br/>
&#160;<br/>
Passive-Mode&#160;<br/>
&#160;<br/>
&#160;<br/>
Tx&#160;Observe&#160;mode&#160;<br/>
&#160;<br/>
&#160;<br/>
Dynamic&#160;TxObjects&#160;<br/>
ID&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
DLC&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Data-Ptr&#160;<br/>
&#160;<br/>
&#160;<br/>
Full&#160;CAN&#160;Tx&#160;Objects&#160;<br/>
&#160;<br/>
&#160;<br/>
Cancellation in Hardware&#160;<br/>
&#160;<br/>
&#160;<br/>
Low&#160;Level&#160;Message Transmit&#160;<br/>
-&#160;<br/>
&#160;<br/>
<b>Reception&#160;</b><br/>
Receive function&#160;<br/>
&#160;<br/>
&#160;<br/>
Search&#160;algorithms&#160;<br/>
Linear&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Table&#160;<br/>
-&#160;<br/>
-&#160;<br/>
&#160;<br/>
Index&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Hash&#160;<br/>
&#160;<br/>
&#160;<br/>
Range specific&#160;precopy&#160;functions&#160;<br/>
4&#160;<br/>
4&#160;<br/>
(min.&#160;2,&#160;typ.4)&#160;<br/>
DLC check&#160;<br/>
&#160;<br/>
&#160;<br/>
Internal&#160;data&#160;copy&#160;mechanism&#160;<br/>
&#160;<br/>
&#160;<br/>
Generic&#160;precopy&#160;function&#160;<br/>
&#160;<br/>
&#160;<br/>
Precopy&#160;function&#160;<br/>
&#160;<br/>
&#160;<br/>
Indication flag&#160;<br/>
&#160;<br/>
&#160;<br/>
Indication function&#160;<br/>
&#160;<br/>
&#160;<br/>
Message&#160;not matched function&#160;<br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
16&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=17></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
Overrun&#160;Notification&#160;<br/>
&#160;<br/>
&#160;<br/>
Full&#160;CAN&#160;overrun&#160;notification&#160;<br/>
-&#160;<br/>
-&#160;<br/>
Multiple&#160;Basic&#160;CAN&#160;<br/>
-&#160;<br/>
&#160;<br/>
Rx&#160;Queue&#160;2&#160;<br/>
-&#160;<br/>
&#160;<br/>
<b>Bus off&#160;</b><br/>
Notification&#160;function&#160;<br/>
&#160;<br/>
&#160;<br/>
Nested&#160;Recovery&#160;functions&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Sleep&#160;Mode&#160;</b><br/>
Mode&#160;Change&#160;<br/>
&#160;<br/>
&#160;<br/>
Preparation&#160;<br/>
&#160;<br/>
&#160;<br/>
Notification&#160;function&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>Special&#160;Features&#160;</b><br/>
Status&#160;<br/>
&#160;<br/>
&#160;<br/>
Security&#160;Level&#160;<br/>
&#160;<br/>
&#160;<br/>
Assertions&#160;<br/>
&#160;<br/>
&#160;<br/>
Hardware&#160;loop&#160;check&#160;<br/>
&#160;<br/>
&#160;<br/>
Stop&#160;Mode&#160;<br/>
&#160;<br/>
&#160;<br/>
Support of&#160;OSEK&#160;operating&#160;<br/>
&#160;<br/>
&#160;<br/>
system&#160;<br/>
Polling&#160;Mode&#160;<br/>
Tx&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Rx&#160;(FullCAN)&#160;3&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Rx&#160;(BasicCAN)&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Error&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Wakeup&#160;<br/>
&#160;<br/>
&#160;<br/>
Individual&#160;Polling&#160;4&#160;<br/>
-&#160;<br/>
&#160;<br/>
Multi&#160;channel&#160;<br/>
&#160;<br/>
&#160;<br/>
Support extended&#160;ID&#160;addressing&#160;<br/>
&#160;<br/>
&#160;<br/>
mode&#160;<br/>
Support mixed&#160;ID addressing&#160;<br/>
&#160;<br/>
&#160;<br/>
mode&#160;<br/>
Support access&#160;to&#160;error counters&#160;<br/>
&#160;<br/>
&#160;<br/>
Copy&#160;functions&#160;<br/>
&#160;<br/>
&#160;<br/>
CAN RAM check&#160;5&#160;<br/>
&#160;<br/>
&#160;<br/>
Extended&#160;CAN&#160;RAM check&#160;6&#160;<br/>
&#160;<br/>
&#160;<br/>
Table&#160;7-1&#160;&#160;&#160;CAN&#160;Driver&#160;Functionality&#160;<br/>
&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>
2&#160;Consider&#160;that&#160;the Rx&#160;BasicCAN hardware FIFOs&#160;in combination&#160;with Rx&#160;BasicCAN polling&#160;might&#160;be&#160;a more&#160;<br/>efficient alternative&#160;to&#160;the&#160;Rx&#160;Queue&#160;in many&#160;configurations.&#160;<br/>
3&#160;Due&#160;to hardware&#160;limitations&#160;(no&#160;interrupt request can&#160;be&#160;generated&#160;for receive&#160;buffers)&#160;Rx&#160;FullCAN polling&#160;<br/>is&#160;mandatory&#160;if&#160;Rx&#160;FullCAN&#160;objects&#160;are configured.&#160;<br/>
4&#160;Due&#160;to hardware&#160;limitations&#160;(see&#160;no<a href="TechnicalReference_Rh850_Rscans.html#17">te&#160;3)</a>&#160;all&#160;Rx&#160;FullCAN objects&#160;have&#160;to&#160;be polled.&#160;<br/>
5&#160;Due&#160;to hardware&#160;limitations&#160;(no&#160;write&#160;access&#160;to&#160;Rx&#160;objects)&#160;only&#160;supported&#160;for&#160;Tx&#160;objects.&#160;<br/>
6&#160;This&#160;feature is&#160;project specific&#160;and&#160;only&#160;available&#160;if&#160;explicitly&#160;ordered.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
17&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=18></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>7.2&#160;</b><br/>
<b>Description of&#160;Hardware-related&#160;Features&#160;</b><br/>
<b>7.2.1&#160;</b><br/>
<b>[#hw_status]&#160;-&#160;Status&#160;</b><br/>
If&#160;a&#160;status&#160;is not&#160;supported,&#160;the&#160;related&#160;macro&#160;always&#160;returns&#160;false.&#160;<br/>
<b>Status&#160;</b><br/>
<b>Support&#160;</b><br/>
CanHwIsOk(state)&#160;<br/>
&#160;<br/>
CanHwIsWarning(state)&#160;<br/>
&#160;<br/>
CanHwIsPassive(state)&#160;<br/>
&#160;<br/>
CanHwIsBusOff(state)&#160;<br/>
&#160;<br/>
CanHwIsWakeup(state)&#160;<br/>
&#160;<br/>
CanHwIsSleep(state)&#160;<br/>
&#160;<br/>
CanHwIsStart(state)&#160;<br/>
&#160;<br/>
CanHwIsStop(state)&#160;<br/>
&#160;<br/>
CanIsOnline(state)&#160;<br/>
&#160;<br/>
CanIsOffline(state)&#160;<br/>
&#160;<br/>
Table&#160;7-2&#160;&#160;&#160;CAN&#160;Status&#160;<br/>
<b>7.2.2&#160;</b><br/>
<b>[#hw_stop]&#160;-&#160;Stop Mode&#160;</b><br/>
The&#160;service&#160;function&#160;CanStop()&#160;calls&#160;CanInit()&#160;and&#160;then&#160;puts&#160;the&#160;CAN&#160;Controller&#160;into&#160;<br/>channel&#160;reset&#160;mode,&#160;where&#160;it&#160;is&#160;disconnected&#160;from&#160;the&#160;bus.&#160;If&#160;the&#160;function&#160;is&#160;called&#160;during&#160;<br/>CAN&#160;&#160;communication,&#160;&#160;the&#160;&#160;reception&#160;&#160;or&#160;&#160;transmission&#160;&#160;is&#160;&#160;terminated&#160;&#160;before&#160;&#160;it&#160;&#160;is&#160;&#160;completed.&#160;<br/>This&#160;mode&#160;can&#160;be&#160;left&#160;by&#160;calling&#160;CanStart().&#160;Both&#160;transitions&#160;do&#160;not&#160;depend&#160;on&#160;external&#160;<br/>influences&#160;&#160;(e.g.&#160;&#160;the&#160;&#160;CAN&#160;&#160;bus&#160;&#160;level),&#160;&#160;so&#160;&#160;the&#160;&#160;return&#160;&#160;value&#160;&#160;kCanOk&#160;&#160;is&#160;&#160;always&#160;&#160;expected.&#160;<br/>However,&#160;&#160;if&#160;&#160;the&#160;&#160;functions&#160;&#160;return&#160;&#160;kCanFailed&#160;&#160;(e.g.&#160;&#160;caused&#160;&#160;by&#160;&#160;a&#160;&#160;hardware&#160;&#160;loop&#160;<br/>cancellation)&#160;call&#160;CanStop(),&#160;respectively&#160;CanStart()&#160;again&#160;or&#160;re-initialize&#160;the&#160;channel.&#160;<br/>
&#160;<br/>
<b>7.2.3&#160;</b><br/>
<b>[#hw_int]&#160;-&#160;Control of&#160;CAN Interrupts&#160;</b><br/>
CAN&#160;interrupt&#160;locking&#160;is&#160;performed&#160;by&#160;modifying&#160;the&#160;interrupt&#160;request&#160;mask bits&#160;(MK)&#160;in&#160;the&#160;<br/>control&#160;registers&#160;of&#160;the&#160;appropriate&#160;sources&#160;directly&#160;within&#160;the&#160;interrupt&#160;controller&#160;address&#160;<br/>space&#160;of&#160;the&#160;MCU.&#160;Therefore&#160;the&#160;driver&#160;needs&#160;exclusive&#160;write&#160;access&#160;to&#160;all&#160;CAN&#160;related&#160;EI&#160;<br/>level&#160;interrupt&#160;control&#160;registers&#160;(ICn).&#160;If&#160;the&#160;sleep/wakeup&#160;functionality&#160;is&#160;enabled&#160;this&#160;may&#160;<br/>include&#160;the&#160;ICn&#160;of&#160;external interrupt&#160;sources&#160;(see&#160;chapte<a href="TechnicalReference_Rh850_Rscans.html#11">r&#160;4).</a>&#160;<br/>Since&#160;&#160;Rx&#160;&#160;FIFO&#160;&#160;interrupt&#160;&#160;and&#160;&#160;overrun&#160;&#160;(global&#160;&#160;error)&#160;&#160;cannot&#160;&#160;be&#160;&#160;enabled&#160;&#160;and&#160;&#160;disabled&#160;&#160;for&#160;<br/>every&#160;&#160;object&#160;&#160;individually&#160;&#160;they&#160;&#160;are&#160;&#160;disabled&#160;&#160;globally&#160;&#160;when&#160;&#160;the&#160;&#160;interrupts&#160;&#160;of&#160;&#160;at&#160;&#160;least&#160;&#160;one&#160;<br/>controller&#160;are&#160;disabled&#160;and&#160;enabled&#160;globally&#160;if&#160;&#160;the&#160;interrupts&#160;of&#160;no&#160;controller&#160;are&#160;disabled&#160;<br/>anymore.&#160;<br/>All&#160;CAN&#160;related&#160;ICn&#160;are&#160;initialized&#160;and&#160;then&#160;modified&#160;by&#160;the&#160;driver&#160;during&#160;runtime&#160;(interrupt&#160;<br/>disable&#160;&#160;and&#160;&#160;restore).&#160;&#160;The&#160;&#160;priority&#160;&#160;level&#160;&#160;for&#160;&#160;the&#160;&#160;initialization&#160;&#160;can&#160;&#160;be&#160;&#160;selected&#160;&#160;via&#160;&#160;the&#160;<br/>configuration&#160;&#160;tool&#160;&#160;(all&#160;&#160;CAN&#160;&#160;interrupts&#160;&#160;must&#160;&#160;have&#160;&#160;the&#160;&#160;same&#160;&#160;priority),&#160;&#160;see&#160;&#160;section&#160;&#160;<a href="TechnicalReference_Rh850_Rscans.html#39">11.1.3.&#160;<br/></a>Refer to&#160;chapte<a href="TechnicalReference_Rh850_Rscans.html#32">r&#160;10&#160;</a>for further information&#160;on&#160;CAN interrupts.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
18&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=19></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-19_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-19_2.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>In standard&#160;configuration&#160;the&#160;driver&#160;needs&#160;<b>exclusive</b>&#160;write access&#160;to&#160;all&#160;CAN&#160;related&#160;EI&#160;<br/>
<b>&#160;&#160;</b>level&#160;interrupt&#160;control&#160;registers.&#160;Refer&#160;to&#160;chapter<a href="TechnicalReference_Rh850_Rscans.html#32">&#160;10&#160;</a>for&#160;further&#160;information&#160;and&#160;<br/>
especially&#160;section<a href="TechnicalReference_Rh850_Rscans.html#35">&#160;10.3&#160;</a>if&#160;an&#160;exclusive&#160;write access&#160;is&#160;not&#160;possible.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>7.2.4&#160;</b><br/>
<b>[#hw_cancel]&#160;-&#160;Cancel&#160;in Hardware&#160;</b><br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>Yes&#160;&#160;No&#160;</b><br/>
Has the&#160;CanTxTask()&#160;to be&#160;called&#160;by&#160;the&#160;application to&#160;handle&#160;the&#160;canceled&#160;<br/>transmit&#160;request&#160;in&#160;the&#160;hardware?<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
Cancelling&#160;transmission&#160;of&#160;messages via&#160;CanCancelTransmit()&#160;or&#160;<br/>CanCancelMessageTransmit():&#160;<br/>
<b>&#160;</b><br/>
<b>Yes&#160;&#160;No&#160;</b><br/>
ApplCanTxConfirmation()&#160;is&#160;only&#160;called&#160;for&#160;transmitted&#160;messages,&#160;successfully&#160;<br/>canceled&#160;messages are&#160;not&#160;notified.&#160;That&#160;means&#160;the&#160;CAN&#160;driver&#160;is&#160;able to&#160;detect&#160;<br/>
&#160;<br/>
&#160;<br/>
whether&#160;a&#160;message is&#160;transmitted&#160;even&#160;if&#160;the&#160;application has&#160;tried&#160;to cancel.&#160;<br/>
&#160;<br/>
<b>7.2.5&#160;</b><br/>
<b>Remote&#160;Frames&#160;</b><br/>
Remote&#160;Frames&#160;will&#160;not&#160;have&#160;any&#160;influence&#160;on&#160;&#160;the&#160;communication&#160;because&#160;they&#160;&#160;are&#160;not&#160;<br/>received&#160;due&#160;to&#160;hardware&#160;filtering.&#160;<br/>
&#160;<br/>
<b>7.2.6&#160;</b><br/>
<b>CAN&#160;RAM&#160;Check&#160;</b><br/>
The&#160;&#160;CAN&#160;&#160;driver&#160;&#160;supports&#160;&#160;a&#160;&#160;check&#160;&#160;of&#160;&#160;the&#160;&#160;CAN&#160;&#160;mailboxes&#160;&#160;which&#160;&#160;is&#160;&#160;performed&#160;&#160;internally&#160;<br/>every&#160;&#160;time&#160;&#160;the&#160;&#160;function&#160;&#160;CanInit()&#160;&#160;is&#160;&#160;called.&#160;&#160;The&#160;&#160;CAN&#160;&#160;driver&#160;&#160;verifies&#160;&#160;that&#160;&#160;no&#160;&#160;used&#160;<br/>mailboxes&#160;are&#160;corrupt.&#160;A&#160;mailbox&#160;is&#160;considered&#160;corrupt&#160;if&#160;predefined&#160;patterns&#160;are&#160;written&#160;to&#160;<br/>the&#160;appropriate&#160;mailbox&#160;registers&#160;and&#160;read&#160;operations&#160;do&#160;not&#160;return&#160;the&#160;expected&#160;patterns.&#160;<br/>If&#160;&#160;a&#160;&#160;corrupt&#160;&#160;mailbox&#160;&#160;is&#160;&#160;found&#160;&#160;the&#160;&#160;function&#160;&#160;ApplCanCorruptMailbox()&#160;&#160;is&#160;&#160;optionally&#160;<br/>called&#160;to&#160;inform&#160;the&#160;application&#160;which&#160;mailbox&#160;is&#160;affected.&#160;<br/>After&#160;&#160;the&#160;&#160;check&#160;&#160;of&#160;&#160;all&#160;&#160;mailboxes&#160;&#160;on&#160;&#160;the&#160;&#160;given&#160;&#160;channel&#160;&#160;the&#160;&#160;CAN&#160;&#160;driver&#160;&#160;calls&#160;&#160;the&#160;&#160;function&#160;<br/>ApplCanMemCheckFailed()&#160;if&#160;at&#160;least&#160;one&#160;corrupt&#160;mailbox&#160;was&#160;found.&#160;The&#160;application&#160;<br/>can&#160;control&#160;whether&#160;the&#160;CAN&#160;driver&#160;disables&#160;communication&#160;on&#160;the&#160;current&#160;channel&#160;or&#160;not&#160;<br/>by&#160;&#160;means&#160;&#160;of&#160;&#160;the&#160;&#160;return&#160;&#160;value&#160;&#160;of&#160;&#160;the&#160;&#160;call-back&#160;&#160;function.&#160;&#160;If&#160;&#160;the&#160;&#160;application&#160;&#160;has&#160;&#160;decided&#160;&#160;to&#160;<br/>disable&#160;the&#160;communication&#160;there&#160;is&#160;no&#160;possibility&#160;to&#160;enable&#160;the&#160;communication&#160;again&#160;until&#160;<br/>the&#160;next&#160;call&#160;of&#160;CanInitPowerOn().&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Due&#160;to hardware&#160;limitations (no&#160;write access&#160;for&#160;receive objects)&#160;the&#160;CAN&#160;RAM&#160;check&#160;<br/>
<b>&#160;&#160;</b>is&#160;only&#160;supported&#160;for&#160;transmit&#160;mailboxes.&#160;Consider&#160;the&#160;behavioural&#160;differences of&#160;CAN&#160;<br/>
RAM&#160;check&#160;when&#160;it&#160;is&#160;used&#160;in combination&#160;with the extended CAN&#160;RAM&#160;check&#160;feature.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
19&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=20></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
The&#160;additional&#160;call-back&#160;function&#160;ApplCanCorruptMailbox()&#160;can&#160;only&#160;be&#160;activated&#160;via&#160;<br/>the&#160;user&#160;configuration&#160;file&#160;-&#160;the&#160;settings&#160;are&#160;listed&#160;below.&#160;In&#160;case&#160;no&#160;user&#160;config&#160;file&#160;is&#160;used&#160;<br/>(i.e.&#160;the&#160;mentioned&#160;switch&#160;is not&#160;defined) the&#160;feature&#160;is disabled.&#160;<br/>
<b>Switch&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Description&#160;</b><br/>
C_ENABLE_NOTIFY_CORRUPT_MAILBOX&#160;<br/>
&#160;<br/>
Activate&#160;call&#160;of&#160;ApplCanCorruptMailbox()&#160;<br/>in case the&#160;CAN&#160;RAM&#160;check&#160;fails&#160;for a certain&#160;<br/>mailbox.&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>7.2.7&#160;</b><br/>
<b>Extended CAN RAM&#160;Check&#160;</b><br/>
The&#160;&#160;extended&#160;RAM&#160;check&#160;provides&#160;an&#160;additional&#160;check&#160;of&#160;the&#160;CAN&#160;cell&#160;control&#160;&#160;registers&#160;<br/>RAM with&#160;extended&#160;API&#160;and&#160;modified&#160;standard CAN RAM&#160;check&#160;and&#160;driver behaviour.<b>&#160;<br/></b>The&#160;RSCAN&#160;control&#160;registers&#160;are&#160;differentiated&#160;between&#160;registers&#160;that&#160;have&#160;to&#160;be&#160;written&#160;in&#160;<br/>global&#160;&#160;reset&#160;&#160;mode&#160;&#160;(afterwards&#160;&#160;referred&#160;&#160;to&#160;&#160;as&#160;&#160;“global&#160;&#160;registers”)&#160;&#160;or&#160;&#160;can&#160;&#160;also&#160;&#160;be&#160;&#160;written&#160;&#160;in&#160;<br/>channel&#160;reset&#160;mode&#160;(afterwards&#160;referred&#160;to&#160;as&#160;“channel&#160;registers”).&#160;Since&#160;the&#160;transition&#160;to&#160;<br/>global reset&#160;mode&#160;affects&#160;all&#160;channels,&#160;the&#160;global register RAM&#160;is&#160;checked&#160;only&#160;once&#160;within&#160;<br/>CanInitPowerOn().&#160;If&#160;the&#160;global&#160;register&#160;RAM&#160;is&#160;considered&#160;corrupt&#160;a&#160;call-back&#160;function&#160;<br/>(see&#160;below)&#160;is&#160;issued&#160;to&#160;allow&#160;the&#160;application&#160;to&#160;control&#160;whether&#160;the&#160;driver&#160;initialization&#160;is&#160;<br/>proceeded&#160;or not.&#160;<br/>The&#160;&#160;channel&#160;&#160;register&#160;&#160;and&#160;&#160;mailbox&#160;&#160;RAM&#160;&#160;check&#160;&#160;is&#160;&#160;performed&#160;&#160;within&#160;&#160;the&#160;&#160;function&#160;<br/>CanInit().&#160;The&#160;registers&#160;RAM&#160;check&#160;disables&#160;the&#160;complete&#160;channel&#160;communication&#160;if&#160;at&#160;<br/>least&#160;&#160;one&#160;&#160;of&#160;&#160;the&#160;&#160;checked&#160;&#160;registers&#160;&#160;is&#160;&#160;considered&#160;&#160;corrupt.&#160;The&#160;&#160;mailbox&#160;&#160;RAM&#160;&#160;check&#160;&#160;(only&#160;<br/>available&#160;for&#160;Tx&#160;objects)&#160;disables&#160;corrupt&#160;mailboxes&#160;so&#160;that&#160;no&#160;transmission&#160;is&#160;possible&#160;on&#160;<br/>them.&#160;&#160;In&#160;&#160;both&#160;&#160;cases&#160;&#160;the&#160;&#160;appropriate&#160;&#160;call-backs&#160;&#160;(see&#160;&#160;below)&#160;&#160;are&#160;&#160;called&#160;&#160;to&#160;&#160;inform&#160;&#160;the&#160;<br/>application&#160;&#160;about&#160;&#160;the&#160;&#160;failures.&#160;&#160;Channels&#160;&#160;and&#160;&#160;mailboxes&#160;&#160;can&#160;&#160;be&#160;&#160;re-enabled&#160;&#160;by&#160;&#160;the&#160;<br/>application&#160;&#160;using&#160;&#160;the&#160;&#160;extended&#160;API.&#160;&#160;If&#160;&#160;any&#160;&#160;of&#160;&#160;the&#160;&#160;control&#160;&#160;registers&#160;&#160;check&#160;&#160;or&#160;&#160;the&#160;&#160;mailbox&#160;<br/>registers&#160;&#160;check&#160;&#160;fails&#160;&#160;the&#160;&#160;overall&#160;&#160;RAM&#160;&#160;check&#160;&#160;call-back&#160;&#160;ApplCanMemCheckFailed()<i>&#160;&#160;</i>is&#160;<br/>invoked.&#160;&#160;<br/>More detailed&#160;information&#160;is given&#160;below;&#160;section<a href="TechnicalReference_Rh850_Rscans.html#25">&#160;9.3&#160;</a>describes the&#160;API&#160;functions:&#160;<br/>&#160;&#160;If&#160;any&#160;of&#160;the&#160;global&#160;registers&#160;(e.g.&#160;global&#160;configuration&#160;registers,&#160;registers&#160;relating&#160;to&#160;the&#160;<br/>
configuration&#160;of&#160;receive&#160;objects&#160;and&#160;receive&#160;rules)&#160;are&#160;considered&#160;corrupt&#160;the&#160;function&#160;<br/>ApplCanGlobalMemCheckFailed()&#160;&#160;is&#160;&#160;invoked&#160;&#160;within&#160;&#160;CanInitPowerOn().&#160;&#160;If&#160;&#160;this&#160;<br/>function&#160;&#160;returns&#160;&#160;kCanEnableCommunication&#160;&#160;the&#160;&#160;initialization&#160;&#160;is&#160;&#160;continued&#160;&#160;ignoring&#160;<br/>the&#160;results&#160;of&#160;the&#160;check.&#160;If&#160;it&#160;returns&#160;kCanDisableCommunication&#160;the&#160;RSCAN&#160;is&#160;put&#160;<br/>back&#160;&#160;into&#160;&#160;global&#160;&#160;stop&#160;&#160;mode&#160;&#160;and&#160;&#160;CanInitPowerOn()&#160;&#160;returns&#160;&#160;without&#160;&#160;initializing&#160;&#160;the&#160;<br/>RSCAN.&#160;&#160;The&#160;&#160;check&#160;&#160;of&#160;&#160;the&#160;&#160;channel&#160;&#160;registers&#160;&#160;RAM&#160;&#160;is&#160;&#160;also&#160;&#160;not&#160;&#160;performed&#160;&#160;and&#160;<br/>CanInitPowerOn()&#160;has&#160;to&#160;be&#160;called&#160;again&#160;to&#160;be&#160;able&#160;to&#160;use&#160;the&#160;CAN&#160;functionality&#160;in&#160;<br/>this&#160;case&#160;(other&#160;CAN&#160;API&#160;functions&#160;must&#160;not&#160;be&#160;called&#160;until&#160;CanInitPowerOn()&#160;was&#160;<br/>executed&#160;completely).&#160;The&#160;check is performed&#160;with&#160;every&#160;call&#160;of&#160;this&#160;function.&#160;<br/>
&#160;&#160;If&#160;&#160;any&#160;&#160;of&#160;&#160;the&#160;&#160;channel&#160;&#160;control&#160;&#160;registers&#160;&#160;are&#160;&#160;considered&#160;&#160;corrupt&#160;&#160;the&#160;&#160;function&#160;<br/>
ApplCanCorruptRegisters()&#160;&#160;is&#160;&#160;called&#160;&#160;and&#160;&#160;the&#160;&#160;communication&#160;&#160;on&#160;&#160;the&#160;&#160;given&#160;<br/>channel&#160;is&#160;disabled.&#160;The&#160;CAN&#160;cell&#160;stays&#160;in&#160;stop&#160;mode&#160;whatever&#160;the&#160;general&#160;call-back&#160;<br/>function&#160;ApplCanMemCheckFailed()&#160;&#160;returns&#160;&#160;and&#160;the&#160;&#160;channel&#160;&#160;is&#160;disconnected&#160;from&#160;<br/>the&#160;Tx&#160;port pin.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
20&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=21></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-21_1.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
&#160;&#160;If&#160;&#160;a&#160;&#160;corrupt&#160;&#160;mailbox&#160;&#160;is&#160;&#160;found&#160;&#160;it&#160;&#160;is&#160;&#160;disabled&#160;&#160;by&#160;&#160;the&#160;&#160;driver&#160;&#160;and&#160;&#160;the&#160;&#160;call-back&#160;&#160;function&#160;<br/>
ApplCanCorruptMailbox()<i>&#160;&#160;</i>is&#160;&#160;invoked&#160;&#160;(if&#160;&#160;this&#160;&#160;is&#160;&#160;enabled&#160;&#160;by&#160;&#160;the&#160;&#160;definition&#160;&#160;of&#160;<br/>C_ENABLE_NOTIFY_CORRUPT_MAILBOX).&#160;In&#160;this&#160;case&#160;(but&#160;only&#160;if&#160;no&#160;corrupt&#160;CAN&#160;<br/>control&#160;registers&#160;were&#160;found&#160;on&#160;the&#160;given&#160;channel)&#160;the&#160;application&#160;can&#160;decide&#160;whether&#160;<br/>the&#160;&#160;communication&#160;&#160;on&#160;&#160;the&#160;&#160;channel&#160;&#160;should&#160;&#160;be&#160;&#160;disabled&#160;&#160;using&#160;&#160;the&#160;&#160;return&#160;&#160;value&#160;&#160;of&#160;&#160;the&#160;<br/>function&#160;ApplCanMemCheckFailed()<i>,</i>&#160;but&#160;the&#160;mailbox&#160;stays disabled&#160;anyway.&#160;<br/>
&#160;&#160;If&#160;the&#160;communication&#160;on&#160;a&#160;channel&#160;was&#160;disabled&#160;previously&#160;it&#160;can&#160;be&#160;re-enabled&#160;using&#160;<br/>
the&#160;function&#160;CanEnableChannelCommunication().&#160;<br/>
&#160;&#160;Mailboxes&#160;that&#160;were&#160;disabled&#160;by&#160;mailbox&#160;RAM&#160;check&#160;can&#160;be&#160;re-enabled&#160;by&#160;the&#160;function&#160;<br/>
CanEnableMailboxCommunication()&#160;(but&#160;&#160;only&#160;if&#160;the&#160;communication&#160;on&#160;the&#160;given&#160;<br/>channel is enabled).&#160;<br/>
&#160;&#160;No&#160;&#160;mailbox&#160;&#160;or&#160;&#160;register&#160;&#160;RAM&#160;&#160;check&#160;&#160;is&#160;&#160;performed&#160;&#160;and&#160;&#160;no&#160;&#160;RAM&#160;&#160;check&#160;&#160;call-backs&#160;&#160;are&#160;<br/>
invoked&#160;&#160;if&#160;&#160;CanInit()&#160;&#160;is&#160;&#160;called&#160;&#160;by&#160;&#160;CanResetBusOffEnd().&#160;&#160;However,&#160;&#160;all&#160;&#160;previously&#160;<br/>disabled&#160;channels or&#160;mailboxes stay&#160;disabled.&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;only&#160;way&#160;to re-enable channel&#160;or&#160;mailbox&#160;communication&#160;is&#160;to use&#160;the&#160;functions&#160;<br/>
<b>&#160;&#160;</b>CanEnableChannelCommunication(),&#160;CanEnableMailboxCommunication()&#160;<br/>
or&#160;CanInitPowerOn().&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
The&#160;extended&#160;CAN&#160;RAM&#160;check&#160;feature&#160;needs&#160;the&#160;standard&#160;CAN&#160;RAM&#160;check&#160;functionality&#160;<br/>to&#160;&#160;be&#160;&#160;activated.&#160;&#160;The&#160;&#160;following&#160;&#160;settings&#160;&#160;have&#160;&#160;to&#160;&#160;be&#160;&#160;done&#160;&#160;in&#160;&#160;the&#160;&#160;user&#160;&#160;configuration&#160;&#160;file.&#160;&#160;In&#160;<br/>case&#160;&#160;no&#160;&#160;user&#160;&#160;config&#160;&#160;file&#160;&#160;is&#160;&#160;used&#160;&#160;(i.e.&#160;&#160;the&#160;&#160;mentioned&#160;&#160;switch&#160;&#160;is&#160;&#160;not&#160;&#160;defined)&#160;&#160;the&#160;&#160;feature&#160;&#160;is&#160;<br/>disabled.&#160;Please&#160;note&#160;that&#160;this&#160;is&#160;a&#160;project&#160;specific&#160;feature&#160;that&#160;might&#160;not&#160;be&#160;available&#160;and&#160;<br/>C_ENABLE_CAN_RAM_CHECK_EXTENDED has no&#160;effect&#160;in&#160;this&#160;case.&#160;<br/>
<b>Switch&#160;</b><br/>
<b>Value&#160;&#160;Description&#160;</b><br/>
C_ENABLE_CAN_RAM_CHECK_EXTENDED&#160;&#160;&#160;<br/>
Activate&#160;the&#160;extended CAN&#160;RAM&#160;check&#160;feature.&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>7.2.8&#160;</b><br/>
<b>RSCAN ECC Configuration&#160;</b><br/>
In&#160;context&#160;of&#160;the&#160;RSCAN&#160;RAM&#160;error&#160;detection&#160;and&#160;correction&#160;(ECC)&#160;the&#160;driver&#160;provides&#160;the&#160;<br/>additional&#160;&#160;call-back&#160;&#160;function&#160;&#160;ApplCanEccConfiguration()&#160;&#160;(see&#160;&#160;section&#160;&#160;<a href="TechnicalReference_Rh850_Rscans.html#24">9.2)&#160;&#160;</a>that&#160;&#160;is&#160;<br/>invoked&#160;by&#160;CanInitPowerOn()&#160;after&#160;the&#160;CAN&#160;RAM&#160;initialization&#160;is&#160;complete&#160;and&#160;before&#160;<br/>the&#160;RSCAN&#160;is&#160;configured&#160;while&#160;the&#160;cell&#160;is&#160;in&#160;global&#160;stop&#160;mode.&#160;This&#160;gives&#160;the&#160;application&#160;<br/>the&#160;possibility&#160;to&#160;configure&#160;the&#160;ECC&#160;behavior&#160;for&#160;the&#160;RSCAN.&#160;The&#160;driver&#160;offers&#160;no&#160;further&#160;<br/>support&#160;for&#160;this&#160;feature&#160;-&#160;any&#160;ECC&#160;configuration&#160;and&#160;handling&#160;has&#160;to&#160;be&#160;performed&#160;by&#160;the&#160;<br/>application.&#160;<br/>The&#160;following&#160;settings&#160;have&#160;to&#160;be&#160;done&#160;in&#160;the&#160;user&#160;configuration&#160;file.&#160;In&#160;case&#160;no&#160;user&#160;config&#160;<br/>file&#160;is&#160;used&#160;(i.e.&#160;the&#160;mentioned&#160;switch&#160;is not&#160;defined) the&#160;feature is&#160;disabled.&#160;<br/>
<b>Switch&#160;</b><br/>
<b>Value&#160;&#160;Description&#160;</b><br/>
C_ENABLE_ECC_CALLOUT&#160;<br/>
&#160;<br/>
Activate&#160;call&#160;of&#160;ApplCanEccConfiguration().&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
21&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=22></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-22_1.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>7.2.9&#160;</b><br/>
<b>RSCAN&#160;RAM&#160;Test&#160;</b><br/>
The&#160;RSCAN&#160;provides&#160;a&#160;global&#160;test&#160;mode&#160;that&#160;enables&#160;the&#160;driver&#160;to&#160;perform&#160;a&#160;check&#160;of&#160;the&#160;<br/>entire&#160;internal&#160;RSCAN&#160;RAM&#160;that&#160;is&#160;not&#160;accessible&#160;during&#160;normal&#160;operation.&#160;This&#160;check&#160;is&#160;<br/>performed&#160;once&#160;&#160;within&#160;&#160;CanInitPowerOn().&#160;&#160;Similar&#160;&#160;to&#160;the&#160;&#160;(extended)&#160;&#160;CAN&#160;&#160;RAM&#160;&#160;check&#160;<br/>the&#160;internal&#160;RAM&#160;is&#160;considered&#160;corrupt&#160;if&#160;predefined&#160;patterns&#160;are&#160;written&#160;to&#160;the&#160;appropriate&#160;<br/>RAM&#160;&#160;addresses&#160;&#160;and&#160;&#160;read&#160;&#160;operations&#160;&#160;do&#160;&#160;not&#160;&#160;return&#160;&#160;the&#160;&#160;expected&#160;&#160;patterns.&#160;&#160;If&#160;&#160;any&#160;&#160;corrupt&#160;<br/>bits&#160;&#160;are&#160;&#160;found&#160;&#160;the&#160;&#160;call-back&#160;&#160;function&#160;&#160;ApplCanGlobalMemCheckFailed()&#160;&#160;is&#160;&#160;invoked&#160;<br/>(see&#160;section<a href="TechnicalReference_Rh850_Rscans.html#25">&#160;9.3).&#160;</a>If&#160;this&#160;function&#160;returns&#160;kCanEnableCommunication&#160;the&#160;initialization&#160;is&#160;<br/>continued&#160;&#160;ignoring&#160;&#160;the&#160;&#160;results&#160;&#160;of&#160;&#160;the&#160;&#160;check.&#160;&#160;If&#160;&#160;it&#160;&#160;returns&#160;&#160;kCanDisableCommunication&#160;<br/>the&#160;RSCAN&#160;is&#160;put&#160;back&#160;into&#160;global&#160;stop&#160;mode&#160;and&#160;CanInitPowerOn()&#160;returns&#160;without&#160;<br/>initializing&#160;the&#160;RSCAN.&#160;CanInitPowerOn()&#160;has&#160;to&#160;be&#160;called&#160;again&#160;to&#160;be&#160;able&#160;to&#160;use&#160;the&#160;<br/>CAN&#160;&#160;functionality&#160;&#160;in&#160;&#160;this&#160;&#160;case&#160;&#160;(other&#160;&#160;CAN&#160;&#160;API&#160;&#160;functions&#160;&#160;must&#160;&#160;not&#160;&#160;be&#160;&#160;called&#160;&#160;until&#160;<br/>CanInitPowerOn()&#160;&#160;was&#160;&#160;executed&#160;&#160;completely).&#160;&#160;The&#160;&#160;RAM&#160;&#160;test&#160;&#160;is&#160;&#160;performed&#160;&#160;with&#160;&#160;every&#160;<br/>call&#160;of&#160;this&#160;function.&#160;<br/>The&#160;size&#160;of&#160;RAM&#160;to&#160;be&#160;checked&#160;is&#160;given&#160;by&#160;2432&#160;bytes&#160;multiplied&#160;with&#160;the&#160;number&#160;of&#160;CAN&#160;<br/>channels&#160;that&#160;are&#160;supported&#160;by&#160;the&#160;used&#160;derivative&#160;(as&#160;configured&#160;in&#160;the&#160;configuration&#160;tool;&#160;<br/>see&#160;section<a href="TechnicalReference_Rh850_Rscans.html#38">&#160;11.1.2).</a>&#160;The&#160;test&#160;always&#160;starts&#160;at&#160;the&#160;first&#160;address&#160;but&#160;the&#160;size&#160;to&#160;be&#160;checked&#160;<br/>can&#160;be&#160;changed&#160;via&#160;user configuration&#160;(see&#160;below).&#160;<br/>If&#160;&#160;this&#160;&#160;test&#160;&#160;is&#160;&#160;used&#160;&#160;in&#160;&#160;combination&#160;&#160;with&#160;&#160;the&#160;&#160;(extended)&#160;&#160;CAN&#160;&#160;RAM&#160;&#160;check&#160;&#160;the&#160;&#160;latter&#160;&#160;one&#160;&#160;is&#160;<br/>reduced&#160;in&#160;order to&#160;save&#160;runtime.&#160;<br/>&#160;&#160;The&#160;receive&#160;rule&#160;registers&#160;are&#160;omitted&#160;by&#160;&#160;the&#160;global&#160;register&#160;check&#160;within&#160;the&#160;function&#160;<br/>
CanInitPowerOn().&#160;<br/>
&#160;&#160;The&#160;mailbox&#160;check is&#160;omitted&#160;if&#160;CanInit()&#160;is&#160;called&#160;out&#160;of&#160;CanInitPowerOn().&#160;<br/>
&#160;<br/>
The&#160;following&#160;settings&#160;have&#160;to&#160;be&#160;done&#160;in&#160;the&#160;user&#160;configuration&#160;file.&#160;In&#160;case&#160;no&#160;user&#160;config&#160;<br/>file&#160;is&#160;used&#160;(i.e.&#160;the&#160;first&#160;switch&#160;is&#160;not&#160;defined)&#160;the&#160;feature&#160;is&#160;disabled.&#160;The&#160;optional&#160;second&#160;<br/>switch&#160;is only&#160;evaluated&#160;if&#160;C_ENABLE_CAN_HW_RAM_CHECK&#160;is&#160;defined.&#160;<br/>
<b>Switch&#160;</b><br/>
<b>Value&#160;</b><br/>
<b>Description&#160;</b><br/>
C_ENABLE_CAN_HW_RAM_CHECK&#160;<br/>
&#160;<br/>
Activate&#160;the&#160;RSCAN&#160;RAM test feature.&#160;<br/>
C_ENABLE_CAN_HW_RAM_CHECK_SIZE&#160;&#160;32&#160;..&#160;65504&#160;&#160;Instead&#160;of&#160;the&#160;default&#160;size&#160;as&#160;stated&#160;above&#160;the&#160;<br/>
(bytes)&#160;<br/>
given&#160;number&#160;of&#160;bytes&#160;is&#160;checked&#160;by&#160;the RAM&#160;<br/>test.&#160;The&#160;value&#160;must&#160;be&#160;a&#160;multiple&#160;of&#160;32&#160;bytes&#160;<br/>and&#160;has&#160;to&#160;be&#160;valid for the&#160;used&#160;derivative&#160;<br/>(refer to the corresponding&#160;hardware&#160;manual).&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>Depending&#160;on&#160;the&#160;size of&#160;RAM&#160;to be&#160;checked,&#160;used&#160;compiler&#160;options,&#160;clock&#160;settings&#160;<br/>
<b>&#160;&#160;</b>and others&#160;this&#160;check&#160;might&#160;take up&#160;to&#160;several&#160;milliseconds.&#160;Suggestion&#160;is&#160;to verify&#160;the&#160;<br/>
runtime&#160;of&#160;CanInitPowerOn()in the&#160;actual&#160;project&#160;if&#160;this&#160;feature&#160;is&#160;enabled.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
22&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=23></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>8&#160;&#160;&#160;[#hw_assert]&#160;–&#160;Assertions&#160;</b><br/>
The&#160;driver implements&#160;no&#160;specific assertions&#160;with&#160;additional&#160;error codes.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
23&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=24></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>9&#160;&#160;API&#160;</b><br/>
<b>9.1&#160;</b><br/>
<b>Category&#160;</b><br/>
<b>Single Receive Channels&#160;(SRC)&#160;<br/></b>&#160;<br/>
A&#160;“Single&#160;Receive Channel”&#160;CAN&#160;Driver&#160;supports&#160;one CAN&#160;<br/>channel.)&#160;<br/>
<b>Multiple Receive Channel&#160;(MRC)&#160;<br/></b>&#160;<br/>
A&#160;&#34;Single&#160;Receive Channel&#34;&#160;CAN&#160;Driver&#160;is&#160;typically&#160;<br/>extended&#160;for&#160;multiple channels&#160;by&#160;adding&#160;an&#160;index&#160;to the&#160;<br/>function&#160;parameter&#160;list&#160;(e.g.&#160;CanOnline()&#160;becomes&#160;to&#160;<br/>CanOnline(channel))&#160;or&#160;by&#160;using&#160;the&#160;handle as&#160;a&#160;<br/>channel&#160;indicator&#160;(e.g.&#160;CanTransmit(txHandle)).&#160;<br/>
Table&#160;9-1&#160;&#160;&#160;API&#160;Category&#160;<br/>
&#160;<br/>
<b>9.2&#160;</b><br/>
<b>RSCAN&#160;ECC Configuration&#160;</b><br/>
In&#160;&#160;context&#160;&#160;of&#160;&#160;the&#160;&#160;RSCAN&#160;&#160;ECC&#160;&#160;feature&#160;&#160;the&#160;&#160;application&#160;&#160;has&#160;&#160;to&#160;&#160;provide&#160;&#160;following&#160;&#160;callback&#160;<br/>function&#160;(see&#160;section<a href="TechnicalReference_Rh850_Rscans.html#21">&#160;7.2.8&#160;</a>further information).&#160;<br/>
&#160;<br/>
<b>ApplCanEccConfiguration&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Receive Channel&#160;<br/>
void&#160;<b>ApplCanEccConfiguration</b>&#160;(void)&#160;<br/>
Multiple&#160;Receive&#160;Channel&#160;<br/>
void&#160;<b>ApplCanEccConfiguration</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called by&#160;CanInitPowerOn()&#160;to&#160;allow&#160;the&#160;configuration of&#160;the&#160;RSCAN&#160;ECC functionality.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>Only&#160;available&#160;if&#160;C_ENABLE_ECC_CALLOUT&#160;is&#160;defined.&#160;<br/>
&#160;<br/><b>&#160;</b><br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
24&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=25></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>9.3&#160;</b><br/>
<b>(Extended)&#160;CAN RAM&#160;Check&#160;</b><br/>
&#160;<br/>In&#160;context&#160;of&#160;the&#160;CAN&#160;RAM&#160;check&#160;feature&#160;the&#160;application&#160;has&#160;to&#160;provide&#160;following&#160;callback&#160;<br/>functions (see&#160;sections<a href="TechnicalReference_Rh850_Rscans.html#19">&#160;7.2.6&#160;</a>and<a href="TechnicalReference_Rh850_Rscans.html#20">&#160;7.2.7&#160;</a>for&#160;further information).&#160;<br/>
&#160;<br/>
<b>ApplCanMemCheckFailed&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Receive Channel&#160;<br/>
vuint8&#160;<b>ApplCanMemCheckFailed&#160;</b>(void)&#160;<br/>
Multiple&#160;Receive&#160;Channel&#160;<br/>
vuint8&#160;<b>ApplCanMemCheckFailed</b>&#160;(CanChannelHandle channel)&#160;<br/>
<b>Parameter&#160;</b><br/>
This&#160;parameter&#160;specifies&#160;the CAN&#160;channel&#160;on&#160;which the memory&#160;check&#160;is&#160;<br/>
CanChannelHandle&#160;channel&#160;<br/>
performed.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
vuint8&#160;<br/>
<b>kCanEnableCommunication&#160;–&#160;</b>Allow&#160;communication&#160;(see&#160;note&#160;in&#160;<br/>“Particularities&#160;and&#160;Limitations”).&#160;<br/><b>kCanDisableCommunication&#160;–&#160;</b>Disable communication, no&#160;reception&#160;and&#160;<br/>no&#160;transmission&#160;is&#160;performed.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;call-back&#160;function&#160;is&#160;invoked&#160;within&#160;CanInit()&#160;if&#160;the CAN driver has&#160;found at least one corrupt&#160;bit&#160;<br/>within the&#160;CAN mailboxes&#160;RAM&#160;or (if&#160;extended&#160;CAN&#160;RAM check&#160;is&#160;enabled)&#160;at least one corrupt&#160;bit&#160;within&#160;<br/>the&#160;channel&#160;control&#160;registers&#160;RAM.&#160;The&#160;application&#160;can&#160;decide&#160;whether&#160;the&#160;CAN driver&#160;allows&#160;further&#160;<br/>communication&#160;by&#160;means&#160;of&#160;the return&#160;value.&#160;<br/><b>Particularities&#160;and&#160;Limitations&#160;<br/>Call&#160;context</b>:&#160;If&#160;the feature&#160;Extended&#160;CAN&#160;RAM check&#160;is&#160;deactivated this&#160;function&#160;is&#160;called&#160;on&#160;task&#160;level&#160;or&#160;<br/>within the&#160;BusOff&#160;interrupt;&#160;else only&#160;on task&#160;level.&#160;<br/><b>Configuration</b>:&#160;The&#160;following&#160;setting&#160;must be active:&#160;<br/>C_ENABLE_CAN_RAM_CHECK&#160;<br/><b>Important&#160;note:&#160;</b>If&#160;the optional&#160;feature “Extended&#160;CAN&#160;RAM check”&#160;is&#160;activated&#160;<br/>(C_ENABLE_CAN_RAM_CHECK_EXTENDED&#160;is&#160;defined) and the registers&#160;RAM check&#160;failed&#160;(call-back&#160;<br/>function&#160;ApplCanCorruptRegisters()<i>&#160;</i>was&#160;called&#160;for&#160;the&#160;given&#160;channel), the communication&#160;on the&#160;<br/>channel&#160;will&#160;be disabled,&#160;the&#160;CAN&#160;cell&#160;stays&#160;in&#160;stop&#160;mode and&#160;the&#160;return&#160;value&#160;of&#160;this&#160;function&#160;is&#160;ignored&#160;–&#160;<br/>the&#160;communication&#160;will&#160;NOT&#160;be&#160;allowed&#160;even&#160;if&#160;the return value&#160;is&#160;kCanEnableCommunication.&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
25&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=26></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>ApplCanCorruptMailbox&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Receive Channel&#160;<br/>
void&#160;<b>ApplCanCorruptMailbox</b>&#160;(CanObjectHandle hwObjHandle)&#160;<br/>
Multiple&#160;Receive&#160;Channel&#160;<br/>
void&#160;<b>ApplCanCorruptMailbox&#160;</b>(CanChannelHandle channel,&#160;<br/>CanObjectHandle hwObjHandle)&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;&#160;&#160;&#160;&#160;&#160;CanObjectHandle&#160;hwObjHandle&#160;)&#160;<br/>
<b>Parameter&#160;</b><br/>
This&#160;parameter&#160;specifies&#160;the CAN&#160;channel&#160;on&#160;which the memory&#160;check&#160;is&#160;<br/>
CanChannelHandle&#160;channel&#160;<br/>
performed.&#160;<br/>This&#160;parameter&#160;specifies&#160;the&#160;index&#160;of&#160;the&#160;corrupt mailbox.<br/>
CanObjectHandle&#160;<br/>
&#160;<br/>
hwObjHandle&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called&#160;within&#160;CanInit()&#160;if&#160;the CAN driver has&#160;found a&#160;corrupt mailbox.&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/>Call&#160;context</b>:&#160;If&#160;the feature&#160;“Extended&#160;CAN&#160;RAM&#160;check”&#160;is&#160;deactivated&#160;this&#160;function&#160;is&#160;called&#160;on task&#160;level&#160;or&#160;<br/>within the&#160;BusOff&#160;interrupt;&#160;else only&#160;on task&#160;level.&#160;<br/><b>Configuration</b>:&#160;The&#160;following&#160;settings&#160;must be active:&#160;<br/>C_ENABLE_CAN_RAM_CHECK&#160;<br/>C_ENABLE_NOTIFY_CORRUPT_MAILBOX&#160;<br/>&#160;<br/>
&#160;<br/>
In&#160;case&#160;the&#160;feature&#160;extended&#160;CAN&#160;RAM&#160;check&#160;is&#160;enabled&#160;the&#160;following&#160;additional&#160;callback&#160;<br/>functions&#160;have&#160;to&#160;be&#160;provided&#160;by&#160;the&#160;application.&#160;<br/>
&#160;<br/>
<b>ApplCanCorruptRegisters&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Receive Channel&#160;<br/>
void&#160;<b>ApplCanCorruptRegisters</b>&#160;(void)&#160;<br/>
Multiple&#160;Receive&#160;Channel&#160;<br/>
void&#160;<b>ApplCanCorruptRegisters&#160;</b>(CanChannelHandle&#160;channel)&#160;<br/>
<b>Parameter&#160;</b><br/>
This&#160;parameter&#160;specifies&#160;the CAN&#160;channel&#160;on&#160;which the memory&#160;check&#160;is&#160;<br/>
CanChannelHandle&#160;channel&#160;<br/>
performed.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called if&#160;the&#160;CAN&#160;driver has&#160;found&#160;corrupt&#160;channel&#160;control&#160;registers.&#160;<br/><b>Particularities&#160;and&#160;Limitations&#160;<br/>Call&#160;context</b>:&#160;This&#160;function&#160;is&#160;called&#160;out&#160;of&#160;task&#160;level&#160;within&#160;CanInit()&#160;on&#160;the&#160;given&#160;channel&#160;if&#160;the RAM&#160;<br/>check&#160;is&#160;not suppressed.&#160;The&#160;RAM check&#160;is&#160;suppressed&#160;if&#160;CanInit()<i>&#160;</i>is&#160;called&#160;in scope of&#160;the functions&#160;<br/>CanResetBusOffEnd()or&#160;(dependent on&#160;parameter)&#160;CanEnableChannelCommunication().&#160;<br/><b>Configuration</b>:&#160;The&#160;following&#160;settings&#160;must be active:&#160;<br/>C_ENABLE_CAN_RAM_CHECK&#160;<br/>C_ENABLE_CAN_RAM_CHECK_EXTENDED&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
26&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=27></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>ApplCanGlobalMemCheckFailed&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Receive Channel&#160;<br/>
vuint8&#160;<b>ApplCanGlobalMemCheckFailed&#160;</b>(void)&#160;<br/>
Multiple&#160;Receive&#160;Channel&#160;<br/>
vuint8&#160;<b>ApplCanGlobalMemCheckFailed</b>&#160;(void)&#160;<br/>
<b>Parameter&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
vuint8&#160;<br/>
<b>kCanEnableCommunication&#160;–&#160;</b>Continue initialization&#160;of&#160;the&#160;RSCAN.&#160;<br/><b>kCanDisableCommunication&#160;–&#160;</b>Stop initialization&#160;of&#160;the RSCAN.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;call-back&#160;function&#160;is&#160;invoked&#160;if&#160;the&#160;CAN&#160;driver has&#160;found&#160;at&#160;least one corrupt&#160;bit&#160;within&#160;the&#160;global&#160;control&#160;<br/>registers&#160;RAM&#160;in context of&#160;the&#160;extended&#160;CAN&#160;RAM check&#160;or if&#160;any&#160;corrupt&#160;bit&#160;was&#160;found&#160;in&#160;context&#160;of&#160;the&#160;<br/>RSCAN RAM test (see&#160;section<a href="TechnicalReference_Rh850_Rscans.html#22">&#160;7.2.9).</a>&#160;The&#160;application can&#160;decide&#160;whether&#160;the&#160;CAN&#160;driver&#160;proceeds&#160;with&#160;the&#160;<br/>RSCAN initialization&#160;by&#160;means&#160;of&#160;the return&#160;value.&#160;<br/><b>Particularities&#160;and&#160;Limitations&#160;<br/>Call&#160;context</b>:&#160;This&#160;function&#160;is&#160;called&#160;out&#160;of&#160;task&#160;level&#160;within&#160;CanInitPowerOn().&#160;<br/><b>Configuration</b>:&#160;The&#160;following&#160;settings&#160;must be active:&#160;<br/>C_ENABLE_CAN_RAM_CHECK&#160;<br/>C_ENABLE_CAN_RAM_CHECK_EXTENDED&#160;<br/>or&#160;<br/>C_ENABLE_CAN_HW_RAM_CHECK&#160;<br/><b>Important&#160;note:&#160;</b>Be&#160;aware&#160;of&#160;undefined runtime behavior if&#160;kCanEnableCommunication&#160;is&#160;returned&#160;as&#160;<br/>the&#160;driver tries&#160;to initialize&#160;and&#160;communicate&#160;despite&#160;corrupt RAM&#160;was&#160;found.&#160;The&#160;application&#160;has&#160;to verify&#160;<br/>the&#160;system&#160;in this&#160;case.&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
27&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=28></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
The&#160;following&#160;service&#160;functions&#160;are&#160;provided&#160;by&#160;the&#160;driver&#160;in&#160;context&#160;of&#160;the&#160;extended&#160;CAN&#160;<br/>RAM check&#160;feature.&#160;<br/>
&#160;<br/>
<b>CanEnableChannelCommunication&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Single Receive Channel&#160;<br/>
void&#160;<b>CanEnableChannelCommunication</b>&#160;(vuint8 suppressRamCheck)&#160;<br/>
void&#160;<b>CanEnableChannelCommunication</b>&#160;(CanChannelHandle&#160;channel,&#160;<br/>
Multiple&#160;Receive&#160;Channel&#160;<br/>
vuint8 suppressRamCheck)&#160;<br/>
<b>Parameter&#160;</b><br/>
This&#160;parameter&#160;specifies&#160;the CAN&#160;channel&#160;that&#160;shall&#160;be re<br/>
CanChannelHandle&#160;channel&#160;<br/>
-enabled.&#160;<br/>
vuint8&#160;suppressRamCheck&#160;<br/>
<b>kCanTrue&#160;–&#160;</b>RAM check&#160;will&#160;be suppressed&#160;while re-enabling&#160;the&#160;<br/>communication&#160;on&#160;the&#160;channel.&#160;<br/><b>kCanFalse&#160;–&#160;</b>RAM check&#160;will&#160;be&#160;performed&#160;while&#160;re-enabling&#160;the&#160;<br/>communication&#160;on&#160;the&#160;channel&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;function&#160;re-enables&#160;the&#160;channel&#160;communication if&#160;it was&#160;disabled&#160;previously.&#160;It&#160;calls&#160;CanInit()&#160;<br/>internally&#160;but all&#160;eventually&#160;disabled&#160;mailboxes&#160;stay&#160;disabled. If&#160;the RAM check&#160;is&#160;not&#160;suppressed&#160;it&#160;can&#160;fail&#160;<br/>again and&#160;the&#160;appropriate&#160;call-back&#160;function&#160;is&#160;invoked&#160;in this&#160;case.<b>&#160;<br/>Particularities&#160;and&#160;Limitations&#160;<br/>Restriction</b>: Same restrictions&#160;as&#160;for a call&#160;of&#160;CanInit()&#160;apply.&#160;<br/><b>Call&#160;context</b>:&#160;This&#160;function&#160;is&#160;called&#160;by&#160;the&#160;application.&#160;<br/><b>Configuration</b>:&#160;The&#160;following&#160;settings&#160;must be active:&#160;<br/>C_ENABLE_CAN_RAM_CHECK&#160;<br/>C_ENABLE_CAN_RAM_CHECK_EXTENDED&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
28&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=29></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>CanEnableMailboxCommunication&#160;</b><br/>
<b>Prototype&#160;</b><br/>
Single Receive Channel<br/>
vuint8&#160;<b>CanEnableMailboxCommunication</b>&#160;(CanObjectHandle&#160;<br/>
&#160;<br/>
hwObjHandle)&#160;<br/>
Multiple&#160;Receive&#160;Channel<br/>
vuint8&#160;<b>CanEnableMailboxCommunication</b>&#160;(CanChannelHandle&#160;channel,&#160;<br/>
&#160;<br/>
CanObjectHandle hwObjHandle)&#160;<br/>
<b>Parameter&#160;</b><br/>
This&#160;parameter&#160;specifies&#160;the CAN&#160;channel&#160;for which the&#160;mailbox&#160;shall&#160;be&#160;<br/>
CanChannelHandle&#160;channel&#160;<br/>
re-enabled.&#160;<br/>
The&#160;index&#160;of&#160;the mailbox&#160;to&#160;be&#160;re<br/>
CanObjectHandle&#160;<br/>
-enabled.&#160;<br/>
hwObjHandle&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
vuint8&#160;<br/>
<b>kCanOk</b>&#160;<b>-</b>&#160;Mailbox&#160;communication&#160;was&#160;re-enabled.&#160;<br/><b>kCanFailed</b>&#160;<b>-</b>&#160;Enabling of&#160;mailbox&#160;communication&#160;failed:&#160;hwObjHandle&#160;is&#160;<br/>not a&#160;valid&#160;Tx&#160;mailbox, the&#160;mailbox&#160;was&#160;not disabled&#160;previously&#160;or the&#160;<br/>communication&#160;on&#160;the&#160;channel&#160;is&#160;still&#160;disabled.&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>The&#160;function&#160;re-enables&#160;the&#160;mailbox&#160;communication&#160;that&#160;was&#160;disabled&#160;previously&#160;by&#160;the&#160;extended&#160;CAN&#160;<br/>RAM check. Note that the&#160;mailbox&#160;RAM&#160;check&#160;is&#160;not<b>&#160;</b>performed&#160;in scope&#160;of&#160;this&#160;function call&#160;-&#160;the&#160;<br/>application&#160;must guarantee&#160;that&#160;the&#160;mailbox&#160;is&#160;not&#160;corrupt.&#160;<br/><b>Particularities&#160;and&#160;Limitations&#160;<br/>Call&#160;context</b>:&#160;This&#160;function&#160;is&#160;called&#160;by&#160;the&#160;application.&#160;<br/><b>Configuration</b>:&#160;The&#160;following&#160;settings&#160;must be active:&#160;<br/>C_ENABLE_CAN_RAM_CHECK&#160;<br/>C_ENABLE_CAN_RAM_CHECK_EXTENDED&#160;<br/>&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
29&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=30></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>9.4&#160;</b><br/>
<b>CAN&#160;Interrupt&#160;Handling by&#160;Application&#160;</b><br/>
These&#160;additional&#160;call-back&#160;functions&#160;are&#160;used&#160;if&#160;the&#160;driver&#160;does&#160;not&#160;perform&#160;CAN&#160;interrupt&#160;<br/>handling.&#160;See&#160;section<a href="TechnicalReference_Rh850_Rscans.html#35">&#160;10.3&#160;</a>for details&#160;and&#160;the&#160;functional&#160;description.&#160;<br/>
&#160;<br/>
<b>OsCanCanInterruptDisable&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Receive Channel&#160;<br/>
void&#160;<b>OsCanCanInterruptDisable</b>&#160;(void)&#160;<br/>
Multiple&#160;Receive&#160;Channel&#160;<br/>
void&#160;<b>OsCanCanInterruptDisable</b>&#160;(CanChannelHandle channel)&#160;<br/>
<b>Parameter&#160;</b><br/>
This&#160;parameter&#160;specifies&#160;the CAN&#160;channel&#160;for&#160;which the&#160;interrupts&#160;shall&#160;be&#160;<br/>
CanChannelHandle&#160;channel&#160;<br/>
disabled.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called by&#160;CanCanInterruptDisable().&#160;<br/><b>Particularities&#160;and&#160;Limitations&#160;<br/></b>Only&#160;available&#160;if&#160;C_ENABLE_OSEK_CAN_INTCTRL&#160;is&#160;defined.&#160;<br/>
&#160;<br/>&#160;<br/>
<b>OsCanCanInterruptRestore&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Receive Channel&#160;<br/>
void&#160;<b>OsCanCanInterruptRestore</b>&#160;(void)&#160;<br/>
Multiple&#160;Receive&#160;Channel&#160;<br/>
void&#160;<b>OsCanCanInterruptRestore</b>&#160;(CanChannelHandle channel)&#160;<br/>
<b>Parameter&#160;</b><br/>
This&#160;parameter&#160;specifies&#160;the CAN&#160;channel&#160;for which the interrupts&#160;shall&#160;be&#160;<br/>
CanChannelHandle&#160;channel&#160;<br/>
restored.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called by&#160;CanCanInterruptRestore().&#160;<br/><b>Particularities&#160;and&#160;Limitations&#160;<br/></b>Only&#160;available&#160;if&#160;C_ENABLE_OSEK_CAN_INTCTRL&#160;is&#160;defined.&#160;<br/>
&#160;<br/>&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
30&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=31></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>ApplCanWakeupInterruptDisable&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Receive Channel&#160;<br/>
void&#160;<b>ApplCanWakeupInterruptDisable</b>&#160;(vuint8 channel)&#160;<br/>
Multiple&#160;Receive&#160;Channel&#160;<br/>
void&#160;<b>ApplCanWakeupInterruptDisable</b>&#160;(vuint8 channel)&#160;<br/>
<b>Parameter&#160;</b><br/>
This&#160;parameter&#160;specifies&#160;the CAN&#160;channel&#160;for which the&#160;wakeup interrupt&#160;<br/>
vuint8&#160;channel&#160;<br/>
shall&#160;be&#160;disabled.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called by&#160;CanWakeup()&#160;and&#160;CanInit().&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>Only&#160;available&#160;if&#160;C_ENABLE_OSEK_CAN_INTCTRL&#160;and&#160;C_ENABLE_SLEEP_WAKEUP&#160;are defined&#160;and&#160;<br/>external&#160;wakeup&#160;is&#160;used.&#160;<br/>&#160;<br/>&#160;<br/>
<b>ApplCanWakeupInterruptEnable&#160;</b><br/>
<b>Prototype&#160;<br/></b>Single Receive Channel&#160;<br/>
void&#160;<b>ApplCanWakeupInterruptEnable</b>&#160;(vuint8 channel)&#160;<br/>
Multiple&#160;Receive&#160;Channel&#160;<br/>
void&#160;<b>ApplCanWakeupInterruptEnable</b>&#160;(vuint8 channel)&#160;<br/>
<b>Parameter&#160;</b><br/>
This&#160;parameter&#160;specifies&#160;the CAN&#160;channel&#160;for which the&#160;wakeup interrupt&#160;<br/>
vuint8&#160;channel&#160;<br/>
shall&#160;be&#160;enabled.&#160;<br/>
<b>Return&#160;code&#160;</b><br/>
-&#160;<br/>
-&#160;<br/>
<b>Functional&#160;Description&#160;<br/></b>This&#160;function&#160;is&#160;called by&#160;CanSleep().&#160;<br/>
<b>Particularities&#160;and&#160;Limitations&#160;<br/></b>Only&#160;available&#160;if&#160;C_ENABLE_OSEK_CAN_INTCTRL&#160;and&#160;C_ENABLE_SLEEP_WAKEUP&#160;are defined&#160;and&#160;<br/>external&#160;wakeup&#160;is&#160;used.&#160;<br/>&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
31&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=32></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>10&#160;&#160;Implementations&#160;Hints&#160;</b><br/>
<b>10.1&#160;&#160;Important&#160;Notes&#160;</b><br/>
1.&#160;&#160;The&#160;&#160;following&#160;&#160;condition&#160;&#160;will&#160;&#160;lead&#160;&#160;to&#160;&#160;an&#160;&#160;endless&#160;&#160;recursion&#160;&#160;in&#160;&#160;the&#160;&#160;CAN&#160;&#160;Driver:&#160;&#160;<br/>
Recursive&#160;&#160;call&#160;&#160;of&#160;&#160;'CanTransmit'&#160;&#160;within&#160;&#160;a&#160;&#160;confirmation&#160;&#160;routine,&#160;&#160;if&#160;&#160;the&#160;&#160;CAN&#160;&#160;Driver&#160;&#160;has&#160;<br/>been&#160;set&#160;into&#160;the&#160;passive&#160;state&#160;by&#160;CanSetPassive.&#160;Recommendations are:&#160;<br/>
<b>&gt;&#160;&#160;</b>NO&#160;CALL&#160;OF&#160;CanTransmit&#160;WITHIN&#160;CONFIRMATION-ROUTINES&#160;<br/>
<b>&gt;&#160;&#160;</b>PLEASE&#160;USE&#160;CanSetPassive&#160;ONLY&#160;ACCORDING&#160;TO&#160;THE&#160;DESCRIPTION&#160;<br/>
2.&#160;&#160;Only&#160;&#160;the&#160;&#160;transmit&#160;&#160;line&#160;&#160;of&#160;&#160;the&#160;&#160;CAN&#160;&#160;Driver&#160;&#160;is&#160;&#160;blocked&#160;&#160;by&#160;&#160;the&#160;&#160;functions&#160;&#160;CanOffline().&#160;<br/>
However,&#160;messages&#160;in&#160;the&#160;transmit&#160;buffer&#160;of&#160;the&#160;CAN-Chip,&#160;are&#160;still&#160;sent.&#160;For&#160;a&#160;reliable&#160;<br/>prevention&#160;&#160;of&#160;&#160;this&#160;&#160;fact,&#160;&#160;call&#160;&#160;function&#160;&#160;CanInit()&#160;&#160;after&#160;&#160;calling&#160;&#160;CanOffline().&#160;&#160;The&#160;<br/>order&#160;of&#160;the&#160;two&#160;function&#160;calls&#160;is&#160;urgently&#160;required,&#160;due&#160;to&#160;the&#160;fact,&#160;that&#160;CanInit()&#160;is&#160;<br/>only&#160;allowed&#160;in&#160;offline&#160;mode.&#160;<br/>
3.&#160;&#160;If&#160;the&#160;VStdLib&#160;interrupt-lock-level&#160;is&#160;used,&#160;the&#160;chosen&#160;priority&#160;level&#160;must&#160;be&#160;higher&#160;than&#160;<br/>
the&#160;&#160;highest&#160;&#160;level&#160;&#160;of&#160;&#160;any&#160;&#160;functionality&#160;&#160;of&#160;&#160;the&#160;&#160;CAN&#160;&#160;Driver&#160;&#160;(signal&#160;&#160;access,&#160;&#160;etc).&#160;&#160;Keep&#160;&#160;in&#160;<br/>mind&#160;that&#160;smaller values&#160;represent&#160;higher priorities.&#160;<br/>
4.&#160;&#160;Resetting&#160;&#160;indication&#160;&#160;flags&#160;&#160;and&#160;&#160;confirmation&#160;&#160;flags&#160;&#160;is&#160;&#160;done&#160;&#160;by&#160;&#160;Read-Modify-Write.&#160;&#160;The&#160;<br/>
application&#160;&#160;is&#160;&#160;responsible&#160;&#160;for&#160;&#160;consistency.&#160;&#160;CanGlobalInterruptDisable()&#160;&#160;and&#160;<br/>CanGlobalInterruptRestore()&#160;&#160;must&#160;&#160;be&#160;&#160;called&#160;&#160;to&#160;&#160;avoid&#160;&#160;interruption&#160;&#160;by&#160;&#160;the&#160;&#160;CAN.&#160;<br/>Otherwise&#160;confirmations or indications can&#160;be&#160;lost.&#160;<br/>
5.&#160;&#160;Port&#160;and&#160;general&#160;clock&#160;settings&#160;are&#160;not&#160;handled&#160;by&#160;the&#160;driver.&#160;This&#160;has&#160;to&#160;be&#160;performed&#160;<br/>
by&#160;&#160;the&#160;&#160;upper&#160;&#160;layers&#160;&#160;before&#160;&#160;the&#160;&#160;call&#160;&#160;of&#160;&#160;CanInitPowerOn().&#160;&#160;Please&#160;&#160;check&#160;&#160;the&#160;<br/>appropriate&#160;hardware&#160;manual&#160;of&#160;the&#160;used&#160;derivative&#160;for&#160;details&#160;regarding&#160;the&#160;hardware&#160;<br/>specific&#160;&#160;configuration&#160;&#160;aspects.&#160;&#160;The&#160;&#160;CAN&#160;&#160;clock&#160;&#160;(fCAN)&#160;&#160;for&#160;&#160;baudrate&#160;&#160;generation&#160;&#160;can&#160;&#160;be&#160;<br/>
selected&#160;via&#160;the&#160;configuration&#160;tool;&#160;refer to&#160;section<a href="TechnicalReference_Rh850_Rscans.html#38">&#160;11.1.2.</a>&#160;<br/>
6.&#160;&#160;If&#160;&#160;external&#160;&#160;wakeup&#160;&#160;support&#160;&#160;is&#160;&#160;used&#160;&#160;the&#160;&#160;port&#160;&#160;configuration&#160;&#160;(performed&#160;&#160;by&#160;&#160;the&#160;&#160;upper&#160;<br/>
layers)&#160;has&#160;to&#160;be&#160;extended.&#160;Besides&#160;setting&#160;the&#160;correct&#160;port&#160;functions&#160;for&#160;CAN&#160;it&#160;has&#160;to&#160;<br/>be&#160;&#160;ensured&#160;&#160;that&#160;&#160;this&#160;&#160;function&#160;&#160;is&#160;&#160;combined&#160;&#160;with&#160;&#160;the&#160;&#160;respective&#160;&#160;external&#160;&#160;interrupt.&#160;<br/>Additionally&#160;the&#160;edge/level detection&#160;has to&#160;be&#160;configured&#160;correctly&#160;to&#160;generate&#160;interrupt&#160;<br/>requests&#160;&#160;upon&#160;&#160;detection&#160;&#160;of&#160;&#160;CAN&#160;&#160;events&#160;&#160;(e.g.&#160;&#160;on&#160;&#160;low&#160;&#160;level&#160;&#160;or&#160;&#160;falling&#160;&#160;edges)&#160;&#160;on&#160;&#160;the&#160;<br/>corresponding&#160;&#160;pins&#160;&#160;(see&#160;&#160;the&#160;&#160;hardware&#160;&#160;manual&#160;&#160;for&#160;&#160;details;&#160;&#160;refer&#160;&#160;to&#160;&#160;the&#160;&#160;filter&#160;&#160;control&#160;<br/>register&#160;for&#160;instance).&#160;If&#160;the&#160;external&#160;wakeup&#160;is&#160;used&#160;the&#160;control&#160;registers&#160;of&#160;the&#160;external&#160;<br/>interrupts&#160;are&#160;also&#160;fully&#160;handled&#160;by&#160;the&#160;CAN&#160;driver in&#160;default configuration.&#160;<br/>
7.&#160;&#160;When&#160;using&#160;Green&#160;Hills&#160;or&#160;IAR&#160;&#160;compiler&#160;the&#160;&#160;ID&#160;bit&#160;of&#160;&#160;the&#160;PSW&#160;is&#160;cleared&#160;by&#160;software&#160;<br/>
when&#160;&#160;any&#160;&#160;category&#160;&#160;1&#160;&#160;interrupt&#160;&#160;service&#160;&#160;routine&#160;&#160;of&#160;&#160;the&#160;&#160;CAN&#160;&#160;driver&#160;&#160;is&#160;&#160;entered&#160;&#160;to&#160;&#160;allow&#160;<br/>nesting&#160;of&#160;interrupts.&#160;For&#160;other&#160;compilers&#160;the&#160;default&#160;platform&#160;behavior&#160;is&#160;not&#160;modified&#160;<br/>(the&#160;ID&#160;bit&#160;stays&#160;set)&#160;and&#160;the&#160;acknowledgement&#160;of&#160;further&#160;interrupt&#160;requests&#160;is&#160;blocked&#160;<br/>when&#160;any&#160;driver&#160;ISR&#160;is&#160;processed.&#160;This&#160;default&#160;driver&#160;behavior&#160;for&#160;category&#160;1&#160;interrupts&#160;<br/>can&#160;&#160;be&#160;&#160;changed&#160;&#160;by&#160;&#160;definition&#160;&#160;of&#160;&#160;C_DISABLE_NESTED_INTERRUPTS&#160;&#160;respectively&#160;<br/>C_ENABLE_NESTED_INTERRUPTS&#160;via&#160;the&#160;user&#160;configuration&#160;file.&#160;Keep&#160;in&#160;mind&#160;that&#160;the&#160;<br/>feature&#160;is&#160;redundant&#160;if&#160;the&#160;compiler&#160;inserts&#160;code&#160;to&#160;allow&#160;nesting&#160;of&#160;interrupts&#160;in&#160;general&#160;<br/>and&#160;always&#160;verify&#160;that&#160;the&#160;compiler generates&#160;correct&#160;code&#160;if&#160;the&#160;feature is&#160;enabled.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
32&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=33></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>10.2&#160;&#160;Interrupt&#160;Configuration&#160;</b><br/>
With&#160;&#160;exception&#160;&#160;of&#160;&#160;the&#160;&#160;CAN&#160;&#160;related&#160;&#160;EI&#160;&#160;level&#160;&#160;interrupt&#160;&#160;control&#160;&#160;registers&#160;&#160;(ICn,&#160;&#160;see&#160;&#160;section&#160;<br/><a href="TechnicalReference_Rh850_Rscans.html#18">7.2.3)</a>&#160;all&#160;further&#160;interrupt&#160;configuration&#160;within&#160;the&#160;interrupt&#160;controller&#160;address&#160;space&#160;of&#160;the&#160;<br/>MCU&#160;has to&#160;be&#160;performed&#160;by&#160;the&#160;application&#160;before the&#160;call&#160;of&#160;CanInitPoweron().&#160;<br/>
The&#160;&#160;default&#160;&#160;implementation&#160;&#160;configures&#160;&#160;table&#160;&#160;reference&#160;&#160;as&#160;&#160;the&#160;&#160;way&#160;&#160;to&#160;&#160;determine&#160;&#160;the&#160;<br/>interrupt&#160;&#160;vector&#160;&#160;(TB&#160;&#160;bit&#160;&#160;in&#160;&#160;ICn&#160;&#160;registers&#160;&#160;is&#160;&#160;set).&#160;&#160;The&#160;&#160;application&#160;&#160;has&#160;&#160;to&#160;&#160;take&#160;&#160;care&#160;&#160;about&#160;<br/>referencing&#160;the&#160;CAN&#160;interrupt&#160;service&#160;routines&#160;in&#160;the&#160;interrupt&#160;vector&#160;table&#160;-&#160;the&#160;prototypes&#160;<br/>are&#160;&#160;exported&#160;in&#160;&#160;the&#160;driver&#160;header&#160;file.&#160;&#160;Please&#160;check&#160;the&#160;appropriate&#160;hardware&#160;&#160;manual&#160;of&#160;<br/>the&#160;used&#160;derivative&#160;for&#160;details&#160;regarding&#160;the&#160;hardware&#160;specific&#160;configuration&#160;aspects.&#160;Table&#160;<br/>10-1&#160;shows&#160;the&#160;provided&#160;&#160;ISRs&#160;and&#160;the&#160;accordant&#160;interrupt&#160;&#160;sources&#160;(n&#160;is&#160;the&#160;index&#160;of&#160;the&#160;<br/>physical&#160;&#160;channel).&#160;&#160;Please&#160;&#160;note&#160;&#160;that&#160;&#160;it&#160;&#160;is&#160;&#160;configuration&#160;&#160;dependent&#160;&#160;whether&#160;&#160;a&#160;&#160;particular&#160;<br/>interrupt&#160;service&#160;routine&#160;is available&#160;(see&#160;remarks in&#160;table).&#160;&#160;<br/>
&#160;<br/>
<b>CAN&#160;interrupt&#160;</b><br/>
<b>CAN&#160;interrupt&#160;&#160;</b><br/>
<b>Provided&#160;service&#160;&#160;Remarks&#160;</b><br/>
<b>request&#160;name&#160;</b><br/>
<b>request&#160;cause&#160;</b><br/>
<b>routine&#160;</b><br/>
CAN RX&#160;FIFO&#160;<br/>
Used&#160;for&#160;BasicCAN reception&#160;if&#160;‘Rx&#160;<br/>
INTRCANGRECC&#160;&#160;interrupt<br/>
CanIsrRxFifo&#160;<br/>
BasicCan Polling’&#160;is&#160;not&#160;enabled&#160;or&#160;<br/>
&#160;<br/>
‘Individual&#160;Polling’&#160;is&#160;configured.&#160;<br/>
CAN global&#160;error&#160;<br/>
INTRCANGERR<br/>
Used&#160;for&#160;Rx&#160;BasicCAN overrun&#160;if&#160;‘Error&#160;<br/>
&#160;<br/>
interrupt<br/>
CanIsrGlobalStatus&#160;<br/>
&#160;<br/>
Polling’&#160;is&#160;not&#160;enabled.&#160;<br/>
Used&#160;for transmission&#160;on&#160;physical&#160;<br/>
INTRCANnTRX&#160;<br/>
CANn&#160;TX&#160;interrupt&#160;&#160;<br/>
CanIsrTx_n&#160;<br/>
channel&#160;n&#160;if&#160;‘Tx&#160;Polling’&#160;is&#160;not&#160;enabled&#160;<br/>or ‘Individual&#160;Polling’&#160;is&#160;configured.&#160;<br/>
CANn&#160;TX/RX&#160;&#160;FIFO&#160;<br/>
INTRCANnREC&#160;<br/>
RX&#160;complete&#160;interrupt&#160;-&#160;<br/>
This&#160;interrupt&#160;is&#160;not&#160;used.&#160;<br/>
&#160;<br/>
Used&#160;for&#160;BusOff&#160;detection&#160;on&#160;physical&#160;<br/>
INTRCANnERR&#160;<br/>
CANn&#160;error interrupt&#160;<br/>
CanIsrStatus_n&#160;<br/>
channel&#160;n&#160;if&#160;‘Error Polling’&#160;is&#160;not&#160;<br/>enabled.&#160;<br/>Used&#160;for wakeup detection&#160;on&#160;physical&#160;<br/>
External&#160;interrupt<br/>
channel&#160;n&#160;if&#160;the sleep/wakeup&#160;<br/>
INTPn<br/>
&#160;<br/>
&#160;<br/>
(see&#160;chapter<a href="TechnicalReference_Rh850_Rscans.html#11">&#160;4)</a><br/>
CanIsrWakeup_n&#160;<br/>
functionality&#160;is&#160;enabled,&#160;the&#160;external&#160;<br/>
&#160;<br/>
wakeup is&#160;used&#160;and ‘Wakeup&#160;Polling’&#160;is&#160;<br/>not enabled.&#160;<br/>
Table&#160;10-1&#160;&#160;&#160;Interrupt&#160;Service&#160;Routines&#160;<br/>
If&#160;the&#160;INTC&#160;shall&#160;implement&#160;direct&#160;jumps&#160;to&#160;an&#160;address&#160;determined&#160;by&#160;the&#160;interrupt&#160;priority&#160;<br/>level&#160;&#160;(instead&#160;&#160;of&#160;&#160;table&#160;&#160;reference)&#160;&#160;the&#160;&#160;switch&#160;&#160;C_ENABLE_DIRECT_INTERRUPT_BRANCH&#160;<br/>has&#160;to&#160;be&#160;defined&#160;via&#160;the&#160;user&#160;configuration&#160;file.&#160;(This&#160;setting&#160;affects&#160;the&#160;TB&#160;bit&#160;in&#160;the&#160;ICn&#160;<br/>registers.)&#160;In&#160;this&#160;case&#160;the&#160;application&#160;has&#160;to&#160;implement&#160;a&#160;common&#160;service&#160;routine&#160;for&#160;all&#160;<br/>CAN&#160;interrupts&#160;and&#160;jump&#160;to&#160;it&#160;from&#160;the&#160;corresponding&#160;address&#160;(refer&#160;to&#160;hardware&#160;manual&#160;<br/>for configuration&#160;aspects).&#160;&#160;<br/>See&#160;below&#160;an&#160;implementation&#160;example&#160;for&#160;Green&#160;Hills&#160;compiler&#160;and&#160;a&#160;full&#160;interrupt&#160;system&#160;<br/>with&#160;disabled&#160;sleep/wakeup&#160;functionality&#160;that&#160;uses&#160;physical&#160;channels&#160;1&#160;and&#160;4;&#160;also&#160;refer&#160;to&#160;<br/>the&#160;information&#160;in&#160;table&#160;10-1&#160;about&#160;the&#160;presence&#160;of&#160;the&#160;individual&#160;CAN&#160;interrupt&#160;functions.&#160;<br/>Each&#160;driver&#160;routine&#160;must&#160;not&#160;be&#160;called&#160;if&#160;the&#160;CAN&#160;interrupts&#160;for&#160;the&#160;corresponding&#160;channel&#160;<br/>(respectively&#160;&#160;any&#160;&#160;CAN&#160;&#160;channel&#160;&#160;for&#160;&#160;the&#160;&#160;global&#160;&#160;handlers)&#160;&#160;are&#160;&#160;currently&#160;&#160;disabled.&#160;&#160;This&#160;&#160;is&#160;<br/>especially&#160;relevant&#160;if&#160;more&#160;than&#160;one&#160;channel&#160;is&#160;used&#160;or&#160;other&#160;interrupt&#160;sources&#160;also&#160;call&#160;the&#160;<br/>common&#160;service&#160;routine.&#160;In&#160;general&#160;it&#160;is&#160;recommended&#160;to&#160;check&#160;the&#160;status&#160;of&#160;the&#160;MK&#160;bit&#160;in&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
33&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=34></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-34_1.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
the&#160;&#160;ICn&#160;&#160;register&#160;&#160;of&#160;&#160;each&#160;&#160;CAN&#160;&#160;interrupt&#160;&#160;source&#160;&#160;before&#160;&#160;invoking&#160;&#160;the&#160;&#160;corresponding&#160;&#160;driver&#160;<br/>routine&#160;as&#160;these&#160;bits&#160;directly&#160;indicate&#160;the&#160;status&#160;of&#160;the&#160;CAN&#160;interrupt&#160;lock&#160;mechanism.&#160;Any&#160;<br/>driver&#160;routine&#160;may&#160;only&#160;be&#160;called&#160;if&#160;the&#160;corresponding&#160;interrupt&#160;source&#160;is&#160;enabled&#160;(MK&#160;bit&#160;<br/>==&#160;0).&#160;These&#160;actions&#160;may&#160;differ&#160;if&#160;the&#160;application&#160;handles&#160;the&#160;CAN&#160;interrupt&#160;disable/restore&#160;<br/>mechanism&#160;(see&#160;section<a href="TechnicalReference_Rh850_Rscans.html#35">&#160;10.3&#160;</a>below),&#160;but&#160;the&#160;requirements&#160;above&#160;must&#160;always&#160;be&#160;met.&#160;&#160;If&#160;<br/>the&#160;feature&#160;“Multiple&#160;Configurations”&#160;is&#160;used&#160;only&#160;functions&#160;corresponding&#160;to&#160;channels&#160;that&#160;<br/>are used&#160;in&#160;the&#160;active&#160;identity&#160;should&#160;be&#160;called.&#160;<br/>
&#160;<br/>
#pragma ghs interrupt&#160;<br/>void CommonIsr_Prio_x ( void )&#160;<br/>{&#160;<br/>&#160;&#160;/* handling for other interrupts that are assigned to&#160;&#160;<br/>&#160; &#160; &#160;this&#160;priority and not handled by table reference &#160; */&#160;<br/>&#160;<br/>&#160;&#160;/* CAN interrupts */&#160;<br/>&#160;&#160;if (MK bit of&#160;INTRCANGRECC&#160;==&#160;0)&#160;CanIsrRxFifo();&#160;<br/>&#160;&#160;if (MK bit of&#160;INTRCANGERR&#160;== 0)&#160;CanIsrGlobalStatus();&#160;<br/>&#160;&#160;if (MK bit of&#160;INTRCAN1ERR&#160;== 0)&#160;CanIsrStatus_1();&#160;<br/>&#160;&#160;if (MK bit of&#160;INTRCAN1TRX&#160;== 0)&#160;CanIsrTx_1();&#160;<br/>&#160;&#160;if (MK bit of&#160;INTRCAN4ERR&#160;== 0)&#160;CanIsrStatus_4();&#160;<br/>&#160;&#160;if (MK bit of&#160;INTRCAN4TRX&#160;== 0)&#160;CanIsrTx_4();&#160;<br/>&#160;<br/>&#160;&#160;/* handling for other interrupts that are assigned to&#160;&#160;<br/>&#160; &#160; &#160;this priority and not handled by table reference &#160; */&#160;<br/>}&#160;<br/>&#160;<br/>
Since&#160;&#160;the&#160;&#160;common&#160;&#160;service&#160;&#160;routine&#160;&#160;is&#160;&#160;already&#160;&#160;qualified&#160;&#160;as&#160;&#160;an&#160;&#160;ISR&#160;&#160;to&#160;&#160;the&#160;&#160;compiler,&#160;&#160;the&#160;<br/>individual&#160;CAN&#160;interrupt&#160;routines&#160;have&#160;to&#160;be&#160;configured&#160;as&#160;void-void&#160;functions&#160;if&#160;this&#160;variant&#160;<br/>is&#160;used.&#160;Therefore&#160;the&#160;switch&#160;C_ENABLE_ISRVOID&#160;additionally&#160;has&#160;to&#160;be&#160;defined&#160;via&#160;the&#160;<br/>user configuration&#160;file&#160;(if&#160;category&#160;1&#160;CAN interrupts&#160;are&#160;used).&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;driver&#160;performs&#160;no&#160;measures&#160;to ensure&#160;the&#160;correct&#160;functionality&#160;of&#160;the CAN&#160;<br/>
<b>&#160;&#160;</b>interrupt&#160;disable/restore&#160;mechanism&#160;if&#160;it&#160;is&#160;bypassed&#160;by&#160;the&#160;common&#160;interrupt&#160;handler&#160;<br/>
when&#160;C_ENABLE_DIRECT_INTERRUPT_BRANCH&#160;is&#160;defined.&#160;Therefore&#160;the&#160;usage&#160;of&#160;<br/>this&#160;switch in&#160;not&#160;recommended in&#160;general&#160;and&#160;should only&#160;be&#160;defined if&#160;table reference&#160;<br/>is&#160;not&#160;possible&#160;at&#160;all.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
<b>10.2.1&#160;&#160;Configuration of Interrupt&#160;Vectors&#160;with&#160;IAR&#160;compiler&#160;<br/></b>Instead&#160;&#160;of&#160;a&#160;&#160;manual&#160;&#160;initialization&#160;&#160;of&#160;&#160;the&#160;&#160;interrupt&#160;&#160;vector&#160;&#160;table&#160;&#160;it&#160;&#160;is&#160;&#160;possible&#160;&#160;to&#160;&#160;let&#160;&#160;the&#160;&#160;IAR&#160;<br/>compiler&#160;&#160;set&#160;&#160;up&#160;&#160;the&#160;&#160;table&#160;&#160;by&#160;&#160;using&#160;&#160;the&#160;&#160;#pragma&#160;&#160;vector=xx&#160;&#160;directive&#160;&#160;(only&#160;&#160;for&#160;&#160;category&#160;&#160;1&#160;<br/>interrupts).&#160;This&#160;feature&#160;&#160;can&#160;&#160;be&#160;&#160;enabled&#160;&#160;via&#160;&#160;the&#160;&#160;user&#160;&#160;configuration&#160;&#160;file&#160;&#160;by&#160;&#160;defining&#160;&#160;the&#160;&#160;EI&#160;<br/>level&#160;&#160;interrupt&#160;&#160;number&#160;&#160;for&#160;&#160;each&#160;&#160;used&#160;&#160;CAN&#160;&#160;interrupt.&#160;&#160;The&#160;&#160;names&#160;&#160;of&#160;&#160;these&#160;&#160;defines&#160;&#160;are&#160;<br/>derived&#160;from&#160;the&#160;corresponding&#160;ISR&#160;names.&#160;<br/>See&#160;below&#160;an&#160;example&#160;for&#160;a&#160;full&#160;interrupt&#160;system&#160;with&#160;external&#160;wakeup&#160;support&#160;that&#160;uses&#160;<br/>physical&#160;channels&#160;2&#160;and&#160;5.&#160;Refer&#160;to&#160;the&#160;information&#160;in&#160;table&#160;10-1&#160;about&#160;the&#160;presence&#160;of&#160;the&#160;<br/>individual CAN interrupt&#160;functions.&#160;<br/>
&#160;<br/>&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
34&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=35></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-35_1.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
#define&#160;C_CANISRRXFIFO_VECTOR&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;15&#160;<br/>#define&#160;C_CANISRGLOBALSTATUS_VECTOR&#160;&#160;14&#160;<br/>#define&#160;C_CANISRTX_VECTOR_2&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;211&#160;<br/>#define&#160;C_CANISRSTATUS_VECTOR_2&#160;&#160;&#160;&#160;&#160;&#160;&#160;209&#160;<br/>#define&#160;C_CANISRWAKEUP_VECTOR_2&#160;&#160;&#160;&#160;&#160;&#160;&#160;31&#160;<br/>#define&#160;C_CANISRTX_VECTOR_5&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;281&#160;<br/>#define&#160;C_CANISRSTATUS_VECTOR_5&#160;&#160;&#160;&#160;&#160;&#160;&#160;279&#160;<br/>#define&#160;C_CANISRWAKEUP_VECTOR_5&#160;&#160;&#160;&#160;&#160;&#160;&#160;36&#160;<br/>&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>This&#160;is&#160;an&#160;example&#160;and&#160;the&#160;necessary&#160;defines&#160;depend&#160;on&#160;the&#160;actual&#160;configuration.&#160;The&#160;<br/>
<b>&#160;&#160;</b>interrupt&#160;numbers&#160;depend on&#160;the&#160;selected&#160;derivative;&#160;refer&#160;to&#160;the&#160;hardware&#160;manual&#160;to&#160;<br/>
get&#160;the&#160;respective values.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>10.3&#160;&#160;CAN Interrupt Handling&#160;by&#160;Application&#160;</b><br/>
If&#160;an&#160;exclusive&#160;write&#160;access&#160;to&#160;the&#160;CAN&#160;related&#160;EI&#160;level&#160;interrupt&#160;control&#160;registers&#160;(ICn)&#160;is&#160;<br/>not&#160;possible&#160;or&#160;if&#160;the&#160;driver&#160;must&#160;not&#160;access&#160;registers&#160;outside&#160;the&#160;CAN&#160;address&#160;space&#160;the&#160;<br/>switch&#160;C_ENABLE_OSEK_CAN_INTCTRL&#160;has&#160;to&#160;be&#160;defined&#160;via&#160;the&#160;user&#160;configuration&#160;file.&#160;<br/>In&#160;this&#160;case&#160;the&#160;driver&#160;does&#160;not&#160;access&#160;the&#160;registers&#160;of&#160;the&#160;interrupt&#160;controller&#160;at&#160;all&#160;and&#160;the&#160;<br/>application&#160;has&#160;to&#160;ensure&#160;proper&#160;initialization,&#160;disabling&#160;and&#160;restoring&#160;of&#160;the&#160;CAN&#160;interrupt&#160;<br/>sources.&#160;<br/>The&#160;initialization&#160;of&#160;all&#160;necessary&#160;ICn&#160;has&#160;to&#160;be&#160;performed&#160;additionally&#160;by&#160;the&#160;application&#160;<br/>before&#160;&#160;the&#160;&#160;call&#160;&#160;of&#160;&#160;CanInitPowerOn()if&#160;&#160;this&#160;&#160;switch&#160;&#160;is&#160;&#160;defined.&#160;&#160;All&#160;&#160;used&#160;&#160;sources&#160;&#160;(see&#160;<br/>remarks&#160;in&#160;table&#160;10-1) have&#160;to&#160;be&#160;enabled&#160;after&#160;initialization&#160;whereas&#160;unused&#160;sources&#160;have&#160;<br/>to&#160;be&#160;disabled.&#160;&#160;<br/>In&#160;&#160;context&#160;&#160;of&#160;&#160;the&#160;&#160;interrupt&#160;&#160;disable/restore&#160;&#160;mechanism&#160;&#160;the&#160;&#160;driver&#160;&#160;implements&#160;&#160;application&#160;<br/>call-backs&#160;&#160;that&#160;&#160;are&#160;&#160;used&#160;&#160;whenever&#160;&#160;the&#160;&#160;functions&#160;&#160;CanCanInterruptDisable()&#160;&#160;or&#160;<br/>CanCanInterruptRestore()&#160;&#160;are&#160;&#160;invoked&#160;&#160;(see&#160;&#160;section&#160;&#160;<a href="TechnicalReference_Rh850_Rscans.html#30">9.4&#160;&#160;</a>for&#160;&#160;API&#160;&#160;definitions).&#160;&#160;The&#160;<br/>function&#160;OsCanCanInterruptDisable()&#160;should&#160;save&#160;the&#160;current&#160;mask&#160;status&#160;(MK&#160;bits)&#160;<br/>of&#160;all&#160;used&#160;CAN&#160;interrupt&#160;sources&#160;that&#160;are&#160;linked&#160;to&#160;the&#160;given&#160;logical&#160;channel&#160;and&#160;then&#160;set&#160;<br/>these&#160;bits&#160;to&#160;1&#160;in&#160;order&#160;to&#160;disable&#160;the&#160;sources.&#160;OsCanCanInterruptRestore()&#160;has&#160;to&#160;<br/>restore&#160;&#160;the&#160;previously&#160;&#160;saved&#160;&#160;mask&#160;&#160;bits&#160;&#160;for&#160;&#160;the&#160;&#160;given&#160;&#160;logical&#160;&#160;channel.&#160;These&#160;&#160;actions&#160;may&#160;<br/>differ&#160;&#160;based&#160;&#160;on&#160;&#160;the&#160;&#160;actual&#160;&#160;software&#160;&#160;configuration,&#160;&#160;but&#160;&#160;all&#160;&#160;CAN&#160;&#160;interrupts&#160;&#160;on&#160;&#160;the&#160;<br/>corresponding&#160;&#160;channel&#160;&#160;have&#160;&#160;to&#160;&#160;be&#160;&#160;locked&#160;&#160;after&#160;&#160;the&#160;&#160;first&#160;&#160;call&#160;&#160;(nested&#160;&#160;calls&#160;&#160;can&#160;&#160;occur)&#160;&#160;of&#160;<br/>OsCanCanInterruptDisable()&#160;&#160;and&#160;&#160;be&#160;&#160;available&#160;&#160;not&#160;&#160;until&#160;&#160;the&#160;&#160;last&#160;&#160;nested&#160;&#160;call&#160;&#160;of&#160;<br/>OsCanCanInterruptRestore().&#160;Keep&#160;in&#160;mind&#160;that&#160;the&#160;right&#160;physical&#160;channel&#160;has&#160;to&#160;be&#160;<br/>chosen&#160;&#160;based&#160;&#160;on&#160;&#160;the&#160;&#160;given&#160;&#160;logical&#160;&#160;controller&#160;&#160;(to&#160;&#160;get&#160;&#160;the&#160;&#160;right&#160;&#160;ICn)&#160;&#160;and&#160;&#160;that&#160;&#160;the&#160;&#160;receive&#160;<br/>FIFO&#160;and&#160;global status&#160;interrupt&#160;are&#160;used&#160;by&#160;all&#160;controllers.&#160;<br/>
If&#160;sleep/wakeup&#160;functionality&#160;is&#160;enabled&#160;&#160;and&#160;&#160;the&#160;switch&#160;&#160;C_ENABLE_OSEK_CAN_INTCTRL&#160;<br/>is&#160;defined&#160;please&#160;note&#160;that&#160;the&#160;external&#160;wakeup&#160;interrupts&#160;always&#160;have&#160;to&#160;be&#160;disabled&#160;after&#160;<br/>initialization&#160;as&#160;these&#160;sources&#160;are&#160;only&#160;enabled&#160;on&#160;demand.&#160;Also&#160;there&#160;are&#160;two&#160;additional&#160;<br/>application&#160;&#160;call-back&#160;&#160;functions.&#160;&#160;See&#160;&#160;section&#160;&#160;<a href="TechnicalReference_Rh850_Rscans.html#30">9.4&#160;&#160;</a>for&#160;&#160;API&#160;&#160;definitions.&#160;&#160;This&#160;&#160;is&#160;&#160;relevant&#160;&#160;for&#160;<br/>interrupt&#160;&#160;and&#160;&#160;polling&#160;&#160;systems&#160;&#160;as&#160;&#160;the&#160;&#160;external&#160;&#160;interrupt&#160;&#160;request&#160;&#160;flag&#160;&#160;has&#160;&#160;to&#160;&#160;be&#160;&#160;cleared&#160;<br/>independently&#160;of&#160;the&#160;interrupt&#160;configuration.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
35&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=36></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-36_1.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
&#160;ApplCanWakeupInterruptEnable()&#160;&#160;is&#160;&#160;always&#160;&#160;invoked&#160;&#160;in&#160;&#160;context&#160;&#160;of&#160;&#160;CanSleep().&#160;<br/>This&#160;function&#160;first&#160;has&#160;to&#160;clear&#160;the&#160;corresponding&#160;external&#160;interrupt&#160;request&#160;flag&#160;in&#160;the&#160;ICn&#160;<br/>and&#160;&#160;then&#160;&#160;–&#160;&#160;only&#160;&#160;if&#160;&#160;wakeup&#160;&#160;processing&#160;&#160;is&#160;&#160;performed&#160;&#160;by&#160;&#160;interrupts&#160;&#160;–&#160;&#160;enable&#160;&#160;the&#160;&#160;external&#160;<br/>interrupt.&#160;&#160;Keep&#160;&#160;in&#160;&#160;mind&#160;&#160;that&#160;&#160;depending&#160;&#160;on&#160;&#160;the&#160;&#160;current&#160;&#160;status&#160;&#160;of&#160;&#160;the&#160;&#160;CAN&#160;&#160;interrupt&#160;<br/>disable/restore&#160;mechanism&#160;this&#160;has&#160;to&#160;be&#160;performed&#160;either&#160;by&#160;clearing&#160;the&#160;corresponding&#160;<br/>mask&#160;&#160;bit&#160;&#160;in&#160;&#160;the&#160;&#160;respective&#160;&#160;hardware&#160;&#160;register&#160;&#160;or&#160;&#160;in&#160;&#160;the&#160;&#160;mask&#160;&#160;status&#160;&#160;that&#160;&#160;was&#160;&#160;saved&#160;&#160;by&#160;<br/>OsCanCanInterruptDisable().&#160;<br/>
&#160;ApplCanWakeupInterruptDisable()&#160;&#160;is&#160;&#160;only&#160;&#160;invoked&#160;&#160;if&#160;&#160;wakeup&#160;&#160;processing&#160;&#160;is&#160;<br/>performed&#160;&#160;by&#160;&#160;interrupts&#160;&#160;in&#160;&#160;context&#160;&#160;of&#160;&#160;CanWakeup(),&#160;&#160;respectively&#160;&#160;the&#160;&#160;external&#160;&#160;wakeup&#160;<br/>handling&#160;and&#160;in&#160;CanInit().&#160;This&#160;function&#160;has&#160;to&#160;disable&#160;the&#160;interrupt&#160;-&#160;depending&#160;on&#160;the&#160;<br/>current&#160;&#160;status&#160;&#160;of&#160;&#160;the&#160;&#160;CAN&#160;&#160;interrupt&#160;&#160;disable/restore&#160;&#160;mechanism&#160;&#160;either&#160;&#160;by&#160;&#160;setting&#160;&#160;the&#160;<br/>corresponding&#160;mask&#160;bit&#160;in&#160;the&#160;hardware&#160;register&#160;or in&#160;the&#160;saved&#160;mask status.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>If&#160;C_ENABLE_OSEK_CAN_INTCTRL&#160;is&#160;defined&#160;the&#160;driver&#160;performs&#160;no&#160;measures&#160;to&#160;<br/>
<b>&#160;&#160;</b>ensure&#160;consistency&#160;of&#160;the interrupt&#160;lock&#160;mechanism.&#160;Additionally&#160;the&#160;application has&#160;to&#160;<br/>
ensure&#160;correct&#160;concurrent&#160;accesses&#160;to&#160;the&#160;ICn&#160;by&#160;all&#160;modules and has&#160;to handle nested&#160;<br/>calls&#160;of&#160;OsCanCanInterruptDisable()&#160;and&#160;<br/>OsCanCanInterruptRestore().Therefore&#160;the&#160;usage of&#160;this&#160;switch is&#160;not&#160;<br/>recommended&#160;in&#160;general&#160;and should&#160;only&#160;be&#160;defined&#160;if&#160;the&#160;internal&#160;driver&#160;mechanisms&#160;<br/>are&#160;not&#160;possible at&#160;all&#160;(e.g.&#160;write access&#160;to&#160;interrupt&#160;control&#160;registers&#160;is&#160;not&#160;allowed).&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
36&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=37></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-37_1.png"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-37_2.jpg"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>11&#160;&#160;Configuration&#160;</b><br/>
<b>11.1&#160;&#160;Configuration by&#160;GENy&#160;</b><br/>
The&#160;&#160;driver&#160;&#160;is&#160;&#160;configured&#160;&#160;with&#160;&#160;the&#160;&#160;help&#160;&#160;of&#160;&#160;the&#160;&#160;configuration&#160;&#160;tool&#160;&#160;GENy.&#160;&#160;This&#160;&#160;section&#160;<br/>describes&#160;&#160;the&#160;&#160;configuration&#160;&#160;of&#160;&#160;the&#160;&#160;driver&#160;&#160;specific&#160;&#160;aspects.&#160;&#160;The&#160;&#160;configuration&#160;&#160;options&#160;<br/>common&#160;to&#160;all&#160;CAN&#160;drivers are&#160;described&#160;in&#160;TechnicalReference_CANDriver.pdf.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>To&#160;get&#160;further&#160;information&#160;please refer&#160;to&#160;the&#160;online&#160;help of&#160;the&#160;generation&#160;tool.&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
<b>11.1.1&#160;&#160;Platform&#160;Settings&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;11-1&#160;&#160;GENy&#160;Platform&#160;Settings&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Supported&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Values&#160;</b><br/>
Preconfiguration&#160;<br/>
&#160;<br/>
Select the pre-configuration&#160;file to&#160;use.&#160;<br/>
Micro&#160;<br/>
Hw_Rh850Cpu&#160;<br/>
Select the target&#160;platform.&#160;<br/>
Derivative&#160;<br/>
See<a href="TechnicalReference_Rh850_Rscans.html#6">&#160;Table&#160;2-1&#160;</a><br/>
Select the&#160;specific&#160;derivative&#160;group.&#160;<br/>
Compiler&#160;<br/>
See<a href="TechnicalReference_Rh850_Rscans.html#6">&#160;Table&#160;2-1&#160;</a><br/>
Select the used compiler.&#160;<br/>
Table&#160;11-1&#160;&#160;&#160;GENy&#160;Platform&#160;Settings&#160;<br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
37&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=38></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-38_1.jpg"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>11.1.2&#160;&#160;Component Settings&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;11-2&#160;&#160;GENy&#160;Component&#160;Settings&#160;&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Supported&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Values&#160;</b><br/>
Maximum&#160;number&#160;of&#160;<br/>
1&#160;-&#160;8&#160;<br/>
Enter&#160;the&#160;maximum&#160;number&#160;of&#160;physical&#160;CAN channels&#160;that&#160;<br/>
CAN channels&#160;<br/>
are supported&#160;by&#160;the&#160;actually&#160;used&#160;derivative.&#160;This&#160;value&#160;is&#160;<br/>independent&#160;from&#160;the number of&#160;channels&#160;in the configuration&#160;<br/>but used to&#160;determine&#160;the&#160;available hardware&#160;resources.&#160;Only&#160;<br/>if&#160;this&#160;value&#160;is&#160;correct the tool&#160;can&#160;ensure&#160;valid configurations&#160;<br/>for&#160;the&#160;actual&#160;derivative.&#160;Depending on&#160;the&#160;selected&#160;derivative&#160;<br/>not all&#160;values&#160;may&#160;be&#160;available.&#160;<br/>
CAN external&#160;clock&#160;<br/>
true, false&#160;<br/>
Enable this&#160;attribute to&#160;use&#160;the&#160;external&#160;clock&#160;input&#160;<br/>
source&#160;<br/>
(clk_xincan)&#160;as&#160;CAN clock&#160;(fCAN). If&#160;the attribute&#160;is&#160;disabled&#160;<br/>
clkc&#160;is&#160;used&#160;-&#160;this&#160;is&#160;the default&#160;selection.&#160;(This&#160;setting&#160;directly&#160;<br/>affects&#160;the DCS&#160;bit in the global&#160;configuration&#160;register.)&#160;<br/>
Table&#160;11-2&#160;&#160;&#160;GENy&#160;Component&#160;Settings&#160;<br/>
&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
38&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=39></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-39_1.jpg"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-39_2.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>11.1.3&#160;&#160;Channel-specific&#160;Settings&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;11-3&#160;&#160;GENy&#160;Channel&#160;Specific&#160;Settings&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Caution&#160;<br/></b>The&#160;sum&#160;of&#160;the&#160;shared&#160;buffers&#160;used&#160;to&#160;allocate&#160;the&#160;receive&#160;objects&#160;over all&#160;<br/>
<b>&#160;&#160;</b>channels&#160;must&#160;not&#160;exceed&#160;(“Maximum&#160;number of&#160;CAN&#160;channels”&#160;&#160;*&#160;64)7.&#160;This&#160;<br/>
includes&#160;the&#160;Rx&#160;FullCAN objects (1&#160;buffer per&#160;actually&#160;assigned&#160;object;&#160;not&#160;the&#160;<br/>value&#160;of&#160;“Rx&#160;FullCAN object&#160;allocation)&#160;and&#160;the&#160;depth&#160;of&#160;all&#160;Rx&#160;BasicCAN&#160;<br/>objects&#160;(individually&#160;configurable&#160;amount&#160;of&#160;buffers, selected&#160;by&#160;the&#160;attribute&#160;<br/>“Rx&#160;Fifo&#160;depth”)&#160;on&#160;all&#160;channels.&#160;&#160;<br/>The&#160;sum&#160;of&#160;used&#160;acceptance&#160;filters&#160;over all channels&#160;must&#160;not&#160;exceed&#160;<br/>(“Maximum&#160;number&#160;of&#160;CAN channels”&#160;* 64<a href="TechnicalReference_Rh850_Rscans.html#39">)7.&#160;</a>Each&#160;actually&#160;assigned&#160;Rx&#160;<br/>FullCAN object&#160;uses&#160;one&#160;filter&#160;and&#160;each&#160;Rx&#160;BasicCAN object&#160;uses&#160;the&#160;number&#160;<br/>of&#160;filters that&#160;is selected&#160;by&#160;the&#160;attribute&#160;“Filters per BasicCAN”&#160;on&#160;the&#160;<br/>corresponding&#160;channel.&#160;<br/>The&#160;generation&#160;tool checks these&#160;and&#160;other restrictions (e.g.&#160;allowed&#160;selection&#160;<br/>for the&#160;attribute&#160;“Physical controller”) to&#160;ensure valid&#160;configurations.&#160;Therefore&#160;it&#160;<br/>is mandatory&#160;to&#160;enter a&#160;valid&#160;value&#160;for&#160;the&#160;attribute&#160;“Maximum&#160;number of&#160;CAN&#160;<br/>channels”6.&#160;Refer&#160;to&#160;chapte<a href="TechnicalReference_Rh850_Rscans.html#7">r&#160;3&#160;</a>for&#160;further information.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&#160; &#160;&#160;<br/>
7&#160;Refer to sectio<a href="TechnicalReference_Rh850_Rscans.html#38">n&#160;11.1.2&#160;</a>for the&#160;description&#160;of&#160;the&#160;attribute&#160;“Maximum&#160;number&#160;of&#160;CAN channels“.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
39&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=40></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-40_1.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>Attribute&#160;</b><br/>
<b>Supported&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Values&#160;</b><br/>
BCFG&#160;<br/>
register&#160;value&#160;<br/>
The&#160;value&#160;for the&#160;Channel&#160;Configuration Register.&#160;<br/>
Acceptance&#160;Filter&#160;<br/>
-&#160;<br/>
Opens&#160;the&#160;acceptance filter&#160;dialog,&#160;see&#160;section<a href="TechnicalReference_Rh850_Rscans.html#40">&#160;11.1.3.1.</a>&#160;If&#160;<br/>
Configuration&#160;<br/>
several&#160;init&#160;structures&#160;are created&#160;this&#160;is&#160;only&#160;possible&#160;for the&#160;<br/>first structure.&#160;<br/>
Bustiming&#160;<br/>
-&#160;<br/>
Opens&#160;the&#160;bustiming&#160;dialog&#160;to&#160;determine&#160;the&#160;value for&#160;BCFG,&#160;<br/>
Configuration&#160;<br/>
see&#160;sectio<a href="TechnicalReference_Rh850_Rscans.html#42">n&#160;11.1.3.2.</a>&#160;<br/>
Physical&#160;controller&#160;<br/>
CAN 0&#160;–&#160;CAN&#160;7&#160;<br/>
Select the physical&#160;channel&#160;you&#160;want&#160;to&#160;assign&#160;to&#160;this&#160;logical&#160;<br/>channel.&#160;The&#160;value is&#160;enumerated&#160;the&#160;same&#160;way&#160;as&#160;referenced&#160;<br/>in the&#160;hardware&#160;manual.&#160;Depending&#160;on the selected&#160;derivative&#160;<br/>and configuration&#160;of&#160;the&#160;attribute “Maximum&#160;number&#160;of&#160;CAN&#160;<br/>channels”&#160;(see&#160;sectio<a href="TechnicalReference_Rh850_Rscans.html#38">n&#160;11.1.2)&#160;</a>not&#160;all&#160;values&#160;may&#160;be&#160;available.&#160;<br/>
CAN&#160;interrupt&#160;priority&#160;&#160;0&#160;–&#160;15&#160;<br/>
Select the interrupt priority&#160;level&#160;of&#160;this&#160;CAN&#160;channel’s&#160;interrupts&#160;<br/>that&#160;are configured&#160;if&#160;the driver has&#160;interrupt control.&#160;Depending&#160;<br/>on&#160;the selected&#160;derivative&#160;not&#160;all&#160;levels&#160;may&#160;be available.&#160;See&#160;<br/>section<a href="TechnicalReference_Rh850_Rscans.html#18">&#160;7.2.3&#160;</a>and chapter<a href="TechnicalReference_Rh850_Rscans.html#32">&#160;10&#160;</a>for further&#160;information.&#160;<br/>
Rx&#160;FullCAN&#160;object&#160;<br/>
0&#160;–&#160;nRXMBmax&#160;<br/>
You can&#160;configure&#160;as&#160;many&#160;receive&#160;FullCAN messages&#160;on&#160;this&#160;<br/>
allocation&#160;<br/>
channel&#160;as&#160;specified&#160;here.&#160;This&#160;value&#160;is&#160;used&#160;to limit the&#160;<br/>selection&#160;for manual&#160;or&#160;automatic&#160;configuration&#160;-&#160;only&#160;the&#160;<br/>actually&#160;arranged&#160;FullCAN&#160;objects&#160;will&#160;be configured&#160;in&#160;<br/>hardware.&#160;The&#160;value&#160;of&#160;nRXMBmax&#160;equals&#160;“Maximum&#160;number&#160;<br/>of&#160;CAN channels”&#160;*&#160;16.&#160;<br/>
Filters&#160;per BasicCAN&#160;&#160;1&#160;–&#160;128&#160;<br/>
Select how many&#160;acceptance filters&#160;will&#160;be&#160;assigned to&#160;each&#160;Rx&#160;<br/>BasicCAN object on this&#160;channel; see sectio<a href="TechnicalReference_Rh850_Rscans.html#41">n&#160;11.1.3.1&#160;</a>for&#160;<br/>details.&#160;Depending&#160;on&#160;the&#160;selected derivative not&#160;all&#160;values&#160;may&#160;<br/>be&#160;available.&#160;<br/>
Rx&#160;Fifo process&#160;count&#160;&#160;2&#160;–&#160;255&#160;<br/>
Select the maximum&#160;number&#160;of&#160;pending receive messages&#160;that&#160;<br/>are processed&#160;for&#160;each&#160;Rx&#160;BasicCAN object&#160;within one polling&#160;<br/>cycle respectively&#160;one&#160;interrupt occurrence.&#160;By&#160;adjusting&#160;this&#160;<br/>value&#160;it can be&#160;ensured that high&#160;FIFO&#160;loads&#160;will&#160;be&#160;evenly&#160;<br/>processed&#160;by&#160;the driver.&#160;Remaining&#160;messages&#160;are processed&#160;<br/>within the&#160;next polling&#160;cycle&#160;respectively&#160;the&#160;interrupt&#160;of&#160;the&#160;next&#160;<br/>received&#160;message on this&#160;channel.&#160;Select&#160;greater values&#160;if&#160;<br/>overruns&#160;occur.&#160;<br/>
Rx&#160;Fifo depth&#160;<br/>
4;&#160;8;&#160;16;&#160;32;&#160;&#160;<br/>
Individually&#160;configure&#160;the&#160;depth&#160;(amount&#160;of&#160;assigned shared&#160;<br/>
48; 64;&#160;128&#160;<br/>
buffers)&#160;of&#160;every&#160;Rx&#160;FIFO, that&#160;is&#160;used&#160;as&#160;Rx&#160;BasicCAN object&#160;<br/>on&#160;this&#160;channel.&#160;<br/>
Table&#160;11-3&#160;&#160;&#160;GENy&#160;Channel&#160;Specific&#160;Settings&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>As&#160;the&#160;RSCAN&#160;has&#160;restrictions&#160;regarding&#160;the&#160;receive&#160;buffers&#160;(e.g.&#160;no&#160;interrupt&#160;<br/>
&#160;&#160;processing,&#160;no&#160;overrun&#160;detection)&#160;also&#160;consider&#160;configurations&#160;without&#160;Rx&#160;FullCAN&#160;<br/>
objects.&#160;The&#160;large&#160;FIFO&#160;sizes and amount&#160;of&#160;filters&#160;that&#160;are possible&#160;for&#160;the BasicCAN&#160;<br/>objects&#160;give&#160;similar&#160;advantages&#160;as&#160;the&#160;usage&#160;of&#160;FullCAN&#160;objects.&#160;For&#160;many&#160;<br/>configurations&#160;this&#160;can&#160;be an&#160;alternative that&#160;above all&#160;is&#160;more&#160;effective regarding&#160;<br/>runtime&#160;and&#160;memory&#160;usage.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
40&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=41></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-41_1.jpg"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>11.1.3.1&#160;&#160;Acceptance&#160;Filter&#160;Configuration&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;11-4&#160;&#160;GENy&#160;Acceptance&#160;Filter&#160;Configuration&#160;<br/>
<b>Attribute&#160;&#160;</b><br/>
<b>Supported&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Values&#160;</b><br/>
Acceptance&#160;Filter&#160;<br/>
representation of&#160;<br/>
The&#160;configured&#160;BasicCAN filters&#160;are shown.&#160;Each ID-bit is&#160;<br/>
type,&#160;mask&#160;and&#160;<br/>
represented by&#160;“0/1/X”, meaning&#160;must&#160;match “0”, “1”&#160;or don’t&#160;<br/>
code&#160;<br/>
care “X”.&#160;The&#160;number&#160;of&#160;filters&#160;can&#160;be&#160;adjusted&#160;by&#160;the&#160;attribute&#160;<br/>“Filters&#160;per&#160;BasicCAN”&#160;on the&#160;channel&#160;view.&#160;<br/>
Type&#160;<br/>
standard,&#160;<br/>
Select if&#160;the&#160;filter shall&#160;apply&#160;to&#160;standard or&#160;extended&#160;ID types.&#160;<br/>
extended&#160;<br/>
(Based&#160;on&#160;the&#160;database&#160;and configuration only&#160;one&#160;type may&#160;<br/>be&#160;available.)&#160;<br/>
Mask&#160;/ Code&#160;<br/>
register&#160;values&#160;<br/>
The&#160;register&#160;values&#160;for this&#160;filter that&#160;will&#160;be&#160;configured&#160;in&#160;<br/>hardware.&#160;<br/>
Open&#160;filters&#160;<br/>
-&#160;<br/>
Open the&#160;filters&#160;completely&#160;to&#160;receive&#160;all&#160;messages.&#160;<br/>
Optimize&#160;<br/>
-&#160;<br/>
Configure&#160;the&#160;filters&#160;automatically&#160;to&#160;just receive IDs&#160;in the&#160;<br/>database&#160;if&#160;possible.&#160;A&#160;large number&#160;of&#160;filters&#160;allow&#160;better&#160;<br/>optimizations, but don’t&#160;configure&#160;more filters&#160;than&#160;the&#160;<br/>optimization algorithm&#160;uses&#160;for&#160;message distribution.&#160;<br/>“Use FullCAN”&#160;tries&#160;to&#160;put&#160;as&#160;many&#160;messages&#160;as&#160;possible&#160;in&#160;<br/>FullCAN&#160;objects.&#160;Select the&#160;maximum&#160;number&#160;of&#160;available&#160;<br/>objects&#160;by&#160;adjusting&#160;the&#160;attribute “Rx&#160;FullCAN object&#160;<br/>allocation”&#160;on the channel&#160;view.&#160;This&#160;is&#160;useful&#160;when&#160;only&#160;a few&#160;<br/>number&#160;of&#160;BasicCAN filters&#160;are&#160;configured&#160;for example.&#160;<br/>
Table&#160;11-4&#160;&#160;&#160;GENy&#160;Acceptance&#160;Filter&#160;Configuration&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
41&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=42></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-42_1.jpg"/><br/>
<img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-42_2.png"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>11.1.3.1.1&#160;&#160;Additional&#160;information if the&#160;feature&#160;“Multiple&#160;BasicCAN objects”&#160;is&#160;used&#160;<br/></b>The&#160;dialog&#160;shows&#160;all&#160;BasicCAN&#160;acceptance&#160;filters&#160;for&#160;the&#160;respective&#160;channel.&#160;The&#160;amount&#160;<br/>of&#160;filters&#160;equals&#160;the&#160;product&#160;of&#160;configured&#160;BasicCAN&#160;objects&#160;and&#160;the&#160;number&#160;of&#160;filters&#160;per&#160;<br/>BasicCAN.&#160;&#160;An&#160;&#160;example&#160;&#160;configuration&#160;&#160;with&#160;&#160;3&#160;&#160;BasicCAN&#160;&#160;objects&#160;&#160;and&#160;&#160;2&#160;&#160;filters&#160;&#160;per&#160;&#160;object&#160;<br/>results in&#160;6&#160;filters as&#160;shown&#160;in&#160;figure&#160;11-5.&#160;The&#160;first&#160;2&#160;filters (in&#160;accordance&#160;with&#160;the&#160;attribute&#160;<br/>“Filters&#160;per&#160;BasicCAN”)&#160;are&#160;assigned&#160;to&#160;the&#160;first&#160;BasicCAN&#160;object,&#160;the&#160;next&#160;2&#160;to&#160;the&#160;second&#160;<br/>BasicCAN object&#160;and&#160;so&#160;on.&#160;&#160;<br/>
&#160;<br/>
&#160;<br/>
Figure&#160;11-5&#160;&#160;GENy&#160;Acceptance&#160;Filter&#160;Assignment&#160;<br/>
Please&#160;note&#160;that&#160;&#160;a&#160;received&#160;message&#160;is&#160;stored&#160;in&#160;&#160;the&#160;first&#160;&#160;mailbox&#160;with&#160;a&#160;matching&#160;filter.&#160;<br/>After&#160;&#160;an&#160;&#160;identifier&#160;&#160;was&#160;&#160;compared&#160;&#160;against&#160;&#160;the&#160;&#160;FullCAN&#160;&#160;filters,&#160;&#160;it&#160;&#160;is&#160;&#160;compared&#160;&#160;against&#160;&#160;the&#160;<br/>BasicCAN&#160;filters&#160;in&#160;the&#160;order&#160;that&#160;is&#160;depicted&#160;in&#160;the&#160;dialog.&#160;This&#160;has&#160;to&#160;be&#160;considered&#160;when&#160;<br/>the&#160;&#160;feature&#160;&#160;“Multiple&#160;&#160;BasicCAN&#160;&#160;objects”&#160;&#160;is&#160;&#160;used.&#160;&#160;If&#160;&#160;filter&#160;&#160;number&#160;&#160;1&#160;&#160;in&#160;&#160;the&#160;&#160;example&#160;&#160;from&#160;<br/>figure&#160;11-5&#160;was&#160;open&#160;(all&#160;bits&#160;“don’t&#160;care”),&#160;all&#160;non&#160;FullCAN&#160;standard&#160;identifiers&#160;would&#160;be&#160;<br/>received&#160;by&#160;BasicCAN0&#160;and&#160;BasicCAN2&#160;would&#160;never&#160;receive&#160;any&#160;message.&#160;&#160;<br/>
&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;<br/>Note&#160;<br/></b>In&#160;&#160;some&#160;&#160;“Multiple&#160;&#160;BasicCAN”&#160;&#160;configurations&#160;&#160;it&#160;&#160;may&#160;&#160;be&#160;&#160;useful&#160;&#160;to&#160;&#160;assign&#160;&#160;certain&#160;<br/>
&#160;&#160;BasicCAN&#160;&#160;messages&#160;&#160;to&#160;&#160;specific&#160;&#160;hardware&#160;&#160;objects&#160;&#160;as&#160;&#160;the&#160;&#160;FIFO&#160;&#160;depths&#160;&#160;or&#160;&#160;“Individual&#160;<br/>
Polling”&#160;settings&#160;can&#160;be&#160;adapted&#160;to&#160;the&#160;actual&#160;communication&#160;aspects&#160;for&#160;example.&#160;As&#160;<br/>the&#160;&#160;optimization&#160;&#160;algorithms&#160;&#160;don’t&#160;&#160;consider&#160;&#160;this&#160;&#160;use&#160;&#160;case&#160;&#160;the&#160;&#160;filters&#160;&#160;have&#160;&#160;to&#160;&#160;be&#160;&#160;edited&#160;<br/>manually&#160;in this&#160;case.&#160;<br/>
Alternatively&#160;it&#160;is&#160;possible&#160;to&#160;configure&#160;and&#160;lock&#160;only&#160;several&#160;significant&#160;filters&#160;and&#160;then&#160;<br/>use&#160;the&#160;optimization&#160;functionality.&#160;But&#160;after&#160;doing&#160;so&#160;always&#160;check&#160;the&#160;result&#160;&#160;because&#160;<br/>manually&#160;configured&#160;filters&#160;may&#160;not&#160;always&#160;receive&#160;the&#160;pre-assigned&#160;identifiers&#160;as&#160;the&#160;<br/>message&#160;could&#160;match&#160;an&#160;automatically&#160;assigned&#160;filter&#160;that&#160;is&#160;compared&#160;first.&#160;Focus&#160;on&#160;<br/>filters&#160;with&#160;smaller&#160;numbers&#160;or&#160;add&#160;some&#160;“dummy&#160;filters”&#160;for&#160;earlier&#160;objects&#160;to&#160;achieve&#160;<br/>better&#160;results.&#160;<br/>
<b>&#160;</b><br/>
<b>&#160;</b><br/>
&#160;<br/>&#160;<br/>
&#160;<br/>
&#160;<br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
42&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=43></a><img src="ElectricPowerSteering_RH850_GM_T1XX_website/content/en/docs/Can/doc/TechnicalReference_Rh850_Rscan-43_1.jpg"/><br/>
Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>11.1.3.2&#160;&#160;Bustiming Configuration&#160;</b><br/>
&#160;<br/>
&#160;<br/>
Figure&#160;11-6&#160;&#160;GENy&#160;Bustiming&#160;Configuration&#160;<br/>
<b>Attribute&#160;&#160;</b><br/>
<b>Supported&#160;</b><br/>
<b>Description&#160;</b><br/>
<b>Values&#160;</b><br/>
Clock&#160;<br/>
CAN clock&#160;<br/>
Set&#160;the&#160;clock&#160;frequency&#160;that is&#160;provided&#160;to&#160;the&#160;CAN cell&#160;for&#160;<br/>baudrate&#160;generation&#160;(fCAN).&#160;Consider the setting&#160;of&#160;the&#160;<br/>
attribute&#160;“CAN external&#160;clock&#160;source” (see&#160;section<a href="TechnicalReference_Rh850_Rscans.html#38">&#160;11.1.2).</a>&#160;<br/>
Baudrate&#160;<br/>
baudrate&#160;<br/>
Set&#160;the&#160;baudrate&#160;to&#160;be used for this&#160;channel.&#160;<br/>
CAN&#160;BTR register&#160;<br/>
register&#160;value&#160;<br/>
Enter&#160;the&#160;value for&#160;the&#160;Channel&#160;Configuration&#160;Register&#160;(see&#160;<br/>attribute&#160;BCFG&#160;in section<a href="TechnicalReference_Rh850_Rscans.html#39">&#160;11.1.3)</a>.&#160;<br/>
Calculate&#160;<br/>
-&#160;<br/>
Calculate&#160;possible&#160;Channel&#160;Configuration&#160;Register&#160;settings&#160;<br/>out of&#160;the&#160;entered&#160;baudrate&#160;or vice versa.&#160;<br/>
CAN_BTR, Sample,&#160;<br/>
-&#160;<br/>
Select specific&#160;channel&#160;configuration register&#160;values&#160;to&#160;adapt&#160;<br/>
BTL cycles, SJW&#160;<br/>
the&#160;sample point and sync&#160;phase to&#160;comply&#160;with&#160;your&#160;bus&#160;<br/>physics.&#160;<br/>
Table&#160;11-5&#160;&#160;&#160;GENy&#160;Bustiming&#160;Configuration&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
43&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=44></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>11.2&#160;&#160;Manual&#160;Configuration&#160;</b><br/>
This&#160;section&#160;describes additional&#160;configuration&#160;options for&#160;special features&#160;that&#160;can&#160;only&#160;be&#160;<br/>configured&#160;via&#160;the&#160;user configuration&#160;file.&#160;<br/>&#160;&#160;Define&#160;&#160;C_DISABLE_NESTED_INTERRUPTS&#160;&#160;or&#160;&#160;C_ENABLE_NESTED_INTERRUPTS&#160;&#160;to&#160;<br/>
control the&#160;nesting&#160;of&#160;the&#160;CAN&#160;interrupts.&#160;See&#160;section<a href="TechnicalReference_Rh850_Rscans.html#32">&#160;10.1&#160;</a>for&#160;further information.&#160;<br/>
&#160;&#160;Define&#160;&#160;C_ENABLE_DIRECT_INTERRUPT_BRANCH&#160;&#160;(and&#160;&#160;if&#160;&#160;needed&#160;&#160;additionally&#160;<br/>
C_ENABLE_ISRVOID)&#160;&#160;to&#160;&#160;deactivate&#160;&#160;table&#160;&#160;reference&#160;&#160;as&#160;&#160;the&#160;&#160;method&#160;&#160;to&#160;&#160;handle&#160;&#160;CAN&#160;<br/>interrupts.&#160;See&#160;section<a href="TechnicalReference_Rh850_Rscans.html#33">&#160;10.2&#160;</a>for&#160;further information.&#160;&#160;<br/>
&#160;&#160;Define&#160;C_ENABLE_OSEK_CAN_INTCTRL&#160;to&#160;prohibit&#160;write&#160;accesses&#160;by&#160;the&#160;driver&#160;within&#160;<br/>
the&#160;interrupt&#160;controller address&#160;space.&#160;See&#160;section<a href="TechnicalReference_Rh850_Rscans.html#35">&#160;10.3&#160;</a>for&#160;further information.&#160;<br/>
&#160;&#160;Define&#160;C_ENABLE_EXTERNAL_WAKEUP_SUPPRESSION&#160;to&#160;disable&#160;the&#160;external&#160;wakeup&#160;<br/>
functionality.&#160;See&#160;chapte<a href="TechnicalReference_Rh850_Rscans.html#11">r&#160;4&#160;</a>for&#160;further information.&#160;<br/>
&#160;&#160;See&#160;sections<a href="TechnicalReference_Rh850_Rscans.html#19">&#160;7.2.6&#160;</a>to<a href="TechnicalReference_Rh850_Rscans.html#22">&#160;7.2.9&#160;</a>for options&#160;that&#160;control different&#160;RAM&#160;test&#160;features.&#160;<br/>&#160;&#160;See&#160;&#160;section&#160;&#160;<a href="TechnicalReference_Rh850_Rscans.html#34">10.2.1&#160;&#160;</a>for&#160;&#160;information&#160;&#160;on&#160;&#160;how&#160;&#160;to&#160;&#160;set&#160;&#160;up&#160;&#160;the&#160;&#160;interrupt&#160;&#160;vector&#160;&#160;table&#160;&#160;when&#160;<br/>
using&#160;IAR compiler.&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
44&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=45></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>12&#160;&#160;Known&#160;Issues&#160;/&#160;Limitations&#160;</b><br/>
1.&#160;&#160;Due&#160;&#160;to&#160;&#160;hardware&#160;&#160;limitations&#160;&#160;the&#160;&#160;feature&#160;&#160;CAN&#160;&#160;RAM&#160;&#160;check&#160;&#160;is&#160;&#160;not&#160;&#160;supported&#160;&#160;for&#160;&#160;receive&#160;<br/>
mailboxes&#160;(no&#160;write&#160;access is possible&#160;for&#160;these&#160;objects).&#160;<br/>
2.&#160;&#160;Due&#160;to&#160;hardware&#160;limitations&#160;receive&#160;FullCANs&#160;cannot&#160;be&#160;processed&#160;in&#160;interrupt&#160;context&#160;<br/>
and&#160;no&#160;overruns&#160;can&#160;be&#160;detected&#160;for these&#160;objects.&#160;<br/>
3.&#160;&#160;With&#160;&#160;default&#160;&#160;configuration&#160;&#160;the&#160;&#160;driver&#160;&#160;needs&#160;&#160;exclusive&#160;&#160;write&#160;&#160;access&#160;&#160;to&#160;&#160;all&#160;&#160;EI&#160;&#160;level&#160;<br/>
interrupt&#160;control&#160;registers&#160;(ICn)&#160;that&#160;are&#160;related&#160;to&#160;a&#160;CAN&#160;interrupt&#160;source&#160;(see&#160;section&#160;<br/><a href="TechnicalReference_Rh850_Rscans.html#18">7.2.3&#160;</a>and&#160;chapte<a href="TechnicalReference_Rh850_Rscans.html#32">r&#160;10&#160;</a>for&#160;further information.).&#160;<br/>
4.&#160;&#160;Refer&#160;&#160;to&#160;&#160;chapter&#160;&#160;<a href="TechnicalReference_Rh850_Rscans.html#11">4&#160;&#160;</a>for&#160;&#160;restrictions&#160;&#160;when&#160;&#160;using&#160;&#160;the&#160;&#160;sleep/wakeup&#160;&#160;functionality.&#160;<br/>
Additionally&#160;the&#160;global&#160;stop&#160;mode&#160;of&#160;the&#160;RSCAN&#160;is not&#160;supported.&#160;<br/>
5.&#160;&#160;When&#160;using&#160;multiple&#160;initialization&#160;structures&#160;no&#160;multiple&#160;acceptance&#160;filter&#160;configurations&#160;<br/>
are&#160;&#160;supported&#160;&#160;by&#160;&#160;the&#160;&#160;driver.&#160;&#160;The&#160;&#160;filter&#160;&#160;settings&#160;&#160;are&#160;&#160;always&#160;&#160;derived&#160;&#160;from&#160;&#160;the&#160;&#160;first&#160;<br/>structure.&#160;Use&#160;several&#160;structures&#160;only&#160;to&#160;arrange&#160;multiple&#160;baudrate&#160;configurations.&#160;<br/>
6.&#160;&#160;When&#160;using&#160;the&#160;feature&#160;Multiple&#160;ECU&#160;Configurations&#160;it&#160;is&#160;not&#160;supported&#160;to&#160;use&#160;a&#160;logical&#160;<br/>
channel&#160;in&#160;more&#160;than&#160;one&#160;identity.&#160;The&#160;only&#160;exception&#160;is&#160;the&#160;first&#160;logical&#160;channel&#160;which&#160;<br/>can&#160;be&#160;present&#160;in&#160;any&#160;identity&#160;if&#160;it&#160;is&#160;also&#160;mapped&#160;to&#160;the&#160;physical&#160;channel&#160;CAN0.&#160;This&#160;<br/>limitation&#160;&#160;does&#160;&#160;not&#160;&#160;apply&#160;&#160;to&#160;&#160;the&#160;&#160;usage&#160;&#160;of&#160;&#160;physical&#160;&#160;channels:&#160;&#160;Every&#160;&#160;available&#160;&#160;physical&#160;<br/>channel&#160;can&#160;be&#160;used&#160;in&#160;any&#160;identity&#160;and&#160;the&#160;same&#160;physical&#160;channel&#160;can&#160;be&#160;used&#160;in&#160;as&#160;<br/>many&#160;identities&#160;as needed&#160;(if&#160;it&#160;is referenced&#160;by&#160;different&#160;logical channels).&#160;<br/>
7.&#160;&#160;For&#160;&#160;derivatives&#160;&#160;that&#160;&#160;incorporate&#160;&#160;multiple&#160;&#160;RSCAN&#160;&#160;units&#160;&#160;only&#160;&#160;the&#160;&#160;first&#160;&#160;one&#160;&#160;(RSCAN0)&#160;&#160;is&#160;<br/>
supported&#160;by&#160;the&#160;driver.&#160;<br/>
&#160;<br/>
&#160;<br/>
For&#160;&#160;latest&#160;&#160;information&#160;&#160;about&#160;&#160;issues&#160;&#160;or&#160;&#160;limitations&#160;&#160;of&#160;&#160;the&#160;&#160;actually&#160;&#160;used&#160;&#160;derivative&#160;&#160;please&#160;<br/>contact&#160;the&#160;hardware manufacturer.&#160;<br/>&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
45&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name=46></a>Vector CAN Driver&#160;Technical Reference&#160;RH850&#160;RSCAN&#160;<br/>
&#160;<br/>
<b>13&#160;&#160;Contact&#160;</b><br/>
Visit&#160;our website&#160;for&#160;more information&#160;on&#160;<br/>
&#160;<br/>
<b>&gt;&#160;&#160;</b>News&#160;<br/>
<b>&gt;&#160;&#160;</b>Products&#160;<br/>
<b>&gt;&#160;&#160;</b>Demo&#160;software&#160;<br/>
<b>&gt;&#160;&#160;</b>Support&#160;<br/>
<b>&gt;&#160;&#160;</b>Training&#160;data&#160;<br/>
<b>&gt;&#160;&#160;</b>Addresses&#160;<br/>
&#160;<br/>
<a href="http://www.vector.com/">www.vector.com<b>&#160;</b></a><br/>
&#160;<br/>
2014,&#160;Vector&#160;Informatik&#160;GmbH&#160;<br/>
Version:&#160;1.05.00&#160;&#160;<br/>
46&#160;/46&#160;&#160;<br/>
based&#160;on&#160;template&#160;version&#160;3.2&#160;<br/>
&#160;<br/>
<hr/>
<a name="outline"></a><h1>Document Outline</h1>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#5">1 Introduction</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#6">2 Important References</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#7">3 Usage of Controller Features</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#7">3.1 [#hw_comObj] - Communication Objects</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#10">3.2 Acceptance Filters</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Rh850_Rscans.html#11">4 &#160;[#hw_sleep] - SleepMode and WakeUp</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#11">4.1 Sleep</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#11">4.2 Internal Wakeup</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#11">4.3 External Wakeup</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Rh850_Rscans.html#13">5 &#160;[#hw_loop] - Hardware Loop Check</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#15">6 [#hw_busoff] - Bus off</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#16">7 CAN Driver Features</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#16">7.1 [#hw_feature] - Feature List</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#18">7.2 &#160;Description of Hardware-related Features</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#18">7.2.1 [#hw_status] - Status</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#18">7.2.2 [#hw_stop] - Stop Mode</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#18">7.2.3 [#hw_int] - Control of CAN Interrupts</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#19">7.2.4 [#hw_cancel] - Cancel in Hardware</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#19">7.2.5 Remote Frames</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#19">7.2.6 CAN RAM Check</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#20">7.2.7 Extended CAN RAM Check</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#21">7.2.8 RSCAN ECC Configuration</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#22">7.2.9 RSCAN RAM Test</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Rh850_Rscans.html#23">8 &#160;[#hw_assert] – Assertions</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#24">9 API</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#24">9.1 Category</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#24">9.2 RSCAN ECC Configuration</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#25">9.3 (Extended) CAN RAM Check</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#30">9.4 CAN Interrupt Handling by Application</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Rh850_Rscans.html#32">10 Implementations Hints</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#32">10.1 Important Notes</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#33">10.2 Interrupt Configuration</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#34">10.2.1 Configuration of Interrupt Vectors with IAR compiler</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Rh850_Rscans.html#35">10.3 CAN Interrupt Handling by Application</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Rh850_Rscans.html#37">11 Configuration</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#37">11.1 Configuration by GENy</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#37">11.1.1 Platform Settings</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#38">11.1.2 Component Settings</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#39">11.1.3 Channel-specific Settings</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#41">11.1.3.1 &#160;Acceptance Filter Configuration</a>
<ul>
<li><a href="TechnicalReference_Rh850_Rscans.html#42">11.1.3.1.1 Additional information if the feature “Multiple BasicCAN objects” is used</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Rh850_Rscans.html#43">11.1.3.2 &#160;Bustiming Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="TechnicalReference_Rh850_Rscans.html#44">11.2 &#160;Manual Configuration</a></li>
</ul>
</li>
<li><a href="TechnicalReference_Rh850_Rscans.html#45">12 Known Issues / Limitations</a></li>
<li><a href="TechnicalReference_Rh850_Rscans.html#46">13 Contact</a></li>
</ul>
<hr/>
</body>
</html>
